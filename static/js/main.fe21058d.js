/*! For license information please see main.fe21058d.js.LICENSE.txt */
!function(){var t={76:function(t,e,n){"use strict";n.d(e,{Z:function(){return it}});var r=function(){function t(t){var e=this;this._insertTag=function(t){var n;n=0===e.tags.length?e.insertionPoint?e.insertionPoint.nextSibling:e.prepend?e.container.firstChild:e.before:e.tags[e.tags.length-1].nextSibling,e.container.insertBefore(t,n),e.tags.push(t)},this.isSpeedy=void 0===t.speedy||t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(t){t.forEach(this._insertTag)},e.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),void 0!==t.nonce&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}(this));var e=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}(e);try{n.insertRule(t,n.cssRules.length)}catch(r){0}}else e.appendChild(document.createTextNode(t));this.ctr++},e.flush=function(){this.tags.forEach((function(t){return t.parentNode&&t.parentNode.removeChild(t)})),this.tags=[],this.ctr=0},t}(),i=Math.abs,a=String.fromCharCode,o=Object.assign;function s(t){return t.trim()}function l(t,e,n){return t.replace(e,n)}function c(t,e){return t.indexOf(e)}function u(t,e){return 0|t.charCodeAt(e)}function h(t,e,n){return t.slice(e,n)}function d(t){return t.length}function p(t){return t.length}function f(t,e){return e.push(t),t}var m=1,g=1,y=0,v=0,_=0,x="";function b(t,e,n,r,i,a,o){return{value:t,root:e,parent:n,type:r,props:i,children:a,line:m,column:g,length:o,return:""}}function w(t,e){return o(b("",null,null,"",null,null,0),t,{length:-t.length},e)}function S(){return _=v>0?u(x,--v):0,g--,10===_&&(g=1,m--),_}function M(){return _=v<y?u(x,v++):0,g++,10===_&&(g=1,m++),_}function E(){return u(x,v)}function k(){return v}function T(t,e){return h(x,t,e)}function C(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function I(t){return m=g=1,y=d(x=t),v=0,[]}function P(t){return x="",t}function A(t){return s(T(v-1,R(91===t?t+2:40===t?t+1:t)))}function z(t){for(;(_=E())&&_<33;)M();return C(t)>2||C(_)>3?"":" "}function L(t,e){for(;--e&&M()&&!(_<48||_>102||_>57&&_<65||_>70&&_<97););return T(t,k()+(e<6&&32==E()&&32==M()))}function R(t){for(;M();)switch(_){case t:return v;case 34:case 39:34!==t&&39!==t&&R(_);break;case 40:41===t&&R(t);break;case 92:M()}return v}function D(t,e){for(;M()&&t+_!==57&&(t+_!==84||47!==E()););return"/*"+T(e,v-1)+"*"+a(47===t?t:M())}function O(t){for(;!C(E());)M();return T(t,v)}var B="-ms-",F="-moz-",N="-webkit-",Z="comm",U="rule",j="decl",V="@keyframes";function q(t,e){for(var n="",r=p(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function $(t,e,n,r){switch(t.type){case"@import":case j:return t.return=t.return||t.value;case Z:return"";case V:return t.return=t.value+"{"+q(t.children,r)+"}";case U:t.value=t.props.join(",")}return d(n=q(t.children,r))?t.return=t.value+"{"+n+"}":""}function G(t,e){switch(function(t,e){return(((e<<2^u(t,0))<<2^u(t,1))<<2^u(t,2))<<2^u(t,3)}(t,e)){case 5103:return N+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return N+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return N+t+F+t+B+t+t;case 6828:case 4268:return N+t+B+t+t;case 6165:return N+t+B+"flex-"+t+t;case 5187:return N+t+l(t,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+t;case 5443:return N+t+B+"flex-item-"+l(t,/flex-|-self/,"")+t;case 4675:return N+t+B+"flex-line-pack"+l(t,/align-content|flex-|-self/,"")+t;case 5548:return N+t+B+l(t,"shrink","negative")+t;case 5292:return N+t+B+l(t,"basis","preferred-size")+t;case 6060:return N+"box-"+l(t,"-grow","")+N+t+B+l(t,"grow","positive")+t;case 4554:return N+l(t,/([^-])(transform)/g,"$1-webkit-$2")+t;case 6187:return l(l(l(t,/(zoom-|grab)/,N+"$1"),/(image-set)/,N+"$1"),t,"")+t;case 5495:case 3959:return l(t,/(image-set\([^]*)/,N+"$1$`$1");case 4968:return l(l(t,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+N+t+t;case 4095:case 3583:case 4068:case 2532:return l(t,/(.+)-inline(.+)/,N+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(d(t)-1-e>6)switch(u(t,e+1)){case 109:if(45!==u(t,e+4))break;case 102:return l(t,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1"+F+(108==u(t,e+3)?"$3":"$2-$3"))+t;case 115:return~c(t,"stretch")?G(l(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(115!==u(t,e+1))break;case 6444:switch(u(t,d(t)-3-(~c(t,"!important")&&10))){case 107:return l(t,":",":"+N)+t;case 101:return l(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+N+(45===u(t,14)?"inline-":"")+"box$3$1"+N+"$2$3$1"+B+"$2box$3")+t}break;case 5936:switch(u(t,e+11)){case 114:return N+t+B+l(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return N+t+B+l(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return N+t+B+l(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return N+t+B+t+t}return t}function W(t){return P(H("",null,null,null,[""],t=I(t),0,[0],t))}function H(t,e,n,r,i,o,s,u,h){for(var p=0,m=0,g=s,y=0,v=0,_=0,x=1,b=1,w=1,T=0,C="",I=i,P=o,R=r,B=C;b;)switch(_=T,T=M()){case 40:if(108!=_&&58==B.charCodeAt(g-1)){-1!=c(B+=l(A(T),"&","&\f"),"&\f")&&(w=-1);break}case 34:case 39:case 91:B+=A(T);break;case 9:case 10:case 13:case 32:B+=z(_);break;case 92:B+=L(k()-1,7);continue;case 47:switch(E()){case 42:case 47:f(K(D(M(),k()),e,n),h);break;default:B+="/"}break;case 123*x:u[p++]=d(B)*w;case 125*x:case 59:case 0:switch(T){case 0:case 125:b=0;case 59+m:v>0&&d(B)-g&&f(v>32?Y(B+";",r,n,g-1):Y(l(B," ","")+";",r,n,g-2),h);break;case 59:B+=";";default:if(f(R=X(B,e,n,p,m,i,u,C,I=[],P=[],g),o),123===T)if(0===m)H(B,e,R,R,I,o,g,u,P);else switch(y){case 100:case 109:case 115:H(t,R,R,r&&f(X(t,R,R,0,0,i,u,C,i,I=[],g),P),i,P,g,u,r?I:P);break;default:H(B,R,R,R,[""],P,0,u,P)}}p=m=v=0,x=w=1,C=B="",g=s;break;case 58:g=1+d(B),v=_;default:if(x<1)if(123==T)--x;else if(125==T&&0==x++&&125==S())continue;switch(B+=a(T),T*x){case 38:w=m>0?1:(B+="\f",-1);break;case 44:u[p++]=(d(B)-1)*w,w=1;break;case 64:45===E()&&(B+=A(M())),y=E(),m=g=d(C=B+=O(k())),T++;break;case 45:45===_&&2==d(B)&&(x=0)}}return o}function X(t,e,n,r,a,o,c,u,d,f,m){for(var g=a-1,y=0===a?o:[""],v=p(y),_=0,x=0,w=0;_<r;++_)for(var S=0,M=h(t,g+1,g=i(x=c[_])),E=t;S<v;++S)(E=s(x>0?y[S]+" "+M:l(M,/&\f/g,y[S])))&&(d[w++]=E);return b(t,e,n,0===a?U:u,d,f,m)}function K(t,e,n){return b(t,e,n,Z,a(_),h(t,2,-2),0)}function Y(t,e,n,r){return b(t,e,n,j,h(t,0,r),h(t,r+1,-1),r)}var J=function(t,e,n){for(var r=0,i=0;r=i,i=E(),38===r&&12===i&&(e[n]=1),!C(i);)M();return T(t,v)},Q=function(t,e){return P(function(t,e){var n=-1,r=44;do{switch(C(r)){case 0:38===r&&12===E()&&(e[n]=1),t[n]+=J(v-1,e,n);break;case 2:t[n]+=A(r);break;case 4:if(44===r){t[++n]=58===E()?"&\f":"",e[n]=t[n].length;break}default:t[n]+=a(r)}}while(r=M());return t}(I(t),e))},tt=new WeakMap,et=function(t){if("rule"===t.type&&t.parent&&!(t.length<1)){for(var e=t.value,n=t.parent,r=t.column===n.column&&t.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==t.props.length||58===e.charCodeAt(0)||tt.get(n))&&!r){tt.set(t,!0);for(var i=[],a=Q(e,i),o=n.props,s=0,l=0;s<a.length;s++)for(var c=0;c<o.length;c++,l++)t.props[l]=i[s]?a[s].replace(/&\f/g,o[c]):o[c]+" "+a[s]}}},nt=function(t){if("decl"===t.type){var e=t.value;108===e.charCodeAt(0)&&98===e.charCodeAt(2)&&(t.return="",t.value="")}},rt=[function(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case j:t.return=G(t.value,t.length);break;case V:return q([w(t,{value:l(t.value,"@","@"+N)})],r);case U:if(t.length)return function(t,e){return t.map(e).join("")}(t.props,(function(e){switch(function(t,e){return(t=e.exec(t))?t[0]:t}(e,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return q([w(t,{props:[l(e,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return q([w(t,{props:[l(e,/:(plac\w+)/,":-webkit-input-$1")]}),w(t,{props:[l(e,/:(plac\w+)/,":-moz-$1")]}),w(t,{props:[l(e,/:(plac\w+)/,B+"input-$1")]})],r)}return""}))}}],it=function(t){var e=t.key;if("css"===e){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(t){-1!==t.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(t),t.setAttribute("data-s",""))}))}var i=t.stylisPlugins||rt;var a,o,s={},l=[];a=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),(function(t){for(var e=t.getAttribute("data-emotion").split(" "),n=1;n<e.length;n++)s[e[n]]=!0;l.push(t)}));var c,u,h=[$,(u=function(t){c.insert(t)},function(t){t.root||(t=t.return)&&u(t)})],d=function(t){var e=p(t);return function(n,r,i,a){for(var o="",s=0;s<e;s++)o+=t[s](n,r,i,a)||"";return o}}([et,nt].concat(i,h));o=function(t,e,n,r){c=n,q(W(t?t+"{"+e.styles+"}":e.styles),d),r&&(f.inserted[e.name]=!0)};var f={key:e,sheet:new r({key:e,container:a,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:o};return f.sheet.hydrate(l),f}},9797:function(t,e){"use strict";e.Z=function(t){var e=Object.create(null);return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}},9886:function(t,e,n){"use strict";n.d(e,{T:function(){return s},w:function(){return o}});var r=n(2791),i=n(76),a=(n(9140),n(2561),(0,r.createContext)("undefined"!==typeof HTMLElement?(0,i.Z)({key:"css"}):null));a.Provider;var o=function(t){return(0,r.forwardRef)((function(e,n){var i=(0,r.useContext)(a);return t(e,i,n)}))},s=(0,r.createContext)({})},9140:function(t,e,n){"use strict";n.d(e,{O:function(){return m}});var r=function(t){for(var e,n=0,r=0,i=t.length;i>=4;++r,i-=4)e=1540483477*(65535&(e=255&t.charCodeAt(r)|(255&t.charCodeAt(++r))<<8|(255&t.charCodeAt(++r))<<16|(255&t.charCodeAt(++r))<<24))+(59797*(e>>>16)<<16),n=1540483477*(65535&(e^=e>>>24))+(59797*(e>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&t.charCodeAt(r+2))<<16;case 2:n^=(255&t.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&t.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},i={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},a=n(9797),o=/[A-Z]|^ms/g,s=/_EMO_([^_]+?)_([^]*?)_EMO_/g,l=function(t){return 45===t.charCodeAt(1)},c=function(t){return null!=t&&"boolean"!==typeof t},u=(0,a.Z)((function(t){return l(t)?t:t.replace(o,"-$&").toLowerCase()})),h=function(t,e){switch(t){case"animation":case"animationName":if("string"===typeof e)return e.replace(s,(function(t,e,n){return p={name:e,styles:n,next:p},e}))}return 1===i[t]||l(t)||"number"!==typeof e||0===e?e:e+"px"};function d(t,e,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return p={name:n.name,styles:n.styles,next:p},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)p={name:r.name,styles:r.styles,next:p},r=r.next;return n.styles+";"}return function(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=d(t,e,n[i])+";";else for(var a in n){var o=n[a];if("object"!==typeof o)null!=e&&void 0!==e[o]?r+=a+"{"+e[o]+"}":c(o)&&(r+=u(a)+":"+h(a,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=e&&void 0!==e[o[0]]){var s=d(t,e,o);switch(a){case"animation":case"animationName":r+=u(a)+":"+s+";";break;default:r+=a+"{"+s+"}"}}else for(var l=0;l<o.length;l++)c(o[l])&&(r+=u(a)+":"+h(a,o[l])+";")}return r}(t,e,n);case"function":if(void 0!==t){var i=p,a=n(t);return p=i,d(t,e,a)}}if(null==e)return n;var o=e[n];return void 0!==o?o:n}var p,f=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var m=function(t,e,n){if(1===t.length&&"object"===typeof t[0]&&null!==t[0]&&void 0!==t[0].styles)return t[0];var i=!0,a="";p=void 0;var o=t[0];null==o||void 0===o.raw?(i=!1,a+=d(n,e,o)):a+=o[0];for(var s=1;s<t.length;s++)a+=d(n,e,t[s]),i&&(a+=o[s]);f.lastIndex=0;for(var l,c="";null!==(l=f.exec(a));)c+="-"+l[1];return{name:r(a)+c,styles:a,next:p}}},2561:function(t,e,n){"use strict";var r;n.d(e,{L:function(){return o},j:function(){return s}});var i=n(2791),a=!!(r||(r=n.t(i,2))).useInsertionEffect&&(r||(r=n.t(i,2))).useInsertionEffect,o=a||function(t){return t()},s=a||i.useLayoutEffect},5438:function(t,e,n){"use strict";n.d(e,{My:function(){return a},fp:function(){return r},hC:function(){return i}});function r(t,e,n){var r="";return n.split(" ").forEach((function(n){void 0!==t[n]?e.push(t[n]+";"):r+=n+" "})),r}var i=function(t,e,n){var r=t.key+"-"+e.name;!1===n&&void 0===t.registered[r]&&(t.registered[r]=e.styles)},a=function(t,e,n){i(t,e,n);var r=t.key+"-"+e.name;if(void 0===t.inserted[e.name]){var a=e;do{t.insert(e===a?"."+r:"",a,t.sheet,!0);a=a.next}while(void 0!==a)}}},838:function(t,e,n){"use strict";var r=n(4836);e.Z=void 0;var i=r(n(5649)),a=n(184),o=(0,i.default)((0,a.jsx)("path",{d:"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"}),"DarkMode");e.Z=o},5403:function(t,e,n){"use strict";var r=n(4836);e.Z=void 0;var i=r(n(5649)),a=n(184),o=(0,i.default)((0,a.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");e.Z=o},5480:function(t,e,n){"use strict";var r=n(4836);e.Z=void 0;var i=r(n(5649)),a=n(184),o=(0,i.default)((0,a.jsx)("path",{d:"m6.76 4.84-1.8-1.79-1.41 1.41 1.79 1.79 1.42-1.41zM4 10.5H1v2h3v-2zm9-9.95h-2V3.5h2V.55zm7.45 3.91-1.41-1.41-1.79 1.79 1.41 1.41 1.79-1.79zm-3.21 13.7 1.79 1.8 1.41-1.41-1.8-1.79-1.4 1.4zM20 10.5v2h3v-2h-3zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm-1 16.95h2V19.5h-2v2.95zm-7.45-3.91 1.41 1.41 1.79-1.8-1.41-1.41-1.79 1.8z"}),"WbSunny");e.Z=o},5649:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(3471)},4360:function(t,e,n){"use strict";n.d(e,{Z:function(){return N}});var r=n(7462),i=n(3366),a=n(6189),o=n(2466),s=n(5080),l=n(4942);function c(t,e){var n;return(0,r.Z)({toolbar:(n={minHeight:56},(0,l.Z)(n,t.up("xs"),{"@media (orientation: landscape)":{minHeight:48}}),(0,l.Z)(n,t.up("sm"),{minHeight:64}),n)},e)}var u=n(2065),h={black:"#000",white:"#fff"},d={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},p={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},f={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},m={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},g={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},y={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},v={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},_=["mode","contrastThreshold","tonalOffset"],x={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:h.white,default:h.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},b={text:{primary:h.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:h.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function w(t,e,n,r){var i=r.light||r,a=r.dark||1.5*r;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:"light"===e?t.light=(0,u.$n)(t.main,i):"dark"===e&&(t.dark=(0,u._j)(t.main,a)))}function S(t){var e=t.mode,n=void 0===e?"light":e,s=t.contrastThreshold,l=void 0===s?3:s,c=t.tonalOffset,S=void 0===c?.2:c,M=(0,i.Z)(t,_),E=t.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:g[200],light:g[50],dark:g[400]}:{main:g[700],light:g[400],dark:g[800]}}(n),k=t.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:p[200],light:p[50],dark:p[400]}:{main:p[500],light:p[300],dark:p[700]}}(n),T=t.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:f[500],light:f[300],dark:f[700]}:{main:f[700],light:f[400],dark:f[800]}}(n),C=t.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:y[400],light:y[300],dark:y[700]}:{main:y[700],light:y[500],dark:y[900]}}(n),I=t.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:v[400],light:v[300],dark:v[700]}:{main:v[800],light:v[500],dark:v[900]}}(n),P=t.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[400],light:m[300],dark:m[700]}:{main:"#ed6c02",light:m[500],dark:m[900]}}(n);function A(t){return(0,u.mi)(t,b.text.primary)>=l?b.text.primary:x.text.primary}var z=function(t){var e=t.color,n=t.name,i=t.mainShade,o=void 0===i?500:i,s=t.lightShade,l=void 0===s?300:s,c=t.darkShade,u=void 0===c?700:c;if(!(e=(0,r.Z)({},e)).main&&e[o]&&(e.main=e[o]),!e.hasOwnProperty("main"))throw new Error((0,a.Z)(11,n?" (".concat(n,")"):"",o));if("string"!==typeof e.main)throw new Error((0,a.Z)(12,n?" (".concat(n,")"):"",JSON.stringify(e.main)));return w(e,"light",l,S),w(e,"dark",u,S),e.contrastText||(e.contrastText=A(e.main)),e},L={dark:b,light:x};return(0,o.Z)((0,r.Z)({common:(0,r.Z)({},h),mode:n,primary:z({color:E,name:"primary"}),secondary:z({color:k,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:z({color:T,name:"error"}),warning:z({color:P,name:"warning"}),info:z({color:C,name:"info"}),success:z({color:I,name:"success"}),grey:d,contrastThreshold:l,getContrastText:A,augmentColor:z,tonalOffset:S},L[n]),M)}var M=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var E={textTransform:"uppercase"},k='"Roboto", "Helvetica", "Arial", sans-serif';function T(t,e){var n="function"===typeof e?e(t):e,a=n.fontFamily,s=void 0===a?k:a,l=n.fontSize,c=void 0===l?14:l,u=n.fontWeightLight,h=void 0===u?300:u,d=n.fontWeightRegular,p=void 0===d?400:d,f=n.fontWeightMedium,m=void 0===f?500:f,g=n.fontWeightBold,y=void 0===g?700:g,v=n.htmlFontSize,_=void 0===v?16:v,x=n.allVariants,b=n.pxToRem,w=(0,i.Z)(n,M);var S=c/14,T=b||function(t){return"".concat(t/_*S,"rem")},C=function(t,e,n,i,a){return(0,r.Z)({fontFamily:s,fontWeight:t,fontSize:T(e),lineHeight:n},s===k?{letterSpacing:"".concat((o=i/e,Math.round(1e5*o)/1e5),"em")}:{},a,x);var o},I={h1:C(h,96,1.167,-1.5),h2:C(h,60,1.2,-.5),h3:C(p,48,1.167,0),h4:C(p,34,1.235,.25),h5:C(p,24,1.334,0),h6:C(m,20,1.6,.15),subtitle1:C(p,16,1.75,.15),subtitle2:C(m,14,1.57,.1),body1:C(p,16,1.5,.15),body2:C(p,14,1.43,.15),button:C(m,14,1.75,.4,E),caption:C(p,12,1.66,.4),overline:C(p,12,2.66,1,E)};return(0,o.Z)((0,r.Z)({htmlFontSize:_,pxToRem:T,fontFamily:s,fontSize:c,fontWeightLight:h,fontWeightRegular:p,fontWeightMedium:m,fontWeightBold:y},I),w,{clone:!1})}function C(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var I=["none",C(0,2,1,-1,0,1,1,0,0,1,3,0),C(0,3,1,-2,0,2,2,0,0,1,5,0),C(0,3,3,-2,0,3,4,0,0,1,8,0),C(0,2,4,-1,0,4,5,0,0,1,10,0),C(0,3,5,-1,0,5,8,0,0,1,14,0),C(0,3,5,-1,0,6,10,0,0,1,18,0),C(0,4,5,-2,0,7,10,1,0,2,16,1),C(0,5,5,-3,0,8,10,1,0,3,14,2),C(0,5,6,-3,0,9,12,1,0,3,16,2),C(0,6,6,-3,0,10,14,1,0,4,18,3),C(0,6,7,-4,0,11,15,1,0,4,20,3),C(0,7,8,-4,0,12,17,2,0,5,22,4),C(0,7,8,-4,0,13,19,2,0,5,24,4),C(0,7,9,-4,0,14,21,2,0,5,26,4),C(0,8,9,-5,0,15,22,2,0,6,28,5),C(0,8,10,-5,0,16,24,2,0,6,30,5),C(0,8,11,-5,0,17,26,2,0,6,32,5),C(0,9,11,-5,0,18,28,2,0,7,34,6),C(0,9,12,-6,0,19,29,2,0,7,36,6),C(0,10,13,-6,0,20,31,3,0,8,38,7),C(0,10,13,-6,0,21,33,3,0,8,40,7),C(0,10,14,-6,0,22,35,3,0,8,42,7),C(0,11,14,-7,0,23,36,3,0,9,44,8),C(0,11,15,-7,0,24,38,3,0,9,46,8)],P=["duration","easing","delay"],A={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},z={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function L(t){return"".concat(Math.round(t),"ms")}function R(t){if(!t)return 0;var e=t/36;return Math.round(10*(4+15*Math.pow(e,.25)+e/5))}function D(t){var e=(0,r.Z)({},A,t.easing),n=(0,r.Z)({},z,t.duration);return(0,r.Z)({getAutoHeightDuration:R,create:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.duration,o=void 0===a?n.standard:a,s=r.easing,l=void 0===s?e.easeInOut:s,c=r.delay,u=void 0===c?0:c;(0,i.Z)(r,P);return(Array.isArray(t)?t:[t]).map((function(t){return"".concat(t," ").concat("string"===typeof o?o:L(o)," ").concat(l," ").concat("string"===typeof u?u:L(u))})).join(",")}},t,{easing:e,duration:n})}var O={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},B=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function F(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.mixins,n=void 0===e?{}:e,l=t.palette,u=void 0===l?{}:l,h=t.transitions,d=void 0===h?{}:h,p=t.typography,f=void 0===p?{}:p,m=(0,i.Z)(t,B);if(t.vars)throw new Error((0,a.Z)(18));var g=S(u),y=(0,s.Z)(t),v=(0,o.Z)(y,{mixins:c(y.breakpoints,n),palette:g,shadows:I.slice(),typography:T(g,f),transitions:D(d),zIndex:(0,r.Z)({},O)});v=(0,o.Z)(v,m);for(var _=arguments.length,x=new Array(_>1?_-1:0),b=1;b<_;b++)x[b-1]=arguments[b];return v=x.reduce((function(t,e){return(0,o.Z)(t,e)}),v)}var N=F},4205:function(t,e,n){"use strict";var r=(0,n(4360).Z)();e.Z=r},6863:function(t,e,n){"use strict";n.d(e,{ZP:function(){return E}});var r=n(2982),i=n(885),a=n(3366),o=n(7462),s=n(2421),l=n(5080),c=n(7312),u=["variant"];function h(t){return 0===t.length}function d(t){var e=t.variant,n=(0,a.Z)(t,u),r=e||"";return Object.keys(n).sort().forEach((function(e){r+="color"===e?h(r)?t[e]:(0,c.Z)(t[e]):"".concat(h(r)?e:(0,c.Z)(e)).concat((0,c.Z)(t[e].toString()))})),r}var p=n(104),f=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],m=["theme"],g=["theme"];function y(t){return 0===Object.keys(t).length}function v(t){return"string"===typeof t&&t.charCodeAt(0)>96}var _=function(t,e){return e.components&&e.components[t]&&e.components[t].styleOverrides?e.components[t].styleOverrides:null},x=function(t,e){var n=[];e&&e.components&&e.components[t]&&e.components[t].variants&&(n=e.components[t].variants);var r={};return n.forEach((function(t){var e=d(t.props);r[e]=t.style})),r},b=function(t,e,n,r){var i,a,o=t.ownerState,s=void 0===o?{}:o,l=[],c=null==n||null==(i=n.components)||null==(a=i[r])?void 0:a.variants;return c&&c.forEach((function(n){var r=!0;Object.keys(n.props).forEach((function(e){s[e]!==n.props[e]&&t[e]!==n.props[e]&&(r=!1)})),r&&l.push(e[d(n.props)])})),l};function w(t){return"ownerState"!==t&&"theme"!==t&&"sx"!==t&&"as"!==t}var S=(0,l.Z)();var M=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.defaultTheme,n=void 0===e?S:e,l=t.rootShouldForwardProp,c=void 0===l?w:l,u=t.slotShouldForwardProp,h=void 0===u?w:u,d=t.styleFunctionSx,M=void 0===d?p.Z:d,E=function(t){var e=y(t.theme)?n:t.theme;return M((0,o.Z)({},t,{theme:e}))};return E.__mui_systemSx=!0,function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.Co)(t,(function(t){return t.filter((function(t){return!(null!=t&&t.__mui_systemSx)}))}));var l,u=e.name,d=e.slot,p=e.skipVariantsResolver,S=e.skipSx,M=e.overridesResolver,k=(0,a.Z)(e,f),T=void 0!==p?p:d&&"Root"!==d||!1,C=S||!1;var I=w;"Root"===d?I=c:d?I=h:v(t)&&(I=void 0);var P=(0,s.ZP)(t,(0,o.Z)({shouldForwardProp:I,label:l},k)),A=function(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),l=1;l<e;l++)s[l-1]=arguments[l];var c=s?s.map((function(t){return"function"===typeof t&&t.__emotion_real!==t?function(e){var r=e.theme,i=(0,a.Z)(e,m);return t((0,o.Z)({theme:y(r)?n:r},i))}:t})):[],h=t;u&&M&&c.push((function(t){var e=y(t.theme)?n:t.theme,r=_(u,e);if(r){var a={};return Object.entries(r).forEach((function(n){var r=(0,i.Z)(n,2),s=r[0],l=r[1];a[s]="function"===typeof l?l((0,o.Z)({},t,{theme:e})):l})),M(t,a)}return null})),u&&!T&&c.push((function(t){var e=y(t.theme)?n:t.theme;return b(t,x(u,e),e,u)})),C||c.push(E);var d=c.length-s.length;if(Array.isArray(t)&&d>0){var p=new Array(d).fill("");(h=[].concat((0,r.Z)(t),(0,r.Z)(p))).raw=[].concat((0,r.Z)(t.raw),(0,r.Z)(p))}else"function"===typeof t&&t.__emotion_real!==t&&(h=function(e){var r=e.theme,i=(0,a.Z)(e,g);return t((0,o.Z)({theme:y(r)?n:r},i))});var f=P.apply(void 0,[h].concat((0,r.Z)(c)));return f};return P.withConfig&&(A.withConfig=P.withConfig),A}}({defaultTheme:n(4205).Z,rootShouldForwardProp:function(t){return w(t)&&"classes"!==t}}),E=M},8929:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r=n(7462);function i(t){var e=t.theme,n=t.name,i=t.props;return e&&e.components&&e.components[n]&&e.components[n].defaultProps?function(t,e){var n=(0,r.Z)({},e);return Object.keys(t).forEach((function(e){void 0===n[e]&&(n[e]=t[e])})),n}(e.components[n].defaultProps,i):i}var a=n(418);var o=n(4205);function s(t){return function(t){var e=t.props,n=t.name,r=t.defaultTheme;return i({theme:(0,a.Z)(r),name:n,props:e})}({props:t.props,name:t.name,defaultTheme:o.Z})}},9853:function(t,e,n){"use strict";var r=n(7312);e.Z=r.Z},1245:function(t,e,n){"use strict";n.d(e,{Z:function(){return v}});var r=n(7462),i=n(2791),a=n(3366),o=n(8182),s=n(4419),l=n(9853),c=n(8929),u=n(6863),h=n(1217);function d(t){return(0,h.Z)("MuiSvgIcon",t)}(0,n(5878).Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var p=n(184),f=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],m=(0,u.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,"inherit"!==n.color&&e["color".concat((0,l.Z)(n.color))],e["fontSize".concat((0,l.Z)(n.fontSize))]]}})((function(t){var e,n,r,i,a,o,s,l,c,u,h,d,p,f,m,g,y,v=t.theme,_=t.ownerState;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(e=v.transitions)||null==(n=e.create)?void 0:n.call(e,"fill",{duration:null==(r=v.transitions)||null==(i=r.duration)?void 0:i.shorter}),fontSize:{inherit:"inherit",small:(null==(a=v.typography)||null==(o=a.pxToRem)?void 0:o.call(a,20))||"1.25rem",medium:(null==(s=v.typography)||null==(l=s.pxToRem)?void 0:l.call(s,24))||"1.5rem",large:(null==(c=v.typography)||null==(u=c.pxToRem)?void 0:u.call(c,35))||"2.1875"}[_.fontSize],color:null!=(h=null==(d=(v.vars||v).palette)||null==(p=d[_.color])?void 0:p.main)?h:{action:null==(f=(v.vars||v).palette)||null==(m=f.action)?void 0:m.active,disabled:null==(g=(v.vars||v).palette)||null==(y=g.action)?void 0:y.disabled,inherit:void 0}[_.color]}})),g=i.forwardRef((function(t,e){var n=(0,c.Z)({props:t,name:"MuiSvgIcon"}),i=n.children,u=n.className,h=n.color,g=void 0===h?"inherit":h,y=n.component,v=void 0===y?"svg":y,_=n.fontSize,x=void 0===_?"medium":_,b=n.htmlColor,w=n.inheritViewBox,S=void 0!==w&&w,M=n.titleAccess,E=n.viewBox,k=void 0===E?"0 0 24 24":E,T=(0,a.Z)(n,f),C=(0,r.Z)({},n,{color:g,component:v,fontSize:x,instanceFontSize:t.fontSize,inheritViewBox:S,viewBox:k}),I={};S||(I.viewBox=k);var P=function(t){var e=t.color,n=t.fontSize,r=t.classes,i={root:["root","inherit"!==e&&"color".concat((0,l.Z)(e)),"fontSize".concat((0,l.Z)(n))]};return(0,s.Z)(i,d,r)}(C);return(0,p.jsxs)(m,(0,r.Z)({as:v,className:(0,o.Z)(P.root,u),ownerState:C,focusable:"false",color:b,"aria-hidden":!M||void 0,role:M?"img":void 0,ref:e},I,T,{children:[i,M?(0,p.jsx)("title",{children:M}):null]}))}));g.muiName="SvgIcon";var y=g;function v(t,e){var n=function(n,i){return(0,p.jsx)(y,(0,r.Z)({"data-testid":"".concat(e,"Icon"),ref:i},n,{children:t}))};return n.muiName=y.muiName,i.memo(i.forwardRef(n))}},3471:function(t,e,n){"use strict";n.r(e),n.d(e,{capitalize:function(){return i.Z},createChainedFunction:function(){return a},createSvgIcon:function(){return o.Z},debounce:function(){return s},deprecatedPropType:function(){return l},isMuiElement:function(){return u},ownerDocument:function(){return h},ownerWindow:function(){return d},requirePropFactory:function(){return p},setRef:function(){return f},unstable_ClassNameGenerator:function(){return w},unstable_useEnhancedEffect:function(){return m.Z},unstable_useId:function(){return g},unsupportedProp:function(){return y},useControlled:function(){return v},useEventCallback:function(){return _.Z},useForkRef:function(){return x.Z},useIsFocusVisible:function(){return b.Z}});var r=n(5902),i=n(9853);var a=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce((function(t,e){return null==e?t:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(this,r),e.apply(this,r)}}),(function(){}))},o=n(1245),s=n(3981).Z;var l=function(t,e){return function(){return null}},c=n(2791);var u=function(t,e){return c.isValidElement(t)&&-1!==e.indexOf(t.type.muiName)},h=n(9723).Z,d=n(7979).Z;n(7462);var p=function(t,e){return function(){return null}},f=n(2971).Z,m=n(3026),g=n(6248).Z;var y=function(t,e,n,r,i){return null},v=n(8959).Z,_=n(9511),x=n(7933),b=n(2763),w={configure:function(t){console.warn(["MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.","","You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead","","The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401","","The updated documentation: https://mui.com/guides/classname-generator/"].join("\n")),r.Z.configure(t)}}},3026:function(t,e,n){"use strict";var r=n(5721);e.Z=r.Z},9511:function(t,e,n){"use strict";var r=n(8956);e.Z=r.Z},7933:function(t,e,n){"use strict";var r=n(7563);e.Z=r.Z},2763:function(t,e,n){"use strict";n.d(e,{Z:function(){return d}});var r,i=n(2791),a=!0,o=!1,s={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function l(t){t.metaKey||t.altKey||t.ctrlKey||(a=!0)}function c(){a=!1}function u(){"hidden"===this.visibilityState&&o&&(a=!0)}function h(t){var e=t.target;try{return e.matches(":focus-visible")}catch(n){}return a||function(t){var e=t.type,n=t.tagName;return!("INPUT"!==n||!s[e]||t.readOnly)||"TEXTAREA"===n&&!t.readOnly||!!t.isContentEditable}(e)}var d=function(){var t=i.useCallback((function(t){var e;null!=t&&((e=t.ownerDocument).addEventListener("keydown",l,!0),e.addEventListener("mousedown",c,!0),e.addEventListener("pointerdown",c,!0),e.addEventListener("touchstart",c,!0),e.addEventListener("visibilitychange",u,!0))}),[]),e=i.useRef(!1);return{isFocusVisibleRef:e,onFocus:function(t){return!!h(t)&&(e.current=!0,!0)},onBlur:function(){return!!e.current&&(o=!0,window.clearTimeout(r),r=window.setTimeout((function(){o=!1}),100),e.current=!1,!0)},ref:t}}},2421:function(t,e,n){"use strict";n.d(e,{ZP:function(){return x},Co:function(){return b}});var r=n(2791),i=n(7462),a=n(9797),o=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,s=(0,a.Z)((function(t){return o.test(t)||111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)<91})),l=n(9886),c=n(5438),u=n(9140),h=n(2561),d=s,p=function(t){return"theme"!==t},f=function(t){return"string"===typeof t&&t.charCodeAt(0)>96?d:p},m=function(t,e,n){var r;if(e){var i=e.shouldForwardProp;r=t.__emotion_forwardProp&&i?function(e){return t.__emotion_forwardProp(e)&&i(e)}:i}return"function"!==typeof r&&n&&(r=t.__emotion_forwardProp),r},g=function(t){var e=t.cache,n=t.serialized,r=t.isStringTag;(0,c.hC)(e,n,r);(0,h.L)((function(){return(0,c.My)(e,n,r)}));return null},y=function t(e,n){var a,o,s=e.__emotion_real===e,h=s&&e.__emotion_base||e;void 0!==n&&(a=n.label,o=n.target);var d=m(e,n,s),p=d||f(h),y=!p("as");return function(){var v=arguments,_=s&&void 0!==e.__emotion_styles?e.__emotion_styles.slice(0):[];if(void 0!==a&&_.push("label:"+a+";"),null==v[0]||void 0===v[0].raw)_.push.apply(_,v);else{0,_.push(v[0][0]);for(var x=v.length,b=1;b<x;b++)_.push(v[b],v[0][b])}var w=(0,l.w)((function(t,e,n){var i=y&&t.as||h,a="",s=[],m=t;if(null==t.theme){for(var v in m={},t)m[v]=t[v];m.theme=(0,r.useContext)(l.T)}"string"===typeof t.className?a=(0,c.fp)(e.registered,s,t.className):null!=t.className&&(a=t.className+" ");var x=(0,u.O)(_.concat(s),e.registered,m);a+=e.key+"-"+x.name,void 0!==o&&(a+=" "+o);var b=y&&void 0===d?f(i):p,w={};for(var S in t)y&&"as"===S||b(S)&&(w[S]=t[S]);return w.className=a,w.ref=n,(0,r.createElement)(r.Fragment,null,(0,r.createElement)(g,{cache:e,serialized:x,isStringTag:"string"===typeof i}),(0,r.createElement)(i,w))}));return w.displayName=void 0!==a?a:"Styled("+("string"===typeof h?h:h.displayName||h.name||"Component")+")",w.defaultProps=e.defaultProps,w.__emotion_real=w,w.__emotion_base=h,w.__emotion_styles=_,w.__emotion_forwardProp=d,Object.defineProperty(w,"toString",{value:function(){return"."+o}}),w.withComponent=function(e,r){return t(e,(0,i.Z)({},n,r,{shouldForwardProp:m(w,r,!0)})).apply(void 0,_)},w}},v=y.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(t){v[t]=v(t)}));var _=v;function x(t,e){return _(t,e)}var b=function(t,e){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))}},1184:function(t,e,n){"use strict";n.d(e,{L7:function(){return s},VO:function(){return r},W8:function(){return o},k9:function(){return a}});var r={xs:0,sm:600,md:900,lg:1200,xl:1536},i={keys:["xs","sm","md","lg","xl"],up:function(t){return"@media (min-width:".concat(r[t],"px)")}};function a(t,e,n){var a=t.theme||{};if(Array.isArray(e)){var o=a.breakpoints||i;return e.reduce((function(t,r,i){return t[o.up(o.keys[i])]=n(e[i]),t}),{})}if("object"===typeof e){var s=a.breakpoints||i;return Object.keys(e).reduce((function(t,i){if(-1!==Object.keys(s.values||r).indexOf(i)){t[s.up(i)]=n(e[i],i)}else{var a=i;t[a]=e[a]}return t}),{})}return n(e)}function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null==(t=e.keys)?void 0:t.reduce((function(t,n){return t[e.up(n)]={},t}),{});return n||{}}function s(t,e){return t.reduce((function(t,e){var n=t[e];return(!n||0===Object.keys(n).length)&&delete t[e],t}),e)}},2065:function(t,e,n){"use strict";n.d(e,{$n:function(){return h},Fq:function(){return c},_j:function(){return u},mi:function(){return l}});var r=n(6189);function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(e,t),n)}function a(t){if(t.type)return t;if("#"===t.charAt(0))return a(function(t){t=t.slice(1);var e=new RegExp(".{1,".concat(t.length>=6?2:1,"}"),"g"),n=t.match(e);return n&&1===n[0].length&&(n=n.map((function(t){return t+t}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(t,e){return e<3?parseInt(t,16):Math.round(parseInt(t,16)/255*1e3)/1e3})).join(", "),")"):""}(t));var e=t.indexOf("("),n=t.substring(0,e);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,r.Z)(9,t));var i,o=t.substring(e+1,t.length-1);if("color"===n){if(i=(o=o.split(" ")).shift(),4===o.length&&"/"===o[3].charAt(0)&&(o[3]=o[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i))throw new Error((0,r.Z)(10,i))}else o=o.split(",");return{type:n,values:o=o.map((function(t){return parseFloat(t)})),colorSpace:i}}function o(t){var e=t.type,n=t.colorSpace,r=t.values;return-1!==e.indexOf("rgb")?r=r.map((function(t,e){return e<3?parseInt(t,10):t})):-1!==e.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==e.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(e,"(").concat(r,")")}function s(t){var e="hsl"===(t=a(t)).type?a(function(t){var e=(t=a(t)).values,n=e[0],r=e[1]/100,i=e[2]/100,s=r*Math.min(i,1-i),l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+n/30)%12;return i-s*Math.max(Math.min(e-3,9-e,1),-1)},c="rgb",u=[Math.round(255*l(0)),Math.round(255*l(8)),Math.round(255*l(4))];return"hsla"===t.type&&(c+="a",u.push(e[3])),o({type:c,values:u})}(t)).values:t.values;return e=e.map((function(e){return"color"!==t.type&&(e/=255),e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function l(t,e){var n=s(t),r=s(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function c(t,e){return t=a(t),e=i(e),"rgb"!==t.type&&"hsl"!==t.type||(t.type+="a"),"color"===t.type?t.values[3]="/".concat(e):t.values[3]=e,o(t)}function u(t,e){if(t=a(t),e=i(e),-1!==t.type.indexOf("hsl"))t.values[2]*=1-e;else if(-1!==t.type.indexOf("rgb")||-1!==t.type.indexOf("color"))for(var n=0;n<3;n+=1)t.values[n]*=1-e;return o(t)}function h(t,e){if(t=a(t),e=i(e),-1!==t.type.indexOf("hsl"))t.values[2]+=(100-t.values[2])*e;else if(-1!==t.type.indexOf("rgb"))for(var n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(-1!==t.type.indexOf("color"))for(var r=0;r<3;r+=1)t.values[r]+=(1-t.values[r])*e;return o(t)}},5080:function(t,e,n){"use strict";n.d(e,{Z:function(){return p}});var r=n(7462),i=n(3366),a=n(2466),o=n(4942),s=["values","unit","step"];function l(t){var e=t.values,n=void 0===e?{xs:0,sm:600,md:900,lg:1200,xl:1536}:e,a=t.unit,l=void 0===a?"px":a,c=t.step,u=void 0===c?5:c,h=(0,i.Z)(t,s),d=function(t){var e=Object.keys(t).map((function(e){return{key:e,val:t[e]}}))||[];return e.sort((function(t,e){return t.val-e.val})),e.reduce((function(t,e){return(0,r.Z)({},t,(0,o.Z)({},e.key,e.val))}),{})}(n),p=Object.keys(d);function f(t){var e="number"===typeof n[t]?n[t]:t;return"@media (min-width:".concat(e).concat(l,")")}function m(t){var e="number"===typeof n[t]?n[t]:t;return"@media (max-width:".concat(e-u/100).concat(l,")")}function g(t,e){var r=p.indexOf(e);return"@media (min-width:".concat("number"===typeof n[t]?n[t]:t).concat(l,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[p[r]]?n[p[r]]:e)-u/100).concat(l,")")}return(0,r.Z)({keys:p,values:d,up:f,down:m,between:g,only:function(t){return p.indexOf(t)+1<p.length?g(t,p[p.indexOf(t)+1]):f(t)},not:function(t){var e=p.indexOf(t);return 0===e?f(p[1]):e===p.length-1?m(p[e]):g(t,p[p.indexOf(t)+1]).replace("@media","@media not all and")},unit:l},h)}var c={borderRadius:4},u=n(5682);function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(t.mui)return t;var e=(0,u.hB)({spacing:t}),n=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=0===n.length?[1]:n;return i.map((function(t){var n=e(t);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}var d=["breakpoints","palette","spacing","shape"];var p=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.breakpoints,n=void 0===e?{}:e,o=t.palette,s=void 0===o?{}:o,u=t.spacing,p=t.shape,f=void 0===p?{}:p,m=(0,i.Z)(t,d),g=l(n),y=h(u),v=(0,a.Z)({breakpoints:g,direction:"ltr",components:{},palette:(0,r.Z)({mode:"light"},s),spacing:y,shape:(0,r.Z)({},c,f)},m),_=arguments.length,x=new Array(_>1?_-1:0),b=1;b<_;b++)x[b-1]=arguments[b];return v=x.reduce((function(t,e){return(0,a.Z)(t,e)}),v)}},114:function(t,e,n){"use strict";n.d(e,{Gc:function(){return X},G$:function(){return H}});var r=n(8529),i=n(8247);var a=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.reduce((function(t,e){return e.filterProps.forEach((function(n){t[n]=e})),t}),{}),a=function(t){return Object.keys(t).reduce((function(e,n){return r[n]?(0,i.Z)(e,r[n](t)):e}),{})};return a.propTypes={},a.filterProps=e.reduce((function(t,e){return t.concat(e.filterProps)}),[]),a},o=n(5682),s=n(1184);function l(t){return"number"!==typeof t?t:"".concat(t,"px solid")}var c=(0,r.Z)({prop:"border",themeKey:"borders",transform:l}),u=(0,r.Z)({prop:"borderTop",themeKey:"borders",transform:l}),h=(0,r.Z)({prop:"borderRight",themeKey:"borders",transform:l}),d=(0,r.Z)({prop:"borderBottom",themeKey:"borders",transform:l}),p=(0,r.Z)({prop:"borderLeft",themeKey:"borders",transform:l}),f=(0,r.Z)({prop:"borderColor",themeKey:"palette"}),m=(0,r.Z)({prop:"borderTopColor",themeKey:"palette"}),g=(0,r.Z)({prop:"borderRightColor",themeKey:"palette"}),y=(0,r.Z)({prop:"borderBottomColor",themeKey:"palette"}),v=(0,r.Z)({prop:"borderLeftColor",themeKey:"palette"}),_=function(t){if(void 0!==t.borderRadius&&null!==t.borderRadius){var e=(0,o.eI)(t.theme,"shape.borderRadius",4,"borderRadius");return(0,s.k9)(t,t.borderRadius,(function(t){return{borderRadius:(0,o.NA)(e,t)}}))}return null};_.propTypes={},_.filterProps=["borderRadius"];var x=a(c,u,h,d,p,f,m,g,y,v,_),b=a((0,r.Z)({prop:"displayPrint",cssProperty:!1,transform:function(t){return{"@media print":{display:t}}}}),(0,r.Z)({prop:"display"}),(0,r.Z)({prop:"overflow"}),(0,r.Z)({prop:"textOverflow"}),(0,r.Z)({prop:"visibility"}),(0,r.Z)({prop:"whiteSpace"})),w=a((0,r.Z)({prop:"flexBasis"}),(0,r.Z)({prop:"flexDirection"}),(0,r.Z)({prop:"flexWrap"}),(0,r.Z)({prop:"justifyContent"}),(0,r.Z)({prop:"alignItems"}),(0,r.Z)({prop:"alignContent"}),(0,r.Z)({prop:"order"}),(0,r.Z)({prop:"flex"}),(0,r.Z)({prop:"flexGrow"}),(0,r.Z)({prop:"flexShrink"}),(0,r.Z)({prop:"alignSelf"}),(0,r.Z)({prop:"justifyItems"}),(0,r.Z)({prop:"justifySelf"})),S=function(t){if(void 0!==t.gap&&null!==t.gap){var e=(0,o.eI)(t.theme,"spacing",8,"gap");return(0,s.k9)(t,t.gap,(function(t){return{gap:(0,o.NA)(e,t)}}))}return null};S.propTypes={},S.filterProps=["gap"];var M=function(t){if(void 0!==t.columnGap&&null!==t.columnGap){var e=(0,o.eI)(t.theme,"spacing",8,"columnGap");return(0,s.k9)(t,t.columnGap,(function(t){return{columnGap:(0,o.NA)(e,t)}}))}return null};M.propTypes={},M.filterProps=["columnGap"];var E=function(t){if(void 0!==t.rowGap&&null!==t.rowGap){var e=(0,o.eI)(t.theme,"spacing",8,"rowGap");return(0,s.k9)(t,t.rowGap,(function(t){return{rowGap:(0,o.NA)(e,t)}}))}return null};E.propTypes={},E.filterProps=["rowGap"];var k=a(S,M,E,(0,r.Z)({prop:"gridColumn"}),(0,r.Z)({prop:"gridRow"}),(0,r.Z)({prop:"gridAutoFlow"}),(0,r.Z)({prop:"gridAutoColumns"}),(0,r.Z)({prop:"gridAutoRows"}),(0,r.Z)({prop:"gridTemplateColumns"}),(0,r.Z)({prop:"gridTemplateRows"}),(0,r.Z)({prop:"gridTemplateAreas"}),(0,r.Z)({prop:"gridArea"})),T=a((0,r.Z)({prop:"position"}),(0,r.Z)({prop:"zIndex",themeKey:"zIndex"}),(0,r.Z)({prop:"top"}),(0,r.Z)({prop:"right"}),(0,r.Z)({prop:"bottom"}),(0,r.Z)({prop:"left"})),C=a((0,r.Z)({prop:"color",themeKey:"palette"}),(0,r.Z)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}),(0,r.Z)({prop:"backgroundColor",themeKey:"palette"})),I=(0,r.Z)({prop:"boxShadow",themeKey:"shadows"});function P(t){return t<=1&&0!==t?"".concat(100*t,"%"):t}var A=(0,r.Z)({prop:"width",transform:P}),z=function(t){if(void 0!==t.maxWidth&&null!==t.maxWidth){return(0,s.k9)(t,t.maxWidth,(function(e){var n,r,i;return{maxWidth:(null==(n=t.theme)||null==(r=n.breakpoints)||null==(i=r.values)?void 0:i[e])||s.VO[e]||P(e)}}))}return null};z.filterProps=["maxWidth"];var L=(0,r.Z)({prop:"minWidth",transform:P}),R=(0,r.Z)({prop:"height",transform:P}),D=(0,r.Z)({prop:"maxHeight",transform:P}),O=(0,r.Z)({prop:"minHeight",transform:P}),B=((0,r.Z)({prop:"size",cssProperty:"width",transform:P}),(0,r.Z)({prop:"size",cssProperty:"height",transform:P}),a(A,z,L,R,D,O,(0,r.Z)({prop:"boxSizing"}))),F=(0,r.Z)({prop:"fontFamily",themeKey:"typography"}),N=(0,r.Z)({prop:"fontSize",themeKey:"typography"}),Z=(0,r.Z)({prop:"fontStyle",themeKey:"typography"}),U=(0,r.Z)({prop:"fontWeight",themeKey:"typography"}),j=(0,r.Z)({prop:"letterSpacing"}),V=(0,r.Z)({prop:"textTransform"}),q=(0,r.Z)({prop:"lineHeight"}),$=(0,r.Z)({prop:"textAlign"}),G=a((0,r.Z)({prop:"typography",cssProperty:!1,themeKey:"typography"}),F,N,Z,U,j,q,$,V),W={borders:x.filterProps,display:b.filterProps,flexbox:w.filterProps,grid:k.filterProps,positions:T.filterProps,palette:C.filterProps,shadows:I.filterProps,sizing:B.filterProps,spacing:o.ZP.filterProps,typography:G.filterProps},H={borders:x,display:b,flexbox:w,grid:k,positions:T,palette:C,shadows:I,sizing:B,spacing:o.ZP,typography:G},X=Object.keys(W).reduce((function(t,e){return W[e].forEach((function(n){t[n]=H[e]})),t}),{})},8247:function(t,e,n){"use strict";var r=n(2466);e.Z=function(t,e){return e?(0,r.Z)(t,e,{clone:!1}):t}},5682:function(t,e,n){"use strict";n.d(e,{hB:function(){return m},eI:function(){return f},ZP:function(){return w},NA:function(){return g}});var r=n(885),i=n(1184),a=n(8529),o=n(8247);var s={m:"margin",p:"padding"},l={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},c={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},u=function(t){var e={};return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}((function(t){if(t.length>2){if(!c[t])return[t];t=c[t]}var e=t.split(""),n=(0,r.Z)(e,2),i=n[0],a=n[1],o=s[i],u=l[a]||"";return Array.isArray(u)?u.map((function(t){return o+t})):[o+u]})),h=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],d=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],p=[].concat(h,d);function f(t,e,n,r){var i,o=null!=(i=(0,a.D)(t,e,!1))?i:n;return"number"===typeof o?function(t){return"string"===typeof t?t:o*t}:Array.isArray(o)?function(t){return"string"===typeof t?t:o[t]}:"function"===typeof o?o:function(){}}function m(t){return f(t,"spacing",8)}function g(t,e){if("string"===typeof e||null==e)return e;var n=t(Math.abs(e));return e>=0?n:"number"===typeof n?-n:"-".concat(n)}function y(t,e,n,r){if(-1===e.indexOf(n))return null;var a=function(t,e){return function(n){return t.reduce((function(t,r){return t[r]=g(e,n),t}),{})}}(u(n),r),o=t[n];return(0,i.k9)(t,o,a)}function v(t,e){var n=m(t.theme);return Object.keys(t).map((function(r){return y(t,e,r,n)})).reduce(o.Z,{})}function _(t){return v(t,h)}function x(t){return v(t,d)}function b(t){return v(t,p)}_.propTypes={},_.filterProps=h,x.propTypes={},x.filterProps=d,b.propTypes={},b.filterProps=p;var w=b},8529:function(t,e,n){"use strict";n.d(e,{D:function(){return o}});var r=n(4942),i=n(7312),a=n(1184);function o(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||"string"!==typeof e)return null;if(t&&t.vars&&n){var r="vars.".concat(e).split(".").reduce((function(t,e){return t&&t[e]?t[e]:null}),t);if(null!=r)return r}return e.split(".").reduce((function(t,e){return t&&null!=t[e]?t[e]:null}),t)}function s(t,e,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof t?t(n):Array.isArray(t)?t[n]||i:o(t,n)||i,e&&(r=e(r)),r}e.Z=function(t){var e=t.prop,n=t.cssProperty,l=void 0===n?t.prop:n,c=t.themeKey,u=t.transform,h=function(t){if(null==t[e])return null;var n=t[e],h=o(t.theme,c)||{};return(0,a.k9)(t,n,(function(t){var n=s(h,u,t);return t===n&&"string"===typeof t&&(n=s(h,u,"".concat(e).concat("default"===t?"":(0,i.Z)(t)),t)),!1===l?n:(0,r.Z)({},l,n)}))};return h.propTypes={},h.filterProps=[e],h}},104:function(t,e,n){"use strict";var r=n(4942),i=n(8247),a=n(114),o=n(1184);function s(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.reduce((function(t,e){return t.concat(Object.keys(e))}),[]),i=new Set(r);return e.every((function(t){return i.size===Object.keys(t).length}))}function l(t,e){return"function"===typeof t?t(e):t}var c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.G$,e=Object.keys(t).reduce((function(e,n){return t[n].filterProps.forEach((function(r){e[r]=t[n]})),e}),{});function n(t,n,i){var a,o=(a={},(0,r.Z)(a,t,n),(0,r.Z)(a,"theme",i),a),s=e[t];return s?s(o):(0,r.Z)({},t,n)}function c(t){var a=t||{},u=a.sx,h=a.theme,d=void 0===h?{}:h;if(!u)return null;function p(t){var a=t;if("function"===typeof t)a=t(d);else if("object"!==typeof t)return t;if(!a)return null;var u=(0,o.W8)(d.breakpoints),h=Object.keys(u),p=u;return Object.keys(a).forEach((function(t){var u=l(a[t],d);if(null!==u&&void 0!==u)if("object"===typeof u)if(e[t])p=(0,i.Z)(p,n(t,u,d));else{var h=(0,o.k9)({theme:d},u,(function(e){return(0,r.Z)({},t,e)}));s(h,u)?p[t]=c({sx:u,theme:d}):p=(0,i.Z)(p,h)}else p=(0,i.Z)(p,n(t,u,d))})),(0,o.L7)(h,p)}return Array.isArray(u)?u.map(p):p(u)}return c}();c.filterProps=["sx"],e.Z=c},418:function(t,e,n){"use strict";var r=n(5080),i=n(7301),a=(0,r.Z)();e.Z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;return(0,i.Z)(t)}},7301:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var r=n(2791);var i=r.createContext(null);function a(){return r.useContext(i)}function o(t){return 0===Object.keys(t).length}var s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=a();return!e||o(e)?t:e}},5902:function(t,e){"use strict";var n=function(t){return t},r=function(){var t=n;return{configure:function(e){t=e},generate:function(e){return t(e)},reset:function(){t=n}}}();e.Z=r},7312:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(6189);function i(t){if("string"!==typeof t)throw new Error((0,r.Z)(7));return t.charAt(0).toUpperCase()+t.slice(1)}},4419:function(t,e,n){"use strict";function r(t,e,n){var r={};return Object.keys(t).forEach((function(i){r[i]=t[i].reduce((function(t,r){return r&&(t.push(e(r)),n&&n[r]&&t.push(n[r])),t}),[]).join(" ")})),r}n.d(e,{Z:function(){return r}})},3981:function(t,e,n){"use strict";function r(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var s=function(){t.apply(r,a)};clearTimeout(e),e=setTimeout(s,n)}return r.clear=function(){clearTimeout(e)},r}n.d(e,{Z:function(){return r}})},2466:function(t,e,n){"use strict";n.d(e,{P:function(){return i},Z:function(){return a}});var r=n(7462);function i(t){return null!==t&&"object"===typeof t&&t.constructor===Object}function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},o=n.clone?(0,r.Z)({},t):t;return i(t)&&i(e)&&Object.keys(e).forEach((function(r){"__proto__"!==r&&(i(e[r])&&r in t&&i(t[r])?o[r]=a(t[r],e[r],n):o[r]=e[r])})),o}},6189:function(t,e,n){"use strict";function r(t){for(var e="https://mui.com/production-error/?code="+t,n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}n.d(e,{Z:function(){return r}})},1217:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(5902),i={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",a=i[e];return a?"".concat(n,"-").concat(a):"".concat(r.Z.generate(t),"-").concat(e)}},5878:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(1217);function i(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",i={};return e.forEach((function(e){i[e]=(0,r.Z)(t,e,n)})),i}},9723:function(t,e,n){"use strict";function r(t){return t&&t.ownerDocument||document}n.d(e,{Z:function(){return r}})},7979:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(9723);function i(t){return(0,r.Z)(t).defaultView||window}},2971:function(t,e,n){"use strict";function r(t,e){"function"===typeof t?t(e):t&&(t.current=e)}n.d(e,{Z:function(){return r}})},8959:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(885),i=n(2791);function a(t){var e=t.controlled,n=t.default,a=(t.name,t.state,i.useRef(void 0!==e).current),o=i.useState(n),s=(0,r.Z)(o,2),l=s[0],c=s[1];return[a?e:l,i.useCallback((function(t){a||c(t)}),[])]}},5721:function(t,e,n){"use strict";var r=n(2791),i="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;e.Z=i},8956:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(2791),i=n(5721);function a(t){var e=r.useRef(t);return(0,i.Z)((function(){e.current=t})),r.useCallback((function(){return e.current.apply(void 0,arguments)}),[])}},7563:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(2791),i=n(2971);function a(t,e){return r.useMemo((function(){return null==t&&null==e?null:function(n){(0,i.Z)(t,n),(0,i.Z)(e,n)}}),[t,e])}},6248:function(t,e,n){"use strict";var r;n.d(e,{Z:function(){return l}});var i=n(885),a=n(2791),o=0;var s=(r||(r=n.t(a,2))).useId;function l(t){if(void 0!==s){var e=s();return null!=t?t:e}return function(t){var e=a.useState(t),n=(0,i.Z)(e,2),r=n[0],s=n[1],l=t||r;return a.useEffect((function(){null==r&&s("mui-".concat(o+=1))}),[r]),l}(t)}},4569:function(t,e,n){t.exports=n(8036)},3381:function(t,e,n){"use strict";var r=n(3589),i=n(7297),a=n(9301),o=n(9774),s=n(1804),l=n(9145),c=n(5411),u=n(6789),h=n(4531),d=n(6569),p=n(6261);t.exports=function(t){return new Promise((function(e,n){var f,m=t.data,g=t.headers,y=t.responseType;function v(){t.cancelToken&&t.cancelToken.unsubscribe(f),t.signal&&t.signal.removeEventListener("abort",f)}r.isFormData(m)&&r.isStandardBrowserEnv()&&delete g["Content-Type"];var _=new XMLHttpRequest;if(t.auth){var x=t.auth.username||"",b=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";g.Authorization="Basic "+btoa(x+":"+b)}var w=s(t.baseURL,t.url);function S(){if(_){var r="getAllResponseHeaders"in _?l(_.getAllResponseHeaders()):null,a={data:y&&"text"!==y&&"json"!==y?_.response:_.responseText,status:_.status,statusText:_.statusText,headers:r,config:t,request:_};i((function(t){e(t),v()}),(function(t){n(t),v()}),a),_=null}}if(_.open(t.method.toUpperCase(),o(w,t.params,t.paramsSerializer),!0),_.timeout=t.timeout,"onloadend"in _?_.onloadend=S:_.onreadystatechange=function(){_&&4===_.readyState&&(0!==_.status||_.responseURL&&0===_.responseURL.indexOf("file:"))&&setTimeout(S)},_.onabort=function(){_&&(n(new h("Request aborted",h.ECONNABORTED,t,_)),_=null)},_.onerror=function(){n(new h("Network Error",h.ERR_NETWORK,t,_,_)),_=null},_.ontimeout=function(){var e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",r=t.transitional||u;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(new h(e,r.clarifyTimeoutError?h.ETIMEDOUT:h.ECONNABORTED,t,_)),_=null},r.isStandardBrowserEnv()){var M=(t.withCredentials||c(w))&&t.xsrfCookieName?a.read(t.xsrfCookieName):void 0;M&&(g[t.xsrfHeaderName]=M)}"setRequestHeader"in _&&r.forEach(g,(function(t,e){"undefined"===typeof m&&"content-type"===e.toLowerCase()?delete g[e]:_.setRequestHeader(e,t)})),r.isUndefined(t.withCredentials)||(_.withCredentials=!!t.withCredentials),y&&"json"!==y&&(_.responseType=t.responseType),"function"===typeof t.onDownloadProgress&&_.addEventListener("progress",t.onDownloadProgress),"function"===typeof t.onUploadProgress&&_.upload&&_.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(f=function(t){_&&(n(!t||t&&t.type?new d:t),_.abort(),_=null)},t.cancelToken&&t.cancelToken.subscribe(f),t.signal&&(t.signal.aborted?f():t.signal.addEventListener("abort",f))),m||(m=null);var E=p(w);E&&-1===["http","https","file"].indexOf(E)?n(new h("Unsupported protocol "+E+":",h.ERR_BAD_REQUEST,t)):_.send(m)}))}},8036:function(t,e,n){"use strict";var r=n(3589),i=n(4049),a=n(3773),o=n(777);var s=function t(e){var n=new a(e),s=i(a.prototype.request,n);return r.extend(s,a.prototype,n),r.extend(s,n),s.create=function(n){return t(o(e,n))},s}(n(1709));s.Axios=a,s.CanceledError=n(6569),s.CancelToken=n(6857),s.isCancel=n(5517),s.VERSION=n(7600).version,s.toFormData=n(1397),s.AxiosError=n(4531),s.Cancel=s.CanceledError,s.all=function(t){return Promise.all(t)},s.spread=n(8089),s.isAxiosError=n(9580),t.exports=s,t.exports.default=s},6857:function(t,e,n){"use strict";var r=n(6569);function i(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var n=this;this.promise.then((function(t){if(n._listeners){var e,r=n._listeners.length;for(e=0;e<r;e++)n._listeners[e](t);n._listeners=null}})),this.promise.then=function(t){var e,r=new Promise((function(t){n.subscribe(t),e=t})).then(t);return r.cancel=function(){n.unsubscribe(e)},r},t((function(t){n.reason||(n.reason=new r(t),e(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]},i.prototype.unsubscribe=function(t){if(this._listeners){var e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}},i.source=function(){var t;return{token:new i((function(e){t=e})),cancel:t}},t.exports=i},6569:function(t,e,n){"use strict";var r=n(4531);function i(t){r.call(this,null==t?"canceled":t,r.ERR_CANCELED),this.name="CanceledError"}n(3589).inherits(i,r,{__CANCEL__:!0}),t.exports=i},5517:function(t){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},3773:function(t,e,n){"use strict";var r=n(3589),i=n(9774),a=n(7470),o=n(2733),s=n(777),l=n(1804),c=n(7835),u=c.validators;function h(t){this.defaults=t,this.interceptors={request:new a,response:new a}}h.prototype.request=function(t,e){"string"===typeof t?(e=e||{}).url=t:e=t||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var n=e.transitional;void 0!==n&&c.assertOptions(n,{silentJSONParsing:u.transitional(u.boolean),forcedJSONParsing:u.transitional(u.boolean),clarifyTimeoutError:u.transitional(u.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach((function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(i=i&&t.synchronous,r.unshift(t.fulfilled,t.rejected))}));var a,l=[];if(this.interceptors.response.forEach((function(t){l.push(t.fulfilled,t.rejected)})),!i){var h=[o,void 0];for(Array.prototype.unshift.apply(h,r),h=h.concat(l),a=Promise.resolve(e);h.length;)a=a.then(h.shift(),h.shift());return a}for(var d=e;r.length;){var p=r.shift(),f=r.shift();try{d=p(d)}catch(m){f(m);break}}try{a=o(d)}catch(m){return Promise.reject(m)}for(;l.length;)a=a.then(l.shift(),l.shift());return a},h.prototype.getUri=function(t){t=s(this.defaults,t);var e=l(t.baseURL,t.url);return i(e,t.params,t.paramsSerializer)},r.forEach(["delete","get","head","options"],(function(t){h.prototype[t]=function(e,n){return this.request(s(n||{},{method:t,url:e,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(t){function e(e){return function(n,r,i){return this.request(s(i||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}h.prototype[t]=e(),h.prototype[t+"Form"]=e(!0)})),t.exports=h},4531:function(t,e,n){"use strict";var r=n(3589);function i(t,e,n,r,i){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}r.inherits(i,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var a=i.prototype,o={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(t){o[t]={value:t}})),Object.defineProperties(i,o),Object.defineProperty(a,"isAxiosError",{value:!0}),i.from=function(t,e,n,o,s,l){var c=Object.create(a);return r.toFlatObject(t,c,(function(t){return t!==Error.prototype})),i.call(c,t.message,e,n,o,s),c.name=t.name,l&&Object.assign(c,l),c},t.exports=i},7470:function(t,e,n){"use strict";var r=n(3589);function i(){this.handlers=[]}i.prototype.use=function(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){r.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=i},1804:function(t,e,n){"use strict";var r=n(4044),i=n(9549);t.exports=function(t,e){return t&&!r(e)?i(t,e):e}},2733:function(t,e,n){"use strict";var r=n(3589),i=n(2693),a=n(5517),o=n(1709),s=n(6569);function l(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new s}t.exports=function(t){return l(t),t.headers=t.headers||{},t.data=i.call(t,t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||o.adapter)(t).then((function(e){return l(t),e.data=i.call(t,e.data,e.headers,t.transformResponse),e}),(function(e){return a(e)||(l(t),e&&e.response&&(e.response.data=i.call(t,e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},777:function(t,e,n){"use strict";var r=n(3589);t.exports=function(t,e){e=e||{};var n={};function i(t,e){return r.isPlainObject(t)&&r.isPlainObject(e)?r.merge(t,e):r.isPlainObject(e)?r.merge({},e):r.isArray(e)?e.slice():e}function a(n){return r.isUndefined(e[n])?r.isUndefined(t[n])?void 0:i(void 0,t[n]):i(t[n],e[n])}function o(t){if(!r.isUndefined(e[t]))return i(void 0,e[t])}function s(n){return r.isUndefined(e[n])?r.isUndefined(t[n])?void 0:i(void 0,t[n]):i(void 0,e[n])}function l(n){return n in e?i(t[n],e[n]):n in t?i(void 0,t[n]):void 0}var c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:l};return r.forEach(Object.keys(t).concat(Object.keys(e)),(function(t){var e=c[t]||a,i=e(t);r.isUndefined(i)&&e!==l||(n[t]=i)})),n}},7297:function(t,e,n){"use strict";var r=n(4531);t.exports=function(t,e,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(new r("Request failed with status code "+n.status,[r.ERR_BAD_REQUEST,r.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)}},2693:function(t,e,n){"use strict";var r=n(3589),i=n(1709);t.exports=function(t,e,n){var a=this||i;return r.forEach(n,(function(n){t=n.call(a,t,e)})),t}},1709:function(t,e,n){"use strict";var r=n(3589),i=n(4341),a=n(4531),o=n(6789),s=n(1397),l={"Content-Type":"application/x-www-form-urlencoded"};function c(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var u={transitional:o,adapter:function(){var t;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(t=n(3381)),t}(),transformRequest:[function(t,e){if(i(e,"Accept"),i(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t))return t;if(r.isArrayBufferView(t))return t.buffer;if(r.isURLSearchParams(t))return c(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString();var n,a=r.isObject(t),o=e&&e["Content-Type"];if((n=r.isFileList(t))||a&&"multipart/form-data"===o){var l=this.env&&this.env.FormData;return s(n?{"files[]":t}:t,l&&new l)}return a||"application/json"===o?(c(e,"application/json"),function(t,e,n){if(r.isString(t))try{return(e||JSON.parse)(t),r.trim(t)}catch(i){if("SyntaxError"!==i.name)throw i}return(n||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){var e=this.transitional||u.transitional,n=e&&e.silentJSONParsing,i=e&&e.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||i&&r.isString(t)&&t.length)try{return JSON.parse(t)}catch(s){if(o){if("SyntaxError"===s.name)throw a.from(s,a.ERR_BAD_RESPONSE,this,null,this.response);throw s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:n(3035)},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(t){u.headers[t]={}})),r.forEach(["post","put","patch"],(function(t){u.headers[t]=r.merge(l)})),t.exports=u},6789:function(t){"use strict";t.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},7600:function(t){t.exports={version:"0.27.2"}},4049:function(t){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},9774:function(t,e,n){"use strict";var r=n(3589);function i(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var a;if(n)a=n(e);else if(r.isURLSearchParams(e))a=e.toString();else{var o=[];r.forEach(e,(function(t,e){null!==t&&"undefined"!==typeof t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,(function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),o.push(i(e)+"="+i(t))})))})),a=o.join("&")}if(a){var s=t.indexOf("#");-1!==s&&(t=t.slice(0,s)),t+=(-1===t.indexOf("?")?"?":"&")+a}return t}},9549:function(t){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},9301:function(t,e,n){"use strict";var r=n(3589);t.exports=r.isStandardBrowserEnv()?{write:function(t,e,n,i,a,o){var s=[];s.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(a)&&s.push("domain="+a),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},4044:function(t){"use strict";t.exports=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}},9580:function(t,e,n){"use strict";var r=n(3589);t.exports=function(t){return r.isObject(t)&&!0===t.isAxiosError}},5411:function(t,e,n){"use strict";var r=n(3589);t.exports=r.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=i(window.location.href),function(e){var n=r.isString(e)?i(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},4341:function(t,e,n){"use strict";var r=n(3589);t.exports=function(t,e){r.forEach(t,(function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])}))}},3035:function(t){t.exports=null},9145:function(t,e,n){"use strict";var r=n(3589),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,a,o={};return t?(r.forEach(t.split("\n"),(function(t){if(a=t.indexOf(":"),e=r.trim(t.substr(0,a)).toLowerCase(),n=r.trim(t.substr(a+1)),e){if(o[e]&&i.indexOf(e)>=0)return;o[e]="set-cookie"===e?(o[e]?o[e]:[]).concat([n]):o[e]?o[e]+", "+n:n}})),o):o}},6261:function(t){"use strict";t.exports=function(t){var e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}},8089:function(t){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},1397:function(t,e,n){"use strict";var r=n(3589);t.exports=function(t,e){e=e||new FormData;var n=[];function i(t){return null===t?"":r.isDate(t)?t.toISOString():r.isArrayBuffer(t)||r.isTypedArray(t)?"function"===typeof Blob?new Blob([t]):Buffer.from(t):t}return function t(a,o){if(r.isPlainObject(a)||r.isArray(a)){if(-1!==n.indexOf(a))throw Error("Circular reference detected in "+o);n.push(a),r.forEach(a,(function(n,a){if(!r.isUndefined(n)){var s,l=o?o+"."+a:a;if(n&&!o&&"object"===typeof n)if(r.endsWith(a,"{}"))n=JSON.stringify(n);else if(r.endsWith(a,"[]")&&(s=r.toArray(n)))return void s.forEach((function(t){!r.isUndefined(t)&&e.append(l,i(t))}));t(n,l)}})),n.pop()}else e.append(o,i(a))}(t),e}},7835:function(t,e,n){"use strict";var r=n(7600).version,i=n(4531),a={};["object","boolean","number","function","string","symbol"].forEach((function(t,e){a[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}}));var o={};a.transitional=function(t,e,n){function a(t,e){return"[Axios v"+r+"] Transitional option '"+t+"'"+e+(n?". "+n:"")}return function(n,r,s){if(!1===t)throw new i(a(r," has been removed"+(e?" in "+e:"")),i.ERR_DEPRECATED);return e&&!o[r]&&(o[r]=!0,console.warn(a(r," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,r,s)}},t.exports={assertOptions:function(t,e,n){if("object"!==typeof t)throw new i("options must be an object",i.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(t),a=r.length;a-- >0;){var o=r[a],s=e[o];if(s){var l=t[o],c=void 0===l||s(l,o,t);if(!0!==c)throw new i("option "+o+" must be "+c,i.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new i("Unknown option "+o,i.ERR_BAD_OPTION)}},validators:a}},3589:function(t,e,n){"use strict";var r,i=n(4049),a=Object.prototype.toString,o=(r=Object.create(null),function(t){var e=a.call(t);return r[e]||(r[e]=e.slice(8,-1).toLowerCase())});function s(t){return t=t.toLowerCase(),function(e){return o(e)===t}}function l(t){return Array.isArray(t)}function c(t){return"undefined"===typeof t}var u=s("ArrayBuffer");function h(t){return null!==t&&"object"===typeof t}function d(t){if("object"!==o(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}var p=s("Date"),f=s("File"),m=s("Blob"),g=s("FileList");function y(t){return"[object Function]"===a.call(t)}var v=s("URLSearchParams");function _(t,e){if(null!==t&&"undefined"!==typeof t)if("object"!==typeof t&&(t=[t]),l(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}var x,b=(x="undefined"!==typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(t){return x&&t instanceof x});t.exports={isArray:l,isArrayBuffer:u,isBuffer:function(t){return null!==t&&!c(t)&&null!==t.constructor&&!c(t.constructor)&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){var e="[object FormData]";return t&&("function"===typeof FormData&&t instanceof FormData||a.call(t)===e||y(t.toString)&&t.toString()===e)},isArrayBufferView:function(t){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&u(t.buffer)},isString:function(t){return"string"===typeof t},isNumber:function(t){return"number"===typeof t},isObject:h,isPlainObject:d,isUndefined:c,isDate:p,isFile:f,isBlob:m,isFunction:y,isStream:function(t){return h(t)&&y(t.pipe)},isURLSearchParams:v,isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:_,merge:function t(){var e={};function n(n,r){d(e[r])&&d(n)?e[r]=t(e[r],n):d(n)?e[r]=t({},n):l(n)?e[r]=n.slice():e[r]=n}for(var r=0,i=arguments.length;r<i;r++)_(arguments[r],n);return e},extend:function(t,e,n){return _(e,(function(e,r){t[r]=n&&"function"===typeof e?i(e,n):e})),t},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t},inherits:function(t,e,n,r){t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,n&&Object.assign(t.prototype,n)},toFlatObject:function(t,e,n){var r,i,a,o={};e=e||{};do{for(i=(r=Object.getOwnPropertyNames(t)).length;i-- >0;)o[a=r[i]]||(e[a]=t[a],o[a]=!0);t=Object.getPrototypeOf(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},kindOf:o,kindOfTest:s,endsWith:function(t,e,n){t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=e.length;var r=t.indexOf(e,n);return-1!==r&&r===n},toArray:function(t){if(!t)return null;var e=t.length;if(c(e))return null;for(var n=new Array(e);e-- >0;)n[e]=t[e];return n},isTypedArray:b,isFileList:g}},8182:function(t,e,n){"use strict";function r(t){var e,n,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t)if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=r(t[e]))&&(i&&(i+=" "),i+=n);else for(e in t)t[e]&&(i&&(i+=" "),i+=e);return i}e.Z=function(){for(var t,e,n=0,i="";n<arguments.length;)(t=arguments[n++])&&(e=r(t))&&(i&&(i+=" "),i+=e);return i}},2110:function(t,e,n){"use strict";var r=n(8309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(t){return r.isMemo(t)?o:s[t.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;t.exports=function t(e,n,r){if("string"!==typeof n){if(f){var i=p(n);i&&i!==f&&t(e,i,r)}var o=u(n);h&&(o=o.concat(h(n)));for(var s=l(e),m=l(n),g=0;g<o.length;++g){var y=o[g];if(!a[y]&&(!r||!r[y])&&(!m||!m[y])&&(!s||!s[y])){var v=d(n,y);try{c(e,y,v)}catch(_){}}}}return e}},746:function(t,e){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function b(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case u:case h:case a:case s:case o:case p:return t;default:switch(t=t&&t.$$typeof){case c:case d:case g:case m:case l:return t;default:return e}}case i:return e}}}function w(t){return b(t)===h}e.AsyncMode=u,e.ConcurrentMode=h,e.ContextConsumer=c,e.ContextProvider=l,e.Element=r,e.ForwardRef=d,e.Fragment=a,e.Lazy=g,e.Memo=m,e.Portal=i,e.Profiler=s,e.StrictMode=o,e.Suspense=p,e.isAsyncMode=function(t){return w(t)||b(t)===u},e.isConcurrentMode=w,e.isContextConsumer=function(t){return b(t)===c},e.isContextProvider=function(t){return b(t)===l},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===r},e.isForwardRef=function(t){return b(t)===d},e.isFragment=function(t){return b(t)===a},e.isLazy=function(t){return b(t)===g},e.isMemo=function(t){return b(t)===m},e.isPortal=function(t){return b(t)===i},e.isProfiler=function(t){return b(t)===s},e.isStrictMode=function(t){return b(t)===o},e.isSuspense=function(t){return b(t)===p},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===a||t===h||t===s||t===o||t===p||t===f||"object"===typeof t&&null!==t&&(t.$$typeof===g||t.$$typeof===m||t.$$typeof===l||t.$$typeof===c||t.$$typeof===d||t.$$typeof===v||t.$$typeof===_||t.$$typeof===x||t.$$typeof===y)},e.typeOf=b},8309:function(t,e,n){"use strict";t.exports=n(746)},4463:function(t,e,n){"use strict";var r=n(2791),i=n(5296);function a(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(t,e){c(t,e),c(t+"Capture",e)}function c(t,e){for(s[t]=e,t=0;t<e.length;t++)o.add(e[t])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(t,e,n,r,i,a,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){g[t]=new m(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];g[e]=new m(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){g[t]=new m(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){g[t]=new m(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){g[t]=new m(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){g[t]=new m(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){g[t]=new m(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){g[t]=new m(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){g[t]=new m(t,5,!1,t.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(t){return t[1].toUpperCase()}function _(t,e,n,r){var i=g.hasOwnProperty(e)?g[e]:null;(null!==i?0!==i.type:r||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!h.call(f,t)||!h.call(p,t)&&(d.test(t)?f[t]=!0:(p[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(y,v);g[e]=new m(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(y,v);g[e]=new m(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(y,v);g[e]=new m(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){g[t]=new m(t,1,!1,t.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){g[t]=new m(t,1,!1,t.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),z=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function D(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=R&&t[R]||t["@@iterator"])?t:null}var O,B=Object.assign;function F(t){if(void 0===O)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);O=e&&e[1]||""}return"\n"+O+t}var N=!1;function Z(t,e){if(!t||N)return"";N=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var l="\n"+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=o&&0<=s);break}}}finally{N=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?F(t):""}function U(t){switch(t.tag){case 5:return F(t.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return t=Z(t.type,!1);case 11:return t=Z(t.type.render,!1);case 1:return t=Z(t.type,!0);default:return""}}function j(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case S:return"Fragment";case w:return"Portal";case E:return"Profiler";case M:return"StrictMode";case I:return"Suspense";case P:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case T:return(t.displayName||"Context")+".Consumer";case k:return(t._context.displayName||"Context")+".Provider";case C:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case A:return null!==(e=t.displayName||null)?e:j(t.type)||"Memo";case z:e=t._payload,t=t._init;try{return j(t(e))}catch(n){}}return null}function V(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j(e);case 8:return e===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function q(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function $(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function G(t){t._valueTracker||(t._valueTracker=function(t){var e=$(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,a.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function W(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=$(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function H(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function X(t,e){var n=e.checked;return B({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function K(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=q(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function Y(t,e){null!=(e=e.checked)&&_(t,"checked",e,!1)}function J(t,e){Y(t,e);var n=q(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,q(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Q(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&H(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+q(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function rt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(a(91));return B({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function it(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(a(92));if(et(n)){if(1<n.length)throw Error(a(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:q(n)}}function at(t,e){var n=q(e.value),r=q(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function ot(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function st(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?st(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ct,ut,ht=(ut=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ct=ct||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ct.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction((function(){return ut(t,e)}))}:ut);function dt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var pt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ft=["Webkit","ms","Moz","O"];function mt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||pt.hasOwnProperty(t)&&pt[t]?(""+e).trim():e+"px"}function gt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=mt(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(pt).forEach((function(t){ft.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),pt[e]=pt[t]}))}));var yt=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vt(t,e){if(e){if(yt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(a(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(a(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(a(62))}}function _t(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xt=null;function bt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var wt=null,St=null,Mt=null;function Et(t){if(t=_i(t)){if("function"!==typeof wt)throw Error(a(280));var e=t.stateNode;e&&(e=bi(e),wt(t.stateNode,t.type,e))}}function kt(t){St?Mt?Mt.push(t):Mt=[t]:St=t}function Tt(){if(St){var t=St,e=Mt;if(Mt=St=null,Et(t),e)for(t=0;t<e.length;t++)Et(e[t])}}function Ct(t,e){return t(e)}function It(){}var Pt=!1;function At(t,e,n){if(Pt)return t(e,n);Pt=!0;try{return Ct(t,e,n)}finally{Pt=!1,(null!==St||null!==Mt)&&(It(),Tt())}}function zt(t,e){var n=t.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(a(231,e,typeof n));return n}var Lt=!1;if(u)try{var Rt={};Object.defineProperty(Rt,"passive",{get:function(){Lt=!0}}),window.addEventListener("test",Rt,Rt),window.removeEventListener("test",Rt,Rt)}catch(ut){Lt=!1}function Dt(t,e,n,r,i,a,o,s,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Ot=!1,Bt=null,Ft=!1,Nt=null,Zt={onError:function(t){Ot=!0,Bt=t}};function Ut(t,e,n,r,i,a,o,s,l){Ot=!1,Bt=null,Dt.apply(Zt,arguments)}function jt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Vt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function qt(t){if(jt(t)!==t)throw Error(a(188))}function $t(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=jt(t)))throw Error(a(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return qt(i),t;if(o===r)return qt(i),e;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?t:e}(t))?Gt(t):null}function Gt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=Gt(t);if(null!==e)return e;t=t.sibling}return null}var Wt=i.unstable_scheduleCallback,Ht=i.unstable_cancelCallback,Xt=i.unstable_shouldYield,Kt=i.unstable_requestPaint,Yt=i.unstable_now,Jt=i.unstable_getCurrentPriorityLevel,Qt=i.unstable_ImmediatePriority,te=i.unstable_UserBlockingPriority,ee=i.unstable_NormalPriority,ne=i.unstable_LowPriority,re=i.unstable_IdlePriority,ie=null,ae=null;var oe=Math.clz32?Math.clz32:function(t){return 0===(t>>>=0)?32:31-(se(t)/le|0)|0},se=Math.log,le=Math.LN2;var ce=64,ue=4194304;function he(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function de(t,e){var n=t.pendingLanes;if(0===n)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=he(s):0!==(a&=o)&&(r=he(a))}else 0!==(o=n&~i)?r=he(o):0!==a&&(r=he(a));if(0===r)return 0;if(0!==e&&e!==r&&0===(e&i)&&((i=r&-r)>=(a=e&-e)||16===i&&0!==(4194240&a)))return e;if(0!==(4&r)&&(r|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-oe(e)),r|=t[n],e&=~i;return r}function pe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function fe(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function me(){var t=ce;return 0===(4194240&(ce<<=1))&&(ce=64),t}function ge(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ye(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-oe(e)]=n}function ve(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-oe(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var _e=0;function xe(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var be,we,Se,Me,Ee,ke=!1,Te=[],Ce=null,Ie=null,Pe=null,Ae=new Map,ze=new Map,Le=[],Re="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function De(t,e){switch(t){case"focusin":case"focusout":Ce=null;break;case"dragenter":case"dragleave":Ie=null;break;case"mouseover":case"mouseout":Pe=null;break;case"pointerover":case"pointerout":Ae.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ze.delete(e.pointerId)}}function Oe(t,e,n,r,i,a){return null===t||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==e&&(null!==(e=_i(e))&&we(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function Be(t){var e=vi(t.target);if(null!==e){var n=jt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Vt(n)))return t.blockedOn=e,void Ee(t.priority,(function(){Se(n)}))}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Fe(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Xe(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=_i(n))&&we(e),t.blockedOn=n,!1;var r=new(n=t.nativeEvent).constructor(n.type,n);xt=r,n.target.dispatchEvent(r),xt=null,e.shift()}return!0}function Ne(t,e,n){Fe(t)&&n.delete(e)}function Ze(){ke=!1,null!==Ce&&Fe(Ce)&&(Ce=null),null!==Ie&&Fe(Ie)&&(Ie=null),null!==Pe&&Fe(Pe)&&(Pe=null),Ae.forEach(Ne),ze.forEach(Ne)}function Ue(t,e){t.blockedOn===e&&(t.blockedOn=null,ke||(ke=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ze)))}function je(t){function e(e){return Ue(e,t)}if(0<Te.length){Ue(Te[0],t);for(var n=1;n<Te.length;n++){var r=Te[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==Ce&&Ue(Ce,t),null!==Ie&&Ue(Ie,t),null!==Pe&&Ue(Pe,t),Ae.forEach(e),ze.forEach(e),n=0;n<Le.length;n++)(r=Le[n]).blockedOn===t&&(r.blockedOn=null);for(;0<Le.length&&null===(n=Le[0]).blockedOn;)Be(n),null===n.blockedOn&&Le.shift()}var Ve=x.ReactCurrentBatchConfig,qe=!0;function $e(t,e,n,r){var i=_e,a=Ve.transition;Ve.transition=null;try{_e=1,We(t,e,n,r)}finally{_e=i,Ve.transition=a}}function Ge(t,e,n,r){var i=_e,a=Ve.transition;Ve.transition=null;try{_e=4,We(t,e,n,r)}finally{_e=i,Ve.transition=a}}function We(t,e,n,r){if(qe){var i=Xe(t,e,n,r);if(null===i)qr(t,e,r,He,n),De(t,r);else if(function(t,e,n,r,i){switch(e){case"focusin":return Ce=Oe(Ce,t,e,n,r,i),!0;case"dragenter":return Ie=Oe(Ie,t,e,n,r,i),!0;case"mouseover":return Pe=Oe(Pe,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return Ae.set(a,Oe(Ae.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ze.set(a,Oe(ze.get(a)||null,t,e,n,r,i)),!0}return!1}(i,t,e,n,r))r.stopPropagation();else if(De(t,r),4&e&&-1<Re.indexOf(t)){for(;null!==i;){var a=_i(i);if(null!==a&&be(a),null===(a=Xe(t,e,n,r))&&qr(t,e,r,He,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else qr(t,e,r,null,n)}}var He=null;function Xe(t,e,n,r){if(He=null,null!==(t=vi(t=bt(r))))if(null===(e=jt(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=Vt(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return He=t,null}function Ke(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jt()){case Qt:return 1;case te:return 4;case ee:case ne:return 16;case re:return 536870912;default:return 16}default:return 16}}var Ye=null,Je=null,Qe=null;function tn(){if(Qe)return Qe;var t,e,n=Je,r=n.length,i="value"in Ye?Ye.value:Ye.textContent,a=i.length;for(t=0;t<r&&n[t]===i[t];t++);var o=r-t;for(e=1;e<=o&&n[r-e]===i[a-e];e++);return Qe=i.slice(t,1<e?1-e:void 0)}function en(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function nn(){return!0}function rn(){return!1}function an(t){function e(e,n,r,i,a){for(var o in this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,t)t.hasOwnProperty(o)&&(e=t[o],this[o]=e?e(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return B(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),e}var on,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(cn),hn=B({},cn,{view:0,detail:0}),dn=an(hn),pn=B({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&"mousemove"===t.type?(on=t.screenX-ln.screenX,sn=t.screenY-ln.screenY):sn=on=0,ln=t),on)},movementY:function(t){return"movementY"in t?t.movementY:sn}}),fn=an(pn),mn=an(B({},pn,{dataTransfer:0})),gn=an(B({},hn,{relatedTarget:0})),yn=an(B({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=B({},cn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_n=an(vn),xn=an(B({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Sn[t])&&!!e[t]}function En(){return Mn}var kn=B({},hn,{key:function(t){if(t.key){var e=bn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=en(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?wn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(t){return"keypress"===t.type?en(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?en(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Tn=an(kn),Cn=an(B({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=an(B({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Pn=an(B({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=B({},pn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),zn=an(An),Ln=[9,13,27,32],Rn=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var On=u&&"TextEvent"in window&&!Dn,Bn=u&&(!Rn||Dn&&8<Dn&&11>=Dn),Fn=String.fromCharCode(32),Nn=!1;function Zn(t,e){switch(t){case"keyup":return-1!==Ln.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var jn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Vn[t.type]:"textarea"===e}function $n(t,e,n,r){kt(r),0<(e=Gr(e,"onChange")).length&&(n=new un("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Gn=null,Wn=null;function Hn(t){Fr(t,0)}function Xn(t){if(W(xi(t)))return t}function Kn(t,e){if("change"===t)return e}var Yn=!1;if(u){var Jn;if(u){var Qn="oninput"in document;if(!Qn){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),Qn="function"===typeof tr.oninput}Jn=Qn}else Jn=!1;Yn=Jn&&(!document.documentMode||9<document.documentMode)}function er(){Gn&&(Gn.detachEvent("onpropertychange",nr),Wn=Gn=null)}function nr(t){if("value"===t.propertyName&&Xn(Wn)){var e=[];$n(e,Wn,t,bt(t)),At(Hn,e)}}function rr(t,e,n){"focusin"===t?(er(),Wn=n,(Gn=e).attachEvent("onpropertychange",nr)):"focusout"===t&&er()}function ir(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Xn(Wn)}function ar(t,e){if("click"===t)return Xn(e)}function or(t,e){if("input"===t||"change"===t)return Xn(e)}var sr="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function lr(t,e){if(sr(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(e,i)||!sr(t[i],e[i]))return!1}return!0}function cr(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ur(t,e){var n,r=cr(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=cr(r)}}function hr(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?hr(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function dr(){for(var t=window,e=H();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;e=H((t=e.contentWindow).document)}return e}function pr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function fr(t){var e=dr(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(e=r.start,void 0===(t=r.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=ur(n,a);var o=ur(n,r);i&&o&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&((e=e.createRange()).setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,_r=!1;function xr(t,e,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==gr||gr!==H(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Gr(yr,"onSelect")).length&&(e=new un("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=gr)))}function br(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var wr={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},Sr={},Mr={};function Er(t){if(Sr[t])return Sr[t];if(!wr[t])return t;var e,n=wr[t];for(e in n)if(n.hasOwnProperty(e)&&e in Mr)return Sr[t]=n[e];return t}u&&(Mr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var kr=Er("animationend"),Tr=Er("animationiteration"),Cr=Er("animationstart"),Ir=Er("transitionend"),Pr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zr(t,e){Pr.set(t,e),l(e,[t])}for(var Lr=0;Lr<Ar.length;Lr++){var Rr=Ar[Lr];zr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}zr(kr,"onAnimationEnd"),zr(Tr,"onAnimationIteration"),zr(Cr,"onAnimationStart"),zr("dblclick","onDoubleClick"),zr("focusin","onFocus"),zr("focusout","onBlur"),zr(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Br(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,r,i,o,s,l,c){if(Ut.apply(this,arguments),Ot){if(!Ot)throw Error(a(198));var u=Bt;Ot=!1,Bt=null,Ft||(Ft=!0,Nt=u)}}(r,e,void 0,t),t.currentTarget=null}function Fr(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;t:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break t;Br(i,s,c),a=l}else for(o=0;o<r.length;o++){if(l=(s=r[o]).instance,c=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break t;Br(i,s,c),a=l}}}if(Ft)throw t=Nt,Ft=!1,Nt=null,t}function Nr(t,e){var n=e[mi];void 0===n&&(n=e[mi]=new Set);var r=t+"__bubble";n.has(r)||(Vr(e,t,2,!1),n.add(r))}function Zr(t,e,n){var r=0;e&&(r|=4),Vr(n,t,r,e)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function jr(t){if(!t[Ur]){t[Ur]=!0,o.forEach((function(e){"selectionchange"!==e&&(Or.has(e)||Zr(e,!1,t),Zr(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Ur]||(e[Ur]=!0,Zr("selectionchange",!1,e))}}function Vr(t,e,n,r){switch(Ke(e)){case 1:var i=$e;break;case 4:i=Ge;break;default:i=We}n=i.bind(null,e,n,t),i=void 0,!Lt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),r?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function qr(t,e,n,r,i){var a=r;if(0===(1&e)&&0===(2&e)&&null!==r)t:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=vi(s)))return;if(5===(l=o.tag)||6===l){r=a=o;continue t}s=s.parentNode}}r=r.return}At((function(){var r=a,i=bt(n),o=[];t:{var s=Pr.get(t);if(void 0!==s){var l=un,c=t;switch(t){case"keypress":if(0===en(n))break t;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case kr:case Tr:case Cr:l=yn;break;case Ir:l=Pn;break;case"scroll":l=dn;break;case"wheel":l=zn;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&e),h=!u&&"scroll"===t,d=u?null!==s?s+"Capture":null:s;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&(null!=(m=zt(f,d))&&u.push($r(f,m,p)))),h)break;f=f.return}0<u.length&&(s=new l(s,c,null,n,i),o.push({event:s,listeners:u}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(s="mouseover"===t||"pointerover"===t)||n===xt||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[fi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(h=jt(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=fn,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==t&&"pointerover"!==t||(u=Cn,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?s:xi(l),p=null==c?s:xi(c),(s=new u(m,f+"leave",l,n,i)).target=h,s.relatedTarget=p,m=null,vi(i)===r&&((u=new u(d,f+"enter",c,n,i)).target=p,u.relatedTarget=h,m=u),h=m,l&&c)t:{for(d=c,f=0,p=u=l;p;p=Wr(p))f++;for(p=0,m=d;m;m=Wr(m))p++;for(;0<f-p;)u=Wr(u),f--;for(;0<p-f;)d=Wr(d),p--;for(;f--;){if(u===d||null!==d&&u===d.alternate)break t;u=Wr(u),d=Wr(d)}u=null}else u=null;null!==l&&Hr(o,s,l,u,!1),null!==c&&null!==h&&Hr(o,h,c,u,!0)}if("select"===(l=(s=r?xi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Kn;else if(qn(s))if(Yn)g=or;else{g=ir;var y=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ar);switch(g&&(g=g(t,r))?$n(o,g,n,i):(y&&y(t,s,r),"focusout"===t&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&tt(s,"number",s.value)),y=r?xi(r):window,t){case"focusin":(qn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,xr(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(o,n,i)}var v;if(Rn)t:{switch(t){case"compositionstart":var _="onCompositionStart";break t;case"compositionend":_="onCompositionEnd";break t;case"compositionupdate":_="onCompositionUpdate";break t}_=void 0}else jn?Zn(t,n)&&(_="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(_="onCompositionStart");_&&(Bn&&"ko"!==n.locale&&(jn||"onCompositionStart"!==_?"onCompositionEnd"===_&&jn&&(v=tn()):(Je="value"in(Ye=i)?Ye.value:Ye.textContent,jn=!0)),0<(y=Gr(r,_)).length&&(_=new xn(_,t,null,n,i),o.push({event:_,listeners:y}),v?_.data=v:null!==(v=Un(n))&&(_.data=v))),(v=On?function(t,e){switch(t){case"compositionend":return Un(e);case"keypress":return 32!==e.which?null:(Nn=!0,Fn);case"textInput":return(t=e.data)===Fn&&Nn?null:t;default:return null}}(t,n):function(t,e){if(jn)return"compositionend"===t||!Rn&&Zn(t,e)?(t=tn(),Qe=Je=Ye=null,jn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Bn&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Fr(o,e)}))}function $r(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Gr(t,e){for(var n=e+"Capture",r=[];null!==t;){var i=t,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=zt(t,n))&&r.unshift($r(t,a,i)),null!=(a=zt(t,e))&&r.push($r(t,a,i))),t=t.return}return r}function Wr(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Hr(t,e,n,r,i){for(var a=e._reactName,o=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(l=zt(n,a))&&o.unshift($r(n,l,s)):i||null!=(l=zt(n,a))&&o.push($r(n,l,s))),n=n.return}0!==o.length&&t.push({event:e,listeners:o})}var Xr=/\r\n?/g,Kr=/\u0000|\uFFFD/g;function Yr(t){return("string"===typeof t?t:""+t).replace(Xr,"\n").replace(Kr,"")}function Jr(t,e,n){if(e=Yr(e),Yr(t)!==e&&n)throw Error(a(425))}function Qr(){}var ti=null,ei=null;function ni(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(t){return ai.resolve(null).then(t).catch(si)}:ri;function si(t){setTimeout((function(){throw t}))}function li(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return t.removeChild(i),void je(e);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);je(e)}function ci(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function ui(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,pi="__reactProps$"+hi,fi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(t){var e=t[di];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fi]||n[di]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=ui(t);null!==t;){if(n=t[di])return n;t=ui(t)}return e}n=(t=n).parentNode}return null}function _i(t){return!(t=t[di]||t[fi])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function xi(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(a(33))}function bi(t){return t[pi]||null}var wi=[],Si=-1;function Mi(t){return{current:t}}function Ei(t){0>Si||(t.current=wi[Si],wi[Si]=null,Si--)}function ki(t,e){Si++,wi[Si]=t.current,t.current=e}var Ti={},Ci=Mi(Ti),Ii=Mi(!1),Pi=Ti;function Ai(t,e){var n=t.type.contextTypes;if(!n)return Ti;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function zi(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Li(){Ei(Ii),Ei(Ci)}function Ri(t,e,n){if(Ci.current!==Ti)throw Error(a(168));ki(Ci,e),ki(Ii,n)}function Di(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(a(108,V(t)||"Unknown",i));return B({},n,r)}function Oi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ti,Pi=Ci.current,ki(Ci,t),ki(Ii,Ii.current),!0}function Bi(t,e,n){var r=t.stateNode;if(!r)throw Error(a(169));n?(t=Di(t,e,Pi),r.__reactInternalMemoizedMergedChildContext=t,Ei(Ii),Ei(Ci),ki(Ci,t)):Ei(Ii),ki(Ii,n)}var Fi=null,Ni=!1,Zi=!1;function Ui(t){null===Fi?Fi=[t]:Fi.push(t)}function ji(){if(!Zi&&null!==Fi){Zi=!0;var t=0,e=_e;try{var n=Fi;for(_e=1;t<n.length;t++){var r=n[t];do{r=r(!0)}while(null!==r)}Fi=null,Ni=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(t+1)),Wt(Qt,ji),i}finally{_e=e,Zi=!1}}return null}var Vi=[],qi=0,$i=null,Gi=0,Wi=[],Hi=0,Xi=null,Ki=1,Yi="";function Ji(t,e){Vi[qi++]=Gi,Vi[qi++]=$i,$i=t,Gi=e}function Qi(t,e,n){Wi[Hi++]=Ki,Wi[Hi++]=Yi,Wi[Hi++]=Xi,Xi=t;var r=Ki;t=Yi;var i=32-oe(r)-1;r&=~(1<<i),n+=1;var a=32-oe(e)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ki=1<<32-oe(e)+i|n<<i|r,Yi=a+t}else Ki=1<<a|n<<i|r,Yi=t}function ta(t){null!==t.return&&(Ji(t,1),Qi(t,1,0))}function ea(t){for(;t===$i;)$i=Vi[--qi],Vi[qi]=null,Gi=Vi[--qi],Vi[qi]=null;for(;t===Xi;)Xi=Wi[--Hi],Wi[Hi]=null,Yi=Wi[--Hi],Wi[Hi]=null,Ki=Wi[--Hi],Wi[Hi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(t,e){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function sa(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,na=t,ra=ci(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,na=t,ra=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==Xi?{id:Ki,overflow:Yi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=e,n.return=t,t.child=n,na=t,ra=null,!0);default:return!1}}function la(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function ca(t){if(ia){var e=ra;if(e){var n=e;if(!sa(t,e)){if(la(t))throw Error(a(418));e=ci(n.nextSibling);var r=na;e&&sa(t,e)?oa(r,n):(t.flags=-4097&t.flags|2,ia=!1,na=t)}}else{if(la(t))throw Error(a(418));t.flags=-4097&t.flags|2,ia=!1,na=t}}}function ua(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;na=t}function ha(t){if(t!==na)return!1;if(!ia)return ua(t),ia=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!ni(t.type,t.memoizedProps)),e&&(e=ra)){if(la(t))throw da(),Error(a(418));for(;e;)oa(t,e),e=ci(e.nextSibling)}if(ua(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(a(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){ra=ci(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}ra=null}}else ra=na?ci(t.stateNode.nextSibling):null;return!0}function da(){for(var t=ra;t;)t=ci(t.nextSibling)}function pa(){ra=na=null,ia=!1}function fa(t){null===aa?aa=[t]:aa.push(t)}var ma=x.ReactCurrentBatchConfig;function ga(t,e){if(t&&t.defaultProps){for(var n in e=B({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var ya=Mi(null),va=null,_a=null,xa=null;function ba(){xa=_a=va=null}function wa(t){var e=ya.current;Ei(ya),t._currentValue=e}function Sa(t,e,n){for(;null!==t;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==r&&(r.childLanes|=e)):null!==r&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ma(t,e){va=t,xa=_a=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(xs=!0),t.firstContext=null)}function Ea(t){var e=t._currentValue;if(xa!==t)if(t={context:t,memoizedValue:e,next:null},null===_a){if(null===va)throw Error(a(308));_a=t,va.dependencies={lanes:0,firstContext:t}}else _a=_a.next=t;return e}var ka=null;function Ta(t){null===ka?ka=[t]:ka.push(t)}function Ca(t,e,n,r){var i=e.interleaved;return null===i?(n.next=n,Ta(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ia(t,r)}function Ia(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var Pa=!1;function Aa(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function za(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function La(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ra(t,e,n){var r=t.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cl)){var i=r.pending;return null===i?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ia(t,n)}return null===(i=r.interleaved)?(e.next=e,Ta(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ia(t,n)}function Da(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,ve(t,n)}}function Oa(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=e:a=a.next=e}else i=a=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ba(t,e,n,r){var i=t.updateQueue;Pa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===o?a=c:o.next=c,o=l;var u=t.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==a){var h=i.baseState;for(o=0,u=c=l=null,s=a;;){var d=s.lane,p=s.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});t:{var f=t,m=s;switch(d=e,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){h=f.call(p,h,d);break t}h=f;break t;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=m.payload)?f.call(p,h,d):f)||void 0===d)break t;h=B({},h,d);break t;case 2:Pa=!0}}null!==s.callback&&0!==s.lane&&(t.flags|=64,null===(d=i.effects)?i.effects=[s]:d.push(s))}else p={eventTime:p,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,o|=d;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(d=s).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(e=i.shared.interleaved)){i=e;do{o|=i.lane,i=i.next}while(i!==e)}else null===a&&(i.shared.lanes=0);Ol|=o,t.lanes=o,t.memoizedState=h}}function Fa(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Na=(new r.Component).refs;function Za(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:B({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var Ua={isMounted:function(t){return!!(t=t._reactInternals)&&jt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=tc(),i=ec(t),a=La(r,i);a.payload=e,void 0!==n&&null!==n&&(a.callback=n),null!==(e=Ra(t,a,i))&&(nc(e,t,i,r),Da(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=tc(),i=ec(t),a=La(r,i);a.tag=1,a.payload=e,void 0!==n&&null!==n&&(a.callback=n),null!==(e=Ra(t,a,i))&&(nc(e,t,i,r),Da(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=tc(),r=ec(t),i=La(n,r);i.tag=2,void 0!==e&&null!==e&&(i.callback=e),null!==(e=Ra(t,i,r))&&(nc(e,t,r,n),Da(e,t,r))}};function ja(t,e,n,r,i,a,o){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,a,o):!e.prototype||!e.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,a))}function Va(t,e,n){var r=!1,i=Ti,a=e.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=zi(e)?Pi:Ci.current,a=(r=null!==(r=e.contextTypes)&&void 0!==r)?Ai(t,i):Ti),e=new e(n,a),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Ua,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function qa(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ua.enqueueReplaceState(e,e.state,null)}function $a(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=Na,Aa(t);var a=e.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=zi(e)?Pi:Ci.current,i.context=Ai(t,a)),i.state=t.memoizedState,"function"===typeof(a=e.getDerivedStateFromProps)&&(Za(t,e,a,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&Ua.enqueueReplaceState(i,i.state,null),Ba(t,n,i,r),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308)}function Ga(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,t));var i=r,o=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===o?e.ref:(e=function(t){var e=i.refs;e===Na&&(e=i.refs={}),null===t?delete e[o]:e[o]=t},e._stringRef=o,e)}if("string"!==typeof t)throw Error(a(284));if(!n._owner)throw Error(a(290,t))}return t}function Wa(t,e){throw t=Object.prototype.toString.call(e),Error(a(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ha(t){return(0,t._init)(t._payload)}function Xa(t){function e(e,n){if(t){var r=e.deletions;null===r?(e.deletions=[n],e.flags|=16):r.push(n)}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Lc(t,e)).index=0,t.sibling=null,t}function o(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags|=2,n):r:(e.flags|=2,n):(e.flags|=1048576,n)}function s(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,n,r){return null===e||6!==e.tag?((e=Bc(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function c(t,e,n,r){var a=n.type;return a===S?h(t,e,n.props.children,r,n.key):null!==e&&(e.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===z&&Ha(a)===e.type)?((r=i(e,n.props)).ref=Ga(t,e,n),r.return=t,r):((r=Rc(n.type,n.key,n.props,null,t.mode,r)).ref=Ga(t,e,n),r.return=t,r)}function u(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Fc(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,r,a){return null===e||7!==e.tag?((e=Dc(n,t.mode,r,a)).return=t,e):((e=i(e,n)).return=t,e)}function d(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=Bc(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case b:return(n=Rc(e.type,e.key,e.props,null,t.mode,n)).ref=Ga(t,null,e),n.return=t,n;case w:return(e=Fc(e,t.mode,n)).return=t,e;case z:return d(t,(0,e._init)(e._payload),n)}if(et(e)||D(e))return(e=Dc(e,t.mode,n,null)).return=t,e;Wa(t,e)}return null}function p(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(t,e,n,r):null;case w:return n.key===i?u(t,e,n,r):null;case z:return p(t,e,(i=n._init)(n._payload),r)}if(et(n)||D(n))return null!==i?null:h(t,e,n,r,null);Wa(t,n)}return null}function f(t,e,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(e,t=t.get(null===r.key?n:r.key)||null,r,i);case w:return u(e,t=t.get(null===r.key?n:r.key)||null,r,i);case z:return f(t,e,n,(0,r._init)(r._payload),i)}if(et(r)||D(r))return h(e,t=t.get(n)||null,r,i,null);Wa(e,r)}return null}function m(i,a,s,l){for(var c=null,u=null,h=a,m=a=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=p(i,h,s[m],l);if(null===y){null===h&&(h=g);break}t&&h&&null===y.alternate&&e(i,h),a=o(y,a,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===s.length)return n(i,h),ia&&Ji(i,m),c;if(null===h){for(;m<s.length;m++)null!==(h=d(i,s[m],l))&&(a=o(h,a,m),null===u?c=h:u.sibling=h,u=h);return ia&&Ji(i,m),c}for(h=r(i,h);m<s.length;m++)null!==(g=f(h,i,m,s[m],l))&&(t&&null!==g.alternate&&h.delete(null===g.key?m:g.key),a=o(g,a,m),null===u?c=g:u.sibling=g,u=g);return t&&h.forEach((function(t){return e(i,t)})),ia&&Ji(i,m),c}function g(i,s,l,c){var u=D(l);if("function"!==typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var h=u=null,m=s,g=s=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var _=p(i,m,v.value,c);if(null===_){null===m&&(m=y);break}t&&m&&null===_.alternate&&e(i,m),s=o(_,s,g),null===h?u=_:h.sibling=_,h=_,m=y}if(v.done)return n(i,m),ia&&Ji(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,c))&&(s=o(v,s,g),null===h?u=v:h.sibling=v,h=v);return ia&&Ji(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=f(m,i,g,v.value,c))&&(t&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=o(v,s,g),null===h?u=v:h.sibling=v,h=v);return t&&m.forEach((function(t){return e(i,t)})),ia&&Ji(i,g),u}return function t(r,a,o,l){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:t:{for(var c=o.key,u=a;null!==u;){if(u.key===c){if((c=o.type)===S){if(7===u.tag){n(r,u.sibling),(a=i(u,o.props.children)).return=r,r=a;break t}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===z&&Ha(c)===u.type){n(r,u.sibling),(a=i(u,o.props)).ref=Ga(r,u,o),a.return=r,r=a;break t}n(r,u);break}e(r,u),u=u.sibling}o.type===S?((a=Dc(o.props.children,r.mode,l,o.key)).return=r,r=a):((l=Rc(o.type,o.key,o.props,null,r.mode,l)).ref=Ga(r,a,o),l.return=r,r=l)}return s(r);case w:t:{for(u=o.key;null!==a;){if(a.key===u){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break t}n(r,a);break}e(r,a),a=a.sibling}(a=Fc(o,r.mode,l)).return=r,r=a}return s(r);case z:return t(r,a,(u=o._init)(o._payload),l)}if(et(o))return m(r,a,o,l);if(D(o))return g(r,a,o,l);Wa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Bc(o,r.mode,l)).return=r,r=a),s(r)):n(r,a)}}var Ka=Xa(!0),Ya=Xa(!1),Ja={},Qa=Mi(Ja),to=Mi(Ja),eo=Mi(Ja);function no(t){if(t===Ja)throw Error(a(174));return t}function ro(t,e){switch(ki(eo,e),ki(to,t),ki(Qa,Ja),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Ei(Qa),ki(Qa,e)}function io(){Ei(Qa),Ei(to),Ei(eo)}function ao(t){no(eo.current);var e=no(Qa.current),n=lt(e,t.type);e!==n&&(ki(to,t),ki(Qa,n))}function oo(t){to.current===t&&(Ei(Qa),Ei(to))}var so=Mi(0);function lo(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var co=[];function uo(){for(var t=0;t<co.length;t++)co[t]._workInProgressVersionPrimary=null;co.length=0}var ho=x.ReactCurrentDispatcher,po=x.ReactCurrentBatchConfig,fo=0,mo=null,go=null,yo=null,vo=!1,_o=!1,xo=0,bo=0;function wo(){throw Error(a(321))}function So(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sr(t[n],e[n]))return!1;return!0}function Mo(t,e,n,r,i,o){if(fo=o,mo=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ho.current=null===t||null===t.memoizedState?ss:ls,t=n(r,i),_o){o=0;do{if(_o=!1,xo=0,25<=o)throw Error(a(301));o+=1,yo=go=null,e.updateQueue=null,ho.current=cs,t=n(r,i)}while(_o)}if(ho.current=os,e=null!==go&&null!==go.next,fo=0,yo=go=mo=null,vo=!1,e)throw Error(a(300));return t}function Eo(){var t=0!==xo;return xo=0,t}function ko(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?mo.memoizedState=yo=t:yo=yo.next=t,yo}function To(){if(null===go){var t=mo.alternate;t=null!==t?t.memoizedState:null}else t=go.next;var e=null===yo?mo.memoizedState:yo.next;if(null!==e)yo=e,go=t;else{if(null===t)throw Error(a(310));t={memoizedState:(go=t).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===yo?mo.memoizedState=yo=t:yo=yo.next=t}return yo}function Co(t,e){return"function"===typeof e?e(t):e}function Io(t){var e=To(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=s=null,c=null,u=o;do{var h=u.lane;if((fo&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,s=r):c=c.next=d,mo.lanes|=h,Ol|=h}u=u.next}while(null!==u&&u!==o);null===c?s=r:c.next=l,sr(r,e.memoizedState)||(xs=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=c,n.lastRenderedState=r}if(null!==(t=n.interleaved)){i=t;do{o=i.lane,mo.lanes|=o,Ol|=o,i=i.next}while(i!==t)}else null===i&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Po(t){var e=To(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=t(o,s.action),s=s.next}while(s!==i);sr(o,e.memoizedState)||(xs=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Ao(){}function zo(t,e){var n=mo,r=To(),i=e(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,xs=!0),r=r.queue,qo(Do.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,No(9,Ro.bind(null,n,r,i,e),void 0,null),null===Il)throw Error(a(349));0!==(30&fo)||Lo(n,e,i)}return i}function Lo(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=mo.updateQueue)?(e={lastEffect:null,stores:null},mo.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function Ro(t,e,n,r){e.value=n,e.getSnapshot=r,Oo(e)&&Bo(t)}function Do(t,e,n){return n((function(){Oo(e)&&Bo(t)}))}function Oo(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sr(t,n)}catch(r){return!0}}function Bo(t){var e=Ia(t,1);null!==e&&nc(e,t,1,-1)}function Fo(t){var e=ko();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:t},e.queue=t,t=t.dispatch=ns.bind(null,mo,t),[e.memoizedState,t]}function No(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=mo.updateQueue)?(e={lastEffect:null,stores:null},mo.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function Zo(){return To().memoizedState}function Uo(t,e,n,r){var i=ko();mo.flags|=t,i.memoizedState=No(1|e,n,void 0,void 0===r?null:r)}function jo(t,e,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==go){var o=go.memoizedState;if(a=o.destroy,null!==r&&So(r,o.deps))return void(i.memoizedState=No(e,n,a,r))}mo.flags|=t,i.memoizedState=No(1|e,n,a,r)}function Vo(t,e){return Uo(8390656,8,t,e)}function qo(t,e){return jo(2048,8,t,e)}function $o(t,e){return jo(4,2,t,e)}function Go(t,e){return jo(4,4,t,e)}function Wo(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Ho(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,jo(4,4,Wo.bind(null,e,t),n)}function Xo(){}function Ko(t,e){var n=To();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&So(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Yo(t,e){var n=To();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&So(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Jo(t,e,n){return 0===(21&fo)?(t.baseState&&(t.baseState=!1,xs=!0),t.memoizedState=n):(sr(n,e)||(n=me(),mo.lanes|=n,Ol|=n,t.baseState=!0),e)}function Qo(t,e){var n=_e;_e=0!==n&&4>n?n:4,t(!0);var r=po.transition;po.transition={};try{t(!1),e()}finally{_e=n,po.transition=r}}function ts(){return To().memoizedState}function es(t,e,n){var r=ec(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(t))is(e,n);else if(null!==(n=Ca(t,e,n,r))){nc(n,t,r,tc()),as(n,e,r)}}function ns(t,e,n){var r=ec(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(t))is(e,i);else{var a=t.alternate;if(0===t.lanes&&(null===a||0===a.lanes)&&null!==(a=e.lastRenderedReducer))try{var o=e.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var l=e.interleaved;return null===l?(i.next=i,Ta(e)):(i.next=l.next,l.next=i),void(e.interleaved=i)}}catch(c){}null!==(n=Ca(t,e,i,r))&&(nc(n,t,r,i=tc()),as(n,e,r))}}function rs(t){var e=t.alternate;return t===mo||null!==e&&e===mo}function is(t,e){_o=vo=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function as(t,e,n){if(0!==(4194240&n)){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,ve(t,n)}}var os={readContext:Ea,useCallback:wo,useContext:wo,useEffect:wo,useImperativeHandle:wo,useInsertionEffect:wo,useLayoutEffect:wo,useMemo:wo,useReducer:wo,useRef:wo,useState:wo,useDebugValue:wo,useDeferredValue:wo,useTransition:wo,useMutableSource:wo,useSyncExternalStore:wo,useId:wo,unstable_isNewReconciler:!1},ss={readContext:Ea,useCallback:function(t,e){return ko().memoizedState=[t,void 0===e?null:e],t},useContext:Ea,useEffect:Vo,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Uo(4194308,4,Wo.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Uo(4194308,4,t,e)},useInsertionEffect:function(t,e){return Uo(4,2,t,e)},useMemo:function(t,e){var n=ko();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ko();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=es.bind(null,mo,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},ko().memoizedState=t},useState:Fo,useDebugValue:Xo,useDeferredValue:function(t){return ko().memoizedState=t},useTransition:function(){var t=Fo(!1),e=t[0];return t=Qo.bind(null,t[1]),ko().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=mo,i=ko();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=e(),null===Il)throw Error(a(349));0!==(30&fo)||Lo(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,Vo(Do.bind(null,r,o,t),[t]),r.flags|=2048,No(9,Ro.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=ko(),e=Il.identifierPrefix;if(ia){var n=Yi;e=":"+e+"R"+(n=(Ki&~(1<<32-oe(Ki)-1)).toString(32)+n),0<(n=xo++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=bo++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ls={readContext:Ea,useCallback:Ko,useContext:Ea,useEffect:qo,useImperativeHandle:Ho,useInsertionEffect:$o,useLayoutEffect:Go,useMemo:Yo,useReducer:Io,useRef:Zo,useState:function(){return Io(Co)},useDebugValue:Xo,useDeferredValue:function(t){return Jo(To(),go.memoizedState,t)},useTransition:function(){return[Io(Co)[0],To().memoizedState]},useMutableSource:Ao,useSyncExternalStore:zo,useId:ts,unstable_isNewReconciler:!1},cs={readContext:Ea,useCallback:Ko,useContext:Ea,useEffect:qo,useImperativeHandle:Ho,useInsertionEffect:$o,useLayoutEffect:Go,useMemo:Yo,useReducer:Po,useRef:Zo,useState:function(){return Po(Co)},useDebugValue:Xo,useDeferredValue:function(t){var e=To();return null===go?e.memoizedState=t:Jo(e,go.memoizedState,t)},useTransition:function(){return[Po(Co)[0],To().memoizedState]},useMutableSource:Ao,useSyncExternalStore:zo,useId:ts,unstable_isNewReconciler:!1};function us(t,e){try{var n="",r=e;do{n+=U(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:t,source:e,stack:i,digest:null}}function hs(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function ds(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}var ps="function"===typeof WeakMap?WeakMap:Map;function fs(t,e,n){(n=La(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ql||(ql=!0,$l=r),ds(0,e)},n}function ms(t,e,n){(n=La(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ds(0,e)}}var a=t.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){ds(0,e),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function gs(t,e,n){var r=t.pingCache;if(null===r){r=t.pingCache=new ps;var i=new Set;r.set(e,i)}else void 0===(i=r.get(e))&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Ec.bind(null,t,e,n),e.then(t,t))}function ys(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function vs(t,e,n,r,i){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=La(-1,1)).tag=2,Ra(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var _s=x.ReactCurrentOwner,xs=!1;function bs(t,e,n,r){e.child=null===t?Ya(e,null,n,r):Ka(e,t.child,n,r)}function ws(t,e,n,r,i){n=n.render;var a=e.ref;return Ma(e,i),r=Mo(t,e,n,r,a,i),n=Eo(),null===t||xs?(ia&&n&&ta(e),e.flags|=1,bs(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,qs(t,e,i))}function Ss(t,e,n,r,i){if(null===t){var a=n.type;return"function"!==typeof a||zc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Rc(n.type,null,r,e,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,Ms(t,e,a,r,i))}if(a=t.child,0===(t.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&t.ref===e.ref)return qs(t,e,i)}return e.flags|=1,(t=Lc(a,r)).ref=e.ref,t.return=e,e.child=t}function Ms(t,e,n,r,i){if(null!==t){var a=t.memoizedProps;if(lr(a,r)&&t.ref===e.ref){if(xs=!1,e.pendingProps=r=a,0===(t.lanes&i))return e.lanes=t.lanes,qs(t,e,i);0!==(131072&t.flags)&&(xs=!0)}}return Ts(t,e,n,r,i)}function Es(t,e,n){var r=e.pendingProps,i=r.children,a=null!==t?t.memoizedState:null;if("hidden"===r.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Ll,zl),zl|=n;else{if(0===(1073741824&n))return t=null!==a?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ki(Ll,zl),zl|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,ki(Ll,zl),zl|=r}else null!==a?(r=a.baseLanes|n,e.memoizedState=null):r=n,ki(Ll,zl),zl|=r;return bs(t,e,i,n),e.child}function ks(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ts(t,e,n,r,i){var a=zi(n)?Pi:Ci.current;return a=Ai(e,a),Ma(e,i),n=Mo(t,e,n,r,a,i),r=Eo(),null===t||xs?(ia&&r&&ta(e),e.flags|=1,bs(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,qs(t,e,i))}function Cs(t,e,n,r,i){if(zi(n)){var a=!0;Oi(e)}else a=!1;if(Ma(e,i),null===e.stateNode)Vs(t,e),Va(e,n,r),$a(e,n,r,i),r=!0;else if(null===t){var o=e.stateNode,s=e.memoizedProps;o.props=s;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Ai(e,c=zi(n)?Pi:Ci.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||l!==c)&&qa(e,o,r,c),Pa=!1;var d=e.memoizedState;o.state=d,Ba(e,r,o,i),l=e.memoizedState,s!==r||d!==l||Ii.current||Pa?("function"===typeof u&&(Za(e,n,u,r),l=e.memoizedState),(s=Pa||ja(e,n,s,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(e.flags|=4194308)):("function"===typeof o.componentDidMount&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=s):("function"===typeof o.componentDidMount&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,za(t,e),s=e.memoizedProps,c=e.type===e.elementType?s:ga(e.type,s),o.props=c,h=e.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ea(l):l=Ai(e,l=zi(n)?Pi:Ci.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||d!==l)&&qa(e,o,r,l),Pa=!1,d=e.memoizedState,o.state=d,Ba(e,r,o,i);var f=e.memoizedState;s!==h||d!==f||Ii.current||Pa?("function"===typeof p&&(Za(e,n,p,r),f=e.memoizedState),(c=Pa||ja(e,n,c,r,d,f,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof o.componentDidUpdate&&(e.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=f),o.props=r,o.state=f,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return Is(t,e,n,r,a,i)}function Is(t,e,n,r,i,a){ks(t,e);var o=0!==(128&e.flags);if(!r&&!o)return i&&Bi(e,n,!1),qs(t,e,a);r=e.stateNode,_s.current=e;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&o?(e.child=Ka(e,t.child,null,a),e.child=Ka(e,null,s,a)):bs(t,e,s,a),e.memoizedState=r.state,i&&Bi(e,n,!0),e.child}function Ps(t){var e=t.stateNode;e.pendingContext?Ri(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Ri(0,e.context,!1),ro(t,e.containerInfo)}function As(t,e,n,r,i){return pa(),fa(i),e.flags|=256,bs(t,e,n,r),e.child}var zs,Ls,Rs,Ds={dehydrated:null,treeContext:null,retryLane:0};function Os(t){return{baseLanes:t,cachePool:null,transitions:null}}function Bs(t,e,n){var r,i=e.pendingProps,o=so.current,s=!1,l=0!==(128&e.flags);if((r=l)||(r=(null===t||null!==t.memoizedState)&&0!==(2&o)),r?(s=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(o|=1),ki(so,1&o),null===t)return ca(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=i.children,t=i.fallback,s?(i=e.mode,s=e.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Oc(l,i,0,null),t=Dc(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Os(n),e.memoizedState=Ds,t):Fs(e,l));if(null!==(o=t.memoizedState)&&null!==(r=o.dehydrated))return function(t,e,n,r,i,o,s){if(n)return 256&e.flags?(e.flags&=-257,Ns(t,e,s,r=hs(Error(a(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Oc({mode:"visible",children:r.children},i,0,null),(o=Dc(o,i,s,null)).flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,0!==(1&e.mode)&&Ka(e,t.child,null,s),e.child.memoizedState=Os(s),e.memoizedState=Ds,o);if(0===(1&e.mode))return Ns(t,e,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ns(t,e,s,r=hs(o=Error(a(419)),r,void 0))}if(l=0!==(s&t.childLanes),xs||l){if(null!==(r=Il)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ia(t,i),nc(r,t,i,-1))}return mc(),Ns(t,e,s,r=hs(Error(a(421))))}return"$?"===i.data?(e.flags|=128,e.child=t.child,e=Tc.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,ra=ci(i.nextSibling),na=e,ia=!0,aa=null,null!==t&&(Wi[Hi++]=Ki,Wi[Hi++]=Yi,Wi[Hi++]=Xi,Ki=t.id,Yi=t.overflow,Xi=e),(e=Fs(e,r.children)).flags|=4096,e)}(t,e,l,i,r,o,n);if(s){s=i.fallback,l=e.mode,r=(o=t.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&e.child!==o?((i=e.child).childLanes=0,i.pendingProps=c,e.deletions=null):(i=Lc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Lc(r,s):(s=Dc(s,l,n,null)).flags|=2,s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,l=null===(l=t.child.memoizedState)?Os(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=t.childLanes&~n,e.memoizedState=Ds,i}return t=(s=t.child).sibling,i=Lc(s,{mode:"visible",children:i.children}),0===(1&e.mode)&&(i.lanes=n),i.return=e,i.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Fs(t,e){return(e=Oc({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Ns(t,e,n,r){return null!==r&&fa(r),Ka(e,t.child,null,n),(t=Fs(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Zs(t,e,n){t.lanes|=e;var r=t.alternate;null!==r&&(r.lanes|=e),Sa(t.return,e,n)}function Us(t,e,n,r,i){var a=t.memoizedState;null===a?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function js(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(bs(t,e,r.children,n),0!==(2&(r=so.current)))r=1&r|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Zs(t,n,e);else if(19===t.tag)Zs(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ki(so,r),0===(1&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===lo(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Us(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===lo(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Us(e,!0,n,null,a);break;case"together":Us(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Vs(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function qs(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Ol|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(a(153));if(null!==e.child){for(n=Lc(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Lc(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function $s(t,e){if(!ia)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Gs(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=t,i=i.sibling;else for(i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Ws(t,e,n){var r=e.pendingProps;switch(ea(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(e),null;case 1:case 17:return zi(e.type)&&Li(),Gs(e),null;case 3:return r=e.stateNode,io(),Ei(Ii),Ei(Ci),uo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(ha(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==aa&&(oc(aa),aa=null))),Gs(e),null;case 5:oo(e);var i=no(eo.current);if(n=e.type,null!==t&&null!=e.stateNode)Ls(t,e,n,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(null===e.stateNode)throw Error(a(166));return Gs(e),null}if(t=no(Qa.current),ha(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[di]=e,r[pi]=o,t=0!==(1&e.mode),n){case"dialog":Nr("cancel",r),Nr("close",r);break;case"iframe":case"object":case"embed":Nr("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)Nr(Dr[i],r);break;case"source":Nr("error",r);break;case"img":case"image":case"link":Nr("error",r),Nr("load",r);break;case"details":Nr("toggle",r);break;case"input":K(r,o),Nr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Nr("invalid",r);break;case"textarea":it(r,o),Nr("invalid",r)}for(var l in vt(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,t),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,t),i=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Nr("scroll",r)}switch(n){case"input":G(r),Q(r,o,!0);break;case"textarea":G(r),ot(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Qr)}r=i,e.updateQueue=r,null!==r&&(e.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=st(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),"select"===n&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[di]=e,t[pi]=r,zs(t,e),e.stateNode=t;t:{switch(l=_t(n,r),n){case"dialog":Nr("cancel",t),Nr("close",t),i=r;break;case"iframe":case"object":case"embed":Nr("load",t),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)Nr(Dr[i],t);i=r;break;case"source":Nr("error",t),i=r;break;case"img":case"image":case"link":Nr("error",t),Nr("load",t),i=r;break;case"details":Nr("toggle",t),i=r;break;case"input":K(t,r),i=X(t,r),Nr("invalid",t);break;case"option":default:i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=B({},r,{value:void 0}),Nr("invalid",t);break;case"textarea":it(t,r),i=rt(t,r),Nr("invalid",t)}for(o in vt(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?gt(t,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&ht(t,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&dt(t,u):"number"===typeof u&&dt(t,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Nr("scroll",t):null!=u&&_(t,o,u,l))}switch(n){case"input":G(t),Q(t,r,!1);break;case"textarea":G(t),ot(t);break;case"option":null!=r.value&&t.setAttribute("value",""+q(r.value));break;case"select":t.multiple=!!r.multiple,null!=(o=r.value)?nt(t,!!r.multiple,o,!1):null!=r.defaultValue&&nt(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(t.onclick=Qr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Gs(e),null;case 6:if(t&&null!=e.stateNode)Rs(0,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(a(166));if(n=no(eo.current),no(Qa.current),ha(e)){if(r=e.stateNode,n=e.memoizedProps,r[di]=e,(o=r.nodeValue!==n)&&null!==(t=na))switch(t.tag){case 3:Jr(r.nodeValue,n,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&t.mode))}o&&(e.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=e,e.stateNode=r}return Gs(e),null;case 13:if(Ei(so),r=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&e.mode)&&0===(128&e.flags))da(),pa(),e.flags|=98560,o=!1;else if(o=ha(e),null!==r&&null!==r.dehydrated){if(null===t){if(!o)throw Error(a(318));if(!(o=null!==(o=e.memoizedState)?o.dehydrated:null))throw Error(a(317));o[di]=e}else pa(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Gs(e),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=n,e):((r=null!==r)!==(null!==t&&null!==t.memoizedState)&&r&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&so.current)?0===Rl&&(Rl=3):mc())),null!==e.updateQueue&&(e.flags|=4),Gs(e),null);case 4:return io(),null===t&&jr(e.stateNode.containerInfo),Gs(e),null;case 10:return wa(e.type._context),Gs(e),null;case 19:if(Ei(so),null===(o=e.memoizedState))return Gs(e),null;if(r=0!==(128&e.flags),null===(l=o.rendering))if(r)$s(o,!1);else{if(0!==Rl||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=lo(t))){for(e.flags|=128,$s(o,!1),null!==(r=l.updateQueue)&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;null!==n;)t=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ki(so,1&so.current|2),e.child}t=t.sibling}null!==o.tail&&Yt()>jl&&(e.flags|=128,r=!0,$s(o,!1),e.lanes=4194304)}else{if(!r)if(null!==(t=lo(l))){if(e.flags|=128,r=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),$s(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ia)return Gs(e),null}else 2*Yt()-o.renderingStartTime>jl&&1073741824!==n&&(e.flags|=128,r=!0,$s(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=o.last)?n.sibling=l:e.child=l,o.last=l)}return null!==o.tail?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Yt(),e.sibling=null,n=so.current,ki(so,r?1&n|2:1&n),e):(Gs(e),null);case 22:case 23:return hc(),r=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==r&&(e.flags|=8192),r&&0!==(1&e.mode)?0!==(1073741824&zl)&&(Gs(e),6&e.subtreeFlags&&(e.flags|=8192)):Gs(e),null;case 24:case 25:return null}throw Error(a(156,e.tag))}function Hs(t,e){switch(ea(e),e.tag){case 1:return zi(e.type)&&Li(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return io(),Ei(Ii),Ei(Ci),uo(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return oo(e),null;case 13:if(Ei(so),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(a(340));pa()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Ei(so),null;case 4:return io(),null;case 10:return wa(e.type._context),null;case 22:case 23:return hc(),null;default:return null}}zs=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ls=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,no(Qa.current);var a,o=null;switch(n){case"input":i=X(t,i),r=X(t,r),o=[];break;case"select":i=B({},i,{value:void 0}),r=B({},r,{value:void 0}),o=[];break;case"textarea":i=rt(t,i),r=rt(t,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(t.onclick=Qr)}for(u in vt(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Nr("scroll",t),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(e.updateQueue=u)&&(e.flags|=4)}},Rs=function(t,e,n,r){n!==r&&(e.flags|=4)};var Xs=!1,Ks=!1,Ys="function"===typeof WeakSet?WeakSet:Set,Js=null;function Qs(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Mc(t,e,r)}else n.current=null}function tl(t,e,n){try{n()}catch(r){Mc(t,e,r)}}var el=!1;function nl(t,e,n){var r=e.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,void 0!==a&&tl(e,n,a)}i=i.next}while(i!==r)}}function rl(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function il(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"===typeof e?e(t):e.current=t}}function al(t){var e=t.alternate;null!==e&&(t.alternate=null,al(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[di],delete e[pi],delete e[mi],delete e[gi],delete e[yi])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ol(t){return 5===t.tag||3===t.tag||4===t.tag}function sl(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||ol(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function ll(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=Qr));else if(4!==r&&null!==(t=t.child))for(ll(t,e,n),t=t.sibling;null!==t;)ll(t,e,n),t=t.sibling}function cl(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&null!==(t=t.child))for(cl(t,e,n),t=t.sibling;null!==t;)cl(t,e,n),t=t.sibling}var ul=null,hl=!1;function dl(t,e,n){for(n=n.child;null!==n;)pl(t,e,n),n=n.sibling}function pl(t,e,n){if(ae&&"function"===typeof ae.onCommitFiberUnmount)try{ae.onCommitFiberUnmount(ie,n)}catch(s){}switch(n.tag){case 5:Ks||Qs(n,e);case 6:var r=ul,i=hl;ul=null,dl(t,e,n),hl=i,null!==(ul=r)&&(hl?(t=ul,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(t=ul,n=n.stateNode,8===t.nodeType?li(t.parentNode,n):1===t.nodeType&&li(t,n),je(t)):li(ul,n.stateNode));break;case 4:r=ul,i=hl,ul=n.stateNode.containerInfo,hl=!0,dl(t,e,n),ul=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Ks&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&tl(n,e,o),i=i.next}while(i!==r)}dl(t,e,n);break;case 1:if(!Ks&&(Qs(n,e),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Mc(n,e,s)}dl(t,e,n);break;case 21:dl(t,e,n);break;case 22:1&n.mode?(Ks=(r=Ks)||null!==n.memoizedState,dl(t,e,n),Ks=r):dl(t,e,n);break;default:dl(t,e,n)}}function fl(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Ys),e.forEach((function(e){var r=Cc.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function ml(t,e){var n=e.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,l=s;t:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break t;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break t}l=l.return}if(null===ul)throw Error(a(160));pl(o,s,i),ul=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Mc(i,e,u)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)gl(e,t),e=e.sibling}function gl(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ml(e,t),yl(t),4&r){try{nl(3,t,t.return),rl(3,t)}catch(g){Mc(t,t.return,g)}try{nl(5,t,t.return)}catch(g){Mc(t,t.return,g)}}break;case 1:ml(e,t),yl(t),512&r&&null!==n&&Qs(n,n.return);break;case 5:if(ml(e,t),yl(t),512&r&&null!==n&&Qs(n,n.return),32&t.flags){var i=t.stateNode;try{dt(i,"")}catch(g){Mc(t,t.return,g)}}if(4&r&&null!=(i=t.stateNode)){var o=t.memoizedProps,s=null!==n?n.memoizedProps:o,l=t.type,c=t.updateQueue;if(t.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&Y(i,o),_t(l,s);var u=_t(l,o);for(s=0;s<c.length;s+=2){var h=c[s],d=c[s+1];"style"===h?gt(i,d):"dangerouslySetInnerHTML"===h?ht(i,d):"children"===h?dt(i,d):_(i,h,d,u)}switch(l){case"input":J(i,o);break;case"textarea":at(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?nt(i,!!o.multiple,f,!1):p!==!!o.multiple&&(null!=o.defaultValue?nt(i,!!o.multiple,o.defaultValue,!0):nt(i,!!o.multiple,o.multiple?[]:"",!1))}i[pi]=o}catch(g){Mc(t,t.return,g)}}break;case 6:if(ml(e,t),yl(t),4&r){if(null===t.stateNode)throw Error(a(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(g){Mc(t,t.return,g)}}break;case 3:if(ml(e,t),yl(t),4&r&&null!==n&&n.memoizedState.isDehydrated)try{je(e.containerInfo)}catch(g){Mc(t,t.return,g)}break;case 4:default:ml(e,t),yl(t);break;case 13:ml(e,t),yl(t),8192&(i=t.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Ul=Yt())),4&r&&fl(t);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&t.mode?(Ks=(u=Ks)||h,ml(e,t),Ks=u):ml(e,t),yl(t),8192&r){if(u=null!==t.memoizedState,(t.stateNode.isHidden=u)&&!h&&0!==(1&t.mode))for(Js=t,h=t.child;null!==h;){for(d=Js=h;null!==Js;){switch(f=(p=Js).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Qs(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){Mc(r,n,g)}}break;case 5:Qs(p,p.return);break;case 22:if(null!==p.memoizedState){bl(d);continue}}null!==f?(f.return=p,Js=f):bl(d)}h=h.sibling}t:for(h=null,d=t;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,s=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=mt("display",s))}catch(g){Mc(t,t.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Mc(t,t.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===t)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===t)break t;for(;null===d.sibling;){if(null===d.return||d.return===t)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(e,t),yl(t),4&r&&fl(t);case 21:}}function yl(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(ol(n)){var r=n;break t}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(dt(i,""),r.flags&=-33),cl(t,sl(t),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(t,sl(t),o);break;default:throw Error(a(161))}}catch(s){Mc(t,t.return,s)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function vl(t,e,n){Js=t,_l(t,e,n)}function _l(t,e,n){for(var r=0!==(1&t.mode);null!==Js;){var i=Js,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Xs;if(!o){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Ks;s=Xs;var c=Ks;if(Xs=o,(Ks=l)&&!c)for(Js=i;null!==Js;)l=(o=Js).child,22===o.tag&&null!==o.memoizedState?wl(i):null!==l?(l.return=o,Js=l):wl(i);for(;null!==a;)Js=a,_l(a,e,n),a=a.sibling;Js=i,Xs=s,Ks=c}xl(t)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Js=a):xl(t)}}function xl(t){for(;null!==Js;){var e=Js;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Ks||rl(5,e);break;case 1:var r=e.stateNode;if(4&e.flags&&!Ks)if(null===n)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ga(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;null!==o&&Fa(e,o,r);break;case 3:var s=e.updateQueue;if(null!==s){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}Fa(e,s,n)}break;case 5:var l=e.stateNode;if(null===n&&4&e.flags){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var u=e.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&je(d)}}}break;default:throw Error(a(163))}Ks||512&e.flags&&il(e)}catch(p){Mc(e,e.return,p)}}if(e===t){Js=null;break}if(null!==(n=e.sibling)){n.return=e.return,Js=n;break}Js=e.return}}function bl(t){for(;null!==Js;){var e=Js;if(e===t){Js=null;break}var n=e.sibling;if(null!==n){n.return=e.return,Js=n;break}Js=e.return}}function wl(t){for(;null!==Js;){var e=Js;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{rl(4,e)}catch(l){Mc(e,n,l)}break;case 1:var r=e.stateNode;if("function"===typeof r.componentDidMount){var i=e.return;try{r.componentDidMount()}catch(l){Mc(e,i,l)}}var a=e.return;try{il(e)}catch(l){Mc(e,a,l)}break;case 5:var o=e.return;try{il(e)}catch(l){Mc(e,o,l)}}}catch(l){Mc(e,e.return,l)}if(e===t){Js=null;break}var s=e.sibling;if(null!==s){s.return=e.return,Js=s;break}Js=e.return}}var Sl,Ml=Math.ceil,El=x.ReactCurrentDispatcher,kl=x.ReactCurrentOwner,Tl=x.ReactCurrentBatchConfig,Cl=0,Il=null,Pl=null,Al=0,zl=0,Ll=Mi(0),Rl=0,Dl=null,Ol=0,Bl=0,Fl=0,Nl=null,Zl=null,Ul=0,jl=1/0,Vl=null,ql=!1,$l=null,Gl=null,Wl=!1,Hl=null,Xl=0,Kl=0,Yl=null,Jl=-1,Ql=0;function tc(){return 0!==(6&Cl)?Yt():-1!==Jl?Jl:Jl=Yt()}function ec(t){return 0===(1&t.mode)?1:0!==(2&Cl)&&0!==Al?Al&-Al:null!==ma.transition?(0===Ql&&(Ql=me()),Ql):0!==(t=_e)?t:t=void 0===(t=window.event)?16:Ke(t.type)}function nc(t,e,n,r){if(50<Kl)throw Kl=0,Yl=null,Error(a(185));ye(t,n,r),0!==(2&Cl)&&t===Il||(t===Il&&(0===(2&Cl)&&(Bl|=n),4===Rl&&sc(t,Al)),rc(t,r),1===n&&0===Cl&&0===(1&e.mode)&&(jl=Yt()+500,Ni&&ji()))}function rc(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-oe(a),s=1<<o,l=i[o];-1===l?0!==(s&n)&&0===(s&r)||(i[o]=pe(s,e)):l<=e&&(t.expiredLanes|=s),a&=~s}}(t,e);var r=de(t,t===Il?Al:0);if(0===r)null!==n&&Ht(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(null!=n&&Ht(n),1===e)0===t.tag?function(t){Ni=!0,Ui(t)}(lc.bind(null,t)):Ui(lc.bind(null,t)),oi((function(){0===(6&Cl)&&ji()})),n=null;else{switch(xe(r)){case 1:n=Qt;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=re}n=Ic(n,ic.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ic(t,e){if(Jl=-1,Ql=0,0!==(6&Cl))throw Error(a(327));var n=t.callbackNode;if(wc()&&t.callbackNode!==n)return null;var r=de(t,t===Il?Al:0);if(0===r)return null;if(0!==(30&r)||0!==(r&t.expiredLanes)||e)e=gc(t,r);else{e=r;var i=Cl;Cl|=2;var o=fc();for(Il===t&&Al===e||(Vl=null,jl=Yt()+500,dc(t,e));;)try{vc();break}catch(l){pc(t,l)}ba(),El.current=o,Cl=i,null!==Pl?e=0:(Il=null,Al=0,e=Rl)}if(0!==e){if(2===e&&(0!==(i=fe(t))&&(r=i,e=ac(t,i))),1===e)throw n=Dl,dc(t,0),sc(t,r),rc(t,Yt()),n;if(6===e)sc(t,r);else{if(i=t.current.alternate,0===(30&r)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(i)&&(2===(e=gc(t,r))&&(0!==(o=fe(t))&&(r=o,e=ac(t,o))),1===e))throw n=Dl,dc(t,0),sc(t,r),rc(t,Yt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(a(345));case 2:case 5:bc(t,Zl,Vl);break;case 3:if(sc(t,r),(130023424&r)===r&&10<(e=Ul+500-Yt())){if(0!==de(t,0))break;if(((i=t.suspendedLanes)&r)!==r){tc(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ri(bc.bind(null,t,Zl,Vl),e);break}bc(t,Zl,Vl);break;case 4:if(sc(t,r),(4194240&r)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-oe(r);o=1<<s,(s=e[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Yt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ml(r/1960))-r)){t.timeoutHandle=ri(bc.bind(null,t,Zl,Vl),r);break}bc(t,Zl,Vl);break;default:throw Error(a(329))}}}return rc(t,Yt()),t.callbackNode===n?ic.bind(null,t):null}function ac(t,e){var n=Nl;return t.current.memoizedState.isDehydrated&&(dc(t,e).flags|=256),2!==(t=gc(t,e))&&(e=Zl,Zl=n,null!==e&&oc(e)),t}function oc(t){null===Zl?Zl=t:Zl.push.apply(Zl,t)}function sc(t,e){for(e&=~Fl,e&=~Bl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-oe(e),r=1<<n;t[n]=-1,e&=~r}}function lc(t){if(0!==(6&Cl))throw Error(a(327));wc();var e=de(t,0);if(0===(1&e))return rc(t,Yt()),null;var n=gc(t,e);if(0!==t.tag&&2===n){var r=fe(t);0!==r&&(e=r,n=ac(t,r))}if(1===n)throw n=Dl,dc(t,0),sc(t,e),rc(t,Yt()),n;if(6===n)throw Error(a(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,bc(t,Zl,Vl),rc(t,Yt()),null}function cc(t,e){var n=Cl;Cl|=1;try{return t(e)}finally{0===(Cl=n)&&(jl=Yt()+500,Ni&&ji())}}function uc(t){null!==Hl&&0===Hl.tag&&0===(6&Cl)&&wc();var e=Cl;Cl|=1;var n=Tl.transition,r=_e;try{if(Tl.transition=null,_e=1,t)return t()}finally{_e=r,Tl.transition=n,0===(6&(Cl=e))&&ji()}}function hc(){zl=Ll.current,Ei(Ll)}function dc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,ii(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(ea(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Li();break;case 3:io(),Ei(Ii),Ei(Ci),uo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(so);break;case 10:wa(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Il=t,Pl=t=Lc(t.current,null),Al=zl=e,Rl=0,Dl=null,Fl=Bl=Ol=0,Zl=Nl=null,null!==ka){for(e=0;e<ka.length;e++)if(null!==(r=(n=ka[e]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}ka=null}return t}function pc(t,e){for(;;){var n=Pl;try{if(ba(),ho.current=os,vo){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}vo=!1}if(fo=0,yo=go=mo=null,_o=!1,xo=0,kl.current=null,null===n||null===n.return){Rl=1,Dl=e,Pl=null;break}t:{var o=t,s=n.return,l=n,c=e;if(e=Al,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=ys(s);if(null!==f){f.flags&=-257,vs(f,s,l,0,e),1&f.mode&&gs(o,u,e),c=u;var m=(e=f).updateQueue;if(null===m){var g=new Set;g.add(c),e.updateQueue=g}else m.add(c);break t}if(0===(1&e)){gs(o,u,e),mc();break t}c=Error(a(426))}else if(ia&&1&l.mode){var y=ys(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),vs(y,s,l,0,e),fa(us(c,l));break t}}o=c=us(c,l),4!==Rl&&(Rl=2),null===Nl?Nl=[o]:Nl.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e,Oa(o,fs(0,c,e));break t;case 1:l=c;var v=o.type,_=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Gl||!Gl.has(_)))){o.flags|=65536,e&=-e,o.lanes|=e,Oa(o,ms(o,l,e));break t}}o=o.return}while(null!==o)}xc(n)}catch(x){e=x,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function fc(){var t=El.current;return El.current=os,null===t?os:t}function mc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Il||0===(268435455&Ol)&&0===(268435455&Bl)||sc(Il,Al)}function gc(t,e){var n=Cl;Cl|=2;var r=fc();for(Il===t&&Al===e||(Vl=null,dc(t,e));;)try{yc();break}catch(i){pc(t,i)}if(ba(),Cl=n,El.current=r,null!==Pl)throw Error(a(261));return Il=null,Al=0,Rl}function yc(){for(;null!==Pl;)_c(Pl)}function vc(){for(;null!==Pl&&!Xt();)_c(Pl)}function _c(t){var e=Sl(t.alternate,t,zl);t.memoizedProps=t.pendingProps,null===e?xc(t):Pl=e,kl.current=null}function xc(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=Ws(n,e,zl)))return void(Pl=n)}else{if(null!==(n=Hs(n,e)))return n.flags&=32767,void(Pl=n);if(null===t)return Rl=6,void(Pl=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Pl=e);Pl=e=t}while(null!==e);0===Rl&&(Rl=5)}function bc(t,e,n){var r=_e,i=Tl.transition;try{Tl.transition=null,_e=1,function(t,e,n,r){do{wc()}while(null!==Hl);if(0!==(6&Cl))throw Error(a(327));n=t.finishedWork;var i=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(a(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-oe(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}(t,o),t===Il&&(Pl=Il=null,Al=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Wl||(Wl=!0,Ic(ee,(function(){return wc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Tl.transition,Tl.transition=null;var s=_e;_e=1;var l=Cl;Cl|=4,kl.current=null,function(t,e){if(ti=qe,pr(t=dr())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var r=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break t}var s=0,l=-1,c=-1,u=0,h=0,d=t,p=null;e:for(;;){for(var f;d!==n||0!==i&&3!==d.nodeType||(l=s+i),d!==o||0!==r&&3!==d.nodeType||(c=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===t)break e;if(p===n&&++u===i&&(l=s),p===o&&++h===r&&(c=s),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ei={focusedElem:t,selectionRange:n},qe=!1,Js=e;null!==Js;)if(t=(e=Js).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,Js=t;else for(;null!==Js;){e=Js;try{var m=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=e.stateNode,_=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:ga(e.type,g),y);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var x=e.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(a(163))}}catch(b){Mc(e,e.return,b)}if(null!==(t=e.sibling)){t.return=e.return,Js=t;break}Js=e.return}m=el,el=!1}(t,n),gl(n,t),fr(ei),qe=!!ti,ei=ti=null,t.current=n,vl(n,t,i),Kt(),Cl=l,_e=s,Tl.transition=o}else t.current=n;if(Wl&&(Wl=!1,Hl=t,Xl=i),0===(o=t.pendingLanes)&&(Gl=null),function(t){if(ae&&"function"===typeof ae.onCommitFiberRoot)try{ae.onCommitFiberRoot(ie,t,void 0,128===(128&t.current.flags))}catch(e){}}(n.stateNode),rc(t,Yt()),null!==e)for(r=t.onRecoverableError,n=0;n<e.length;n++)r((i=e[n]).value,{componentStack:i.stack,digest:i.digest});if(ql)throw ql=!1,t=$l,$l=null,t;0!==(1&Xl)&&0!==t.tag&&wc(),0!==(1&(o=t.pendingLanes))?t===Yl?Kl++:(Kl=0,Yl=t):Kl=0,ji()}(t,e,n,r)}finally{Tl.transition=i,_e=r}return null}function wc(){if(null!==Hl){var t=xe(Xl),e=Tl.transition,n=_e;try{if(Tl.transition=null,_e=16>t?16:t,null===Hl)var r=!1;else{if(t=Hl,Hl=null,Xl=0,0!==(6&Cl))throw Error(a(331));var i=Cl;for(Cl|=4,Js=t.current;null!==Js;){var o=Js,s=o.child;if(0!==(16&Js.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Js=u;null!==Js;){var h=Js;switch(h.tag){case 0:case 11:case 15:nl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Js=d;else for(;null!==Js;){var p=(h=Js).sibling,f=h.return;if(al(h),h===u){Js=null;break}if(null!==p){p.return=f,Js=p;break}Js=f}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Js=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Js=s;else t:for(;null!==Js;){if(0!==(2048&(o=Js).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Js=v;break t}Js=o.return}}var _=t.current;for(Js=_;null!==Js;){var x=(s=Js).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,Js=x;else t:for(s=_;null!==Js;){if(0!==(2048&(l=Js).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(w){Mc(l,l.return,w)}if(l===s){Js=null;break t}var b=l.sibling;if(null!==b){b.return=l.return,Js=b;break t}Js=l.return}}if(Cl=i,ji(),ae&&"function"===typeof ae.onPostCommitFiberRoot)try{ae.onPostCommitFiberRoot(ie,t)}catch(w){}r=!0}return r}finally{_e=n,Tl.transition=e}}return!1}function Sc(t,e,n){t=Ra(t,e=fs(0,e=us(n,e),1),1),e=tc(),null!==t&&(ye(t,1,e),rc(t,e))}function Mc(t,e,n){if(3===t.tag)Sc(t,t,n);else for(;null!==e;){if(3===e.tag){Sc(e,t,n);break}if(1===e.tag){var r=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){e=Ra(e,t=ms(e,t=us(n,t),1),1),t=tc(),null!==e&&(ye(e,1,t),rc(e,t));break}}e=e.return}}function Ec(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=tc(),t.pingedLanes|=t.suspendedLanes&n,Il===t&&(Al&n)===n&&(4===Rl||3===Rl&&(130023424&Al)===Al&&500>Yt()-Ul?dc(t,0):Fl|=n),rc(t,e)}function kc(t,e){0===e&&(0===(1&t.mode)?e=1:(e=ue,0===(130023424&(ue<<=1))&&(ue=4194304)));var n=tc();null!==(t=Ia(t,e))&&(ye(t,e,n),rc(t,n))}function Tc(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),kc(t,n)}function Cc(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(e),kc(t,n)}function Ic(t,e){return Wt(t,e)}function Pc(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(t,e,n,r){return new Pc(t,e,n,r)}function zc(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Lc(t,e){var n=t.alternate;return null===n?((n=Ac(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Rc(t,e,n,r,i,o){var s=2;if(r=t,"function"===typeof t)zc(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case S:return Dc(n.children,i,o,e);case M:s=8,i|=8;break;case E:return(t=Ac(12,n,e,2|i)).elementType=E,t.lanes=o,t;case I:return(t=Ac(13,n,e,i)).elementType=I,t.lanes=o,t;case P:return(t=Ac(19,n,e,i)).elementType=P,t.lanes=o,t;case L:return Oc(n,i,o,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case k:s=10;break t;case T:s=9;break t;case C:s=11;break t;case A:s=14;break t;case z:s=16,r=null;break t}throw Error(a(130,null==t?t:typeof t,""))}return(e=Ac(s,n,e,i)).elementType=t,e.type=r,e.lanes=o,e}function Dc(t,e,n,r){return(t=Ac(7,t,r,e)).lanes=n,t}function Oc(t,e,n,r){return(t=Ac(22,t,r,e)).elementType=L,t.lanes=n,t.stateNode={isHidden:!1},t}function Bc(t,e,n){return(t=Ac(6,t,null,e)).lanes=n,t}function Fc(t,e,n){return(e=Ac(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Nc(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ge(0),this.expirationTimes=ge(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ge(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Zc(t,e,n,r,i,a,o,s,l){return t=new Nc(t,e,n,s,l),1===e?(e=1,!0===a&&(e|=8)):e=0,a=Ac(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Aa(a),t}function Uc(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}function jc(t){if(!t)return Ti;t:{if(jt(t=t._reactInternals)!==t||1!==t.tag)throw Error(a(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(zi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(a(171))}if(1===t.tag){var n=t.type;if(zi(n))return Di(t,n,e)}return e}function Vc(t,e,n,r,i,a,o,s,l){return(t=Zc(n,r,!0,t,0,a,0,s,l)).context=jc(null),n=t.current,(a=La(r=tc(),i=ec(n))).callback=void 0!==e&&null!==e?e:null,Ra(n,a,i),t.current.lanes=i,ye(t,i,r),rc(t,r),t}function qc(t,e,n,r){var i=e.current,a=tc(),o=ec(i);return n=jc(n),null===e.context?e.context=n:e.pendingContext=n,(e=La(a,o)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),null!==(t=Ra(i,e,o))&&(nc(t,i,o,a),Da(t,i,o)),o}function $c(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function Gc(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Wc(t,e){Gc(t,e),(t=t.alternate)&&Gc(t,e)}Sl=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Ii.current)xs=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return xs=!1,function(t,e,n){switch(e.tag){case 3:Ps(e),pa();break;case 5:ao(e);break;case 1:zi(e.type)&&Oi(e);break;case 4:ro(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ki(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=e.memoizedState))return null!==r.dehydrated?(ki(so,1&so.current),e.flags|=128,null):0!==(n&e.child.childLanes)?Bs(t,e,n):(ki(so,1&so.current),null!==(t=qs(t,e,n))?t.sibling:null);ki(so,1&so.current);break;case 19:if(r=0!==(n&e.childLanes),0!==(128&t.flags)){if(r)return js(t,e,n);e.flags|=128}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(so,so.current),r)break;return null;case 22:case 23:return e.lanes=0,Es(t,e,n)}return qs(t,e,n)}(t,e,n);xs=0!==(131072&t.flags)}else xs=!1,ia&&0!==(1048576&e.flags)&&Qi(e,Gi,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Vs(t,e),t=e.pendingProps;var i=Ai(e,Ci.current);Ma(e,n),i=Mo(null,e,r,t,i,n);var o=Eo();return e.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,zi(r)?(o=!0,Oi(e)):o=!1,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Aa(e),i.updater=Ua,e.stateNode=i,i._reactInternals=e,$a(e,r,t,n),e=Is(null,e,r,!0,o,n)):(e.tag=0,ia&&o&&ta(e),bs(null,e,i,n),e=e.child),e;case 16:r=e.elementType;t:{switch(Vs(t,e),t=e.pendingProps,r=(i=r._init)(r._payload),e.type=r,i=e.tag=function(t){if("function"===typeof t)return zc(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===C)return 11;if(t===A)return 14}return 2}(r),t=ga(r,t),i){case 0:e=Ts(null,e,r,t,n);break t;case 1:e=Cs(null,e,r,t,n);break t;case 11:e=ws(null,e,r,t,n);break t;case 14:e=Ss(null,e,r,ga(r.type,t),n);break t}throw Error(a(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,Ts(t,e,r,i=e.elementType===r?i:ga(r,i),n);case 1:return r=e.type,i=e.pendingProps,Cs(t,e,r,i=e.elementType===r?i:ga(r,i),n);case 3:t:{if(Ps(e),null===t)throw Error(a(387));r=e.pendingProps,i=(o=e.memoizedState).element,za(t,e),Ba(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,256&e.flags){e=As(t,e,r,n,i=us(Error(a(423)),e));break t}if(r!==i){e=As(t,e,r,n,i=us(Error(a(424)),e));break t}for(ra=ci(e.stateNode.containerInfo.firstChild),na=e,ia=!0,aa=null,n=Ya(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pa(),r===i){e=qs(t,e,n);break t}bs(t,e,r,n)}e=e.child}return e;case 5:return ao(e),null===t&&ca(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(e.flags|=32),ks(t,e),bs(t,e,s,n),e.child;case 6:return null===t&&ca(e),null;case 13:return Bs(t,e,n);case 4:return ro(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=Ka(e,null,r,n):bs(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,ws(t,e,r,i=e.elementType===r?i:ga(r,i),n);case 7:return bs(t,e,e.pendingProps,n),e.child;case 8:case 12:return bs(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,ki(ya,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ii.current){e=qs(t,e,n);break t}}else for(null!==(o=e.child)&&(o.return=e);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=La(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Sa(o.return,n,e),l.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===e.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Sa(s,n,e),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===e){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}bs(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ma(e,n),r=r(i=Ea(i)),e.flags|=1,bs(t,e,r,n),e.child;case 14:return i=ga(r=e.type,e.pendingProps),Ss(t,e,r,i=ga(r.type,i),n);case 15:return Ms(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ga(r,i),Vs(t,e),e.tag=1,zi(r)?(t=!0,Oi(e)):t=!1,Ma(e,n),Va(e,r,i),$a(e,r,i,n),Is(null,e,r,!0,t,n);case 19:return js(t,e,n);case 22:return Es(t,e,n)}throw Error(a(156,e.tag))};var Hc="function"===typeof reportError?reportError:function(t){console.error(t)};function Xc(t){this._internalRoot=t}function Kc(t){this._internalRoot=t}function Yc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Jc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Qc(){}function tu(t,e,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var t=$c(o);s.call(t)}}qc(e,o,t,i)}else o=function(t,e,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var t=$c(o);a.call(t)}}var o=Vc(e,r,t,0,null,!1,0,"",Qc);return t._reactRootContainer=o,t[fi]=o.current,jr(8===t.nodeType?t.parentNode:t),uc(),o}for(;i=t.lastChild;)t.removeChild(i);if("function"===typeof r){var s=r;r=function(){var t=$c(l);s.call(t)}}var l=Zc(t,0,!1,null,0,!1,0,"",Qc);return t._reactRootContainer=l,t[fi]=l.current,jr(8===t.nodeType?t.parentNode:t),uc((function(){qc(e,l,n,r)})),l}(n,e,t,i,r);return $c(o)}Kc.prototype.render=Xc.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(a(409));qc(t,e,null,null)},Kc.prototype.unmount=Xc.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;uc((function(){qc(null,t,null,null)})),e[fi]=null}},Kc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Me();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Le.length&&0!==e&&e<Le[n].priority;n++);Le.splice(n,0,t),0===n&&Be(t)}},be=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=he(e.pendingLanes);0!==n&&(ve(e,1|n),rc(e,Yt()),0===(6&Cl)&&(jl=Yt()+500,ji()))}break;case 13:uc((function(){var e=Ia(t,1);if(null!==e){var n=tc();nc(e,t,1,n)}})),Wc(t,1)}},we=function(t){if(13===t.tag){var e=Ia(t,134217728);if(null!==e)nc(e,t,134217728,tc());Wc(t,134217728)}},Se=function(t){if(13===t.tag){var e=ec(t),n=Ia(t,e);if(null!==n)nc(n,t,e,tc());Wc(t,e)}},Me=function(){return _e},Ee=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}},wt=function(t,e,n){switch(e){case"input":if(J(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=bi(r);if(!i)throw Error(a(90));W(r),J(r,i)}}}break;case"textarea":at(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},Ct=cc,It=uc;var eu={usingClientEntryPoint:!1,Events:[_i,xi,bi,kt,Tt,cc]},nu={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=$t(t))?null:t.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{ie=iu.inject(ru),ae=iu}catch(ut){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(e))throw Error(a(200));return Uc(t,e,null,n)},e.createRoot=function(t,e){if(!Yc(t))throw Error(a(299));var n=!1,r="",i=Hc;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(r=e.identifierPrefix),void 0!==e.onRecoverableError&&(i=e.onRecoverableError)),e=Zc(t,1,!1,null,0,n,0,r,i),t[fi]=e.current,jr(8===t.nodeType?t.parentNode:t),new Xc(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(a(188));throw t=Object.keys(t).join(","),Error(a(268,t))}return t=null===(t=$t(e))?null:t.stateNode},e.flushSync=function(t){return uc(t)},e.hydrate=function(t,e,n){if(!Jc(e))throw Error(a(200));return tu(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!Yc(t))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Hc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),e=Vc(e,null,t,1,null!=n?n:null,i,0,o,s),t[fi]=e.current,jr(t),r)for(t=0;t<r.length;t++)i=(i=(n=r[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Kc(e)},e.render=function(t,e,n){if(!Jc(e))throw Error(a(200));return tu(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Jc(t))throw Error(a(40));return!!t._reactRootContainer&&(uc((function(){tu(null,null,t,!1,(function(){t._reactRootContainer=null,t[fi]=null}))})),!0)},e.unstable_batchedUpdates=cc,e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Jc(n))throw Error(a(200));if(null==t||void 0===t._reactInternals)throw Error(a(38));return tu(t,e,n,!1,r)},e.version="18.2.0-next-9e3b772b8-20220608"},1250:function(t,e,n){"use strict";var r=n(4164);e.createRoot=r.createRoot,e.hydrateRoot=r.hydrateRoot},4164:function(t,e,n){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(4463)},1372:function(t,e){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function y(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case a:case s:case o:case d:case p:return t;default:switch(t=t&&t.$$typeof){case u:case c:case h:case m:case f:case l:return t;default:return e}}case i:return e}}}n=Symbol.for("react.module.reference")},7441:function(t,e,n){"use strict";n(1372)},6374:function(t,e,n){"use strict";var r=n(2791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,n){var r,a={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(u=e.ref),e)o.call(e,r)&&!l.hasOwnProperty(r)&&(a[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===a[r]&&(a[r]=e[r]);return{$$typeof:i,type:t,key:c,ref:u,props:a,_owner:s.current}}e.Fragment=a,e.jsx=c,e.jsxs=c},9117:function(t,e){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||f}function v(){}function _(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},y.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},v.prototype=y.prototype;var x=_.prototype=new v;x.constructor=_,m(x,y.prototype),x.isPureReactComponent=!0;var b=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function E(t,e,r){var i,a={},o=null,s=null;if(null!=e)for(i in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(o=""+e.key),e)w.call(e,i)&&!M.hasOwnProperty(i)&&(a[i]=e[i]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(t&&t.defaultProps)for(i in l=t.defaultProps)void 0===a[i]&&(a[i]=l[i]);return{$$typeof:n,type:t,key:o,ref:s,props:a,_owner:S.current}}function k(t){return"object"===typeof t&&null!==t&&t.$$typeof===n}var T=/\/+/g;function C(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function I(t,e,i,a,o){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var l=!1;if(null===t)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=t),t=""===a?"."+C(l,0):a,b(o)?(i="",null!=t&&(i=t.replace(T,"$&/")+"/"),I(o,e,i,"",(function(t){return t}))):null!=o&&(k(o)&&(o=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+t)),e.push(o)),1;if(l=0,a=""===a?".":a+":",b(t))for(var c=0;c<t.length;c++){var u=a+C(s=t[c],c);l+=I(s,e,i,u,o)}else if(u=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=p&&t[p]||t["@@iterator"])?t:null}(t),"function"===typeof u)for(t=u.call(t),c=0;!(s=t.next()).done;)l+=I(s=s.value,e,i,u=a+C(s,c++),o);else if("object"===s)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function P(t,e,n){if(null==t)return t;var r=[],i=0;return I(t,r,"","",(function(t){return e.call(n,t,i++)})),r}function A(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var z={current:null},L={transition:null},R={ReactCurrentDispatcher:z,ReactCurrentBatchConfig:L,ReactCurrentOwner:S};e.Children={map:P,forEach:function(t,e,n){P(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return P(t,(function(){e++})),e},toArray:function(t){return P(t,(function(t){return t}))||[]},only:function(t){if(!k(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=y,e.Fragment=i,e.Profiler=o,e.PureComponent=_,e.StrictMode=a,e.Suspense=u,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,e.cloneElement=function(t,e,r){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=m({},t.props),a=t.key,o=t.ref,s=t._owner;if(null!=e){if(void 0!==e.ref&&(o=e.ref,s=S.current),void 0!==e.key&&(a=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)w.call(e,c)&&!M.hasOwnProperty(c)&&(i[c]=void 0===e[c]&&void 0!==l?l[c]:e[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:t.type,key:a,ref:o,props:i,_owner:s}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:t},t.Consumer=t},e.createElement=E,e.createFactory=function(t){var e=E.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:c,render:t}},e.isValidElement=k,e.lazy=function(t){return{$$typeof:d,_payload:{_status:-1,_result:t},_init:A}},e.memo=function(t,e){return{$$typeof:h,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=L.transition;L.transition={};try{t()}finally{L.transition=e}},e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},e.useCallback=function(t,e){return z.current.useCallback(t,e)},e.useContext=function(t){return z.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return z.current.useDeferredValue(t)},e.useEffect=function(t,e){return z.current.useEffect(t,e)},e.useId=function(){return z.current.useId()},e.useImperativeHandle=function(t,e,n){return z.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return z.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return z.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return z.current.useMemo(t,e)},e.useReducer=function(t,e,n){return z.current.useReducer(t,e,n)},e.useRef=function(t){return z.current.useRef(t)},e.useState=function(t){return z.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return z.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return z.current.useTransition()},e.version="18.2.0"},2791:function(t,e,n){"use strict";t.exports=n(9117)},184:function(t,e,n){"use strict";t.exports=n(6374)},6813:function(t,e){"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var r=n-1>>>1,i=t[r];if(!(0<a(i,e)))break t;t[r]=e,t[n]=i,n=r}}function r(t){return 0===t.length?null:t[0]}function i(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=t[s],c=s+1,u=t[c];if(0>a(l,n))c<i&&0>a(u,l)?(t[r]=u,t[c]=n,r=c):(t[r]=l,t[s]=n,r=s);else{if(!(c<i&&0>a(u,n)))break t;t[r]=u,t[c]=n,r=c}}}return e}function a(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var c=[],u=[],h=1,d=null,p=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function x(t){for(var e=r(u);null!==e;){if(null===e.callback)i(u);else{if(!(e.startTime<=t))break;i(u),e.sortIndex=e.expirationTime,n(c,e)}e=r(u)}}function b(t){if(g=!1,x(t),!m)if(null!==r(c))m=!0,L(w);else{var e=r(u);null!==e&&R(b,e.startTime-t)}}function w(t,n){m=!1,g&&(g=!1,v(k),k=-1),f=!0;var a=p;try{for(x(n),d=r(c);null!==d&&(!(d.expirationTime>n)||t&&!I());){var o=d.callback;if("function"===typeof o){d.callback=null,p=d.priorityLevel;var s=o(d.expirationTime<=n);n=e.unstable_now(),"function"===typeof s?d.callback=s:d===r(c)&&i(c),x(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&R(b,h.startTime-n),l=!1}return l}finally{d=null,p=a,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,M=!1,E=null,k=-1,T=5,C=-1;function I(){return!(e.unstable_now()-C<T)}function P(){if(null!==E){var t=e.unstable_now();C=t;var n=!0;try{n=E(!0,t)}finally{n?S():(M=!1,E=null)}}else M=!1}if("function"===typeof _)S=function(){_(P)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,z=A.port2;A.port1.onmessage=P,S=function(){z.postMessage(null)}}else S=function(){y(P,0)};function L(t){E=t,M||(M=!0,S())}function R(t,n){k=y((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){m||f||(m=!0,L(w))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(t){switch(p){case 1:case 2:case 3:var e=3;break;default:e=p}var n=p;p=e;try{return t()}finally{p=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=p;p=t;try{return e()}finally{p=n}},e.unstable_scheduleCallback=function(t,i,a){var o=e.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,t){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return t={id:h++,callback:i,priorityLevel:t,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(t.sortIndex=a,n(u,t),null===r(c)&&t===r(u)&&(g?(v(k),k=-1):g=!0,R(b,a-o))):(t.sortIndex=s,n(c,t),m||f||(m=!0,L(w))),t},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(t){var e=p;return function(){var n=p;p=e;try{return t.apply(this,arguments)}finally{p=n}}}},5296:function(t,e,n){"use strict";t.exports=n(6813)},4836:function(t){t.exports=function(t){return t&&t.__esModule?t:{default:t}},t.exports.__esModule=!0,t.exports.default=t.exports},4307:function(t){t.exports=function(){"use strict";var t,e,n;function r(r,i){if(t)if(e){var a="var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk);",o={};t(o),n=i(o),"undefined"!==typeof window&&(n.workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"})))}else e=i;else t=i}return r(["exports"],(function(t){var e=n;function n(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=n,this.p2y=r}function r(t,n,r,i){const a=new e(t,n,r,i);return function(t){return a.solve(t)}}n.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(void 0===e&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var n=t,r=0;r<8;r++){var i=this.sampleCurveX(n)-t;if(Math.abs(i)<e)return n;var a=this.sampleCurveDerivativeX(n);if(Math.abs(a)<1e-6)break;n-=i/a}var o=0,s=1;for(n=t,r=0;r<20&&(i=this.sampleCurveX(n),!(Math.abs(i-t)<e));r++)t>i?o=n:s=n,n=.5*(s-o)+o;return n},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}};const i=r(.25,.1,.25,1);function a(t,e,n){return Math.min(n,Math.max(e,t))}function o(t,e,n){const r=n-e,i=((t-e)%r+r)%r+e;return i===e?n:i}function s(t,...e){for(const n of e)for(const e in n)t[e]=n[e];return t}let l=1;function c(t,e){t.forEach((t=>{e[t]&&(e[t]=e[t].bind(e))}))}function u(t,e,n){const r={};for(const i in t)r[i]=e.call(n||this,t[i],i,t);return r}function h(t,e,n){const r={};for(const i in t)e.call(n||this,t[i],i,t)&&(r[i]=t[i]);return r}function d(t){return Array.isArray(t)?t.map(d):"object"==typeof t&&t?u(t,d):t}const p={};function f(t){p[t]||("undefined"!=typeof console&&console.warn(t),p[t]=!0)}function m(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function g(t){let e=0;for(let n,r,i=0,a=t.length,o=a-1;i<a;o=i++)n=t[i],r=t[o],e+=(r.x-n.x)*(n.y+r.y);return e}function y(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function v(t){const e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((t,n,r,i)=>{const a=r||i;return e[n]=!a||a.toLowerCase(),""})),e["max-age"]){const t=parseInt(e["max-age"],10);isNaN(t)?delete e["max-age"]:e["max-age"]=t}return e}let _,x,b=null;function w(t){if(null==b){const e=t.navigator?t.navigator.userAgent:null;b=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return b}function S(t){return"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap}const M={now:"undefined"!=typeof performance&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(t){const e=requestAnimationFrame(t);return{cancel:()=>cancelAnimationFrame(e)}},getImageData(t,e=0){const n=window.document.createElement("canvas"),r=n.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return n.width=t.width,n.height=t.height,r.drawImage(t,0,0,t.width,t.height),r.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:t=>(_||(_=document.createElement("a")),_.href=t,_.href),hardwareConcurrency:"undefined"!=typeof navigator&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==x&&(x=matchMedia("(prefers-reduced-motion: reduce)")),x.matches)}};var E=k;function k(t,e){this.x=t,this.y=e}k.prototype={clone:function(){return new k(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=r,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-r*(this.y-e.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},k.convert=function(t){return t instanceof k?t:Array.isArray(t)?new k(t[0],t[1]):t};const T={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},C="mapbox-tiles";let I,P,A=500,z=50;function L(){"undefined"==typeof caches||I||(I=caches.open(C))}let R=1/0;const D={supported:!1,testSupport:function(t){!F&&B&&(N?Z(t):O=t)}};let O,B,F=!1,N=!1;function Z(t){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,B),t.isContextLost())return;D.supported=!0}catch(t){}t.deleteTexture(e),F=!0}"undefined"!=typeof document&&(B=document.createElement("img"),B.onload=function(){O&&Z(O),O=null,N=!0},B.onerror=function(){F=!0,O=null},B.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const U={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(U);class j extends Error{constructor(t,e,n,r){super(`AJAXError: ${e} (${t}): ${n}`),this.status=t,this.statusText=e,this.url=n,this.body=r}}const V=y()?()=>self.worker&&self.worker.referrer:()=>("blob:"===window.location.protocol?window.parent:window).location.href;function q(t,e){const n=new AbortController,r=new Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:V(),signal:n.signal});let i=!1,a=!1;return"json"===t.type&&r.headers.set("Accept","application/json"),((n,o,s)=>{if(a)return;const l=Date.now();fetch(r).then((n=>n.ok?((n,o,s)=>{("arrayBuffer"===t.type?n.arrayBuffer():"json"===t.type?n.json():n.text()).then((t=>{a||(o&&s&&function(t,e,n){if(L(),!I)return;const r={status:e.status,statusText:e.statusText,headers:new Headers};e.headers.forEach(((t,e)=>r.headers.set(e,t)));const i=v(e.headers.get("Cache-Control")||"");i["no-store"]||(i["max-age"]&&r.headers.set("Expires",new Date(n+1e3*i["max-age"]).toUTCString()),new Date(r.headers.get("Expires")).getTime()-n<42e4||function(t,e){if(void 0===P)try{new Response(new ReadableStream),P=!0}catch(t){P=!1}P?e(t.body):t.blob().then(e)}(e,(e=>{const n=new Response(e,r);L(),I&&I.then((e=>e.put(function(t){const e=t.indexOf("?");return e<0?t:t.slice(0,e)}(t.url),n))).catch((t=>f(t.message)))})))}(r,o,s),i=!0,e(null,t,n.headers.get("Cache-Control"),n.headers.get("Expires")))})).catch((t=>{a||e(new Error(t.message))}))})(n,null,l):n.blob().then((r=>e(new j(n.status,n.statusText,t.url,r)))))).catch((t=>{20!==t.code&&e(new Error(t.message))}))})(),{cancel:()=>{a=!0,i||n.abort()}}}const $=function(t,e){if(/:\/\//.test(t.url)&&!/^https?:|^file:/.test(t.url)){if(y()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e);if(!y()){const n=t.url.substring(0,t.url.indexOf("://"));return(T.REGISTERED_PROTOCOLS[n]||q)(t,e)}}if(!(/^file:/.test(n=t.url)||/^file:/.test(V())&&!/^\w+:/.test(n))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return q(t,e);if(y()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var n;return function(t,e){const n=new XMLHttpRequest;n.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(n.responseType="arraybuffer");for(const r in t.headers)n.setRequestHeader(r,t.headers[r]);return"json"===t.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===t.credentials,n.onerror=()=>{e(new Error(n.statusText))},n.onload=()=>{if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){let r=n.response;if("json"===t.type)try{r=JSON.parse(n.response)}catch(t){return e(t)}e(null,r,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else{const r=new Blob([n.response],{type:n.getResponseHeader("Content-Type")});e(new j(n.status,n.statusText,t.url,r))}},n.send(t.body),{cancel:()=>n.abort()}}(t,e)},G=function(t,e){return $(s(t,{type:"arrayBuffer"}),e)};function W(t){const e=window.document.createElement("a");return e.href=t,e.protocol===window.document.location.protocol&&e.host===window.document.location.host}const H="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let X,K;X=[],K=0;const Y=function(t,e){if(D.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),K>=T.MAX_PARALLEL_IMAGE_REQUESTS){const n={requestParameters:t,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return X.push(n),n}K++;let n=!1;const r=()=>{if(!n)for(n=!0,K--;X.length&&K<T.MAX_PARALLEL_IMAGE_REQUESTS;){const t=X.shift(),{requestParameters:e,callback:n,cancelled:r}=t;r||(t.cancel=Y(e,n).cancel)}},i=G(t,((t,n,i,a)=>{r(),t?e(t):n&&function(t,e){"function"==typeof createImageBitmap?function(t,e){const n=new Blob([new Uint8Array(t)],{type:"image/png"});createImageBitmap(n).then((t=>{e(null,t)})).catch((t=>{e(new Error(`Could not load image because of ${t.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))}(t,e):function(t,e){const n=new Image;n.onload=()=>{e(null,n),URL.revokeObjectURL(n.src),n.onload=null,window.requestAnimationFrame((()=>{n.src=H}))},n.onerror=()=>e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const r=new Blob([new Uint8Array(t)],{type:"image/png"});n.src=t.byteLength?URL.createObjectURL(r):H}(t,e)}(n,((t,n)=>{null!=t?e(t):null!=n&&e(null,n,{cacheControl:i,expires:a})}))}));return{cancel:()=>{i.cancel(),r()}}};function J(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function Q(t,e,n){if(n&&n[t]){const r=n[t].indexOf(e);-1!==r&&n[t].splice(r,1)}}class tt{constructor(t,e={}){s(this,e),this.type=t}}class et extends tt{constructor(t,e={}){super("error",s({error:t},e))}}class nt{on(t,e){return this._listeners=this._listeners||{},J(t,e,this._listeners),this}off(t,e){return Q(t,e,this._listeners),Q(t,e,this._oneTimeListeners),this}once(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},J(t,e,this._oneTimeListeners),this}fire(t,e){"string"==typeof t&&(t=new tt(t,e||{}));const n=t.type;if(this.listens(n)){t.target=this;const e=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];for(const n of e)n.call(this,t);const r=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];for(const a of r)Q(n,a,this._oneTimeListeners),a.call(this,t);const i=this._eventedParent;i&&(s(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),i.fire(t))}else t instanceof et&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,e){return this._eventedParent=t,this._eventedParentData=e,this}}var rt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class it{constructor(t,e,n,r){this.message=(t?`${t}: `:"")+n,r&&(this.identifier=r),null!=e&&e.__line__&&(this.line=e.__line__)}}function at(t){const e=t.value;return e?[new it(t.key,e,"constants have been deprecated as of v8")]:[]}function ot(t,...e){for(const n of e)for(const e in n)t[e]=n[e];return t}function st(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function lt(t){if(Array.isArray(t))return t.map(lt);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const n in t)e[n]=lt(t[n]);return e}return st(t)}class ct extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}class ut{constructor(t,e=[]){this.parent=t,this.bindings={};for(const[n,r]of e)this.bindings[n]=r}concat(t){return new ut(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const ht={kind:"null"},dt={kind:"number"},pt={kind:"string"},ft={kind:"boolean"},mt={kind:"color"},gt={kind:"object"},yt={kind:"value"},vt={kind:"collator"},_t={kind:"formatted"},xt={kind:"padding"},bt={kind:"resolvedImage"};function wt(t,e){return{kind:"array",itemType:t,N:e}}function St(t){if("array"===t.kind){const e=St(t.itemType);return"number"==typeof t.N?`array<${e}, ${t.N}>`:"value"===t.itemType.kind?"array":`array<${e}>`}return t.kind}const Mt=[ht,dt,pt,ft,mt,_t,gt,wt(yt),xt,bt];function Et(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Et(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(const t of Mt)if(!Et(t,e))return null}return`Expected ${St(t)} but found ${St(e)} instead.`}function kt(t,e){return e.some((e=>e.kind===t.kind))}function Tt(t,e){return e.some((e=>"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t))}var Ct,It={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Pt(t){return(t=Math.round(t))<0?0:t>255?255:t}function At(t){return Pt("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function zt(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function Lt(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{Ct={}.parseCSSColor=function(t){var e,n=t.replace(/ /g,"").toLowerCase();if(n in It)return It[n].slice();if("#"===n[0])return 4===n.length?(e=parseInt(n.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===n.length&&(e=parseInt(n.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var r=n.indexOf("("),i=n.indexOf(")");if(-1!==r&&i+1===n.length){var a=n.substr(0,r),o=n.substr(r+1,i-(r+1)).split(","),s=1;switch(a){case"rgba":if(4!==o.length)return null;s=zt(o.pop());case"rgb":return 3!==o.length?null:[At(o[0]),At(o[1]),At(o[2]),s];case"hsla":if(4!==o.length)return null;s=zt(o.pop());case"hsl":if(3!==o.length)return null;var l=(parseFloat(o[0])%360+360)%360/360,c=zt(o[1]),u=zt(o[2]),h=u<=.5?u*(c+1):u+c-u*c,d=2*u-h;return[Pt(255*Lt(d,h,l+1/3)),Pt(255*Lt(d,h,l)),Pt(255*Lt(d,h,l-1/3)),s];default:return null}}return null}}catch(t){}class Rt{constructor(t,e,n,r=1){this.r=t,this.g=e,this.b=n,this.a=r}static parse(t){if(!t)return;if(t instanceof Rt)return t;if("string"!=typeof t)return;const e=Ct(t);return e?new Rt(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]):void 0}toString(){const[t,e,n,r]=this.toArray();return`rgba(${Math.round(t)},${Math.round(e)},${Math.round(n)},${r})`}toArray(){const{r:t,g:e,b:n,a:r}=this;return 0===r?[0,0,0,0]:[255*t/r,255*e/r,255*n/r,r]}}Rt.black=new Rt(0,0,0,1),Rt.white=new Rt(1,1,1,1),Rt.transparent=new Rt(0,0,0,0),Rt.red=new Rt(1,0,0,1);class Dt{constructor(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ot{constructor(t,e,n,r,i){this.text=t,this.image=e,this.scale=n,this.fontStack=r,this.textColor=i}}class Bt{constructor(t){this.sections=t}static fromString(t){return new Bt([new Ot(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((t=>0!==t.text.length||t.image&&0!==t.image.name.length))}static factory(t){return t instanceof Bt?t:Bt.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map((t=>t.text)).join("")}}class Ft{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Ft)return t;if("number"==typeof t)return new Ft([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const e of t)if("number"!=typeof e)return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new Ft(t)}}toString(){return JSON.stringify(this.values)}}class Nt{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new Nt({name:t,available:!1}):null}}function Zt(t,e,n,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:`Invalid rgba value [${[t,e,n,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof r?[t,e,n,r]:[t,e,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ut(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof Rt)return!0;if(t instanceof Dt)return!0;if(t instanceof Bt)return!0;if(t instanceof Ft)return!0;if(t instanceof Nt)return!0;if(Array.isArray(t)){for(const e of t)if(!Ut(e))return!1;return!0}if("object"==typeof t){for(const e in t)if(!Ut(t[e]))return!1;return!0}return!1}function jt(t){if(null===t)return ht;if("string"==typeof t)return pt;if("boolean"==typeof t)return ft;if("number"==typeof t)return dt;if(t instanceof Rt)return mt;if(t instanceof Dt)return vt;if(t instanceof Bt)return _t;if(t instanceof Ft)return xt;if(t instanceof Nt)return bt;if(Array.isArray(t)){const e=t.length;let n;for(const r of t){const t=jt(r);if(n){if(n===t)continue;n=yt;break}n=t}return wt(n||yt,e)}return gt}function Vt(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Rt||t instanceof Bt||t instanceof Ft||t instanceof Nt?t.toString():JSON.stringify(t)}class qt{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(2!==t.length)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Ut(t[1]))return e.error("invalid value");const n=t[1];let r=jt(n);const i=e.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new qt(r,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class $t{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const Gt={string:pt,number:dt,boolean:ft,object:gt};class Wt{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let n,r=1;const i=t[0];if("array"===i){let i,a;if(t.length>2){const n=t[1];if("string"!=typeof n||!(n in Gt)||"object"===n)return e.error('The item type argument of "array" must be one of string, number, boolean',1);i=Gt[n],r++}else i=yt;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);a=t[2],r++}n=wt(i,a)}else{if(!Gt[i])throw new Error(`Types doesn't contain name = ${i}`);n=Gt[i]}const a=[];for(;r<t.length;r++){const n=e.parse(t[r],r,yt);if(!n)return null;a.push(n)}return new Wt(n,a)}evaluate(t){for(let e=0;e<this.args.length;e++){const n=this.args[e].evaluate(t);if(!Et(this.type,jt(n)))return n;if(e===this.args.length-1)throw new $t(`Expected value to be of type ${St(this.type)}, but found ${St(jt(n))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}const Ht={"to-boolean":ft,"to-color":mt,"to-number":dt,"to-string":pt};class Xt{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[0];if(!Ht[n])throw new Error(`Can't parse ${n} as it is not part of the known types`);if(("to-boolean"===n||"to-string"===n)&&2!==t.length)return e.error("Expected one argument.");const r=Ht[n],i=[];for(let a=1;a<t.length;a++){const n=e.parse(t[a],a,yt);if(!n)return null;i.push(n)}return new Xt(r,i)}evaluate(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){let e,n;for(const r of this.args){if(e=r.evaluate(t),n=null,e instanceof Rt)return e;if("string"==typeof e){const n=t.parseColor(e);if(n)return n}else if(Array.isArray(e)&&(n=e.length<3||e.length>4?`Invalid rbga value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:Zt(e[0],e[1],e[2],e[3]),!n))return new Rt(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new $t(n||`Could not parse color from value '${"string"==typeof e?e:JSON.stringify(e)}'`)}if("padding"===this.type.kind){let e;for(const n of this.args){e=n.evaluate(t);const r=Ft.parse(e);if(r)return r}throw new $t(`Could not parse padding from value '${"string"==typeof e?e:JSON.stringify(e)}'`)}if("number"===this.type.kind){let e=null;for(const n of this.args){if(e=n.evaluate(t),null===e)return 0;const r=Number(e);if(!isNaN(r))return r}throw new $t(`Could not convert ${JSON.stringify(e)} to number.`)}return"formatted"===this.type.kind?Bt.fromString(Vt(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?Nt.fromString(Vt(this.args[0].evaluate(t))):Vt(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}const Kt=["Unknown","Point","LineString","Polygon"];class Yt{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Kt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Rt.parse(t)),e}}class Jt{constructor(t,e,n,r){this.name=t,this.type=e,this._evaluate=n,this.args=r}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,e){const n=t[0],r=Jt.definitions[n];if(!r)return e.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const i=Array.isArray(r)?r[0]:r.type,a=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,o=a.filter((([e])=>!Array.isArray(e)||e.length===t.length-1));let s=null;for(const[l,c]of o){s=new be(e.registry,e.path,null,e.scope);const r=[];let a=!1;for(let e=1;e<t.length;e++){const n=t[e],i=Array.isArray(l)?l[e-1]:l.type,o=s.parse(n,1+r.length,i);if(!o){a=!0;break}r.push(o)}if(!a)if(Array.isArray(l)&&l.length!==r.length)s.error(`Expected ${l.length} arguments, but found ${r.length} instead.`);else{for(let t=0;t<r.length;t++){const e=Array.isArray(l)?l[t]:l.type,n=r[t];s.concat(t+1).checkSubtype(e,n.type)}if(0===s.errors.length)return new Jt(n,i,c,r)}}if(1===o.length)e.errors.push(...s.errors);else{const n=(o.length?o:a).map((([t])=>{return e=t,Array.isArray(e)?`(${e.map(St).join(", ")})`:`(${St(e.type)}...)`;var e})).join(" | "),r=[];for(let i=1;i<t.length;i++){const n=e.parse(t[i],1+r.length);if(!n)return null;r.push(St(n.type))}e.error(`Expected arguments of type ${n}, but found (${r.join(", ")}) instead.`)}return null}static register(t,e){Jt.definitions=e;for(const n in e)t[n]=Jt}}class Qt{constructor(t,e,n){this.type=vt,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");const r=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,ft);if(!r)return null;const i=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,ft);if(!i)return null;let a=null;return n.locale&&(a=e.parse(n.locale,1,pt),!a)?null:new Qt(r,i,a)}evaluate(t){return new Dt(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}const te=8192;function ee(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function ne(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function re(t,e){const n=(180+t[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,i=Math.pow(2,e.z);return[Math.round(n*i*te),Math.round(r*i*te)]}function ie(t,e,n){const r=t[0]-e[0],i=t[1]-e[1],a=t[0]-n[0],o=t[1]-n[1];return r*o-a*i==0&&r*a<=0&&i*o<=0}function ae(t,e){let n=!1;for(let o=0,s=e.length;o<s;o++){const s=e[o];for(let e=0,o=s.length;e<o-1;e++){if(ie(t,s[e],s[e+1]))return!1;(i=s[e])[1]>(r=t)[1]!=(a=s[e+1])[1]>r[1]&&r[0]<(a[0]-i[0])*(r[1]-i[1])/(a[1]-i[1])+i[0]&&(n=!n)}}var r,i,a;return n}function oe(t,e){for(let n=0;n<e.length;n++)if(ae(t,e[n]))return!0;return!1}function se(t,e,n,r){const i=r[0]-n[0],a=r[1]-n[1],o=(t[0]-n[0])*a-i*(t[1]-n[1]),s=(e[0]-n[0])*a-i*(e[1]-n[1]);return o>0&&s<0||o<0&&s>0}function le(t,e,n){for(const c of n)for(let n=0;n<c.length-1;++n)if(0!=(s=[(o=c[n+1])[0]-(a=c[n])[0],o[1]-a[1]])[0]*(l=[(i=e)[0]-(r=t)[0],i[1]-r[1]])[1]-s[1]*l[0]&&se(r,i,a,o)&&se(a,o,r,i))return!0;var r,i,a,o,s,l;return!1}function ce(t,e){for(let n=0;n<t.length;++n)if(!ae(t[n],e))return!1;for(let n=0;n<t.length-1;++n)if(le(t[n],t[n+1],e))return!1;return!0}function ue(t,e){for(let n=0;n<e.length;n++)if(ce(t,e[n]))return!0;return!1}function he(t,e,n){const r=[];for(let i=0;i<t.length;i++){const a=[];for(let r=0;r<t[i].length;r++){const o=re(t[i][r],n);ee(e,o),a.push(o)}r.push(a)}return r}function de(t,e,n){const r=[];for(let i=0;i<t.length;i++){const a=he(t[i],e,n);r.push(a)}return r}function pe(t,e,n,r){if(t[0]<n[0]||t[0]>n[2]){const e=.5*r;let i=t[0]-n[0]>e?-r:n[0]-t[0]>e?r:0;0===i&&(i=t[0]-n[2]>e?-r:n[2]-t[0]>e?r:0),t[0]+=i}ee(e,t)}function fe(t,e,n,r){const i=Math.pow(2,r.z)*te,a=[r.x*te,r.y*te],o=[];for(const s of t)for(const t of s){const r=[t.x+a[0],t.y+a[1]];pe(r,e,n,i),o.push(r)}return o}function me(t,e,n,r){const i=Math.pow(2,r.z)*te,a=[r.x*te,r.y*te],o=[];for(const l of t){const t=[];for(const n of l){const r=[n.x+a[0],n.y+a[1]];ee(e,r),t.push(r)}o.push(t)}if(e[2]-e[0]<=i/2){(s=e)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const t of o)for(const r of t)pe(r,e,n,i)}var s;return o}class ge{constructor(t,e){this.type=ft,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Ut(t[1])){const e=t[1];if("FeatureCollection"===e.type)for(let t=0;t<e.features.length;++t){const n=e.features[t].geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new ge(e,e.features[t].geometry)}else if("Feature"===e.type){const t=e.geometry.type;if("Polygon"===t||"MultiPolygon"===t)return new ge(e,e.geometry)}else if("Polygon"===e.type||"MultiPolygon"===e.type)return new ge(e,e)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){const a=he(e.coordinates,r,i),o=fe(t.geometry(),n,r,i);if(!ne(n,r))return!1;for(const t of o)if(!ae(t,a))return!1}if("MultiPolygon"===e.type){const a=de(e.coordinates,r,i),o=fe(t.geometry(),n,r,i);if(!ne(n,r))return!1;for(const t of o)if(!oe(t,a))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){const a=he(e.coordinates,r,i),o=me(t.geometry(),n,r,i);if(!ne(n,r))return!1;for(const t of o)if(!ce(t,a))return!1}if("MultiPolygon"===e.type){const a=de(e.coordinates,r,i),o=me(t.geometry(),n,r,i);if(!ne(n,r))return!1;for(const t of o)if(!ue(t,a))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function ye(t){if(t instanceof Jt){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof ge)return!1;let e=!0;return t.eachChild((t=>{e&&!ye(t)&&(e=!1)})),e}function ve(t){if(t instanceof Jt&&"feature-state"===t.name)return!1;let e=!0;return t.eachChild((t=>{e&&!ve(t)&&(e=!1)})),e}function _e(t,e){if(t instanceof Jt&&e.indexOf(t.name)>=0)return!1;let n=!0;return t.eachChild((t=>{n&&!_e(t,e)&&(n=!1)})),n}class xe{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");const n=t[1];return e.scope.has(n)?new xe(n,e.scope.get(n)):e.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class be{constructor(t,e=[],n,r=new ut,i=[]){this.registry=t,this.path=e,this.key=e.map((t=>`[${t}]`)).join(""),this.scope=r,this.errors=i,this.expectedType=n}parse(t,e,n,r,i={}){return e?this.concat(e,n,r)._parse(t,i):this._parse(t,i)}_parse(t,e){function n(t,e,n){return"assert"===n?new Wt(e,[t]):"coerce"===n?new Xt(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=t[0];if("string"!=typeof r)return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const i=this.registry[r];if(i){let r=i.parse(t,this);if(!r)return null;if(this.expectedType){const t=this.expectedType,i=r.type;if("string"!==t.kind&&"number"!==t.kind&&"boolean"!==t.kind&&"object"!==t.kind&&"array"!==t.kind||"value"!==i.kind)if("color"!==t.kind&&"formatted"!==t.kind&&"resolvedImage"!==t.kind||"value"!==i.kind&&"string"!==i.kind)if("padding"!==t.kind||"value"!==i.kind&&"number"!==i.kind&&"array"!==i.kind){if(this.checkSubtype(t,i))return null}else r=n(r,t,e.typeAnnotation||"coerce");else r=n(r,t,e.typeAnnotation||"coerce");else r=n(r,t,e.typeAnnotation||"assert")}if(!(r instanceof qt)&&"resolvedImage"!==r.type.kind&&we(r)){const e=new Yt;try{r=new qt(r.type,r.evaluate(e))}catch(t){return this.error(t.message),null}}return r}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,e,n){const r="number"==typeof t?this.path.concat(t):this.path,i=n?this.scope.concat(n):this.scope;return new be(this.registry,r,e||null,i,this.errors)}error(t,...e){const n=`${this.key}${e.map((t=>`[${t}]`)).join("")}`;this.errors.push(new ct(n,t))}checkSubtype(t,e){const n=Et(t,e);return n&&this.error(n),n}}function we(t){if(t instanceof xe)return we(t.boundExpression);if(t instanceof Jt&&"error"===t.name)return!1;if(t instanceof Qt)return!1;if(t instanceof ge)return!1;const e=t instanceof Xt||t instanceof Wt;let n=!0;return t.eachChild((t=>{n=e?n&&we(t):n&&t instanceof qt})),!!n&&ye(t)&&_e(t,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Se(t,e){const n=t.length-1;let r,i,a=0,o=n,s=0;for(;a<=o;)if(s=Math.floor((a+o)/2),r=t[s],i=t[s+1],r<=e){if(s===n||e<i)return s;a=s+1}else{if(!(r>e))throw new $t("Input is not a number.");o=s-1}return 0}class Me{constructor(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[r,i]of n)this.labels.push(r),this.outputs.push(i)}static parse(t,e){if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");const n=e.parse(t[1],1,dt);if(!n)return null;const r=[];let i=null;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(let a=1;a<t.length;a+=2){const n=1===a?-1/0:t[a],o=t[a+1],s=a,l=a+1;if("number"!=typeof n)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(r.length&&r[r.length-1][0]>=n)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const c=e.parse(o,l,i);if(!c)return null;i=i||c.type,r.push([n,c])}return new Me(i,n,r)}evaluate(t){const e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);const r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);const i=e.length;return r>=e[i-1]?n[i-1].evaluate(t):n[Se(e,r)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}}function Ee(t,e,n){return t*(1-n)+e*n}var ke=Object.freeze({__proto__:null,number:Ee,color:function(t,e,n){return new Rt(Ee(t.r,e.r,n),Ee(t.g,e.g,n),Ee(t.b,e.b,n),Ee(t.a,e.a,n))},array:function(t,e,n){return t.map(((t,r)=>Ee(t,e[r],n)))},padding:function(t,e,n){const r=t.values,i=e.values;return new Ft([Ee(r[0],i[0],n),Ee(r[1],i[1],n),Ee(r[2],i[2],n),Ee(r[3],i[3],n)])}});const Te=.95047,Ce=1.08883,Ie=4/29,Pe=6/29,Ae=3*Pe*Pe,ze=Math.PI/180,Le=180/Math.PI;function Re(t){return t>.008856451679035631?Math.pow(t,1/3):t/Ae+Ie}function De(t){return t>Pe?t*t*t:Ae*(t-Ie)}function Oe(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Be(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Fe(t){const e=Be(t.r),n=Be(t.g),r=Be(t.b),i=Re((.4124564*e+.3575761*n+.1804375*r)/Te),a=Re((.2126729*e+.7151522*n+.072175*r)/1);return{l:116*a-16,a:500*(i-a),b:200*(a-Re((.0193339*e+.119192*n+.9503041*r)/Ce)),alpha:t.a}}function Ne(t){let e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=1*De(e),n=Te*De(n),r=Ce*De(r),new Rt(Oe(3.2404542*n-1.5371385*e-.4985314*r),Oe(-.969266*n+1.8760108*e+.041556*r),Oe(.0556434*n-.2040259*e+1.0572252*r),t.alpha)}function Ze(t,e,n){const r=e-t;return t+n*(r>180||r<-180?r-360*Math.round(r/360):r)}const Ue={forward:Fe,reverse:Ne,interpolate:function(t,e,n){return{l:Ee(t.l,e.l,n),a:Ee(t.a,e.a,n),b:Ee(t.b,e.b,n),alpha:Ee(t.alpha,e.alpha,n)}}},je={forward:function(t){const{l:e,a:n,b:r}=Fe(t),i=Math.atan2(r,n)*Le;return{h:i<0?i+360:i,c:Math.sqrt(n*n+r*r),l:e,alpha:t.a}},reverse:function(t){const e=t.h*ze,n=t.c;return Ne({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:Ze(t.h,e.h,n),c:Ee(t.c,e.c,n),l:Ee(t.l,e.l,n),alpha:Ee(t.alpha,e.alpha,n)}}};var Ve=Object.freeze({__proto__:null,lab:Ue,hcl:je});class qe{constructor(t,e,n,r,i){this.type=t,this.operator=e,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(const[a,o]of i)this.labels.push(a),this.outputs.push(o)}static interpolationFactor(t,n,r,i){let a=0;if("exponential"===t.name)a=$e(n,t.base,r,i);else if("linear"===t.name)a=$e(n,1,r,i);else if("cubic-bezier"===t.name){const o=t.controlPoints;a=new e(o[0],o[1],o[2],o[3]).solve($e(n,1,r,i))}return a}static parse(t,e){let[n,r,i,...a]=t;if(!Array.isArray(r)||0===r.length)return e.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){const t=r[1];if("number"!=typeof t)return e.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:t}}else{if("cubic-bezier"!==r[0])return e.error(`Unknown interpolation type ${String(r[0])}`,1,0);{const t=r.slice(1);if(4!==t.length||t.some((t=>"number"!=typeof t||t<0||t>1)))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:t}}}if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(i=e.parse(i,2,dt),!i)return null;const o=[];let s=null;"interpolate-hcl"===n||"interpolate-lab"===n?s=mt:e.expectedType&&"value"!==e.expectedType.kind&&(s=e.expectedType);for(let l=0;l<a.length;l+=2){const t=a[l],n=a[l+1],r=l+3,i=l+4;if("number"!=typeof t)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',r);if(o.length&&o[o.length-1][0]>=t)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',r);const c=e.parse(n,i,s);if(!c)return null;s=s||c.type,o.push([t,c])}return"number"===s.kind||"color"===s.kind||"padding"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new qe(s,n,r,i,o):e.error(`Type ${St(s)} is not interpolatable.`)}evaluate(t){const e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);const r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);const i=e.length;if(r>=e[i-1])return n[i-1].evaluate(t);const a=Se(e,r),o=qe.interpolationFactor(this.interpolation,r,e[a],e[a+1]),s=n[a].evaluate(t),l=n[a+1].evaluate(t);return"interpolate"===this.operator?ke[this.type.kind.toLowerCase()](s,l,o):"interpolate-hcl"===this.operator?je.reverse(je.interpolate(je.forward(s),je.forward(l),o)):Ue.reverse(Ue.interpolate(Ue.forward(s),Ue.forward(l),o))}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}}function $e(t,e,n,r){const i=r-n,a=t-n;return 0===i?0:1===e?a/i:(Math.pow(e,a)-1)/(Math.pow(e,i)-1)}class Ge{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let n=null;const r=e.expectedType;r&&"value"!==r.kind&&(n=r);const i=[];for(const o of t.slice(1)){const t=e.parse(o,1+i.length,n,void 0,{typeAnnotation:"omit"});if(!t)return null;n=n||t.type,i.push(t)}if(!n)throw new Error("No output type");const a=r&&i.some((t=>Et(r,t.type)));return new Ge(a?yt:n,i)}evaluate(t){let e,n=null,r=0;for(const i of this.args)if(r++,n=i.evaluate(t),n&&n instanceof Nt&&!n.available&&(e||(e=n.name),n=null,r===this.args.length&&(n=e)),null!==n)break;return n}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}class We{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const n=[];for(let i=1;i<t.length-1;i+=2){const r=t[i];if("string"!=typeof r)return e.error(`Expected string, but found ${typeof r} instead.`,i);if(/[^a-zA-Z0-9_]/.test(r))return e.error("Variable names must contain only alphanumeric characters or '_'.",i);const a=e.parse(t[i+1],i+1);if(!a)return null;n.push([r,a])}const r=e.parse(t[t.length-1],t.length-1,e.expectedType,n);return r?new We(n,r):null}outputDefined(){return this.result.outputDefined()}}class He{constructor(t,e,n){this.type=t,this.index=e,this.input=n}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,dt),r=e.parse(t[2],2,wt(e.expectedType||yt));return n&&r?new He(r.type.itemType,n,r):null}evaluate(t){const e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new $t(`Array index out of bounds: ${e} < 0.`);if(e>=n.length)throw new $t(`Array index out of bounds: ${e} > ${n.length-1}.`);if(e!==Math.floor(e))throw new $t(`Array index must be an integer, but found ${e} instead.`);return n[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class Xe{constructor(t,e){this.type=ft,this.needle=t,this.haystack=e}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,yt),r=e.parse(t[2],2,yt);return n&&r?kt(n.type,[ft,pt,dt,ht,yt])?new Xe(n,r):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${St(n.type)} instead`):null}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!n)return!1;if(!Tt(e,["boolean","string","number","null"]))throw new $t(`Expected first argument to be of type boolean, string, number or null, but found ${St(jt(e))} instead.`);if(!Tt(n,["string","array"]))throw new $t(`Expected second argument to be of type array or string, but found ${St(jt(n))} instead.`);return n.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class Ke{constructor(t,e,n){this.type=dt,this.needle=t,this.haystack=e,this.fromIndex=n}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,yt),r=e.parse(t[2],2,yt);if(!n||!r)return null;if(!kt(n.type,[ft,pt,dt,ht,yt]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${St(n.type)} instead`);if(4===t.length){const i=e.parse(t[3],3,dt);return i?new Ke(n,r,i):null}return new Ke(n,r)}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!Tt(e,["boolean","string","number","null"]))throw new $t(`Expected first argument to be of type boolean, string, number or null, but found ${St(jt(e))} instead.`);if(!Tt(n,["string","array"]))throw new $t(`Expected second argument to be of type array or string, but found ${St(jt(n))} instead.`);if(this.fromIndex){const r=this.fromIndex.evaluate(t);return n.indexOf(e,r)}return n.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class Ye{constructor(t,e,n,r,i,a){this.inputType=t,this.type=e,this.input=n,this.cases=r,this.outputs=i,this.otherwise=a}static parse(t,e){if(t.length<5)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return e.error("Expected an even number of arguments.");let n,r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);const i={},a=[];for(let l=2;l<t.length-1;l+=2){let o=t[l];const s=t[l+1];Array.isArray(o)||(o=[o]);const c=e.concat(l);if(0===o.length)return c.error("Expected at least one branch label.");for(const t of o){if("number"!=typeof t&&"string"!=typeof t)return c.error("Branch labels must be numbers or strings.");if("number"==typeof t&&Math.abs(t)>Number.MAX_SAFE_INTEGER)return c.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof t&&Math.floor(t)!==t)return c.error("Numeric branch labels must be integer values.");if(n){if(c.checkSubtype(n,jt(t)))return null}else n=jt(t);if(void 0!==i[String(t)])return c.error("Branch labels must be unique.");i[String(t)]=a.length}const u=e.parse(s,l,r);if(!u)return null;r=r||u.type,a.push(u)}const o=e.parse(t[1],1,yt);if(!o)return null;const s=e.parse(t[t.length-1],t.length-1,r);return s?"value"!==o.type.kind&&e.concat(1).checkSubtype(n,o.type)?null:new Ye(n,r,o,i,a,s):null}evaluate(t){const e=this.input.evaluate(t);return(jt(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}}class Je{constructor(t,e,n){this.type=t,this.branches=e,this.otherwise=n}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return e.error("Expected an odd number of arguments.");let n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);const r=[];for(let a=1;a<t.length-1;a+=2){const i=e.parse(t[a],a,ft);if(!i)return null;const o=e.parse(t[a+1],a+1,n);if(!o)return null;r.push([i,o]),n=n||o.type}const i=e.parse(t[t.length-1],t.length-1,n);if(!i)return null;if(!n)throw new Error("Can't infer output type");return new Je(n,r,i)}evaluate(t){for(const[e,n]of this.branches)if(e.evaluate(t))return n.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,n]of this.branches)t(e),t(n);t(this.otherwise)}outputDefined(){return this.branches.every((([t,e])=>e.outputDefined()))&&this.otherwise.outputDefined()}}class Qe{constructor(t,e,n,r){this.type=t,this.input=e,this.beginIndex=n,this.endIndex=r}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,yt),r=e.parse(t[2],2,dt);if(!n||!r)return null;if(!kt(n.type,[wt(yt),pt,yt]))return e.error(`Expected first argument to be of type array or string, but found ${St(n.type)} instead`);if(4===t.length){const i=e.parse(t[3],3,dt);return i?new Qe(n.type,n,r,i):null}return new Qe(n.type,n,r)}evaluate(t){const e=this.input.evaluate(t),n=this.beginIndex.evaluate(t);if(!Tt(e,["string","array"]))throw new $t(`Expected first argument to be of type array or string, but found ${St(jt(e))} instead.`);if(this.endIndex){const r=this.endIndex.evaluate(t);return e.slice(n,r)}return e.slice(n)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function tn(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function en(t,e,n,r){return 0===r.compare(e,n)}function nn(t,e,n){const r="=="!==t&&"!="!==t;return class i{constructor(t,e,n){this.type=ft,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}static parse(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");const n=t[0];let a=e.parse(t[1],1,yt);if(!a)return null;if(!tn(n,a.type))return e.concat(1).error(`"${n}" comparisons are not supported for type '${St(a.type)}'.`);let o=e.parse(t[2],2,yt);if(!o)return null;if(!tn(n,o.type))return e.concat(2).error(`"${n}" comparisons are not supported for type '${St(o.type)}'.`);if(a.type.kind!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return e.error(`Cannot compare types '${St(a.type)}' and '${St(o.type)}'.`);r&&("value"===a.type.kind&&"value"!==o.type.kind?a=new Wt(o.type,[a]):"value"!==a.type.kind&&"value"===o.type.kind&&(o=new Wt(a.type,[o])));let s=null;if(4===t.length){if("string"!==a.type.kind&&"string"!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return e.error("Cannot use collator to compare non-string types.");if(s=e.parse(t[3],3,vt),!s)return null}return new i(a,o,s)}evaluate(i){const a=this.lhs.evaluate(i),o=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){const e=jt(a),n=jt(o);if(e.kind!==n.kind||"string"!==e.kind&&"number"!==e.kind)throw new $t(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${e.kind}, ${n.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const t=jt(a),n=jt(o);if("string"!==t.kind||"string"!==n.kind)return e(i,a,o)}return this.collator?n(i,a,o,this.collator.evaluate(i)):e(i,a,o)}eachChild(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}outputDefined(){return!0}}}const rn=nn("==",(function(t,e,n){return e===n}),en),an=nn("!=",(function(t,e,n){return e!==n}),(function(t,e,n,r){return!en(0,e,n,r)})),on=nn("<",(function(t,e,n){return e<n}),(function(t,e,n,r){return r.compare(e,n)<0})),sn=nn(">",(function(t,e,n){return e>n}),(function(t,e,n,r){return r.compare(e,n)>0})),ln=nn("<=",(function(t,e,n){return e<=n}),(function(t,e,n,r){return r.compare(e,n)<=0})),cn=nn(">=",(function(t,e,n){return e>=n}),(function(t,e,n,r){return r.compare(e,n)>=0}));class un{constructor(t,e,n,r,i){this.type=pt,this.number=t,this.locale=e,this.currency=n,this.minFractionDigits=r,this.maxFractionDigits=i}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");const n=e.parse(t[1],1,dt);if(!n)return null;const r=t[2];if("object"!=typeof r||Array.isArray(r))return e.error("NumberFormat options argument must be an object.");let i=null;if(r.locale&&(i=e.parse(r.locale,1,pt),!i))return null;let a=null;if(r.currency&&(a=e.parse(r.currency,1,pt),!a))return null;let o=null;if(r["min-fraction-digits"]&&(o=e.parse(r["min-fraction-digits"],1,dt),!o))return null;let s=null;return r["max-fraction-digits"]&&(s=e.parse(r["max-fraction-digits"],1,dt),!s)?null:new un(n,i,a,o,s)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class hn{constructor(t){this.type=_t,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[1];if(!Array.isArray(n)&&"object"==typeof n)return e.error("First argument must be an image or text section.");const r=[];let i=!1;for(let a=1;a<=t.length-1;++a){const n=t[a];if(i&&"object"==typeof n&&!Array.isArray(n)){i=!1;let t=null;if(n["font-scale"]&&(t=e.parse(n["font-scale"],1,dt),!t))return null;let a=null;if(n["text-font"]&&(a=e.parse(n["text-font"],1,wt(pt)),!a))return null;let o=null;if(n["text-color"]&&(o=e.parse(n["text-color"],1,mt),!o))return null;const s=r[r.length-1];s.scale=t,s.font=a,s.textColor=o}else{const n=e.parse(t[a],1,yt);if(!n)return null;const o=n.type.kind;if("string"!==o&&"value"!==o&&"null"!==o&&"resolvedImage"!==o)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,r.push({content:n,scale:null,font:null,textColor:null})}}return new hn(r)}evaluate(t){return new Bt(this.sections.map((e=>{const n=e.content.evaluate(t);return jt(n)===bt?new Ot("",n,null,null,null):new Ot(Vt(n),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}}class dn{constructor(t){this.type=bt,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");const n=e.parse(t[1],1,pt);return n?new dn(n):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),n=Nt.fromString(e);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(e)>-1),n}eachChild(t){t(this.input)}outputDefined(){return!1}}class pn{constructor(t){this.type=dt,this.input=t}static parse(t,e){if(2!==t.length)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error(`Expected argument of type string or array, but found ${St(n.type)} instead.`):new pn(n):null}evaluate(t){const e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new $t(`Expected value to be of type string or array, but found ${St(jt(e))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const fn={"==":rn,"!=":an,">":sn,"<":on,">=":cn,"<=":ln,array:Wt,at:He,boolean:Wt,case:Je,coalesce:Ge,collator:Qt,format:hn,image:dn,in:Xe,"index-of":Ke,interpolate:qe,"interpolate-hcl":qe,"interpolate-lab":qe,length:pn,let:We,literal:qt,match:Ye,number:Wt,"number-format":un,object:Wt,slice:Qe,step:Me,string:Wt,"to-boolean":Xt,"to-color":Xt,"to-number":Xt,"to-string":Xt,var:xe,within:ge};function mn(t,[e,n,r,i]){e=e.evaluate(t),n=n.evaluate(t),r=r.evaluate(t);const a=i?i.evaluate(t):1,o=Zt(e,n,r,a);if(o)throw new $t(o);return new Rt(e/255*a,n/255*a,r/255*a,a)}function gn(t,e){return t in e}function yn(t,e){const n=e[t];return void 0===n?null:n}function vn(t){return{type:t}}function _n(t){return{result:"success",value:t}}function xn(t){return{result:"error",value:t}}function bn(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function wn(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Sn(t){return!!t.expression&&t.expression.interpolated}function Mn(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function En(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function kn(t){return t}function Tn(t,e){const n="color"===e.type,r=t.stops&&"object"==typeof t.stops[0][0],i=r||!(r||void 0!==t.property),a=t.type||(Sn(e)?"exponential":"interval");if(n||"padding"===e.type){const r=n?Rt.parse:Ft.parse;(t=ot({},t)).stops&&(t.stops=t.stops.map((t=>[t[0],r(t[1])]))),t.default=r(t.default?t.default:e.default)}if(t.colorSpace&&"rgb"!==t.colorSpace&&!Ve[t.colorSpace])throw new Error(`Unknown color space: ${t.colorSpace}`);let o,s,l;if("exponential"===a)o=An;else if("interval"===a)o=Pn;else if("categorical"===a){o=In,s=Object.create(null);for(const e of t.stops)s[e[0]]=e[1];l=typeof t.stops[0][0]}else{if("identity"!==a)throw new Error(`Unknown function type "${a}"`);o=zn}if(r){const n={},r=[];for(let e=0;e<t.stops.length;e++){const i=t.stops[e],a=i[0].zoom;void 0===n[a]&&(n[a]={zoom:a,type:t.type,property:t.property,default:t.default,stops:[]},r.push(a)),n[a].stops.push([i[0].value,i[1]])}const i=[];for(const t of r)i.push([n[t].zoom,Tn(n[t],e)]);const a={name:"linear"};return{kind:"composite",interpolationType:a,interpolationFactor:qe.interpolationFactor.bind(void 0,a),zoomStops:i.map((t=>t[0])),evaluate:({zoom:n},r)=>An({stops:i,base:t.base},e,n).evaluate(n,r)}}if(i){const n="exponential"===a?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:n,interpolationFactor:qe.interpolationFactor.bind(void 0,n),zoomStops:t.stops.map((t=>t[0])),evaluate:({zoom:n})=>o(t,e,n,s,l)}}return{kind:"source",evaluate(n,r){const i=r&&r.properties?r.properties[t.property]:void 0;return void 0===i?Cn(t.default,e.default):o(t,e,i,s,l)}}}function Cn(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function In(t,e,n,r,i){return Cn(typeof n===i?r[n]:void 0,t.default,e.default)}function Pn(t,e,n){if("number"!==Mn(n))return Cn(t.default,e.default);const r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];const i=Se(t.stops.map((t=>t[0])),n);return t.stops[i][1]}function An(t,e,n){const r=void 0!==t.base?t.base:1;if("number"!==Mn(n))return Cn(t.default,e.default);const i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];const a=Se(t.stops.map((t=>t[0])),n),o=function(t,e,n,r){const i=r-n,a=t-n;return 0===i?0:1===e?a/i:(Math.pow(e,a)-1)/(Math.pow(e,i)-1)}(n,r,t.stops[a][0],t.stops[a+1][0]),s=t.stops[a][1],l=t.stops[a+1][1];let c=ke[e.type]||kn;if(t.colorSpace&&"rgb"!==t.colorSpace){const e=Ve[t.colorSpace];c=(t,n)=>e.reverse(e.interpolate(e.forward(t),e.forward(n),o))}return"function"==typeof s.evaluate?{evaluate(...t){const e=s.evaluate.apply(void 0,t),n=l.evaluate.apply(void 0,t);if(void 0!==e&&void 0!==n)return c(e,n,o)}}:c(s,l,o)}function zn(t,e,n){switch(e.type){case"color":n=Rt.parse(n);break;case"formatted":n=Bt.fromString(n.toString());break;case"resolvedImage":n=Nt.fromString(n.toString());break;case"padding":n=Ft.parse(n);break;default:Mn(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0)}return Cn(n,t.default,e.default)}Jt.register(fn,{error:[{kind:"error"},[pt],(t,[e])=>{throw new $t(e.evaluate(t))}],typeof:[pt,[yt],(t,[e])=>St(jt(e.evaluate(t)))],"to-rgba":[wt(dt,4),[mt],(t,[e])=>e.evaluate(t).toArray()],rgb:[mt,[dt,dt,dt],mn],rgba:[mt,[dt,dt,dt,dt],mn],has:{type:ft,overloads:[[[pt],(t,[e])=>gn(e.evaluate(t),t.properties())],[[pt,gt],(t,[e,n])=>gn(e.evaluate(t),n.evaluate(t))]]},get:{type:yt,overloads:[[[pt],(t,[e])=>yn(e.evaluate(t),t.properties())],[[pt,gt],(t,[e,n])=>yn(e.evaluate(t),n.evaluate(t))]]},"feature-state":[yt,[pt],(t,[e])=>yn(e.evaluate(t),t.featureState||{})],properties:[gt,[],t=>t.properties()],"geometry-type":[pt,[],t=>t.geometryType()],id:[yt,[],t=>t.id()],zoom:[dt,[],t=>t.globals.zoom],"heatmap-density":[dt,[],t=>t.globals.heatmapDensity||0],"line-progress":[dt,[],t=>t.globals.lineProgress||0],accumulated:[yt,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[dt,vn(dt),(t,e)=>{let n=0;for(const r of e)n+=r.evaluate(t);return n}],"*":[dt,vn(dt),(t,e)=>{let n=1;for(const r of e)n*=r.evaluate(t);return n}],"-":{type:dt,overloads:[[[dt,dt],(t,[e,n])=>e.evaluate(t)-n.evaluate(t)],[[dt],(t,[e])=>-e.evaluate(t)]]},"/":[dt,[dt,dt],(t,[e,n])=>e.evaluate(t)/n.evaluate(t)],"%":[dt,[dt,dt],(t,[e,n])=>e.evaluate(t)%n.evaluate(t)],ln2:[dt,[],()=>Math.LN2],pi:[dt,[],()=>Math.PI],e:[dt,[],()=>Math.E],"^":[dt,[dt,dt],(t,[e,n])=>Math.pow(e.evaluate(t),n.evaluate(t))],sqrt:[dt,[dt],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[dt,[dt],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[dt,[dt],(t,[e])=>Math.log(e.evaluate(t))],log2:[dt,[dt],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[dt,[dt],(t,[e])=>Math.sin(e.evaluate(t))],cos:[dt,[dt],(t,[e])=>Math.cos(e.evaluate(t))],tan:[dt,[dt],(t,[e])=>Math.tan(e.evaluate(t))],asin:[dt,[dt],(t,[e])=>Math.asin(e.evaluate(t))],acos:[dt,[dt],(t,[e])=>Math.acos(e.evaluate(t))],atan:[dt,[dt],(t,[e])=>Math.atan(e.evaluate(t))],min:[dt,vn(dt),(t,e)=>Math.min(...e.map((e=>e.evaluate(t))))],max:[dt,vn(dt),(t,e)=>Math.max(...e.map((e=>e.evaluate(t))))],abs:[dt,[dt],(t,[e])=>Math.abs(e.evaluate(t))],round:[dt,[dt],(t,[e])=>{const n=e.evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[dt,[dt],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[dt,[dt],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[ft,[pt,yt],(t,[e,n])=>t.properties()[e.value]===n.value],"filter-id-==":[ft,[yt],(t,[e])=>t.id()===e.value],"filter-type-==":[ft,[pt],(t,[e])=>t.geometryType()===e.value],"filter-<":[ft,[pt,yt],(t,[e,n])=>{const r=t.properties()[e.value],i=n.value;return typeof r==typeof i&&r<i}],"filter-id-<":[ft,[yt],(t,[e])=>{const n=t.id(),r=e.value;return typeof n==typeof r&&n<r}],"filter->":[ft,[pt,yt],(t,[e,n])=>{const r=t.properties()[e.value],i=n.value;return typeof r==typeof i&&r>i}],"filter-id->":[ft,[yt],(t,[e])=>{const n=t.id(),r=e.value;return typeof n==typeof r&&n>r}],"filter-<=":[ft,[pt,yt],(t,[e,n])=>{const r=t.properties()[e.value],i=n.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[ft,[yt],(t,[e])=>{const n=t.id(),r=e.value;return typeof n==typeof r&&n<=r}],"filter->=":[ft,[pt,yt],(t,[e,n])=>{const r=t.properties()[e.value],i=n.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[ft,[yt],(t,[e])=>{const n=t.id(),r=e.value;return typeof n==typeof r&&n>=r}],"filter-has":[ft,[yt],(t,[e])=>e.value in t.properties()],"filter-has-id":[ft,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[ft,[wt(pt)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[ft,[wt(yt)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[ft,[pt,wt(yt)],(t,[e,n])=>n.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[ft,[pt,wt(yt)],(t,[e,n])=>function(t,e,n,r){for(;n<=r;){const i=n+r>>1;if(e[i]===t)return!0;e[i]>t?r=i-1:n=i+1}return!1}(t.properties()[e.value],n.value,0,n.value.length-1)],all:{type:ft,overloads:[[[ft,ft],(t,[e,n])=>e.evaluate(t)&&n.evaluate(t)],[vn(ft),(t,e)=>{for(const n of e)if(!n.evaluate(t))return!1;return!0}]]},any:{type:ft,overloads:[[[ft,ft],(t,[e,n])=>e.evaluate(t)||n.evaluate(t)],[vn(ft),(t,e)=>{for(const n of e)if(n.evaluate(t))return!0;return!1}]]},"!":[ft,[ft],(t,[e])=>!e.evaluate(t)],"is-supported-script":[ft,[pt],(t,[e])=>{const n=t.globals&&t.globals.isSupportedScript;return!n||n(e.evaluate(t))}],upcase:[pt,[pt],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[pt,[pt],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[pt,vn(yt),(t,e)=>e.map((e=>Vt(e.evaluate(t)))).join("")],"resolved-locale":[pt,[vt],(t,[e])=>e.evaluate(t).resolvedLocale()]});class Ln{constructor(t,e){this.expression=t,this._warningHistory={},this._evaluator=new Yt,this._defaultValue=e?function(t){return"color"===t.type&&En(t.default)?new Rt(0,0,0,0):"color"===t.type?Rt.parse(t.default)||null:"padding"===t.type?Ft.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null}evaluateWithoutErrorHandling(t,e,n,r,i,a){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=a,this.expression.evaluate(this._evaluator)}evaluate(t,e,n,r,i,a){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=a||null;try{const t=this.expression.evaluate(this._evaluator);if(null==t||"number"==typeof t&&t!=t)return this._defaultValue;if(this._enumValues&&!(t in this._enumValues))throw new $t(`Expected value to be one of ${Object.keys(this._enumValues).map((t=>JSON.stringify(t))).join(", ")}, but found ${JSON.stringify(t)} instead.`);return t}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}function Rn(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in fn}function Dn(t,e){const n=new be(fn,[],e?function(t){const e={color:mt,string:pt,number:dt,enum:pt,boolean:ft,formatted:_t,padding:xt,resolvedImage:bt};return"array"===t.type?wt(e[t.value]||yt,t.length):e[t.type]}(e):void 0),r=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return r?_n(new Ln(r,e)):xn(n.errors)}class On{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!ve(e.expression)}evaluateWithoutErrorHandling(t,e,n,r,i,a){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,a)}evaluate(t,e,n,r,i,a){return this._styleExpression.evaluate(t,e,n,r,i,a)}}class Bn{constructor(t,e,n,r){this.kind=t,this.zoomStops=n,this._styleExpression=e,this.isStateDependent="camera"!==t&&!ve(e.expression),this.interpolationType=r}evaluateWithoutErrorHandling(t,e,n,r,i,a){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,a)}evaluate(t,e,n,r,i,a){return this._styleExpression.evaluate(t,e,n,r,i,a)}interpolationFactor(t,e,n){return this.interpolationType?qe.interpolationFactor(this.interpolationType,t,e,n):0}}function Fn(t,e){const n=Dn(t,e);if("error"===n.result)return n;const r=n.value.expression,i=ye(r);if(!i&&!bn(e))return xn([new ct("","data expressions not supported")]);const a=_e(r,["zoom"]);if(!a&&!wn(e))return xn([new ct("","zoom expressions not supported")]);const o=Zn(r);return o||a?o instanceof ct?xn([o]):o instanceof qe&&!Sn(e)?xn([new ct("",'"interpolate" expressions cannot be used with this property')]):_n(o?new Bn(i?"camera":"composite",n.value,o.labels,o instanceof qe?o.interpolation:void 0):new On(i?"constant":"source",n.value)):xn([new ct("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Nn{constructor(t,e){this._parameters=t,this._specification=e,ot(this,Tn(this._parameters,this._specification))}static deserialize(t){return new Nn(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function Zn(t){let e=null;if(t instanceof We)e=Zn(t.result);else if(t instanceof Ge){for(const n of t.args)if(e=Zn(n),e)break}else(t instanceof Me||t instanceof qe)&&t.input instanceof Jt&&"zoom"===t.input.name&&(e=t);return e instanceof ct||t.eachChild((t=>{const n=Zn(t);n instanceof ct?e=n:!e&&n?e=new ct("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&n&&e!==n&&(e=new ct("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}function Un(t){const e=t.key,n=t.value,r=t.valueSpec||{},i=t.objectElementValidators||{},a=t.style,o=t.styleSpec;let s=[];const l=Mn(n);if("object"!==l)return[new it(e,n,`object expected, ${l} found`)];for(const c in n){const t=c.split(".")[0],l=r[t]||r["*"];let u;if(i[t])u=i[t];else if(r[t])u=mr;else if(i["*"])u=i["*"];else{if(!r["*"]){s.push(new it(e,n[c],`unknown property "${c}"`));continue}u=mr}s=s.concat(u({key:(e?`${e}.`:e)+c,value:n[c],valueSpec:l,style:a,styleSpec:o,object:n,objectKey:c},n))}for(const c in r)i[c]||r[c].required&&void 0===r[c].default&&void 0===n[c]&&s.push(new it(e,n,`missing required property "${c}"`));return s}function jn(t){const e=t.value,n=t.valueSpec,r=t.style,i=t.styleSpec,a=t.key,o=t.arrayElementValidator||mr;if("array"!==Mn(e))return[new it(a,e,`array expected, ${Mn(e)} found`)];if(n.length&&e.length!==n.length)return[new it(a,e,`array length ${n.length} expected, length ${e.length} found`)];if(n["min-length"]&&e.length<n["min-length"])return[new it(a,e,`array length at least ${n["min-length"]} expected, length ${e.length} found`)];let s={type:n.value,values:n.values};i.$version<7&&(s.function=n.function),"object"===Mn(n.value)&&(s=n.value);let l=[];for(let c=0;c<e.length;c++)l=l.concat(o({array:e,arrayIndex:c,value:e[c],valueSpec:s,style:r,styleSpec:i,key:`${a}[${c}]`}));return l}function Vn(t){const e=t.key,n=t.value,r=t.valueSpec;let i=Mn(n);return"number"===i&&n!=n&&(i="NaN"),"number"!==i?[new it(e,n,`number expected, ${i} found`)]:"minimum"in r&&n<r.minimum?[new it(e,n,`${n} is less than the minimum value ${r.minimum}`)]:"maximum"in r&&n>r.maximum?[new it(e,n,`${n} is greater than the maximum value ${r.maximum}`)]:[]}function qn(t){const e=t.valueSpec,n=st(t.value.type);let r,i,a,o={};const s="categorical"!==n&&void 0===t.value.property,l=!s,c="array"===Mn(t.value.stops)&&"array"===Mn(t.value.stops[0])&&"object"===Mn(t.value.stops[0][0]),u=Un({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===n)return[new it(t.key,t.value,'identity function may not have a "stops" property')];let e=[];const r=t.value;return e=e.concat(jn({key:t.key,value:r,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:h})),"array"===Mn(r)&&0===r.length&&e.push(new it(t.key,r,"array must have at least one stop")),e},default:function(t){return mr({key:t.key,value:t.value,valueSpec:e,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===n&&s&&u.push(new it(t.key,t.value,'missing required property "property"')),"identity"===n||t.value.stops||u.push(new it(t.key,t.value,'missing required property "stops"')),"exponential"===n&&t.valueSpec.expression&&!Sn(t.valueSpec)&&u.push(new it(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!bn(t.valueSpec)?u.push(new it(t.key,t.value,"property functions not supported")):s&&!wn(t.valueSpec)&&u.push(new it(t.key,t.value,"zoom functions not supported"))),"categorical"!==n&&!c||void 0!==t.value.property||u.push(new it(t.key,t.value,'"property" property is required')),u;function h(t){let n=[];const r=t.value,s=t.key;if("array"!==Mn(r))return[new it(s,r,`array expected, ${Mn(r)} found`)];if(2!==r.length)return[new it(s,r,`array length 2 expected, length ${r.length} found`)];if(c){if("object"!==Mn(r[0]))return[new it(s,r,`object expected, ${Mn(r[0])} found`)];if(void 0===r[0].zoom)return[new it(s,r,"object stop key must have zoom")];if(void 0===r[0].value)return[new it(s,r,"object stop key must have value")];if(a&&a>st(r[0].zoom))return[new it(s,r[0].zoom,"stop zoom values must appear in ascending order")];st(r[0].zoom)!==a&&(a=st(r[0].zoom),i=void 0,o={}),n=n.concat(Un({key:`${s}[0]`,value:r[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:Vn,value:d}}))}else n=n.concat(d({key:`${s}[0]`,value:r[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},r));return Rn(lt(r[1]))?n.concat([new it(`${s}[1]`,r[1],"expressions are not allowed in function stops.")]):n.concat(mr({key:`${s}[1]`,value:r[1],valueSpec:e,style:t.style,styleSpec:t.styleSpec}))}function d(t,a){const s=Mn(t.value),l=st(t.value),c=null!==t.value?t.value:a;if(r){if(s!==r)return[new it(t.key,c,`${s} stop domain type must match previous stop domain type ${r}`)]}else r=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new it(t.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==n){let r=`number expected, ${s} found`;return bn(e)&&void 0===n&&(r+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new it(t.key,c,r)]}return"categorical"!==n||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==n&&"number"===s&&void 0!==i&&l<i?[new it(t.key,c,"stop domain values must appear in ascending order")]:(i=l,"categorical"===n&&l in o?[new it(t.key,c,"stop domain values must be unique")]:(o[l]=!0,[])):[new it(t.key,c,`integer expected, found ${l}`)]}}function $n(t){const e=("property"===t.expressionContext?Fn:Dn)(lt(t.value),t.valueSpec);if("error"===e.result)return e.value.map((e=>new it(`${t.key}${e.key}`,t.value,e.message)));const n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!n.outputDefined())return[new it(t.key,t.value,`Invalid data expression for "${t.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===t.expressionContext&&"layout"===t.propertyType&&!ve(n))return[new it(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!ve(n))return[new it(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!_e(n,["zoom","feature-state"]))return[new it(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!ye(n))return[new it(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Gn(t){const e=t.key,n=t.value,r=t.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(st(n))&&i.push(new it(e,n,`expected one of [${r.values.join(", ")}], ${JSON.stringify(n)} found`)):-1===Object.keys(r.values).indexOf(st(n))&&i.push(new it(e,n,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(n)} found`)),i}function Wn(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!Wn(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}const Hn={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Xn(t){if(null==t)return{filter:()=>!0,needGeometry:!1};Wn(t)||(t=Jn(t));const e=Dn(t,Hn);if("error"===e.result)throw new Error(e.value.map((t=>`${t.key}: ${t.message}`)).join(", "));return{filter:(t,n,r)=>e.value.evaluate(t,n,{},r),needGeometry:Yn(t)}}function Kn(t,e){return t<e?-1:t>e?1:0}function Yn(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(let e=1;e<t.length;e++)if(Yn(t[e]))return!0;return!1}function Jn(t){if(!t)return!0;const e=t[0];return t.length<=1?"any"!==e:"=="===e?Qn(t[1],t[2],"=="):"!="===e?nr(Qn(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?Qn(t[1],t[2],e):"any"===e?(n=t.slice(1),["any"].concat(n.map(Jn))):"all"===e?["all"].concat(t.slice(1).map(Jn)):"none"===e?["all"].concat(t.slice(1).map(Jn).map(nr)):"in"===e?tr(t[1],t.slice(2)):"!in"===e?nr(tr(t[1],t.slice(2))):"has"===e?er(t[1]):"!has"===e?nr(er(t[1])):"within"!==e||t;var n}function Qn(t,e,n){switch(t){case"$type":return[`filter-type-${n}`,e];case"$id":return[`filter-id-${n}`,e];default:return[`filter-${n}`,t,e]}}function tr(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((t=>typeof t!=typeof e[0]))?["filter-in-large",t,["literal",e.sort(Kn)]]:["filter-in-small",t,["literal",e]]}}function er(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function nr(t){return["!",t]}function rr(t){return Wn(lt(t.value))?$n(ot({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):ir(t)}function ir(t){const e=t.value,n=t.key;if("array"!==Mn(e))return[new it(n,e,`array expected, ${Mn(e)} found`)];const r=t.styleSpec;let i,a=[];if(e.length<1)return[new it(n,e,"filter array must have at least 1 element")];switch(a=a.concat(Gn({key:`${n}[0]`,value:e[0],valueSpec:r.filter_operator,style:t.style,styleSpec:t.styleSpec})),st(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===st(e[1])&&a.push(new it(n,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":3!==e.length&&a.push(new it(n,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(i=Mn(e[1]),"string"!==i&&a.push(new it(`${n}[1]`,e[1],`string expected, ${i} found`)));for(let o=2;o<e.length;o++)i=Mn(e[o]),"$type"===st(e[1])?a=a.concat(Gn({key:`${n}[${o}]`,value:e[o],valueSpec:r.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&a.push(new it(`${n}[${o}]`,e[o],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let r=1;r<e.length;r++)a=a.concat(ir({key:`${n}[${r}]`,value:e[r],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":i=Mn(e[1]),2!==e.length?a.push(new it(n,e,`filter array for "${e[0]}" operator must have 2 elements`)):"string"!==i&&a.push(new it(`${n}[1]`,e[1],`string expected, ${i} found`));break;case"within":i=Mn(e[1]),2!==e.length?a.push(new it(n,e,`filter array for "${e[0]}" operator must have 2 elements`)):"object"!==i&&a.push(new it(`${n}[1]`,e[1],`object expected, ${i} found`))}return a}function ar(t,e){const n=t.key,r=t.style,i=t.styleSpec,a=t.value,o=t.objectKey,s=i[`${e}_${t.layerType}`];if(!s)return[];const l=o.match(/^(.*)-transition$/);if("paint"===e&&l&&s[l[1]]&&s[l[1]].transition)return mr({key:n,value:a,valueSpec:i.transition,style:r,styleSpec:i});const c=t.valueSpec||s[o];if(!c)return[new it(n,a,`unknown property "${o}"`)];let u;if("string"===Mn(a)&&bn(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(a)))return[new it(n,a,`"${o}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(u[1])} }\`.`)];const h=[];return"symbol"===t.layerType&&("text-field"===o&&r&&!r.glyphs&&h.push(new it(n,a,'use of "text-field" requires a style "glyphs" property')),"text-font"===o&&En(lt(a))&&"identity"===st(a.type)&&h.push(new it(n,a,'"text-font" does not support identity functions'))),h.concat(mr({key:t.key,value:a,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:o}))}function or(t){return ar(t,"paint")}function sr(t){return ar(t,"layout")}function lr(t){let e=[];const n=t.value,r=t.key,i=t.style,a=t.styleSpec;n.type||n.ref||e.push(new it(r,n,'either "type" or "ref" is required'));let o=st(n.type);const s=st(n.ref);if(n.id){const a=st(n.id);for(let o=0;o<t.arrayIndex;o++){const t=i.layers[o];st(t.id)===a&&e.push(new it(r,n.id,`duplicate layer id "${n.id}", previously used at line ${t.id.__line__}`))}}if("ref"in n){let t;["type","source","source-layer","filter","layout"].forEach((t=>{t in n&&e.push(new it(r,n[t],`"${t}" is prohibited for ref layers`))})),i.layers.forEach((e=>{st(e.id)===s&&(t=e)})),t?t.ref?e.push(new it(r,n.ref,"ref cannot reference another ref layer")):o=st(t.type):e.push(new it(r,n.ref,`ref layer "${s}" not found`))}else if("background"!==o)if(n.source){const t=i.sources&&i.sources[n.source],a=t&&st(t.type);t?"vector"===a&&"raster"===o?e.push(new it(r,n.source,`layer "${n.id}" requires a raster source`)):"raster"===a&&"raster"!==o?e.push(new it(r,n.source,`layer "${n.id}" requires a vector source`)):"vector"!==a||n["source-layer"]?"raster-dem"===a&&"hillshade"!==o?e.push(new it(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==o||!n.paint||!n.paint["line-gradient"]||"geojson"===a&&t.lineMetrics||e.push(new it(r,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new it(r,n,`layer "${n.id}" must specify a "source-layer"`)):e.push(new it(r,n.source,`source "${n.source}" not found`))}else e.push(new it(r,n,'missing required property "source"'));return e=e.concat(Un({key:r,value:n,valueSpec:a.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":()=>[],type:()=>mr({key:`${r}.type`,value:n.type,valueSpec:a.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"}),filter:rr,layout:t=>Un({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>sr(ot({layerType:o},t))}}),paint:t=>Un({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>or(ot({layerType:o},t))}})}})),e}function cr(t){const e=t.value,n=t.key,r=Mn(e);return"string"!==r?[new it(n,e,`string expected, ${r} found`)]:[]}const ur={promoteId:function({key:t,value:e}){if("string"===Mn(e))return cr({key:t,value:e});{const n=[];for(const r in e)n.push(...cr({key:`${t}.${r}`,value:e[r]}));return n}}};function hr(t){const e=t.value,n=t.key,r=t.styleSpec,i=t.style;if(!e.type)return[new it(n,e,'"type" is required')];const a=st(e.type);let o;switch(a){case"vector":case"raster":case"raster-dem":return o=Un({key:n,value:e,valueSpec:r[`source_${a.replace("-","_")}`],style:t.style,styleSpec:r,objectElementValidators:ur}),o;case"geojson":if(o=Un({key:n,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:ur}),e.cluster)for(const t in e.clusterProperties){const[r,i]=e.clusterProperties[t],a="string"==typeof r?[r,["accumulated"],["get",t]]:r;o.push(...$n({key:`${n}.${t}.map`,value:i,expressionContext:"cluster-map"})),o.push(...$n({key:`${n}.${t}.reduce`,value:a,expressionContext:"cluster-reduce"}))}return o;case"video":return Un({key:n,value:e,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return Un({key:n,value:e,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new it(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Gn({key:`${n}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function dr(t){const e=t.value,n=t.styleSpec,r=n.light,i=t.style;let a=[];const o=Mn(e);if(void 0===e)return a;if("object"!==o)return a=a.concat([new it("light",e,`object expected, ${o} found`)]),a;for(const s in e){const t=s.match(/^(.*)-transition$/);a=a.concat(t&&r[t[1]]&&r[t[1]].transition?mr({key:s,value:e[s],valueSpec:n.transition,style:i,styleSpec:n}):r[s]?mr({key:s,value:e[s],valueSpec:r[s],style:i,styleSpec:n}):[new it(s,e[s],`unknown property "${s}"`)])}return a}function pr(t){const e=t.value,n=t.styleSpec,r=n.terrain,i=t.style;let a=[];const o=Mn(e);if(void 0===e)return a;if("object"!==o)return a=a.concat([new it("terrain",e,`object expected, ${o} found`)]),a;for(const s in e)a=a.concat(r[s]?mr({key:s,value:e[s],valueSpec:r[s],style:i,styleSpec:n}):[new it(s,e[s],`unknown property "${s}"`)]);return a}const fr={"*":()=>[],array:jn,boolean:function(t){const e=t.value,n=t.key,r=Mn(e);return"boolean"!==r?[new it(n,e,`boolean expected, ${r} found`)]:[]},number:Vn,color:function(t){const e=t.key,n=t.value,r=Mn(n);return"string"!==r?[new it(e,n,`color expected, ${r} found`)]:null===Ct(n)?[new it(e,n,`color expected, "${n}" found`)]:[]},constants:at,enum:Gn,filter:rr,function:qn,layer:lr,object:Un,source:hr,light:dr,terrain:pr,string:cr,formatted:function(t){return 0===cr(t).length?[]:$n(t)},resolvedImage:function(t){return 0===cr(t).length?[]:$n(t)},padding:function(t){const e=t.key,n=t.value;if("array"===Mn(n)){if(n.length<1||n.length>4)return[new it(e,n,`padding requires 1 to 4 values; ${n.length} values found`)];const t={type:"number"};let r=[];for(let i=0;i<n.length;i++)r=r.concat(mr({key:`${e}[${i}]`,value:n[i],valueSpec:t}));return r}return Vn({key:e,value:n,valueSpec:{}})}};function mr(t){const e=t.value,n=t.valueSpec,r=t.styleSpec;return n.expression&&En(st(e))?qn(t):n.expression&&Rn(lt(e))?$n(t):n.type&&fr[n.type]?fr[n.type](t):Un(ot({},t,{valueSpec:n.type?r[n.type]:n}))}function gr(t){const e=t.value,n=t.key,r=cr(t);return r.length||(-1===e.indexOf("{fontstack}")&&r.push(new it(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new it(n,e,'"glyphs" url must include a "{range}" token'))),r}function yr(t,e=rt){let n=[];return n=n.concat(mr({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:gr,"*":()=>[]}})),t.constants&&(n=n.concat(at({key:"constants",value:t.constants,style:t,styleSpec:e}))),vr(n)}function vr(t){return[].concat(t).sort(((t,e)=>t.line-e.line))}function _r(t){return function(...e){return vr(t.apply(this,e))}}yr.source=_r(hr),yr.light=_r(dr),yr.terrain=_r(pr),yr.layer=_r(lr),yr.filter=_r(rr),yr.paintProperty=_r(or),yr.layoutProperty=_r(sr);const xr=yr,br=xr.light,wr=xr.paintProperty,Sr=xr.layoutProperty;function Mr(t,e){let n=!1;if(e&&e.length)for(const r of e)t.fire(new et(new Error(r.message))),n=!0;return n}class Er{constructor(t,e,n){const r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const i=new Int32Array(this.arrayBuffer);t=i[0],this.d=(e=i[1])+2*(n=i[2]);for(let t=0;t<this.d*this.d;t++){const e=i[3+t],n=i[3+t+1];r.push(e===n?null:i.subarray(e,n))}const a=i[3+r.length+1];this.keys=i.subarray(i[3+r.length],a),this.bboxes=i.subarray(a),this.insert=this._insertReadonly}else{this.d=e+2*n;for(let t=0;t<this.d*this.d;t++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;const i=n/e*t;this.min=-i,this.max=t+i}insert(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,e,n,r,i,a){this.cells[i].push(a)}query(t,e,n,r,i){const a=this.min,o=this.max;if(t<=a&&e<=a&&o<=n&&o<=r&&!i)return Array.prototype.slice.call(this.keys);{const a=[];return this._forEachCell(t,e,n,r,this._queryCell,a,{},i),a}}_queryCell(t,e,n,r,i,a,o,s){const l=this.cells[i];if(null!==l){const i=this.keys,c=this.bboxes;for(let u=0;u<l.length;u++){const h=l[u];if(void 0===o[h]){const l=4*h;(s?s(c[l+0],c[l+1],c[l+2],c[l+3]):t<=c[l+2]&&e<=c[l+3]&&n>=c[l+0]&&r>=c[l+1])?(o[h]=!0,a.push(i[h])):o[h]=!1}}}}_forEachCell(t,e,n,r,i,a,o,s){const l=this._convertToCellCoord(t),c=this._convertToCellCoord(e),u=this._convertToCellCoord(n),h=this._convertToCellCoord(r);for(let d=l;d<=u;d++)for(let l=c;l<=h;l++){const c=this.d*l+d;if((!s||s(this._convertFromCellCoord(d),this._convertFromCellCoord(l),this._convertFromCellCoord(d+1),this._convertFromCellCoord(l+1)))&&i.call(this,t,e,n,r,c,a,o,s))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,e=3+this.cells.length+1+1;let n=0;for(let a=0;a<this.cells.length;a++)n+=this.cells[a].length;const r=new Int32Array(e+n+this.keys.length+this.bboxes.length);r[0]=this.extent,r[1]=this.n,r[2]=this.padding;let i=e;for(let a=0;a<t.length;a++){const e=t[a];r[3+a]=i,r.set(e,i),i+=e.length}return r[3+t.length]=i,r.set(this.keys,i),i+=this.keys.length,r[3+t.length+1]=i,r.set(this.bboxes,i),i+=this.bboxes.length,r.buffer}static serialize(t,e){const n=t.toArrayBuffer();return e&&e.push(n),{buffer:n}}static deserialize(t){return new Er(t.buffer)}}const kr={};function Tr(t,e,n={}){if(kr[t])throw new Error(`${t} is already registered.`);Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),kr[t]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}Tr("Object",Object),Tr("TransferableGridIndex",Er),Tr("Color",Rt),Tr("Error",Error),Tr("AJAXError",j),Tr("ResolvedImage",Nt),Tr("StylePropertyFunction",Nn),Tr("StyleExpression",Ln,{omit:["_evaluator"]}),Tr("ZoomDependentExpression",Bn),Tr("ZoomConstantExpression",On),Tr("CompoundExpression",Jt,{omit:["_evaluate"]});for(const bu in fn)fn[bu]._classRegistryKey||Tr(`Expression_${bu}`,fn[bu]);function Cr(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Ir(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof Blob)return t;if(Cr(t))return e&&e.push(t),t;if(S(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){const n=t;return e&&e.push(n.buffer),n}if(t instanceof ImageData)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){const n=[];for(const r of t)n.push(Ir(r,e));return n}if("object"==typeof t){const n=t.constructor,r=n._classRegistryKey;if(!r)throw new Error("can't serialize object of unregistered class");if(!kr[r])throw new Error(`${r} is not registered.`);const i=n.serialize?n.serialize(t,e):{};if(n.serialize){if(e&&i===e[e.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const n in t){if(!t.hasOwnProperty(n))continue;if(kr[r].omit.indexOf(n)>=0)continue;const a=t[n];i[n]=kr[r].shallow.indexOf(n)>=0?a:Ir(a,e)}t instanceof Error&&(i.message=t.message)}if(i.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==r&&(i.$name=r),i}throw new Error("can't serialize object of type "+typeof t)}function Pr(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof Blob||Cr(t)||S(t)||ArrayBuffer.isView(t)||t instanceof ImageData)return t;if(Array.isArray(t))return t.map(Pr);if("object"==typeof t){const e=t.$name||"Object";if(!kr[e])throw new Error(`can't deserialize unregistered class ${e}`);const{klass:n}=kr[e];if(!n)throw new Error(`can't deserialize unregistered class ${e}`);if(n.deserialize)return n.deserialize(t);const r=Object.create(n.prototype);for(const i of Object.keys(t)){if("$name"===i)continue;const n=t[i];r[i]=kr[e].shallow.indexOf(i)>=0?n:Pr(n)}return r}throw new Error("can't deserialize object of type "+typeof t)}class Ar{constructor(){this.first=!0}update(t,e){const n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=n,!0))}}const zr={"Latin-1 Supplement":t=>t>=128&&t<=255,Arabic:t=>t>=1536&&t<=1791,"Arabic Supplement":t=>t>=1872&&t<=1919,"Arabic Extended-A":t=>t>=2208&&t<=2303,"Hangul Jamo":t=>t>=4352&&t<=4607,"Unified Canadian Aboriginal Syllabics":t=>t>=5120&&t<=5759,Khmer:t=>t>=6016&&t<=6143,"Unified Canadian Aboriginal Syllabics Extended":t=>t>=6320&&t<=6399,"General Punctuation":t=>t>=8192&&t<=8303,"Letterlike Symbols":t=>t>=8448&&t<=8527,"Number Forms":t=>t>=8528&&t<=8591,"Miscellaneous Technical":t=>t>=8960&&t<=9215,"Control Pictures":t=>t>=9216&&t<=9279,"Optical Character Recognition":t=>t>=9280&&t<=9311,"Enclosed Alphanumerics":t=>t>=9312&&t<=9471,"Geometric Shapes":t=>t>=9632&&t<=9727,"Miscellaneous Symbols":t=>t>=9728&&t<=9983,"Miscellaneous Symbols and Arrows":t=>t>=11008&&t<=11263,"CJK Radicals Supplement":t=>t>=11904&&t<=12031,"Kangxi Radicals":t=>t>=12032&&t<=12255,"Ideographic Description Characters":t=>t>=12272&&t<=12287,"CJK Symbols and Punctuation":t=>t>=12288&&t<=12351,Hiragana:t=>t>=12352&&t<=12447,Katakana:t=>t>=12448&&t<=12543,Bopomofo:t=>t>=12544&&t<=12591,"Hangul Compatibility Jamo":t=>t>=12592&&t<=12687,Kanbun:t=>t>=12688&&t<=12703,"Bopomofo Extended":t=>t>=12704&&t<=12735,"CJK Strokes":t=>t>=12736&&t<=12783,"Katakana Phonetic Extensions":t=>t>=12784&&t<=12799,"Enclosed CJK Letters and Months":t=>t>=12800&&t<=13055,"CJK Compatibility":t=>t>=13056&&t<=13311,"CJK Unified Ideographs Extension A":t=>t>=13312&&t<=19903,"Yijing Hexagram Symbols":t=>t>=19904&&t<=19967,"CJK Unified Ideographs":t=>t>=19968&&t<=40959,"Yi Syllables":t=>t>=40960&&t<=42127,"Yi Radicals":t=>t>=42128&&t<=42191,"Hangul Jamo Extended-A":t=>t>=43360&&t<=43391,"Hangul Syllables":t=>t>=44032&&t<=55215,"Hangul Jamo Extended-B":t=>t>=55216&&t<=55295,"Private Use Area":t=>t>=57344&&t<=63743,"CJK Compatibility Ideographs":t=>t>=63744&&t<=64255,"Arabic Presentation Forms-A":t=>t>=64336&&t<=65023,"Vertical Forms":t=>t>=65040&&t<=65055,"CJK Compatibility Forms":t=>t>=65072&&t<=65103,"Small Form Variants":t=>t>=65104&&t<=65135,"Arabic Presentation Forms-B":t=>t>=65136&&t<=65279,"Halfwidth and Fullwidth Forms":t=>t>=65280&&t<=65519};function Lr(t){for(const e of t)if(Or(e.charCodeAt(0)))return!0;return!1}function Rr(t){for(const e of t)if(!Dr(e.charCodeAt(0)))return!1;return!0}function Dr(t){return!(zr.Arabic(t)||zr["Arabic Supplement"](t)||zr["Arabic Extended-A"](t)||zr["Arabic Presentation Forms-A"](t)||zr["Arabic Presentation Forms-B"](t))}function Or(t){return!(746!==t&&747!==t&&(t<4352||!(zr["Bopomofo Extended"](t)||zr.Bopomofo(t)||zr["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||zr["CJK Compatibility Ideographs"](t)||zr["CJK Compatibility"](t)||zr["CJK Radicals Supplement"](t)||zr["CJK Strokes"](t)||!(!zr["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||zr["CJK Unified Ideographs Extension A"](t)||zr["CJK Unified Ideographs"](t)||zr["Enclosed CJK Letters and Months"](t)||zr["Hangul Compatibility Jamo"](t)||zr["Hangul Jamo Extended-A"](t)||zr["Hangul Jamo Extended-B"](t)||zr["Hangul Jamo"](t)||zr["Hangul Syllables"](t)||zr.Hiragana(t)||zr["Ideographic Description Characters"](t)||zr.Kanbun(t)||zr["Kangxi Radicals"](t)||zr["Katakana Phonetic Extensions"](t)||zr.Katakana(t)&&12540!==t||!(!zr["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!zr["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||zr["Unified Canadian Aboriginal Syllabics"](t)||zr["Unified Canadian Aboriginal Syllabics Extended"](t)||zr["Vertical Forms"](t)||zr["Yijing Hexagram Symbols"](t)||zr["Yi Syllables"](t)||zr["Yi Radicals"](t))))}function Br(t){return!(Or(t)||function(t){return!!(zr["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||zr["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||zr["Letterlike Symbols"](t)||zr["Number Forms"](t)||zr["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||zr["Control Pictures"](t)&&9251!==t||zr["Optical Character Recognition"](t)||zr["Enclosed Alphanumerics"](t)||zr["Geometric Shapes"](t)||zr["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||zr["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||zr["CJK Symbols and Punctuation"](t)||zr.Katakana(t)||zr["Private Use Area"](t)||zr["CJK Compatibility Forms"](t)||zr["Small Form Variants"](t)||zr["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function Fr(t){return t>=1424&&t<=2303||zr["Arabic Presentation Forms-A"](t)||zr["Arabic Presentation Forms-B"](t)}function Nr(t,e){return!(!e&&Fr(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||zr.Khmer(t))}function Zr(t){for(const e of t)if(Fr(e.charCodeAt(0)))return!0;return!1}const Ur="deferred",jr="loading",Vr="loaded";let qr=null,$r="unavailable",Gr=null;const Wr=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&($r="error"),qr&&qr(t)};function Hr(){Xr.fire(new tt("pluginStateChange",{pluginStatus:$r,pluginURL:Gr}))}const Xr=new nt,Kr=function(){return $r},Yr=function(){if($r!==Ur||!Gr)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");$r=jr,Hr(),Gr&&G({url:Gr},(t=>{t?Wr(t):($r=Vr,Hr())}))},Jr={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>$r===Vr||null!=Jr.applyArabicShaping,isLoading:()=>$r===jr,setState(t){if(!y())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");$r=t.pluginStatus,Gr=t.pluginURL},isParsed(){if(!y())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return null!=Jr.applyArabicShaping&&null!=Jr.processBidirectionalText&&null!=Jr.processStyledBidirectionalText},getPluginURL(){if(!y())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Gr}};class Qr{constructor(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ar,this.transition={})}isSupportedScript(t){return function(t,e){for(const n of t)if(!Nr(n.charCodeAt(0),e))return!1;return!0}(t,Jr.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,e=t-Math.floor(t),n=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*e}}}class ti{constructor(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(En(t))return new Nn(t,e);if(Rn(t)){const n=Fn(t,e);if("error"===n.result)throw new Error(n.value.map((t=>`${t.key}: ${t.message}`)).join(", "));return n.value}{let n=t;return"color"===e.type&&"string"==typeof t?n=Rt.parse(t):"padding"!==e.type||"number"!=typeof t&&!Array.isArray(t)||(n=Ft.parse(t)),{kind:"constant",evaluate:()=>n}}}(void 0===e?t.specification.default:e,t.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(t,e,n){return this.property.possiblyEvaluate(this,t,e,n)}}class ei{constructor(t){this.property=t,this.value=new ti(t,void 0)}transitioned(t,e){return new ri(this.property,this.value,e,s({},t.transition,this.transition),t.now)}untransitioned(){return new ri(this.property,this.value,null,{},0)}}class ni{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return d(this._values[t].value.value)}setValue(t,e){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new ei(this._values[t].property)),this._values[t].value=new ti(this._values[t].property,null===e?void 0:d(e))}getTransition(t){return d(this._values[t].transition)}setTransition(t,e){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new ei(this._values[t].property)),this._values[t].transition=d(e)||void 0}serialize(){const t={};for(const e of Object.keys(this._values)){const n=this.getValue(e);void 0!==n&&(t[e]=n);const r=this.getTransition(e);void 0!==r&&(t[`${e}-transition`]=r)}return t}transitioned(t,e){const n=new ii(this._properties);for(const r of Object.keys(this._values))n._values[r]=this._values[r].transitioned(t,e._values[r]);return n}untransitioned(){const t=new ii(this._properties);for(const e of Object.keys(this._values))t._values[e]=this._values[e].untransitioned();return t}}class ri{constructor(t,e,n,r,i){this.property=t,this.value=e,this.begin=i+r.delay||0,this.end=this.begin+r.duration||0,t.specification.transition&&(r.delay||r.duration)&&(this.prior=n)}possiblyEvaluate(t,e,n){const r=t.now||0,i=this.value.possiblyEvaluate(t,e,n),a=this.prior;if(a){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return a.possiblyEvaluate(t,e,n);{const o=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(a.possiblyEvaluate(t,e,n),i,function(t){if(t<=0)return 0;if(t>=1)return 1;const e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}(o))}}return i}}class ii{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,e,n){const r=new si(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(t,e,n);return r}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class ai{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return d(this._values[t].value)}setValue(t,e){this._values[t]=new ti(this._values[t].property,null===e?void 0:d(e))}serialize(){const t={};for(const e of Object.keys(this._values)){const n=this.getValue(e);void 0!==n&&(t[e]=n)}return t}possiblyEvaluate(t,e,n){const r=new si(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(t,e,n);return r}}class oi{constructor(t,e,n){this.property=t,this.value=e,this.parameters=n}isConstant(){return"constant"===this.value.kind}constantOr(t){return"constant"===this.value.kind?this.value.value:t}evaluate(t,e,n,r){return this.property.evaluate(this.value,this.parameters,t,e,n,r)}}class si{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class li{constructor(t){this.specification=t}possiblyEvaluate(t,e){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(e)}interpolate(t,e,n){const r=ke[this.specification.type];return r?r(t,e,n):t}}class ci{constructor(t,e){this.specification=t,this.overrides=e}possiblyEvaluate(t,e,n,r){return new oi(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},n,r)}:t.expression,e)}interpolate(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new oi(this,{kind:"constant",value:void 0},t.parameters);const r=ke[this.specification.type];return r?new oi(this,{kind:"constant",value:r(t.value.value,e.value.value,n)},t.parameters):t}evaluate(t,e,n,r,i,a){return"constant"===t.kind?t.value:t.evaluate(e,n,r,i,a)}}class ui extends ci{possiblyEvaluate(t,e,n,r){if(void 0===t.value)return new oi(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){const i=t.expression.evaluate(e,null,{},n,r),a="resolvedImage"===t.property.specification.type&&"string"!=typeof i?i.name:i,o=this._calculate(a,a,a,e);return new oi(this,{kind:"constant",value:o},e)}if("camera"===t.expression.kind){const n=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new oi(this,{kind:"constant",value:n},e)}return new oi(this,t.expression,e)}evaluate(t,e,n,r,i,a){if("source"===t.kind){const o=t.evaluate(e,n,r,i,a);return this._calculate(o,o,o,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},n,r),t.evaluate({zoom:Math.floor(e.zoom)},n,r),t.evaluate({zoom:Math.floor(e.zoom)+1},n,r),e):t.value}_calculate(t,e,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}}interpolate(t){return t}}class hi{constructor(t){this.specification=t}possiblyEvaluate(t,e,n,r){if(void 0!==t.value){if("constant"===t.expression.kind){const i=t.expression.evaluate(e,null,{},n,r);return this._calculate(i,i,i,e)}return this._calculate(t.expression.evaluate(new Qr(Math.floor(e.zoom-1),e)),t.expression.evaluate(new Qr(Math.floor(e.zoom),e)),t.expression.evaluate(new Qr(Math.floor(e.zoom+1),e)),e)}}_calculate(t,e,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}}interpolate(t){return t}}class di{constructor(t){this.specification=t}possiblyEvaluate(t,e,n,r){return!!t.expression.evaluate(e,null,{},n,r)}interpolate(){return!1}}class pi{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const e in t){const n=t[e];n.specification.overridable&&this.overridableProperties.push(e);const r=this.defaultPropertyValues[e]=new ti(n,void 0),i=this.defaultTransitionablePropertyValues[e]=new ei(n);this.defaultTransitioningPropertyValues[e]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=r.possiblyEvaluate({})}}}Tr("DataDrivenProperty",ci),Tr("DataConstantProperty",li),Tr("CrossFadedDataDrivenProperty",ui),Tr("CrossFadedProperty",hi),Tr("ColorRampProperty",di);const fi="-transition";class mi extends nt{constructor(t,e){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==t.type&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),e.layout&&(this._unevaluatedLayout=new ai(e.layout)),e.paint)){this._transitionablePaint=new ni(e.paint);for(const e in t.paint)this.setPaintProperty(e,t.paint[e],{validate:!1});for(const e in t.layout)this.setLayoutProperty(e,t.layout[e],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new si(e.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,e,n={}){null!=e&&this._validate(Sr,`layers.${this.id}.layout.${t}`,t,e,n)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)}getPaintProperty(t){return t.endsWith(fi)?this._transitionablePaint.getTransition(t.slice(0,-fi.length)):this._transitionablePaint.getValue(t)}setPaintProperty(t,e,n={}){if(null!=e&&this._validate(wr,`layers.${this.id}.paint.${t}`,t,e,n))return!1;if(t.endsWith(fi))return this._transitionablePaint.setTransition(t.slice(0,-fi.length),e||void 0),!1;{const n=this._transitionablePaint._values[t],r="cross-faded-data-driven"===n.property.specification["property-type"],i=n.value.isDataDriven(),a=n.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);const o=this._transitionablePaint._values[t].value;return o.isDataDriven()||i||r||this._handleOverridablePaintPropertyUpdate(t,a,o)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,e,n){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),h(t,((t,e)=>!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)))}_validate(t,e,n,r,i={}){return(!i||!1!==i.validate)&&Mr(this,t.call(xr,{key:e,layerType:this.type,objectKey:n,value:r,styleSpec:rt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const e=this.paint.get(t);if(e instanceof oi&&bn(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1}}const gi={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class yi{constructor(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class vi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function _i(t,e=1){let n=0,r=0;return{members:t.map((t=>{const i=gi[t.type].BYTES_PER_ELEMENT,a=n=xi(n,Math.max(e,i)),o=t.components||1;return r=Math.max(r,i),n+=i*o,{name:t.name,type:t.type,components:o,offset:a}})),size:xi(n,Math.max(r,e)),alignment:e}}function xi(t,e){return Math.ceil(t/e)*e}class bi extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const r=2*t;return this.int16[r+0]=e,this.int16[r+1]=n,t}}bi.prototype.bytesPerElement=4,Tr("StructArrayLayout2i4",bi);class wi extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}emplace(t,e,n,r,i){const a=4*t;return this.int16[a+0]=e,this.int16[a+1]=n,this.int16[a+2]=r,this.int16[a+3]=i,t}}wi.prototype.bytesPerElement=8,Tr("StructArrayLayout4i8",wi);class Si extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,a){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,r,i,a)}emplace(t,e,n,r,i,a,o){const s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=a,this.int16[s+5]=o,t}}Si.prototype.bytesPerElement=12,Tr("StructArrayLayout2i4i12",Si);class Mi extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,a){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,r,i,a)}emplace(t,e,n,r,i,a,o){const s=4*t,l=8*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.uint8[l+4]=r,this.uint8[l+5]=i,this.uint8[l+6]=a,this.uint8[l+7]=o,t}}Mi.prototype.bytesPerElement=8,Tr("StructArrayLayout2i4ub8",Mi);class Ei extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const r=2*t;return this.float32[r+0]=e,this.float32[r+1]=n,t}}Ei.prototype.bytesPerElement=8,Tr("StructArrayLayout2f8",Ei);class ki extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,a,o,s,l,c){const u=this.length;return this.resize(u+1),this.emplace(u,t,e,n,r,i,a,o,s,l,c)}emplace(t,e,n,r,i,a,o,s,l,c,u){const h=10*t;return this.uint16[h+0]=e,this.uint16[h+1]=n,this.uint16[h+2]=r,this.uint16[h+3]=i,this.uint16[h+4]=a,this.uint16[h+5]=o,this.uint16[h+6]=s,this.uint16[h+7]=l,this.uint16[h+8]=c,this.uint16[h+9]=u,t}}ki.prototype.bytesPerElement=20,Tr("StructArrayLayout10ui20",ki);class Ti extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,a,o,s,l,c,u,h){const d=this.length;return this.resize(d+1),this.emplace(d,t,e,n,r,i,a,o,s,l,c,u,h)}emplace(t,e,n,r,i,a,o,s,l,c,u,h,d){const p=12*t;return this.int16[p+0]=e,this.int16[p+1]=n,this.int16[p+2]=r,this.int16[p+3]=i,this.uint16[p+4]=a,this.uint16[p+5]=o,this.uint16[p+6]=s,this.uint16[p+7]=l,this.int16[p+8]=c,this.int16[p+9]=u,this.int16[p+10]=h,this.int16[p+11]=d,t}}Ti.prototype.bytesPerElement=24,Tr("StructArrayLayout4i4ui4i24",Ti);class Ci extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}emplace(t,e,n,r){const i=3*t;return this.float32[i+0]=e,this.float32[i+1]=n,this.float32[i+2]=r,t}}Ci.prototype.bytesPerElement=12,Tr("StructArrayLayout3f12",Ci);class Ii extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint32[1*t+0]=e,t}}Ii.prototype.bytesPerElement=4,Tr("StructArrayLayout1ul4",Ii);class Pi extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,a,o,s,l){const c=this.length;return this.resize(c+1),this.emplace(c,t,e,n,r,i,a,o,s,l)}emplace(t,e,n,r,i,a,o,s,l,c){const u=10*t,h=5*t;return this.int16[u+0]=e,this.int16[u+1]=n,this.int16[u+2]=r,this.int16[u+3]=i,this.int16[u+4]=a,this.int16[u+5]=o,this.uint32[h+3]=s,this.uint16[u+8]=l,this.uint16[u+9]=c,t}}Pi.prototype.bytesPerElement=20,Tr("StructArrayLayout6i1ul2ui20",Pi);class Ai extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,a){const o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,r,i,a)}emplace(t,e,n,r,i,a,o){const s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=a,this.int16[s+5]=o,t}}Ai.prototype.bytesPerElement=12,Tr("StructArrayLayout2i2i2i12",Ai);class zi extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i){const a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i)}emplace(t,e,n,r,i,a){const o=4*t,s=8*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=r,this.int16[s+6]=i,this.int16[s+7]=a,t}}zi.prototype.bytesPerElement=16,Tr("StructArrayLayout2f1f2i16",zi);class Li extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}emplace(t,e,n,r,i){const a=12*t,o=3*t;return this.uint8[a+0]=e,this.uint8[a+1]=n,this.float32[o+1]=r,this.float32[o+2]=i,t}}Li.prototype.bytesPerElement=12,Tr("StructArrayLayout2ub2f12",Li);class Ri extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}emplace(t,e,n,r){const i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,this.uint16[i+2]=r,t}}Ri.prototype.bytesPerElement=6,Tr("StructArrayLayout3ui6",Ri);class Di extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,a,o,s,l,c,u,h,d,p,f,m,g){const y=this.length;return this.resize(y+1),this.emplace(y,t,e,n,r,i,a,o,s,l,c,u,h,d,p,f,m,g)}emplace(t,e,n,r,i,a,o,s,l,c,u,h,d,p,f,m,g,y){const v=24*t,_=12*t,x=48*t;return this.int16[v+0]=e,this.int16[v+1]=n,this.uint16[v+2]=r,this.uint16[v+3]=i,this.uint32[_+2]=a,this.uint32[_+3]=o,this.uint32[_+4]=s,this.uint16[v+10]=l,this.uint16[v+11]=c,this.uint16[v+12]=u,this.float32[_+7]=h,this.float32[_+8]=d,this.uint8[x+36]=p,this.uint8[x+37]=f,this.uint8[x+38]=m,this.uint32[_+10]=g,this.int16[v+22]=y,t}}Di.prototype.bytesPerElement=48,Tr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Di);class Oi extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r,i,a,o,s,l,c,u,h,d,p,f,m,g,y,v,_,x,b,w,S,M,E,k,T){const C=this.length;return this.resize(C+1),this.emplace(C,t,e,n,r,i,a,o,s,l,c,u,h,d,p,f,m,g,y,v,_,x,b,w,S,M,E,k,T)}emplace(t,e,n,r,i,a,o,s,l,c,u,h,d,p,f,m,g,y,v,_,x,b,w,S,M,E,k,T,C){const I=34*t,P=17*t;return this.int16[I+0]=e,this.int16[I+1]=n,this.int16[I+2]=r,this.int16[I+3]=i,this.int16[I+4]=a,this.int16[I+5]=o,this.int16[I+6]=s,this.int16[I+7]=l,this.uint16[I+8]=c,this.uint16[I+9]=u,this.uint16[I+10]=h,this.uint16[I+11]=d,this.uint16[I+12]=p,this.uint16[I+13]=f,this.uint16[I+14]=m,this.uint16[I+15]=g,this.uint16[I+16]=y,this.uint16[I+17]=v,this.uint16[I+18]=_,this.uint16[I+19]=x,this.uint16[I+20]=b,this.uint16[I+21]=w,this.uint16[I+22]=S,this.uint32[P+12]=M,this.float32[P+13]=E,this.float32[P+14]=k,this.float32[P+15]=T,this.float32[P+16]=C,t}}Oi.prototype.bytesPerElement=68,Tr("StructArrayLayout8i15ui1ul4f68",Oi);class Bi extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.float32[1*t+0]=e,t}}Bi.prototype.bytesPerElement=4,Tr("StructArrayLayout1f4",Bi);class Fi extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,e,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}emplace(t,e,n,r){const i=3*t;return this.int16[i+0]=e,this.int16[i+1]=n,this.int16[i+2]=r,t}}Fi.prototype.bytesPerElement=6,Tr("StructArrayLayout3i6",Fi);class Ni extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e,n){const r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)}emplace(t,e,n,r){const i=4*t;return this.uint32[2*t+0]=e,this.uint16[i+2]=n,this.uint16[i+3]=r,t}}Ni.prototype.bytesPerElement=8,Tr("StructArrayLayout1ul2ui8",Ni);class Zi extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,e){const n=this.length;return this.resize(n+1),this.emplace(n,t,e)}emplace(t,e,n){const r=2*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,t}}Zi.prototype.bytesPerElement=4,Tr("StructArrayLayout2ui4",Zi);class Ui extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const e=this.length;return this.resize(e+1),this.emplace(e,t)}emplace(t,e){return this.uint16[1*t+0]=e,t}}Ui.prototype.bytesPerElement=2,Tr("StructArrayLayout1ui2",Ui);class ji extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,e,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)}emplace(t,e,n,r,i){const a=4*t;return this.float32[a+0]=e,this.float32[a+1]=n,this.float32[a+2]=r,this.float32[a+3]=i,t}}ji.prototype.bytesPerElement=16,Tr("StructArrayLayout4f16",ji);class Vi extends yi{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new E(this.anchorPointX,this.anchorPointY)}}Vi.prototype.size=20;class qi extends Pi{get(t){return new Vi(this,t)}}Tr("CollisionBoxArray",qi);class $i extends yi{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}$i.prototype.size=48;class Gi extends Di{get(t){return new $i(this,t)}}Tr("PlacedSymbolArray",Gi);class Wi extends yi{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Wi.prototype.size=68;class Hi extends Oi{get(t){return new Wi(this,t)}}Tr("SymbolInstanceArray",Hi);class Xi extends Bi{getoffsetX(t){return this.float32[1*t+0]}}Tr("GlyphOffsetArray",Xi);class Ki extends Fi{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}Tr("SymbolLineVertexArray",Ki);class Yi extends yi{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Yi.prototype.size=8;class Ji extends Ni{get(t){return new Yi(this,t)}}Tr("FeatureIndexArray",Ji);class Qi extends bi{}class ta extends bi{}class ea extends bi{}class na extends Si{}class ra extends Mi{}class ia extends Ei{}class aa extends ki{}class oa extends Ti{}class sa extends Ci{}class la extends Ii{}class ca extends Ai{}class ua extends Li{}class ha extends Ri{}class da extends Zi{}const pa=_i([{name:"a_pos",components:2,type:"Int16"}],4),{members:fa}=pa;class ma{constructor(t=[]){this.segments=t}prepareSegment(t,e,n,r){let i=this.segments[this.segments.length-1];return t>ma.MAX_VERTEX_ARRAY_LENGTH&&f(`Max vertices per segment is ${ma.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!i||i.vertexLength+t>ma.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==r)&&(i={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==r&&(i.sortKey=r),this.segments.push(i)),i}get(){return this.segments}destroy(){for(const t of this.segments)for(const e in t.vaos)t.vaos[e].destroy()}static simpleSegment(t,e,n,r){return new ma([{vertexOffset:t,primitiveOffset:e,vertexLength:n,primitiveLength:r,vaos:{},sortKey:0}])}}function ga(t,e){return 256*(t=a(Math.floor(t),0,255))+a(Math.floor(e),0,255)}ma.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Tr("SegmentVector",ma);const ya=_i([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var va={exports:{}},_a={exports:{}};_a.exports=function(t,e){var n,r,i,a,o,s,l,c;for(r=t.length-(n=3&t.length),i=e,o=3432918353,s=461845907,c=0;c<r;)l=255&t.charCodeAt(c)|(255&t.charCodeAt(++c))<<8|(255&t.charCodeAt(++c))<<16|(255&t.charCodeAt(++c))<<24,++c,i=27492+(65535&(a=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(a>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&t.charCodeAt(c+2))<<16;case 2:l^=(255&t.charCodeAt(c+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(c)))*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return i^=t.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0};var xa={exports:{}};xa.exports=function(t,e){for(var n,r=t.length,i=e^r,a=0;r>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(a)|(255&t.charCodeAt(++a))<<8|(255&t.charCodeAt(++a))<<16|(255&t.charCodeAt(++a))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++a;switch(r){case 3:i^=(255&t.charCodeAt(a+2))<<16;case 2:i^=(255&t.charCodeAt(a+1))<<8;case 1:i=1540483477*(65535&(i^=255&t.charCodeAt(a)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0};var ba=_a.exports,wa=xa.exports;va.exports=ba,va.exports.murmur3=ba,va.exports.murmur2=wa;class Sa{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,e,n,r){this.ids.push(Ma(t)),this.positions.push(e,n,r)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const e=Ma(t);let n=0,r=this.ids.length-1;for(;n<r;){const t=n+r>>1;this.ids[t]>=e?r=t:n=t+1}const i=[];for(;this.ids[n]===e;)i.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return i}static serialize(t,e){const n=new Float64Array(t.ids),r=new Uint32Array(t.positions);return Ea(n,r,0,n.length-1),e&&e.push(n.buffer,r.buffer),{ids:n,positions:r}}static deserialize(t){const e=new Sa;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e}}function Ma(t){const e=+t;return!isNaN(e)&&e<=Number.MAX_SAFE_INTEGER?e:va.exports(String(t))}function Ea(t,e,n,r){for(;n<r;){const i=t[n+r>>1];let a=n-1,o=r+1;for(;;){do{a++}while(t[a]<i);do{o--}while(t[o]>i);if(a>=o)break;ka(t,a,o),ka(e,3*a,3*o),ka(e,3*a+1,3*o+1),ka(e,3*a+2,3*o+2)}o-n<r-o?(Ea(t,e,n,o),n=o+1):(Ea(t,e,o+1,r),r=o)}}function ka(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}Tr("FeaturePositionMap",Sa);class Ta{constructor(t,e){this.gl=t.gl,this.location=e}}class Ca extends Ta{constructor(t,e){super(t,e),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class Ia extends Ta{constructor(t,e){super(t,e),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class Pa extends Ta{constructor(t,e){super(t,e),this.current=Rt.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const Aa=new Float32Array(16);function za(t){return[ga(255*t.r,255*t.g),ga(255*t.b,255*t.a)]}class La{constructor(t,e,n){this.value=t,this.uniformNames=e.map((t=>`u_${t}`)),this.type=n}setUniform(t,e,n){t.set(n.constantOr(this.value))}getBinding(t,e,n){return"color"===this.type?new Pa(t,e):new Ca(t,e)}}class Ra{constructor(t,e){this.uniformNames=e.map((t=>`u_${t}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr}setUniform(t,e,n,r){const i="u_pattern_to"===r?this.patternTo:"u_pattern_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null;i&&t.set(i)}getBinding(t,e,n){return"u_pattern"===n.substr(0,9)?new Ia(t,e):new Ca(t,e)}}class Da{constructor(t,e,n,r){this.expression=t,this.type=n,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:`a_${t}`,type:"Float32",components:"color"===n?2:1,offset:0}))),this.paintVertexArray=new r}populatePaintArray(t,e,n,r,i){const a=this.paintVertexArray.length,o=this.expression.evaluate(new Qr(0),e,{},r,[],i);this.paintVertexArray.resize(t),this._setPaintValue(a,t,o)}updatePaintArray(t,e,n,r){const i=this.expression.evaluate({zoom:0},n,r);this._setPaintValue(t,e,i)}_setPaintValue(t,e,n){if("color"===this.type){const r=za(n);for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,r[0],r[1])}else{for(let r=t;r<e;r++)this.paintVertexArray.emplace(r,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Oa{constructor(t,e,n,r,i,a){this.expression=t,this.uniformNames=e.map((t=>`u_${t}_t`)),this.type=n,this.useIntegerZoom=r,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=e.map((t=>({name:`a_${t}`,type:"Float32",components:"color"===n?4:2,offset:0}))),this.paintVertexArray=new a}populatePaintArray(t,e,n,r,i){const a=this.expression.evaluate(new Qr(this.zoom),e,{},r,[],i),o=this.expression.evaluate(new Qr(this.zoom+1),e,{},r,[],i),s=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(s,t,a,o)}updatePaintArray(t,e,n,r){const i=this.expression.evaluate({zoom:this.zoom},n,r),a=this.expression.evaluate({zoom:this.zoom+1},n,r);this._setPaintValue(t,e,i,a)}_setPaintValue(t,e,n,r){if("color"===this.type){const i=za(n),a=za(r);for(let n=t;n<e;n++)this.paintVertexArray.emplace(n,i[0],i[1],a[0],a[1])}else{for(let i=t;i<e;i++)this.paintVertexArray.emplace(i,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,e){const n=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,r=a(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);t.set(r)}getBinding(t,e,n){return new Ca(t,e)}}class Ba{constructor(t,e,n,r,i,a){this.expression=t,this.type=e,this.useIntegerZoom=n,this.zoom=r,this.layerId=a,this.zoomInPaintVertexArray=new i,this.zoomOutPaintVertexArray=new i}populatePaintArray(t,e,n){const r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(r,t,e.patterns&&e.patterns[this.layerId],n)}updatePaintArray(t,e,n,r,i){this._setPaintValues(t,e,n.patterns&&n.patterns[this.layerId],i)}_setPaintValues(t,e,n,r){if(!r||!n)return;const{min:i,mid:a,max:o}=n,s=r[i],l=r[a],c=r[o];if(s&&l&&c)for(let u=t;u<e;u++)this.zoomInPaintVertexArray.emplace(u,l.tl[0],l.tl[1],l.br[0],l.br[1],s.tl[0],s.tl[1],s.br[0],s.br[1],l.pixelRatio,s.pixelRatio),this.zoomOutPaintVertexArray.emplace(u,l.tl[0],l.tl[1],l.br[0],l.br[1],c.tl[0],c.tl[1],c.br[0],c.br[1],l.pixelRatio,c.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,ya.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,ya.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Fa{constructor(t,e,n){this.binders={},this._buffers=[];const r=[];for(const i in t.paint._values){if(!n(i))continue;const a=t.paint.get(i);if(!(a instanceof oi&&bn(a.property.specification)))continue;const o=Za(i,t.type),s=a.value,l=a.property.specification.type,c=a.property.useIntegerZoom,u=a.property.specification["property-type"],h="cross-faded"===u||"cross-faded-data-driven"===u;if("constant"===s.kind)this.binders[i]=h?new Ra(s.value,o):new La(s.value,o,l),r.push(`/u_${i}`);else if("source"===s.kind||h){const n=Ua(i,l,"source");this.binders[i]=h?new Ba(s,l,c,e,n,t.id):new Da(s,o,l,n),r.push(`/a_${i}`)}else{const t=Ua(i,l,"composite");this.binders[i]=new Oa(s,o,l,c,e,t),r.push(`/z_${i}`)}}this.cacheKey=r.sort().join("")}getMaxValue(t){const e=this.binders[t];return e instanceof Da||e instanceof Oa?e.maxValue:0}populatePaintArrays(t,e,n,r,i){for(const a in this.binders){const o=this.binders[a];(o instanceof Da||o instanceof Oa||o instanceof Ba)&&o.populatePaintArray(t,e,n,r,i)}}setConstantPatternPositions(t,e){for(const n in this.binders){const r=this.binders[n];r instanceof Ra&&r.setConstantPatternPositions(t,e)}}updatePaintArrays(t,e,n,r,i){let a=!1;for(const o in t){const s=e.getPositions(o);for(const e of s){const s=n.feature(e.index);for(const n in this.binders){const l=this.binders[n];if((l instanceof Da||l instanceof Oa||l instanceof Ba)&&!0===l.expression.isStateDependent){const c=r.paint.get(n);l.expression=c.value,l.updatePaintArray(e.start,e.end,s,t[o],i),a=!0}}}}return a}defines(){const t=[];for(const e in this.binders){const n=this.binders[e];(n instanceof La||n instanceof Ra)&&t.push(...n.uniformNames.map((t=>`#define HAS_UNIFORM_${t}`)))}return t}getBinderAttributes(){const t=[];for(const e in this.binders){const n=this.binders[e];if(n instanceof Da||n instanceof Oa)for(let e=0;e<n.paintVertexAttributes.length;e++)t.push(n.paintVertexAttributes[e].name);else if(n instanceof Ba)for(let e=0;e<ya.members.length;e++)t.push(ya.members[e].name)}return t}getBinderUniforms(){const t=[];for(const e in this.binders){const n=this.binders[e];if(n instanceof La||n instanceof Ra||n instanceof Oa)for(const e of n.uniformNames)t.push(e)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,e){const n=[];for(const r in this.binders){const i=this.binders[r];if(i instanceof La||i instanceof Ra||i instanceof Oa)for(const a of i.uniformNames)if(e[a]){const o=i.getBinding(t,e[a],a);n.push({name:a,property:r,binding:o})}}return n}setUniforms(t,e,n,r){for(const{name:i,property:a,binding:o}of e)this.binders[a].setUniform(o,r,n.get(a),i)}updatePaintBuffers(t){this._buffers=[];for(const e in this.binders){const n=this.binders[e];if(t&&n instanceof Ba){const e=2===t.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;e&&this._buffers.push(e)}else(n instanceof Da||n instanceof Oa)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}}upload(t){for(const e in this.binders){const n=this.binders[e];(n instanceof Da||n instanceof Oa||n instanceof Ba)&&n.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const e=this.binders[t];(e instanceof Da||e instanceof Oa||e instanceof Ba)&&e.destroy()}}}class Na{constructor(t,e,n=(()=>!0)){this.programConfigurations={};for(const r of t)this.programConfigurations[r.id]=new Fa(r,e,n);this.needsUpload=!1,this._featureMap=new Sa,this._bufferOffset=0}populatePaintArrays(t,e,n,r,i,a){for(const o in this.programConfigurations)this.programConfigurations[o].populatePaintArrays(t,e,r,i,a);void 0!==e.id&&this._featureMap.add(e.id,n,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,e,n,r){for(const i of n)this.needsUpload=this.programConfigurations[i.id].updatePaintArrays(t,this._featureMap,e,i,r)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function Za(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace(`${e}-`,"").replace(/-/g,"_")]}function Ua(t,e,n){const r={color:{source:Ei,composite:ji},number:{source:Bi,composite:Ei}},i=function(t){return{"line-pattern":{source:aa,composite:aa},"fill-pattern":{source:aa,composite:aa},"fill-extrusion-pattern":{source:aa,composite:aa}}[t]}(t);return i&&i[n]||r[e][n]}Tr("ConstantBinder",La),Tr("CrossFadedConstantBinder",Ra),Tr("SourceExpressionBinder",Da),Tr("CrossFadedCompositeBinder",Ba),Tr("CompositeExpressionBinder",Oa),Tr("ProgramConfiguration",Fa,{omit:["_buffers"]}),Tr("ProgramConfigurationSet",Na);var ja=8192;const Va=Math.pow(2,14)-1,qa=-Va-1;function $a(t){const e=ja/t.extent,n=t.loadGeometry();for(let r=0;r<n.length;r++){const t=n[r];for(let n=0;n<t.length;n++){const r=t[n],i=Math.round(r.x*e),o=Math.round(r.y*e);r.x=a(i,qa,Va),r.y=a(o,qa,Va),(i<r.x||i>r.x+1||o<r.y||o>r.y+1)&&f("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return n}function Ga(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?$a(t):[]}}function Wa(t,e,n,r,i){t.emplaceBack(2*e+(r+1)/2,2*n+(i+1)/2)}class Ha{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new ta,this.indexArray=new ha,this.segments=new ma,this.programConfigurations=new Na(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n){const r=this.layers[0],i=[];let a=null,o=!1;"circle"===r.type&&(a=r.layout.get("circle-sort-key"),o=!a.isConstant());for(const{feature:s,id:l,index:c,sourceLayerIndex:u}of t){const t=this.layers[0]._featureFilter.needGeometry,e=Ga(s,t);if(!this.layers[0]._featureFilter.filter(new Qr(this.zoom),e,n))continue;const r=o?a.evaluate(e,{},n):void 0,h={id:l,properties:s.properties,type:s.type,sourceLayerIndex:u,index:c,geometry:t?e.geometry:$a(s),patterns:{},sortKey:r};i.push(h)}o&&i.sort(((t,e)=>t.sortKey-e.sortKey));for(const s of i){const{geometry:r,index:i,sourceLayerIndex:a}=s,o=t[i].feature;this.addFeature(s,r,i,n),e.featureIndex.insert(o,r,i,a,this.index)}}update(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,fa),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,e,n,r){for(const i of e)for(const e of i){const n=e.x,r=e.y;if(n<0||n>=ja||r<0||r>=ja)continue;const i=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),a=i.vertexLength;Wa(this.layoutVertexArray,n,r,-1,-1),Wa(this.layoutVertexArray,n,r,1,-1),Wa(this.layoutVertexArray,n,r,1,1),Wa(this.layoutVertexArray,n,r,-1,1),this.indexArray.emplaceBack(a,a+1,a+2),this.indexArray.emplaceBack(a,a+3,a+2),i.vertexLength+=4,i.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{},r)}}function Xa(t,e){for(let n=0;n<t.length;n++)if(io(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(io(t,e[n]))return!0;return!!Qa(t,e)}function Ka(t,e,n){return!!io(t,e)||!!eo(e,t,n)}function Ya(t,e){if(1===t.length)return ro(e,t[0]);for(let n=0;n<e.length;n++){const r=e[n];for(let e=0;e<r.length;e++)if(io(t,r[e]))return!0}for(let n=0;n<t.length;n++)if(ro(e,t[n]))return!0;for(let n=0;n<e.length;n++)if(Qa(t,e[n]))return!0;return!1}function Ja(t,e,n){if(t.length>1){if(Qa(t,e))return!0;for(let r=0;r<e.length;r++)if(eo(e[r],t,n))return!0}for(let r=0;r<t.length;r++)if(eo(t[r],e,n))return!0;return!1}function Qa(t,e){if(0===t.length||0===e.length)return!1;for(let n=0;n<t.length-1;n++){const r=t[n],i=t[n+1];for(let t=0;t<e.length-1;t++)if(to(r,i,e[t],e[t+1]))return!0}return!1}function to(t,e,n,r){return m(t,n,r)!==m(e,n,r)&&m(t,e,n)!==m(t,e,r)}function eo(t,e,n){const r=n*n;if(1===e.length)return t.distSqr(e[0])<r;for(let i=1;i<e.length;i++)if(no(t,e[i-1],e[i])<r)return!0;return!1}function no(t,e,n){const r=e.distSqr(n);if(0===r)return t.distSqr(e);const i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;return t.distSqr(i<0?e:i>1?n:n.sub(e)._mult(i)._add(e))}function ro(t,e){let n,r,i,a=!1;for(let o=0;o<t.length;o++){n=t[o];for(let t=0,o=n.length-1;t<n.length;o=t++)r=n[t],i=n[o],r.y>e.y!=i.y>e.y&&e.x<(i.x-r.x)*(e.y-r.y)/(i.y-r.y)+r.x&&(a=!a)}return a}function io(t,e){let n=!1;for(let r=0,i=t.length-1;r<t.length;i=r++){const a=t[r],o=t[i];a.y>e.y!=o.y>e.y&&e.x<(o.x-a.x)*(e.y-a.y)/(o.y-a.y)+a.x&&(n=!n)}return n}function ao(t,e,n){const r=n[0],i=n[2];if(t.x<r.x&&e.x<r.x||t.x>i.x&&e.x>i.x||t.y<r.y&&e.y<r.y||t.y>i.y&&e.y>i.y)return!1;const a=m(t,e,n[0]);return a!==m(t,e,n[1])||a!==m(t,e,n[2])||a!==m(t,e,n[3])}function oo(t,e,n){const r=e.paint.get(t).value;return"constant"===r.kind?r.value:n.programConfigurations.get(e.id).getMaxValue(t)}function so(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function lo(t,e,n,r,i){if(!e[0]&&!e[1])return t;const a=E.convert(e)._mult(i);"viewport"===n&&a._rotate(-r);const o=[];for(let s=0;s<t.length;s++)o.push(t[s].sub(a));return o}Tr("CircleBucket",Ha,{omit:["layers"]});const co=new pi({"circle-sort-key":new ci(rt.layout_circle["circle-sort-key"])});var uo={paint:new pi({"circle-radius":new ci(rt.paint_circle["circle-radius"]),"circle-color":new ci(rt.paint_circle["circle-color"]),"circle-blur":new ci(rt.paint_circle["circle-blur"]),"circle-opacity":new ci(rt.paint_circle["circle-opacity"]),"circle-translate":new li(rt.paint_circle["circle-translate"]),"circle-translate-anchor":new li(rt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new li(rt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new li(rt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ci(rt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ci(rt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ci(rt.paint_circle["circle-stroke-opacity"])}),layout:co},ho=1e-6,po="undefined"!=typeof Float32Array?Float32Array:Array;function fo(){var t=new po(9);return po!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function mo(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function go(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],p=e[10],f=e[11],m=e[12],g=e[13],y=e[14],v=e[15],_=n[0],x=n[1],b=n[2],w=n[3];return t[0]=_*r+x*s+b*h+w*m,t[1]=_*i+x*l+b*d+w*g,t[2]=_*a+x*c+b*p+w*y,t[3]=_*o+x*u+b*f+w*v,t[4]=(_=n[4])*r+(x=n[5])*s+(b=n[6])*h+(w=n[7])*m,t[5]=_*i+x*l+b*d+w*g,t[6]=_*a+x*c+b*p+w*y,t[7]=_*o+x*u+b*f+w*v,t[8]=(_=n[8])*r+(x=n[9])*s+(b=n[10])*h+(w=n[11])*m,t[9]=_*i+x*l+b*d+w*g,t[10]=_*a+x*c+b*p+w*y,t[11]=_*o+x*u+b*f+w*v,t[12]=(_=n[12])*r+(x=n[13])*s+(b=n[14])*h+(w=n[15])*m,t[13]=_*i+x*l+b*d+w*g,t[14]=_*a+x*c+b*p+w*y,t[15]=_*o+x*u+b*f+w*v,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var yo,vo=go;function _o(){var t=new po(3);return po!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function xo(t,e,n){var r=new po(3);return r[0]=t,r[1]=e,r[2]=n,r}function bo(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,t[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,t[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,t[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,t}function wo(){var t=new po(4);return po!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function So(t,e){const n=bo([],[t.x,t.y,0,1],e);return new E(n[0]/n[3],n[1]/n[3])}_o(),yo=new po(4),po!=Float32Array&&(yo[0]=0,yo[1]=0,yo[2]=0,yo[3]=0),_o(),xo(1,0,0),xo(0,1,0),wo(),wo(),fo(),function(){var t;t=new po(2),po!=Float32Array&&(t[0]=0,t[1]=0)}();class Mo extends Ha{}Tr("HeatmapBucket",Mo,{omit:["layers"]});var Eo={paint:new pi({"heatmap-radius":new ci(rt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ci(rt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new li(rt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new di(rt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new li(rt.paint_heatmap["heatmap-opacity"])})};function ko(t,{width:e,height:n},r,i){if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==e*n*r)throw new RangeError(`mismatched image size. expected: ${i.length} but got: ${e*n*r}`)}else i=new Uint8Array(e*n*r);return t.width=e,t.height=n,t.data=i,t}function To(t,{width:e,height:n},r){if(e===t.width&&n===t.height)return;const i=ko({},{width:e,height:n},r);Co(t,i,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,e),height:Math.min(t.height,n)},r),t.width=e,t.height=n,t.data=i.data}function Co(t,e,n,r,i,a){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");const o=t.data,s=e.data;if(o===s)throw new Error("srcData equals dstData, so image is already copied");for(let l=0;l<i.height;l++){const c=((n.y+l)*t.width+n.x)*a,u=((r.y+l)*e.width+r.x)*a;for(let t=0;t<i.width*a;t++)s[u+t]=o[c+t]}return e}class Io{constructor(t,e){ko(this,t,1,e)}resize(t){To(this,t,1)}clone(){return new Io({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,n,r,i){Co(t,e,n,r,i,1)}}class Po{constructor(t,e){ko(this,t,4,e)}resize(t){To(this,t,4)}replace(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new Po({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,n,r,i){Co(t,e,n,r,i,4)}}function Ao(t){const e={},n=t.resolution||256,r=t.clips?t.clips.length:1,i=t.image||new Po({width:n,height:r});if(Math.log(n)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${n}`);const a=(n,r,a)=>{e[t.evaluationKey]=a;const o=t.expression.evaluate(e);i.data[n+r+0]=Math.floor(255*o.r/o.a),i.data[n+r+1]=Math.floor(255*o.g/o.a),i.data[n+r+2]=Math.floor(255*o.b/o.a),i.data[n+r+3]=Math.floor(255*o.a)};if(t.clips)for(let o=0,s=0;o<r;++o,s+=4*n)for(let e=0,r=0;e<n;e++,r+=4){const i=e/(n-1),{start:l,end:c}=t.clips[o];a(s,r,l*(1-i)+c*i)}else for(let o=0,s=0;o<n;o++,s+=4)a(0,s,o/(n-1));return i}Tr("AlphaImage",Io),Tr("RGBAImage",Po);var zo={paint:new pi({"hillshade-illumination-direction":new li(rt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new li(rt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new li(rt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new li(rt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new li(rt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new li(rt.paint_hillshade["hillshade-accent-color"])})};const Lo=_i([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ro}=Lo;var Do={exports:{}};function Oo(t,e,n){n=n||2;var r,i,a,o,s,l,c,u=e&&e.length,h=u?e[0]*n:t.length,d=Bo(t,0,h,n,!0),p=[];if(!d||d.next===d.prev)return p;if(u&&(d=function(t,e,n,r){var i,a,o,s=[];for(i=0,a=e.length;i<a;i++)(o=Bo(t,e[i]*r,i<a-1?e[i+1]*r:t.length,r,!1))===o.next&&(o.steiner=!0),s.push(Ho(o));for(s.sort(qo),i=0;i<s.length;i++)n=$o(s[i],n);return n}(t,e,d,n)),t.length>80*n){r=a=t[0],i=o=t[1];for(var f=n;f<h;f+=n)(s=t[f])<r&&(r=s),(l=t[f+1])<i&&(i=l),s>a&&(a=s),l>o&&(o=l);c=0!==(c=Math.max(a-r,o-i))?32767/c:0}return No(d,p,n,r,i,c,0),p}function Bo(t,e,n,r,i){var a,o;if(i===ss(t,e,n,r)>0)for(a=e;a<n;a+=r)o=is(a,t[a],t[a+1],o);else for(a=n-r;a>=e;a-=r)o=is(a,t[a],t[a+1],o);return o&&Jo(o,o.next)&&(as(o),o=o.next),o}function Fo(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!Jo(r,r.next)&&0!==Yo(r.prev,r,r.next))r=r.next;else{if(as(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function No(t,e,n,r,i,a,o){if(t){!o&&a&&function(t,e,n,r){var i=t;do{0===i.z&&(i.z=Wo(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,a,o,s,l,c=1;do{for(n=t,t=null,a=null,o=0;n;){for(o++,r=n,s=0,e=0;e<c&&(s++,r=r.nextZ);e++);for(l=c;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:t=i,i.prevZ=a,a=i;n=r}a.nextZ=null,c*=2}while(o>1)}(i)}(t,r,i,a);for(var s,l,c=t;t.prev!==t.next;)if(s=t.prev,l=t.next,a?Uo(t,r,i,a):Zo(t))e.push(s.i/n|0),e.push(t.i/n|0),e.push(l.i/n|0),as(t),t=l.next,c=l.next;else if((t=l)===c){o?1===o?No(t=jo(Fo(t),e,n),e,n,r,i,a,2):2===o&&Vo(t,e,n,r,i,a):No(Fo(t),e,n,r,i,a,1);break}}}function Zo(t){var e=t.prev,n=t,r=t.next;if(Yo(e,n,r)>=0)return!1;for(var i=e.x,a=n.x,o=r.x,s=e.y,l=n.y,c=r.y,u=i<a?i<o?i:o:a<o?a:o,h=s<l?s<c?s:c:l<c?l:c,d=i>a?i>o?i:o:a>o?a:o,p=s>l?s>c?s:c:l>c?l:c,f=r.next;f!==e;){if(f.x>=u&&f.x<=d&&f.y>=h&&f.y<=p&&Xo(i,s,a,l,o,c,f.x,f.y)&&Yo(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Uo(t,e,n,r){var i=t.prev,a=t,o=t.next;if(Yo(i,a,o)>=0)return!1;for(var s=i.x,l=a.x,c=o.x,u=i.y,h=a.y,d=o.y,p=s<l?s<c?s:c:l<c?l:c,f=u<h?u<d?u:d:h<d?h:d,m=s>l?s>c?s:c:l>c?l:c,g=u>h?u>d?u:d:h>d?h:d,y=Wo(p,f,e,n,r),v=Wo(m,g,e,n,r),_=t.prevZ,x=t.nextZ;_&&_.z>=y&&x&&x.z<=v;){if(_.x>=p&&_.x<=m&&_.y>=f&&_.y<=g&&_!==i&&_!==o&&Xo(s,u,l,h,c,d,_.x,_.y)&&Yo(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==i&&x!==o&&Xo(s,u,l,h,c,d,x.x,x.y)&&Yo(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;_&&_.z>=y;){if(_.x>=p&&_.x<=m&&_.y>=f&&_.y<=g&&_!==i&&_!==o&&Xo(s,u,l,h,c,d,_.x,_.y)&&Yo(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;x&&x.z<=v;){if(x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==i&&x!==o&&Xo(s,u,l,h,c,d,x.x,x.y)&&Yo(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function jo(t,e,n){var r=t;do{var i=r.prev,a=r.next.next;!Jo(i,a)&&Qo(i,r,r.next,a)&&ns(i,a)&&ns(a,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(a.i/n|0),as(r),as(r.next),r=t=a),r=r.next}while(r!==t);return Fo(r)}function Vo(t,e,n,r,i,a){var o=t;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Ko(o,s)){var l=rs(o,s);return o=Fo(o,o.next),l=Fo(l,l.next),No(o,e,n,r,i,a,0),void No(l,e,n,r,i,a,0)}s=s.next}o=o.next}while(o!==t)}function qo(t,e){return t.x-e.x}function $o(t,e){var n=function(t,e){var n,r=e,i=t.x,a=t.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>o&&(o=s,n=r.x<r.next.x?r:r.next,s===i))return n}r=r.next}while(r!==e);if(!n)return null;var l,c=n,u=n.x,h=n.y,d=1/0;r=n;do{i>=r.x&&r.x>=u&&i!==r.x&&Xo(a<h?i:o,a,u,h,a<h?o:i,a,r.x,r.y)&&(l=Math.abs(a-r.y)/(i-r.x),ns(r,t)&&(l<d||l===d&&(r.x>n.x||r.x===n.x&&Go(n,r)))&&(n=r,d=l)),r=r.next}while(r!==c);return n}(t,e);if(!n)return e;var r=rs(n,t);return Fo(r,r.next),Fo(n,n.next)}function Go(t,e){return Yo(t.prev,t,e.prev)<0&&Yo(e.next,t,t.next)<0}function Wo(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Ho(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Xo(t,e,n,r,i,a,o,s){return(i-o)*(e-s)>=(t-o)*(a-s)&&(t-o)*(r-s)>=(n-o)*(e-s)&&(n-o)*(a-s)>=(i-o)*(r-s)}function Ko(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Qo(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(ns(t,e)&&ns(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,a=(t.y+e.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(Yo(t.prev,t,e.prev)||Yo(t,e.prev,e))||Jo(t,e)&&Yo(t.prev,t,t.next)>0&&Yo(e.prev,e,e.next)>0)}function Yo(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Jo(t,e){return t.x===e.x&&t.y===e.y}function Qo(t,e,n,r){var i=es(Yo(t,e,n)),a=es(Yo(t,e,r)),o=es(Yo(n,r,t)),s=es(Yo(n,r,e));return i!==a&&o!==s||!(0!==i||!ts(t,n,e))||!(0!==a||!ts(t,r,e))||!(0!==o||!ts(n,t,r))||!(0!==s||!ts(n,e,r))}function ts(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function es(t){return t>0?1:t<0?-1:0}function ns(t,e){return Yo(t.prev,t,t.next)<0?Yo(t,e,t.next)>=0&&Yo(t,t.prev,e)>=0:Yo(t,e,t.prev)<0||Yo(t,t.next,e)<0}function rs(t,e){var n=new os(t.i,t.x,t.y),r=new os(e.i,e.x,e.y),i=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function is(t,e,n,r){var i=new os(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function as(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function os(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ss(t,e,n,r){for(var i=0,a=e,o=n-r;a<n;a+=r)i+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return i}function ls(t,e,n,r,i){cs(t,e,n||0,r||t.length-1,i||hs)}function cs(t,e,n,r,i){for(;r>n;){if(r-n>600){var a=r-n+1,o=e-n+1,s=Math.log(a),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(a-l)/a)*(o-a/2<0?-1:1);cs(t,e,Math.max(n,Math.floor(e-o*l/a+c)),Math.min(r,Math.floor(e+(a-o)*l/a+c)),i)}var u=t[e],h=n,d=r;for(us(t,n,e),i(t[r],u)>0&&us(t,n,r);h<d;){for(us(t,h,d),h++,d--;i(t[h],u)<0;)h++;for(;i(t[d],u)>0;)d--}0===i(t[n],u)?us(t,n,d):us(t,++d,r),d<=e&&(n=d+1),e<=d&&(r=d-1)}}function us(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function hs(t,e){return t<e?-1:t>e?1:0}function ds(t,e){const n=t.length;if(n<=1)return[t];const r=[];let i,a;for(let o=0;o<n;o++){const e=g(t[o]);0!==e&&(t[o].area=Math.abs(e),void 0===a&&(a=e<0),a===e<0?(i&&r.push(i),i=[t[o]]):i.push(t[o]))}if(i&&r.push(i),e>1)for(let o=0;o<r.length;o++)r[o].length<=e||(ls(r[o],e,1,r[o].length-1,ps),r[o]=r[o].slice(0,e));return r}function ps(t,e){return e.area-t.area}function fs(t,e,n){const r=n.patternDependencies;let i=!1;for(const a of e){const e=a.paint.get(`${t}-pattern`);e.isConstant()||(i=!0);const n=e.constantOr(null);n&&(i=!0,r[n.to]=!0,r[n.from]=!0)}return i}function ms(t,e,n,r,i){const a=i.patternDependencies;for(const o of e){const e=o.paint.get(`${t}-pattern`).value;if("constant"!==e.kind){let t=e.evaluate({zoom:r-1},n,{},i.availableImages),s=e.evaluate({zoom:r},n,{},i.availableImages),l=e.evaluate({zoom:r+1},n,{},i.availableImages);t=t&&t.name?t.name:t,s=s&&s.name?s.name:s,l=l&&l.name?l.name:l,a[t]=!0,a[s]=!0,a[l]=!0,n.patterns[o.id]={min:t,mid:s,max:l}}}return n}Do.exports=Oo,Do.exports.default=Oo,Oo.deviation=function(t,e,n,r){var i=e&&e.length,a=Math.abs(ss(t,0,i?e[0]*n:t.length,n));if(i)for(var o=0,s=e.length;o<s;o++)a-=Math.abs(ss(t,e[o]*n,o<s-1?e[o+1]*n:t.length,n));var l=0;for(o=0;o<r.length;o+=3){var c=r[o]*n,u=r[o+1]*n,h=r[o+2]*n;l+=Math.abs((t[c]-t[h])*(t[u+1]-t[c+1])-(t[c]-t[u])*(t[h+1]-t[c+1]))}return 0===a&&0===l?0:Math.abs((l-a)/a)},Oo.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var a=0;a<t[i].length;a++)for(var o=0;o<e;o++)n.vertices.push(t[i][a][o]);i>0&&n.holes.push(r+=t[i-1].length)}return n};class gs{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ea,this.indexArray=new ha,this.indexArray2=new da,this.programConfigurations=new Na(t.layers,t.zoom),this.segments=new ma,this.segments2=new ma,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n){this.hasPattern=fs("fill",this.layers,e);const r=this.layers[0].layout.get("fill-sort-key"),i=!r.isConstant(),a=[];for(const{feature:o,id:s,index:l,sourceLayerIndex:c}of t){const t=this.layers[0]._featureFilter.needGeometry,u=Ga(o,t);if(!this.layers[0]._featureFilter.filter(new Qr(this.zoom),u,n))continue;const h=i?r.evaluate(u,{},n,e.availableImages):void 0,d={id:s,properties:o.properties,type:o.type,sourceLayerIndex:c,index:l,geometry:t?u.geometry:$a(o),patterns:{},sortKey:h};a.push(d)}i&&a.sort(((t,e)=>t.sortKey-e.sortKey));for(const o of a){const{geometry:r,index:i,sourceLayerIndex:a}=o;if(this.hasPattern){const t=ms("fill",this.layers,o,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(o,r,i,n,{});e.featureIndex.insert(t[i].feature,r,i,a,this.index)}}update(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}addFeatures(t,e,n){for(const r of this.patternFeatures)this.addFeature(r,r.geometry,r.index,e,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ro),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,e,n,r,i){for(const a of ds(e,500)){let t=0;for(const s of a)t+=s.length;const e=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray),n=e.vertexLength,r=[],i=[];for(const s of a){if(0===s.length)continue;s!==a[0]&&i.push(r.length/2);const t=this.segments2.prepareSegment(s.length,this.layoutVertexArray,this.indexArray2),e=t.vertexLength;this.layoutVertexArray.emplaceBack(s[0].x,s[0].y),this.indexArray2.emplaceBack(e+s.length-1,e),r.push(s[0].x),r.push(s[0].y);for(let n=1;n<s.length;n++)this.layoutVertexArray.emplaceBack(s[n].x,s[n].y),this.indexArray2.emplaceBack(e+n-1,e+n),r.push(s[n].x),r.push(s[n].y);t.vertexLength+=s.length,t.primitiveLength+=s.length}const o=Do.exports(r,i);for(let a=0;a<o.length;a+=3)this.indexArray.emplaceBack(n+o[a],n+o[a+1],n+o[a+2]);e.vertexLength+=t,e.primitiveLength+=o.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,r)}}Tr("FillBucket",gs,{omit:["layers","patternFeatures"]});const ys=new pi({"fill-sort-key":new ci(rt.layout_fill["fill-sort-key"])});var vs={paint:new pi({"fill-antialias":new li(rt.paint_fill["fill-antialias"]),"fill-opacity":new ci(rt.paint_fill["fill-opacity"]),"fill-color":new ci(rt.paint_fill["fill-color"]),"fill-outline-color":new ci(rt.paint_fill["fill-outline-color"]),"fill-translate":new li(rt.paint_fill["fill-translate"]),"fill-translate-anchor":new li(rt.paint_fill["fill-translate-anchor"]),"fill-pattern":new ui(rt.paint_fill["fill-pattern"])}),layout:ys};const _s=_i([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),xs=_i([{name:"a_centroid",components:2,type:"Int16"}],4),{members:bs}=_s;var ws={},Ss=E,Ms=Es;function Es(t,e,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=i,t.readFields(ks,this,e)}function ks(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function Ts(t){for(var e,n,r=0,i=0,a=t.length,o=a-1;i<a;o=i++)r+=((n=t[o]).x-(e=t[i]).x)*(e.y+n.y);return r}Es.types=["Unknown","Point","LineString","Polygon"],Es.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,i=0,a=0,o=0,s=[];t.pos<n;){if(i<=0){var l=t.readVarint();r=7&l,i=l>>3}if(i--,1===r||2===r)a+=t.readSVarint(),o+=t.readSVarint(),1===r&&(e&&s.push(e),e=[]),e.push(new Ss(a,o));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&s.push(e),s},Es.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,i=0,a=0,o=1/0,s=-1/0,l=1/0,c=-1/0;t.pos<e;){if(r<=0){var u=t.readVarint();n=7&u,r=u>>3}if(r--,1===n||2===n)(i+=t.readSVarint())<o&&(o=i),i>s&&(s=i),(a+=t.readSVarint())<l&&(l=a),a>c&&(c=a);else if(7!==n)throw new Error("unknown command "+n)}return[o,l,s,c]},Es.prototype.toGeoJSON=function(t,e,n){var r,i,a=this.extent*Math.pow(2,n),o=this.extent*t,s=this.extent*e,l=this.loadGeometry(),c=Es.types[this.type];function u(t){for(var e=0;e<t.length;e++){var n=t[e];t[e]=[360*(n.x+o)/a-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/a)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(r=0;r<l.length;r++)h[r]=l[r][0];u(l=h);break;case 2:for(r=0;r<l.length;r++)u(l[r]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],a=0;a<e;a++){var o=Ts(t[a]);0!==o&&(void 0===r&&(r=o<0),r===o<0?(n&&i.push(n),n=[t[a]]):n.push(t[a]))}return n&&i.push(n),i}(l),r=0;r<l.length;r++)for(i=0;i<l[r].length;i++)u(l[r][i])}1===l.length?l=l[0]:c="Multi"+c;var d={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(d.id=this.id),d};var Cs=Ms,Is=Ps;function Ps(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(As,this,e),this.length=this._features.length}function As(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(n))}Ps.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Cs(this._pbf,e,this.extent,this._keys,this._values)};var zs=Is;function Ls(t,e,n){if(3===t){var r=new zs(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}ws.VectorTile=function(t,e){this.layers=t.readFields(Ls,{},e)},ws.VectorTileFeature=Ms,ws.VectorTileLayer=Is;const Rs=ws.VectorTileFeature.types,Ds=Math.pow(2,13);function Os(t,e,n,r,i,a,o,s){t.emplaceBack(e,n,2*Math.floor(r*Ds)+o,i*Ds*2,a*Ds*2,Math.round(s))}class Bs{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new na,this.centroidVertexArray=new Qi,this.indexArray=new ha,this.programConfigurations=new Na(t.layers,t.zoom),this.segments=new ma,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n){this.features=[],this.hasPattern=fs("fill-extrusion",this.layers,e);for(const{feature:r,id:i,index:a,sourceLayerIndex:o}of t){const t=this.layers[0]._featureFilter.needGeometry,s=Ga(r,t);if(!this.layers[0]._featureFilter.filter(new Qr(this.zoom),s,n))continue;const l={id:i,sourceLayerIndex:o,index:a,geometry:t?s.geometry:$a(r),properties:r.properties,type:r.type,patterns:{}};this.hasPattern?this.features.push(ms("fill-extrusion",this.layers,l,this.zoom,e)):this.addFeature(l,l.geometry,a,n,{}),e.featureIndex.insert(r,l.geometry,a,o,this.index,!0)}}addFeatures(t,e,n){for(const r of this.features){const{geometry:t}=r;this.addFeature(r,t,r.index,e,n)}}update(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,bs),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,xs.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,e,n,r,i){const a={x:0,y:0,vertexCount:0};for(const o of ds(e,500)){let e=0;for(const t of o)e+=t.length;let n=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const t of o){if(0===t.length)continue;if(Ns(t))continue;let e=0;for(let r=0;r<t.length;r++){const i=t[r];if(r>=1){const o=t[r-1];if(!Fs(i,o)){n.vertexLength+4>ma.MAX_VERTEX_ARRAY_LENGTH&&(n=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const t=i.sub(o)._perp()._unit(),r=o.dist(i);e+r>32768&&(e=0),Os(this.layoutVertexArray,i.x,i.y,t.x,t.y,0,0,e),Os(this.layoutVertexArray,i.x,i.y,t.x,t.y,0,1,e),a.x+=2*i.x,a.y+=2*i.y,a.vertexCount+=2,e+=r,Os(this.layoutVertexArray,o.x,o.y,t.x,t.y,0,0,e),Os(this.layoutVertexArray,o.x,o.y,t.x,t.y,0,1,e),a.x+=2*o.x,a.y+=2*o.y,a.vertexCount+=2;const s=n.vertexLength;this.indexArray.emplaceBack(s,s+2,s+1),this.indexArray.emplaceBack(s+1,s+2,s+3),n.vertexLength+=4,n.primitiveLength+=2}}}}if(n.vertexLength+e>ma.MAX_VERTEX_ARRAY_LENGTH&&(n=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray)),"Polygon"!==Rs[t.type])continue;const r=[],i=[],s=n.vertexLength;for(const t of o)if(0!==t.length){t!==o[0]&&i.push(r.length/2);for(let e=0;e<t.length;e++){const n=t[e];Os(this.layoutVertexArray,n.x,n.y,0,0,1,1,0),a.x+=n.x,a.y+=n.y,a.vertexCount+=1,r.push(n.x),r.push(n.y)}}const l=Do.exports(r,i);for(let t=0;t<l.length;t+=3)this.indexArray.emplaceBack(s+l[t],s+l[t+2],s+l[t+1]);n.primitiveLength+=l.length/3,n.vertexLength+=e}for(let o=0;o<a.vertexCount;o++)this.centroidVertexArray.emplaceBack(Math.floor(a.x/a.vertexCount),Math.floor(a.y/a.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,r)}}function Fs(t,e){return t.x===e.x&&(t.x<0||t.x>ja)||t.y===e.y&&(t.y<0||t.y>ja)}function Ns(t){return t.every((t=>t.x<0))||t.every((t=>t.x>ja))||t.every((t=>t.y<0))||t.every((t=>t.y>ja))}Tr("FillExtrusionBucket",Bs,{omit:["layers","features"]});var Zs={paint:new pi({"fill-extrusion-opacity":new li(rt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ci(rt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new li(rt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new li(rt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ui(rt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ci(rt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ci(rt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new li(rt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Us(t,e){return t.x*e.x+t.y*e.y}function js(t,e){if(1===t.length){let n=0;const r=e[n++];let i;for(;!i||r.equals(i);)if(i=e[n++],!i)return 1/0;for(;n<e.length;n++){const a=e[n],o=t[0],s=i.sub(r),l=a.sub(r),c=o.sub(r),u=Us(s,s),h=Us(s,l),d=Us(l,l),p=Us(c,s),f=Us(c,l),m=u*d-h*h,g=(d*p-h*f)/m,y=(u*f-h*p)/m,v=r.z*(1-g-y)+i.z*g+a.z*y;if(isFinite(v))return v}return 1/0}{let t=1/0;for(const n of e)t=Math.min(t,n.z);return t}}const Vs=_i([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:qs}=Vs,$s=_i([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Gs}=$s,Ws=ws.VectorTileFeature.types,Hs=Math.cos(Math.PI/180*37.5),Xs=Math.pow(2,14)/.5;class Ks{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((t=>{this.gradients[t.id]={}})),this.layoutVertexArray=new ra,this.layoutVertexArray2=new ia,this.indexArray=new ha,this.programConfigurations=new Na(t.layers,t.zoom),this.segments=new ma,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id))}populate(t,e,n){this.hasPattern=fs("line",this.layers,e);const r=this.layers[0].layout.get("line-sort-key"),i=!r.isConstant(),a=[];for(const{feature:o,id:s,index:l,sourceLayerIndex:c}of t){const t=this.layers[0]._featureFilter.needGeometry,e=Ga(o,t);if(!this.layers[0]._featureFilter.filter(new Qr(this.zoom),e,n))continue;const u=i?r.evaluate(e,{},n):void 0,h={id:s,properties:o.properties,type:o.type,sourceLayerIndex:c,index:l,geometry:t?e.geometry:$a(o),patterns:{},sortKey:u};a.push(h)}i&&a.sort(((t,e)=>t.sortKey-e.sortKey));for(const o of a){const{geometry:r,index:i,sourceLayerIndex:a}=o;if(this.hasPattern){const t=ms("line",this.layers,o,this.zoom,e);this.patternFeatures.push(t)}else this.addFeature(o,r,i,n,{});e.featureIndex.insert(t[i].feature,r,i,a,this.index)}}update(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)}addFeatures(t,e,n){for(const r of this.patternFeatures)this.addFeature(r,r.geometry,r.index,e,n)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,Gs)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,qs),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,e,n,r,i){const a=this.layers[0].layout,o=a.get("line-join").evaluate(t,{}),s=a.get("line-cap"),l=a.get("line-miter-limit"),c=a.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const u of e)this.addLine(u,t,o,s,l,c);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,r)}addLine(t,e,n,r,i,a){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let e=0;e<t.length-1;e++)this.totalDistance+=t[e].dist(t[e+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const o="Polygon"===Ws[e.type];let s=t.length;for(;s>=2&&t[s-1].equals(t[s-2]);)s--;let l=0;for(;l<s-1&&t[l].equals(t[l+1]);)l++;if(s<(o?3:2))return;"bevel"===n&&(i=1.05);const c=this.overscaling<=16?122880/(512*this.overscaling):0,u=this.segments.prepareSegment(10*s,this.layoutVertexArray,this.indexArray);let h,d,p,f,m;this.e1=this.e2=-1,o&&(h=t[s-2],m=t[l].sub(h)._unit()._perp());for(let g=l;g<s;g++){if(p=g===s-1?o?t[l+1]:void 0:t[g+1],p&&t[g].equals(p))continue;m&&(f=m),h&&(d=h),h=t[g],m=p?p.sub(h)._unit()._perp():f,f=f||m;let e=f.add(m);0===e.x&&0===e.y||e._unit();const y=f.x*m.x+f.y*m.y,v=e.x*m.x+e.y*m.y,_=0!==v?1/v:1/0,x=2*Math.sqrt(2-2*v),b=v<Hs&&d&&p,w=f.x*m.y-f.y*m.x>0;if(b&&g>l){const t=h.dist(d);if(t>2*c){const e=h.sub(h.sub(d)._mult(c/t)._round());this.updateDistance(d,e),this.addCurrentVertex(e,f,0,0,u),d=e}}const S=d&&p;let M=S?n:o?"butt":r;if(S&&"round"===M&&(_<a?M="miter":_<=2&&(M="fakeround")),"miter"===M&&_>i&&(M="bevel"),"bevel"===M&&(_>2&&(M="flipbevel"),_<i&&(M="miter")),d&&this.updateDistance(d,h),"miter"===M)e._mult(_),this.addCurrentVertex(h,e,0,0,u);else if("flipbevel"===M){if(_>100)e=m.mult(-1);else{const t=_*f.add(m).mag()/f.sub(m).mag();e._perp()._mult(t*(w?-1:1))}this.addCurrentVertex(h,e,0,0,u),this.addCurrentVertex(h,e.mult(-1),0,0,u)}else if("bevel"===M||"fakeround"===M){const t=-Math.sqrt(_*_-1),e=w?t:0,n=w?0:t;if(d&&this.addCurrentVertex(h,f,e,n,u),"fakeround"===M){const t=Math.round(180*x/Math.PI/20);for(let e=1;e<t;e++){let n=e/t;if(.5!==n){const t=n-.5;n+=n*t*(n-1)*((1.0904+y*(y*(3.55645-1.43519*y)-3.2452))*t*t+(.848013+y*(.215638*y-1.06021)))}const r=m.sub(f)._mult(n)._add(f)._unit()._mult(w?-1:1);this.addHalfVertex(h,r.x,r.y,!1,w,0,u)}}p&&this.addCurrentVertex(h,m,-e,-n,u)}else if("butt"===M)this.addCurrentVertex(h,e,0,0,u);else if("square"===M){const t=d?1:-1;this.addCurrentVertex(h,e,t,t,u)}else"round"===M&&(d&&(this.addCurrentVertex(h,f,0,0,u),this.addCurrentVertex(h,f,1,1,u,!0)),p&&(this.addCurrentVertex(h,m,-1,-1,u,!0),this.addCurrentVertex(h,m,0,0,u)));if(b&&g<s-1){const t=h.dist(p);if(t>2*c){const e=h.add(p.sub(h)._mult(c/t)._round());this.updateDistance(h,e),this.addCurrentVertex(e,m,0,0,u),h=e}}}}addCurrentVertex(t,e,n,r,i,a=!1){const o=e.y*r-e.x,s=-e.y-e.x*r;this.addHalfVertex(t,e.x+e.y*n,e.y-e.x*n,a,!1,n,i),this.addHalfVertex(t,o,s,a,!0,-r,i),this.distance>Xs/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,n,r,i,a))}addHalfVertex({x:t,y:e},n,r,i,a,o,s){const l=.5*(this.lineClips?this.scaledDistance*(Xs-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(i?1:0),(e<<1)+(a?1:0),Math.round(63*n)+128,Math.round(63*r)+128,1+(0===o?0:o<0?-1:1)|(63&l)<<2,l>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const c=s.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,c),s.primitiveLength++),a?this.e2=c:this.e1=c}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,e){this.distance+=t.dist(e),this.updateScaledDistance()}}Tr("LineBucket",Ks,{omit:["layers","patternFeatures"]});const Ys=new pi({"line-cap":new li(rt.layout_line["line-cap"]),"line-join":new ci(rt.layout_line["line-join"]),"line-miter-limit":new li(rt.layout_line["line-miter-limit"]),"line-round-limit":new li(rt.layout_line["line-round-limit"]),"line-sort-key":new ci(rt.layout_line["line-sort-key"])});var Js={paint:new pi({"line-opacity":new ci(rt.paint_line["line-opacity"]),"line-color":new ci(rt.paint_line["line-color"]),"line-translate":new li(rt.paint_line["line-translate"]),"line-translate-anchor":new li(rt.paint_line["line-translate-anchor"]),"line-width":new ci(rt.paint_line["line-width"]),"line-gap-width":new ci(rt.paint_line["line-gap-width"]),"line-offset":new ci(rt.paint_line["line-offset"]),"line-blur":new ci(rt.paint_line["line-blur"]),"line-dasharray":new hi(rt.paint_line["line-dasharray"]),"line-pattern":new ui(rt.paint_line["line-pattern"]),"line-gradient":new di(rt.paint_line["line-gradient"])}),layout:Ys};const Qs=new class extends ci{possiblyEvaluate(t,e){return e=new Qr(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),super.possiblyEvaluate(t,e)}evaluate(t,e,n,r){return e=s({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(t,e,n,r)}}(Js.paint.properties["line-width"].specification);function tl(t,e){return e>0?e+2*t:t}Qs.useIntegerZoom=!0;const el=_i([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),nl=_i([{name:"a_projected_pos",components:3,type:"Float32"}],4);_i([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const rl=_i([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);_i([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const il=_i([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),al=_i([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function ol(t,e,n){return t.sections.forEach((t=>{t.text=function(t,e,n){const r=e.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?t=t.toLocaleUpperCase():"lowercase"===r&&(t=t.toLocaleLowerCase()),Jr.applyArabicShaping&&(t=Jr.applyArabicShaping(t)),t}(t.text,e,n)})),t}_i([{name:"triangle",components:3,type:"Uint16"}]),_i([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),_i([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),_i([{type:"Float32",name:"offsetX"}]),_i([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const sl={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};var ll=24,cl=dl,ul=function(t,e,n,r,i){var a,o,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,h=n?i-1:0,d=n?-1:1,p=t[e+h];for(h+=d,a=p&(1<<-u)-1,p>>=-u,u+=s;u>0;a=256*a+t[e+h],h+=d,u-=8);for(o=a&(1<<-u)-1,a>>=-u,u+=r;u>0;o=256*o+t[e+h],h+=d,u-=8);if(0===a)a=1-c;else{if(a===l)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,r),a-=c}return(p?-1:1)*o*Math.pow(2,a-r)},hl=function(t,e,n,r,i,a){var o,s,l,c=8*a-i-1,u=(1<<c)-1,h=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:a-1,f=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),(e+=o+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(o++,l/=2),o+h>=u?(s=0,o=u):o+h>=1?(s=(e*l-1)*Math.pow(2,i),o+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[n+p]=255&s,p+=f,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;t[n+p]=255&o,p+=f,o/=256,c-=8);t[n+p-f]|=128*m};function dl(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}dl.Varint=0,dl.Fixed64=1,dl.Bytes=2,dl.Fixed32=5;var pl,fl=4294967296,ml=1/fl,gl="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function yl(t){return t.type===dl.Bytes?t.readVarint()+t.pos:t.pos+1}function vl(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function _l(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function xl(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function bl(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function wl(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function Sl(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function Ml(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function El(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function kl(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function Tl(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function Cl(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function Il(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function Pl(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function Al(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function zl(t,e,n){1===t&&n.readMessage(Ll,e)}function Ll(t,e,n){if(3===t){const{id:t,bitmap:r,width:i,height:a,left:o,top:s,advance:l}=n.readMessage(Rl,{});e.push({id:t,bitmap:new Io({width:i+6,height:a+6},r),metrics:{width:i,height:a,left:o,top:s,advance:l}})}}function Rl(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}function Dl(t){let e=0,n=0;for(const o of t)e+=o.w*o.h,n=Math.max(n,o.w);t.sort(((t,e)=>e.h-t.h));const r=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}];let i=0,a=0;for(const o of t)for(let t=r.length-1;t>=0;t--){const e=r[t];if(!(o.w>e.w||o.h>e.h)){if(o.x=e.x,o.y=e.y,a=Math.max(a,o.y+o.h),i=Math.max(i,o.x+o.w),o.w===e.w&&o.h===e.h){const e=r.pop();t<r.length&&(r[t]=e)}else o.h===e.h?(e.x+=o.w,e.w-=o.w):o.w===e.w?(e.y+=o.h,e.h-=o.h):(r.push({x:e.x+o.w,y:e.y,w:e.w-o.w,h:o.h}),e.y+=o.h,e.h-=o.h);break}}return{w:i,h:a,fill:e/(i*a)||0}}dl.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,a=this.pos;this.type=7&r,t(i,e,this),this.pos===a&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=Il(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=Al(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=Il(this.buf,this.pos)+Il(this.buf,this.pos+4)*fl;return this.pos+=8,t},readSFixed64:function(){var t=Il(this.buf,this.pos)+Al(this.buf,this.pos+4)*fl;return this.pos+=8,t},readFloat:function(){var t=ul(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=ul(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:function(t,e,n){var r,i,a=n.buf;if(r=(112&(i=a[n.pos++]))>>4,i<128)return vl(t,r,e);if(r|=(127&(i=a[n.pos++]))<<3,i<128)return vl(t,r,e);if(r|=(127&(i=a[n.pos++]))<<10,i<128)return vl(t,r,e);if(r|=(127&(i=a[n.pos++]))<<17,i<128)return vl(t,r,e);if(r|=(127&(i=a[n.pos++]))<<24,i<128)return vl(t,r,e);if(r|=(1&(i=a[n.pos++]))<<31,i<128)return vl(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&gl?function(t,e,n){return gl.decode(t.subarray(e,n))}(this.buf,e,t):function(t,e,n){for(var r="",i=e;i<n;){var a,o,s,l=t[i],c=null,u=l>239?4:l>223?3:l>191?2:1;if(i+u>n)break;1===u?l<128&&(c=l):2===u?128==(192&(a=t[i+1]))&&(c=(31&l)<<6|63&a)<=127&&(c=null):3===u?(o=t[i+2],128==(192&(a=t[i+1]))&&128==(192&o)&&((c=(15&l)<<12|(63&a)<<6|63&o)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(o=t[i+2],s=t[i+3],128==(192&(a=t[i+1]))&&128==(192&o)&&128==(192&s)&&((c=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,r+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),r+=String.fromCharCode(c),i+=u}return r}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==dl.Bytes)return t.push(this.readVarint(e));var n=yl(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==dl.Bytes)return t.push(this.readSVarint());var e=yl(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==dl.Bytes)return t.push(this.readBoolean());var e=yl(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==dl.Bytes)return t.push(this.readFloat());var e=yl(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==dl.Bytes)return t.push(this.readDouble());var e=yl(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==dl.Bytes)return t.push(this.readFixed32());var e=yl(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==dl.Bytes)return t.push(this.readSFixed32());var e=yl(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==dl.Bytes)return t.push(this.readFixed64());var e=yl(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==dl.Bytes)return t.push(this.readSFixed64());var e=yl(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===dl.Varint)for(;this.buf[this.pos++]>127;);else if(e===dl.Bytes)this.pos=this.readVarint()+this.pos;else if(e===dl.Fixed32)this.pos+=4;else{if(e!==dl.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),Pl(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),Pl(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),Pl(this.buf,-1&t,this.pos),Pl(this.buf,Math.floor(t*ml),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),Pl(this.buf,-1&t,this.pos),Pl(this.buf,Math.floor(t*ml),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,n.buf[n.pos]=127&(t>>>=7)}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,a=0;a<e.length;a++){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){r>56319||a+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&_l(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),hl(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),hl(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&_l(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,dl.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,xl,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,bl,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,Ml,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,wl,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,Sl,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,El,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,kl,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,Tl,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,Cl,e)},writeBytesField:function(t,e){this.writeTag(t,dl.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,dl.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,dl.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,dl.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,dl.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,dl.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,dl.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,dl.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,dl.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,dl.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};class Ol{constructor(t,{pixelRatio:e,version:n,stretchX:r,stretchY:i,content:a}){this.paddedRect=t,this.pixelRatio=e,this.stretchX=r,this.stretchY=i,this.content=a,this.version=n}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Bl{constructor(t,e){const n={},r={};this.haveRenderCallbacks=[];const i=[];this.addImages(t,n,i),this.addImages(e,r,i);const{w:a,h:o}=Dl(i),s=new Po({width:a||1,height:o||1});for(const l in t){const e=t[l],r=n[l].paddedRect;Po.copy(e.data,s,{x:0,y:0},{x:r.x+1,y:r.y+1},e.data)}for(const l in e){const t=e[l],n=r[l].paddedRect,i=n.x+1,a=n.y+1,o=t.data.width,c=t.data.height;Po.copy(t.data,s,{x:0,y:0},{x:i,y:a},t.data),Po.copy(t.data,s,{x:0,y:c-1},{x:i,y:a-1},{width:o,height:1}),Po.copy(t.data,s,{x:0,y:0},{x:i,y:a+c},{width:o,height:1}),Po.copy(t.data,s,{x:o-1,y:0},{x:i-1,y:a},{width:1,height:c}),Po.copy(t.data,s,{x:0,y:0},{x:i+o,y:a},{width:1,height:c})}this.image=s,this.iconPositions=n,this.patternPositions=r}addImages(t,e,n){for(const r in t){const i=t[r],a={x:0,y:0,w:i.data.width+2,h:i.data.height+2};n.push(a),e[r]=new Ol(a,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}}patchUpdatedImages(t,e){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const n in t.updatedImages)this.patchUpdatedImage(this.iconPositions[n],t.getImage(n),e),this.patchUpdatedImage(this.patternPositions[n],t.getImage(n),e)}patchUpdatedImage(t,e,n){if(!t||!e)return;if(t.version===e.version)return;t.version=e.version;const[r,i]=t.tl;n.update(e.data,void 0,{x:r,y:i})}}Tr("ImagePosition",Ol),Tr("ImageAtlas",Bl),t.WritingMode=void 0,(pl=t.WritingMode||(t.WritingMode={}))[pl.none=0]="none",pl[pl.horizontal=1]="horizontal",pl[pl.vertical=2]="vertical",pl[pl.horizontalOnly=3]="horizontalOnly";const Fl=-17;class Nl{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,e){const n=new Nl;return n.scale=t||1,n.fontStack=e,n}static forImage(t){const e=new Nl;return e.imageName=t,e}}class Zl{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,e){const n=new Zl;for(let r=0;r<t.sections.length;r++){const i=t.sections[r];i.image?n.addImageSection(i):n.addTextSection(i,e)}return n}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let e="";for(let n=0;n<t.length;n++){const r=t.charCodeAt(n+1)||null,i=t.charCodeAt(n-1)||null;e+=r&&Br(r)&&!sl[t[n+1]]||i&&Br(i)&&!sl[t[n-1]]||!sl[t[n]]?t[n]:sl[t[n]]}return e}(this.text)}trim(){let t=0;for(let n=0;n<this.text.length&&jl[this.text.charCodeAt(n)];n++)t++;let e=this.text.length;for(let n=this.text.length-1;n>=0&&n>=t&&jl[this.text.charCodeAt(n)];n--)e--;this.text=this.text.substring(t,e),this.sectionIndex=this.sectionIndex.slice(t,e)}substring(t,e){const n=new Zl;return n.text=this.text.substring(t,e),n.sectionIndex=this.sectionIndex.slice(t,e),n.sections=this.sections,n}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((t,e)=>Math.max(t,this.sections[e].scale)),0)}addTextSection(t,e){this.text+=t.text,this.sections.push(Nl.forText(t.scale,t.fontStack||e));const n=this.sections.length-1;for(let r=0;r<t.text.length;++r)this.sectionIndex.push(n)}addImageSection(t){const e=t.image?t.image.name:"";if(0===e.length)return void f("Can't add FormattedSection with an empty image.");const n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(Nl.forImage(e)),this.sectionIndex.push(this.sections.length-1)):f("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Ul(e,n,r,i,a,o,s,l,c,u,h,d,p,f,m,g){const y=Zl.fromFeature(e,a);let v;d===t.WritingMode.vertical&&y.verticalizePunctuation();const{processBidirectionalText:_,processStyledBidirectionalText:x}=Jr;if(_&&1===y.sections.length){v=[];const t=_(y.toString(),Xl(y,u,o,n,i,f,m));for(const e of t){const t=new Zl;t.text=e,t.sections=y.sections;for(let n=0;n<e.length;n++)t.sectionIndex.push(0);v.push(t)}}else if(x){v=[];const t=x(y.text,y.sectionIndex,Xl(y,u,o,n,i,f,m));for(const e of t){const t=new Zl;t.text=e[0],t.sectionIndex=e[1],t.sections=y.sections,v.push(t)}}else v=function(t,e){const n=[],r=t.text;let i=0;for(const a of e)n.push(t.substring(i,a)),i=a;return i<r.length&&n.push(t.substring(i,r.length)),n}(y,Xl(y,u,o,n,i,f,m));const b=[],w={positionedLines:b,text:y.toString(),top:h[1],bottom:h[1],left:h[0],right:h[0],writingMode:d,iconsInText:!1,verticalizable:!1};return function(e,n,r,i,a,o,s,l,c,u,h,d){let p=0,f=Fl,m=0,g=0;const y="right"===l?1:"left"===l?0:.5;let v=0;for(const S of a){S.trim();const a=S.getMaxScale(),s=(a-1)*ll,l={positionedGlyphs:[],lineOffset:0};e.positionedLines[v]=l;const x=l.positionedGlyphs;let b=0;if(!S.length()){f+=o,++v;continue}for(let o=0;o<S.length();o++){const l=S.getSection(o),m=S.getSectionIndex(o),g=S.getCharCode(o);let y=0,v=null,w=null,M=null,E=ll;const k=!(c===t.WritingMode.horizontal||!h&&!Or(g)||h&&(jl[g]||(_=g,zr.Arabic(_)||zr["Arabic Supplement"](_)||zr["Arabic Extended-A"](_)||zr["Arabic Presentation Forms-A"](_)||zr["Arabic Presentation Forms-B"](_))));if(l.imageName){const t=i[l.imageName];if(!t)continue;M=l.imageName,e.iconsInText=e.iconsInText||!0,w=t.paddedRect;const n=t.displaySize;l.scale=l.scale*ll/d,v={width:n[0],height:n[1],left:1,top:-3,advance:k?n[1]:n[0]},y=s+(ll-n[1]*l.scale),E=v.advance;const r=k?n[0]*l.scale-ll*a:n[1]*l.scale-ll*a;r>0&&r>b&&(b=r)}else{const t=r[l.fontStack],e=t&&t[g];if(e&&e.rect)w=e.rect,v=e.metrics;else{const t=n[l.fontStack],e=t&&t[g];if(!e)continue;v=e.metrics}y=(a-l.scale)*ll}k?(e.verticalizable=!0,x.push({glyph:g,imageName:M,x:p,y:f+y,vertical:k,scale:l.scale,fontStack:l.fontStack,sectionIndex:m,metrics:v,rect:w}),p+=E*l.scale+u):(x.push({glyph:g,imageName:M,x:p,y:f+y,vertical:k,scale:l.scale,fontStack:l.fontStack,sectionIndex:m,metrics:v,rect:w}),p+=v.advance*l.scale+u)}0!==x.length&&(m=Math.max(p-u,m),Yl(x,0,x.length-1,y,b)),p=0;const w=o*a+b;l.lineOffset=Math.max(b,s),f+=w,g=Math.max(w,g),++v}var _;const x=f-Fl,{horizontalAlign:b,verticalAlign:w}=Kl(s);(function(t,e,n,r,i,a,o,s,l){const c=(e-n)*i;let u=0;u=a!==o?-s*r-Fl:(-r*l+.5)*o;for(const h of t)for(const t of h.positionedGlyphs)t.x+=c,t.y+=u})(e.positionedLines,y,b,w,m,g,o,x,a.length),e.top+=-w*x,e.bottom=e.top+x,e.left+=-b*m,e.right=e.left+m}(w,n,r,i,v,s,l,c,d,u,p,g),!function(t){for(const e of t)if(0!==e.positionedGlyphs.length)return!1;return!0}(b)&&w}const jl={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Vl={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function ql(t,e,n,r,i,a){if(e.imageName){const t=r[e.imageName];return t?t.displaySize[0]*e.scale*ll/a+i:0}{const r=n[e.fontStack],a=r&&r[t];return a?a.metrics.advance*e.scale+i:0}}function $l(t,e,n,r){const i=Math.pow(t-e,2);return r?t<e?i/2:2*i:i+Math.abs(n)*n}function Gl(t,e,n){let r=0;return 10===t&&(r-=1e4),n&&(r+=150),40!==t&&65288!==t||(r+=50),41!==e&&65289!==e||(r+=50),r}function Wl(t,e,n,r,i,a){let o=null,s=$l(e,n,i,a);for(const l of r){const t=$l(e-l.x,n,i,a)+l.badness;t<=s&&(o=l,s=t)}return{index:t,x:e,priorBreak:o,badness:s}}function Hl(t){return t?Hl(t.priorBreak).concat(t.index):[]}function Xl(t,e,n,r,i,a,o){if("point"!==a)return[];if(!t)return[];const s=[],l=function(t,e,n,r,i,a){let o=0;for(let s=0;s<t.length();s++){const n=t.getSection(s);o+=ql(t.getCharCode(s),n,r,i,e,a)}return o/Math.max(1,Math.ceil(o/n))}(t,e,n,r,i,o),c=t.text.indexOf("\u200b")>=0;let u=0;for(let d=0;d<t.length();d++){const n=t.getSection(d),a=t.getCharCode(d);if(jl[a]||(u+=ql(a,n,r,i,e,o)),d<t.length()-1){const e=!((h=a)<11904||!(zr["Bopomofo Extended"](h)||zr.Bopomofo(h)||zr["CJK Compatibility Forms"](h)||zr["CJK Compatibility Ideographs"](h)||zr["CJK Compatibility"](h)||zr["CJK Radicals Supplement"](h)||zr["CJK Strokes"](h)||zr["CJK Symbols and Punctuation"](h)||zr["CJK Unified Ideographs Extension A"](h)||zr["CJK Unified Ideographs"](h)||zr["Enclosed CJK Letters and Months"](h)||zr["Halfwidth and Fullwidth Forms"](h)||zr.Hiragana(h)||zr["Ideographic Description Characters"](h)||zr["Kangxi Radicals"](h)||zr["Katakana Phonetic Extensions"](h)||zr.Katakana(h)||zr["Vertical Forms"](h)||zr["Yi Radicals"](h)||zr["Yi Syllables"](h)));(Vl[a]||e||n.imageName)&&s.push(Wl(d+1,u,l,s,Gl(a,t.getCharCode(d+1),e&&c),!1))}}var h;return Hl(Wl(t.length(),u,l,s,0,!0))}function Kl(t){let e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function Yl(t,e,n,r,i){if(!r&&!i)return;const a=t[n],o=(t[n].x+a.metrics.advance*a.scale)*r;for(let s=e;s<=n;s++)t[s].x-=o,t[s].y+=i}function Jl(t,e,n){const{horizontalAlign:r,verticalAlign:i}=Kl(n),a=e[0]-t.displaySize[0]*r,o=e[1]-t.displaySize[1]*i;return{image:t,top:o,bottom:o+t.displaySize[1],left:a,right:a+t.displaySize[0]}}function Ql(t,e,n,r,i,a){const o=t.image;let s;if(o.content){const t=o.content,e=o.pixelRatio||1;s=[t[0]/e,t[1]/e,o.displaySize[0]-t[2]/e,o.displaySize[1]-t[3]/e]}const l=e.left*a,c=e.right*a;let u,h,d,p;"width"===n||"both"===n?(p=i[0]+l-r[3],h=i[0]+c+r[1]):(p=i[0]+(l+c-o.displaySize[0])/2,h=p+o.displaySize[0]);const f=e.top*a,m=e.bottom*a;return"height"===n||"both"===n?(u=i[1]+f-r[0],d=i[1]+m+r[2]):(u=i[1]+(f+m-o.displaySize[1])/2,d=u+o.displaySize[1]),{image:o,top:u,right:h,bottom:d,left:p,collisionPadding:s}}const tc=128;function ec(t,e){const{expression:n}=e;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new Qr(t+1))};if("source"===n.kind)return{kind:"source"};{const{zoomStops:e,interpolationType:r}=n;let i=0;for(;i<e.length&&e[i]<=t;)i++;i=Math.max(0,i-1);let a=i;for(;a<e.length&&e[a]<t+1;)a++;a=Math.min(e.length-1,a);const o=e[i],s=e[a];return"composite"===n.kind?{kind:"composite",minZoom:o,maxZoom:s,interpolationType:r}:{kind:"camera",minZoom:o,maxZoom:s,minSize:n.evaluate(new Qr(o)),maxSize:n.evaluate(new Qr(s)),interpolationType:r}}}class nc extends E{constructor(t,e,n,r){super(t,e),this.angle=n,void 0!==r&&(this.segment=r)}clone(){return new nc(this.x,this.y,this.angle,this.segment)}}function rc(t,e,n,r,i){if(void 0===e.segment)return!0;let a=e,o=e.segment+1,s=0;for(;s>-n/2;){if(o--,o<0)return!1;s-=t[o].dist(a),a=t[o]}s+=t[o].dist(t[o+1]),o++;const l=[];let c=0;for(;s<n/2;){const e=t[o],n=t[o+1];if(!n)return!1;let a=t[o-1].angleTo(e)-e.angleTo(n);for(a=Math.abs((a+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:a}),c+=a;s-l[0].distance>r;)c-=l.shift().angleDelta;if(c>i)return!1;o++,s+=e.dist(n)}return!0}function ic(t){let e=0;for(let n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function ac(t,e,n){return t?.6*e*n:0}function oc(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function sc(t,e,n,r,i,a){const o=ac(n,i,a),s=oc(n,r)*a;let l=0;const c=ic(t)/2;for(let u=0;u<t.length-1;u++){const n=t[u],r=t[u+1],i=n.dist(r);if(l+i>c){const a=(c-l)/i,h=Ee(n.x,r.x,a),d=Ee(n.y,r.y,a),p=new nc(h,d,r.angleTo(n),u);return p._round(),!o||rc(t,p,s,o,e)?p:void 0}l+=i}}function lc(t,e,n,r,i,a,o,s,l){const c=ac(r,a,o),u=oc(r,i),h=u*o,d=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-h<e/4&&(e=h+e/4),cc(t,d?e/2*s%e:(u/2+2*a)*o*s%e,e,c,n,h,d,!1,l)}function cc(t,e,n,r,i,a,o,s,l){const c=a/2,u=ic(t);let h=0,d=e-n,p=[];for(let f=0;f<t.length-1;f++){const e=t[f],o=t[f+1],s=e.dist(o),m=o.angleTo(e);for(;d+n<h+s;){d+=n;const g=(d-h)/s,y=Ee(e.x,o.x,g),v=Ee(e.y,o.y,g);if(y>=0&&y<l&&v>=0&&v<l&&d-c>=0&&d+c<=u){const e=new nc(y,v,m,f);e._round(),r&&!rc(t,e,a,r,i)||p.push(e)}}h+=s}return s||p.length||o||(p=cc(t,h/2,n,r,i,a,o,!0,l)),p}function uc(t,e,n,r,i){const a=[];for(let o=0;o<t.length;o++){const s=t[o];let l;for(let t=0;t<s.length-1;t++){let o=s[t],c=s[t+1];o.x<e&&c.x<e||(o.x<e?o=new E(e,o.y+(e-o.x)/(c.x-o.x)*(c.y-o.y))._round():c.x<e&&(c=new E(e,o.y+(e-o.x)/(c.x-o.x)*(c.y-o.y))._round()),o.y<n&&c.y<n||(o.y<n?o=new E(o.x+(n-o.y)/(c.y-o.y)*(c.x-o.x),n)._round():c.y<n&&(c=new E(o.x+(n-o.y)/(c.y-o.y)*(c.x-o.x),n)._round()),o.x>=r&&c.x>=r||(o.x>=r?o=new E(r,o.y+(r-o.x)/(c.x-o.x)*(c.y-o.y))._round():c.x>=r&&(c=new E(r,o.y+(r-o.x)/(c.x-o.x)*(c.y-o.y))._round()),o.y>=i&&c.y>=i||(o.y>=i?o=new E(o.x+(i-o.y)/(c.y-o.y)*(c.x-o.x),i)._round():c.y>=i&&(c=new E(o.x+(i-o.y)/(c.y-o.y)*(c.x-o.x),i)._round()),l&&o.equals(l[l.length-1])||(l=[o],a.push(l)),l.push(c)))))}}return a}function hc(t,e,n,r){const i=[],a=t.image,o=a.pixelRatio,s=a.paddedRect.w-2,l=a.paddedRect.h-2,c=t.right-t.left,u=t.bottom-t.top,h=a.stretchX||[[0,s]],d=a.stretchY||[[0,l]],p=(t,e)=>t+e[1]-e[0],f=h.reduce(p,0),m=d.reduce(p,0),g=s-f,y=l-m;let v=0,_=f,x=0,b=m,w=0,S=g,M=0,k=y;if(a.content&&r){const t=a.content;v=dc(h,0,t[0]),x=dc(d,0,t[1]),_=dc(h,t[0],t[2]),b=dc(d,t[1],t[3]),w=t[0]-v,M=t[1]-x,S=t[2]-t[0]-_,k=t[3]-t[1]-b}const T=(r,i,s,l)=>{const h=fc(r.stretch-v,_,c,t.left),d=mc(r.fixed-w,S,r.stretch,f),p=fc(i.stretch-x,b,u,t.top),g=mc(i.fixed-M,k,i.stretch,m),y=fc(s.stretch-v,_,c,t.left),T=mc(s.fixed-w,S,s.stretch,f),C=fc(l.stretch-x,b,u,t.top),I=mc(l.fixed-M,k,l.stretch,m),P=new E(h,p),A=new E(y,p),z=new E(y,C),L=new E(h,C),R=new E(d/o,g/o),D=new E(T/o,I/o),O=e*Math.PI/180;if(O){const t=Math.sin(O),e=Math.cos(O),n=[e,-t,t,e];P._matMult(n),A._matMult(n),L._matMult(n),z._matMult(n)}const B=r.stretch+r.fixed,F=i.stretch+i.fixed;return{tl:P,tr:A,bl:L,br:z,tex:{x:a.paddedRect.x+1+B,y:a.paddedRect.y+1+F,w:s.stretch+s.fixed-B,h:l.stretch+l.fixed-F},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:R,pixelOffsetBR:D,minFontScaleX:S/o/c,minFontScaleY:k/o/u,isSDF:n}};if(r&&(a.stretchX||a.stretchY)){const t=pc(h,g,f),e=pc(d,y,m);for(let n=0;n<t.length-1;n++){const r=t[n],a=t[n+1];for(let t=0;t<e.length-1;t++)i.push(T(r,e[t],a,e[t+1]))}}else i.push(T({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:l+1}));return i}function dc(t,e,n){let r=0;for(const i of t)r+=Math.max(e,Math.min(n,i[1]))-Math.max(e,Math.min(n,i[0]));return r}function pc(t,e,n){const r=[{fixed:-1,stretch:0}];for(const[i,a]of t){const t=r[r.length-1];r.push({fixed:i-t.stretch,stretch:t.stretch}),r.push({fixed:i-t.stretch,stretch:t.stretch+(a-i)})}return r.push({fixed:e+1,stretch:n}),r}function fc(t,e,n,r){return t/e*n+r}function mc(t,e,n,r){return t-e*n/r}Tr("Anchor",nc);class gc{constructor(t,e,n,r,i,a,o,s,l,c){if(this.boxStartIndex=t.length,l){let t=a.top,e=a.bottom;const n=a.collisionPadding;n&&(t-=n[1],e+=n[3]);let r=e-t;r>0&&(r=Math.max(10,r),this.circleDiameter=r)}else{let l=a.top*o-s[0],u=a.bottom*o+s[2],h=a.left*o-s[3],d=a.right*o+s[1];const p=a.collisionPadding;if(p&&(h-=p[0]*o,l-=p[1]*o,d+=p[2]*o,u+=p[3]*o),c){const t=new E(h,l),e=new E(d,l),n=new E(h,u),r=new E(d,u),i=c*Math.PI/180;t._rotate(i),e._rotate(i),n._rotate(i),r._rotate(i),h=Math.min(t.x,e.x,n.x,r.x),d=Math.max(t.x,e.x,n.x,r.x),l=Math.min(t.y,e.y,n.y,r.y),u=Math.max(t.y,e.y,n.y,r.y)}t.emplaceBack(e.x,e.y,h,l,d,u,n,r,i)}this.boxEndIndex=t.length}}class yc{constructor(t=[],e=vc){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:n}=this,r=e[t];for(;t>0;){const i=t-1>>1,a=e[i];if(n(r,a)>=0)break;e[t]=a,t=i}e[t]=r}_down(t){const{data:e,compare:n}=this,r=this.length>>1,i=e[t];for(;t<r;){let r=1+(t<<1),a=e[r];const o=r+1;if(o<this.length&&n(e[o],a)<0&&(r=o,a=e[o]),n(a,i)>=0)break;e[t]=a,t=r}e[t]=i}}function vc(t,e){return t<e?-1:t>e?1:0}function _c(t,e=1,n=!1){let r=1/0,i=1/0,a=-1/0,o=-1/0;const s=t[0];for(let p=0;p<s.length;p++){const t=s[p];(!p||t.x<r)&&(r=t.x),(!p||t.y<i)&&(i=t.y),(!p||t.x>a)&&(a=t.x),(!p||t.y>o)&&(o=t.y)}const l=Math.min(a-r,o-i);let c=l/2;const u=new yc([],xc);if(0===l)return new E(r,i);for(let p=r;p<a;p+=l)for(let e=i;e<o;e+=l)u.push(new bc(p+c,e+c,c,t));let h=function(t){let e=0,n=0,r=0;const i=t[0];for(let a=0,o=i.length,s=o-1;a<o;s=a++){const t=i[a],o=i[s],l=t.x*o.y-o.x*t.y;n+=(t.x+o.x)*l,r+=(t.y+o.y)*l,e+=3*l}return new bc(n/e,r/e,0,t)}(t),d=u.length;for(;u.length;){const r=u.pop();(r.d>h.d||!h.d)&&(h=r,n&&console.log("found best %d after %d probes",Math.round(1e4*r.d)/1e4,d)),r.max-h.d<=e||(c=r.h/2,u.push(new bc(r.p.x-c,r.p.y-c,c,t)),u.push(new bc(r.p.x+c,r.p.y-c,c,t)),u.push(new bc(r.p.x-c,r.p.y+c,c,t)),u.push(new bc(r.p.x+c,r.p.y+c,c,t)),d+=4)}return n&&(console.log(`num probes: ${d}`),console.log(`best distance: ${h.d}`)),h.p}function xc(t,e){return e.max-t.max}function bc(t,e,n,r){this.p=new E(t,e),this.h=n,this.d=function(t,e){let n=!1,r=1/0;for(let i=0;i<e.length;i++){const a=e[i];for(let e=0,i=a.length,o=i-1;e<i;o=e++){const i=a[e],s=a[o];i.y>t.y!=s.y>t.y&&t.x<(s.x-i.x)*(t.y-i.y)/(s.y-i.y)+i.x&&(n=!n),r=Math.min(r,no(t,i,s))}}return(n?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}const wc=Number.POSITIVE_INFINITY;function Sc(t,e){return e[1]!==wc?function(t,e,n){let r=0,i=0;switch(e=Math.abs(e),n=Math.abs(n),t){case"top-right":case"top-left":case"top":i=n-7;break;case"bottom-right":case"bottom-left":case"bottom":i=7-n}switch(t){case"top-right":case"bottom-right":case"right":r=-e;break;case"top-left":case"bottom-left":case"left":r=e}return[r,i]}(t,e[0],e[1]):function(t,e){let n=0,r=0;e<0&&(e=0);const i=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":r=i-7;break;case"bottom-right":case"bottom-left":r=7-i;break;case"bottom":r=7-e;break;case"top":r=e-7}switch(t){case"top-right":case"bottom-right":n=-i;break;case"top-left":case"bottom-left":n=i;break;case"left":n=e;break;case"right":n=-e}return[n,r]}(t,e[0])}function Mc(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Ec(e,n,r,i,a,o,s,l,c,u,h){let d=o.textMaxSize.evaluate(n,{});void 0===d&&(d=s);const p=e.layers[0].layout,m=p.get("icon-offset").evaluate(n,{},h),g=Cc(r.horizontal),y=s/24,v=e.tilePixelRatio*y,_=e.tilePixelRatio*d/24,x=e.tilePixelRatio*l,b=e.tilePixelRatio*p.get("symbol-spacing"),w=p.get("text-padding")*e.tilePixelRatio,S=function(t,e,n,r=1){const i=t.get("icon-padding").evaluate(e,{},n),a=i&&i.values;return[a[0]*r,a[1]*r,a[2]*r,a[3]*r]}(p,n,h,e.tilePixelRatio),M=p.get("text-max-angle")/180*Math.PI,E="viewport"!==p.get("text-rotation-alignment")&&"point"!==p.get("symbol-placement"),k="map"===p.get("icon-rotation-alignment")&&"point"!==p.get("symbol-placement"),T=p.get("symbol-placement"),C=b/2,I=p.get("icon-text-fit");let P;i&&"none"!==I&&(e.allowVerticalPlacement&&r.vertical&&(P=Ql(i,r.vertical,I,p.get("icon-text-fit-padding"),m,y)),g&&(i=Ql(i,g,I,p.get("icon-text-fit-padding"),m,y)));const A=(l,d)=>{d.x<0||d.x>=ja||d.y<0||d.y>=ja||function(e,n,r,i,a,o,s,l,c,u,h,d,p,m,g,y,v,_,x,b,w,S,M,E,k){const T=e.addToLineVertexArray(n,r);let C,I,P,A,z=0,L=0,R=0,D=0,O=-1,B=-1;const F={};let N=va.exports(""),Z=0,U=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?[Z,U]=l.layout.get("text-offset").evaluate(w,{},E).map((t=>t*ll)):(Z=l.layout.get("text-radial-offset").evaluate(w,{},E)*ll,U=wc),e.allowVerticalPlacement&&i.vertical){const t=l.layout.get("text-rotate").evaluate(w,{},E)+90;P=new gc(c,n,u,h,d,i.vertical,p,m,g,t),s&&(A=new gc(c,n,u,h,d,s,v,_,g,t))}if(a){const r=l.layout.get("icon-rotate").evaluate(w,{}),i="none"!==l.layout.get("icon-text-fit"),o=hc(a,r,M,i),p=s?hc(s,r,M,i):void 0;I=new gc(c,n,u,h,d,a,v,_,!1,r),z=4*o.length;const m=e.iconSizeData;let g=null;"source"===m.kind?(g=[tc*l.layout.get("icon-size").evaluate(w,{})],g[0]>kc&&f(`${e.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===m.kind&&(g=[tc*S.compositeIconSizes[0].evaluate(w,{},E),tc*S.compositeIconSizes[1].evaluate(w,{},E)],(g[0]>kc||g[1]>kc)&&f(`${e.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),e.addSymbols(e.icon,o,g,b,x,w,t.WritingMode.none,n,T.lineStartIndex,T.lineLength,-1,E),O=e.icon.placedSymbolArray.length-1,p&&(L=4*p.length,e.addSymbols(e.icon,p,g,b,x,w,t.WritingMode.vertical,n,T.lineStartIndex,T.lineLength,-1,E),B=e.icon.placedSymbolArray.length-1)}const j=Object.keys(i.horizontal);for(const f of j){const r=i.horizontal[f];if(!C){N=va.exports(r.text);const t=l.layout.get("text-rotate").evaluate(w,{},E);C=new gc(c,n,u,h,d,r,p,m,g,t)}const a=1===r.positionedLines.length;if(R+=Tc(e,n,r,o,l,g,w,y,T,i.vertical?t.WritingMode.horizontal:t.WritingMode.horizontalOnly,a?j:[f],F,O,S,E),a)break}i.vertical&&(D+=Tc(e,n,i.vertical,o,l,g,w,y,T,t.WritingMode.vertical,["vertical"],F,B,S,E));const V=C?C.boxStartIndex:e.collisionBoxArray.length,q=C?C.boxEndIndex:e.collisionBoxArray.length,$=P?P.boxStartIndex:e.collisionBoxArray.length,G=P?P.boxEndIndex:e.collisionBoxArray.length,W=I?I.boxStartIndex:e.collisionBoxArray.length,H=I?I.boxEndIndex:e.collisionBoxArray.length,X=A?A.boxStartIndex:e.collisionBoxArray.length,K=A?A.boxEndIndex:e.collisionBoxArray.length;let Y=-1;const J=(t,e)=>t&&t.circleDiameter?Math.max(t.circleDiameter,e):e;Y=J(C,Y),Y=J(P,Y),Y=J(I,Y),Y=J(A,Y);const Q=Y>-1?1:0;Q&&(Y*=k/ll),e.glyphOffsetArray.length>=Bc.MAX_GLYPHS&&f("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==w.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,w.sortKey),e.symbolInstances.emplaceBack(n.x,n.y,F.right>=0?F.right:-1,F.center>=0?F.center:-1,F.left>=0?F.left:-1,F.vertical||-1,O,B,N,V,q,$,G,W,H,X,K,u,R,D,z,L,Q,0,p,Z,U,Y)}(e,d,l,r,i,a,P,e.layers[0],e.collisionBoxArray,n.index,n.sourceLayerIndex,e.index,v,[w,w,w,w],E,c,x,S,k,m,n,o,u,h,s)};if("line"===T)for(const t of uc(n.geometry,0,0,ja,ja)){const n=lc(t,b,M,r.vertical||g,i,24,_,e.overscaling,ja);for(const r of n){const n=g;n&&Ic(e,n.text,C,r)||A(t,r)}}else if("line-center"===T){for(const t of n.geometry)if(t.length>1){const e=sc(t,M,r.vertical||g,i,24,_);e&&A(t,e)}}else if("Polygon"===n.type)for(const t of ds(n.geometry,0)){const e=_c(t,16);A(t[0],new nc(e.x,e.y,0))}else if("LineString"===n.type)for(const t of n.geometry)A(t,new nc(t[0].x,t[0].y,0));else if("Point"===n.type)for(const t of n.geometry)for(const e of t)A([e],new nc(e.x,e.y,0))}const kc=32640;function Tc(t,e,n,r,i,a,o,s,l,c,u,h,d,p,m){const g=function(t,e,n,r,i,a,o,s){const l=r.layout.get("text-rotate").evaluate(a,{})*Math.PI/180,c=[];for(const u of e.positionedLines)for(const t of u.positionedGlyphs){if(!t.rect)continue;const r=t.rect||{};let a=4,h=!0,d=1,p=0;const f=(i||s)&&t.vertical,m=t.metrics.advance*t.scale/2;if(s&&e.verticalizable){const e=(t.scale-1)*ll,n=(ll-t.metrics.width*t.scale)/2;p=u.lineOffset/2-(t.imageName?-n:e)}if(t.imageName){const e=o[t.imageName];h=e.sdf,d=e.pixelRatio,a=1/d}const g=i?[t.x+m,t.y]:[0,0];let y=i?[0,0]:[t.x+m+n[0],t.y+n[1]-p],v=[0,0];f&&(v=y,y=[0,0]);const _=(t.metrics.left-a)*t.scale-m+y[0],x=(-t.metrics.top-a)*t.scale+y[1],b=_+r.w*t.scale/d,w=x+r.h*t.scale/d,S=new E(_,x),M=new E(b,x),k=new E(_,w),T=new E(b,w);if(f){const e=new E(-m,m-Fl),n=-Math.PI/2,r=12-m,i=new E(22-r,-(t.imageName?r:0)),a=new E(...v);S._rotateAround(n,e)._add(i)._add(a),M._rotateAround(n,e)._add(i)._add(a),k._rotateAround(n,e)._add(i)._add(a),T._rotateAround(n,e)._add(i)._add(a)}if(l){const t=Math.sin(l),e=Math.cos(l),n=[e,-t,t,e];S._matMult(n),M._matMult(n),k._matMult(n),T._matMult(n)}const C=new E(0,0),I=new E(0,0);c.push({tl:S,tr:M,bl:k,br:T,tex:r,writingMode:e.writingMode,glyphOffset:g,sectionIndex:t.sectionIndex,isSDF:h,pixelOffsetTL:C,pixelOffsetBR:I,minFontScaleX:0,minFontScaleY:0})}return c}(0,n,s,i,a,o,r,t.allowVerticalPlacement),y=t.textSizeData;let v=null;"source"===y.kind?(v=[tc*i.layout.get("text-size").evaluate(o,{})],v[0]>kc&&f(`${t.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===y.kind&&(v=[tc*p.compositeTextSizes[0].evaluate(o,{},m),tc*p.compositeTextSizes[1].evaluate(o,{},m)],(v[0]>kc||v[1]>kc)&&f(`${t.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),t.addSymbols(t.text,g,v,s,a,o,c,e,l.lineStartIndex,l.lineLength,d,m);for(const f of u)h[f]=t.text.placedSymbolArray.length-1;return 4*g.length}function Cc(t){for(const e in t)return t[e];return null}function Ic(t,e,n,r){const i=t.compareText;if(e in i){const t=i[e];for(let e=t.length-1;e>=0;e--)if(r.dist(t[e])<n)return!0}else i[e]=[];return i[e].push(r),!1}const Pc=ws.VectorTileFeature.types,Ac=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function zc(t,e,n,r,i,a,o,s,l,c,u,h,d){const p=s?Math.min(kc,Math.round(s[0])):0,f=s?Math.min(kc,Math.round(s[1])):0;t.emplaceBack(e,n,Math.round(32*r),Math.round(32*i),a,o,(p<<1)+(l?1:0),f,16*c,16*u,256*h,256*d)}function Lc(t,e,n){t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n)}function Rc(t){for(const e of t.sections)if(Zr(e.text))return!0;return!1}class Dc{constructor(t){this.layoutVertexArray=new oa,this.indexArray=new ha,this.programConfigurations=t,this.segments=new ma,this.dynamicLayoutVertexArray=new sa,this.opacityVertexArray=new la,this.placedSymbolArray=new Gi}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(t,e,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,el.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,nl.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Ac,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Tr("SymbolBuffers",Dc);class Oc{constructor(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new ma,this.collisionVertexArray=new ua}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,rl.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Tr("CollisionBuffers",Oc);class Bc{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((t=>t.id)),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=mo([]),this.placementViewportMatrix=mo([]);const n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ec(this.zoom,n["text-size"]),this.iconSizeData=ec(this.zoom,n["icon-size"]);const r=this.layers[0].layout,i=r.get("symbol-sort-key"),a=r.get("symbol-z-order");this.canOverlap="never"!==jc(r,"text-overlap","text-allow-overlap")||"never"!==jc(r,"icon-overlap","icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==a&&!i.isConstant(),this.sortFeaturesByY=("viewport-y"===a||"auto"===a&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===r.get("symbol-placement")&&(this.writingModes=r.get("text-writing-mode").map((e=>t.WritingMode[e]))),this.stateDependentLayerIds=this.layers.filter((t=>t.isStateDependent())).map((t=>t.id)),this.sourceID=e.sourceID}createArrays(){this.text=new Dc(new Na(this.layers,this.zoom,(t=>/^text/.test(t)))),this.icon=new Dc(new Na(this.layers,this.zoom,(t=>/^icon/.test(t)))),this.glyphOffsetArray=new Xi,this.lineVertexArray=new Ki,this.symbolInstances=new Hi}calculateGlyphDependencies(t,e,n,r,i){for(let a=0;a<t.length;a++)if(e[t.charCodeAt(a)]=!0,(n||r)&&i){const n=sl[t.charAt(a)];n&&(e[n.charCodeAt(0)]=!0)}}populate(e,n,r){const i=this.layers[0],a=i.layout,o=a.get("text-font"),s=a.get("text-field"),l=a.get("icon-image"),c=("constant"!==s.value.kind||s.value.value instanceof Bt&&!s.value.value.isEmpty()||s.value.value.toString().length>0)&&("constant"!==o.value.kind||o.value.value.length>0),u="constant"!==l.value.kind||!!l.value.value||Object.keys(l.parameters).length>0,h=a.get("symbol-sort-key");if(this.features=[],!c&&!u)return;const d=n.iconDependencies,p=n.glyphDependencies,f=n.availableImages,m=new Qr(this.zoom);for(const{feature:g,id:y,index:v,sourceLayerIndex:_}of e){const e=i._featureFilter.needGeometry,n=Ga(g,e);if(!i._featureFilter.filter(m,n,r))continue;let s,l;if(e||(n.geometry=$a(g)),c){const t=i.getValueAndResolveTokens("text-field",n,r,f),e=Bt.factory(t);Rc(e)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Kr()||this.hasRTLText&&Jr.isParsed())&&(s=ol(e,i,n))}if(u){const t=i.getValueAndResolveTokens("icon-image",n,r,f);l=t instanceof Nt?t:Nt.fromString(t)}if(!s&&!l)continue;const x=this.sortFeaturesByKey?h.evaluate(n,{},r):void 0;if(this.features.push({id:y,text:s,icon:l,index:v,sourceLayerIndex:_,geometry:n.geometry,properties:g.properties,type:Pc[g.type],sortKey:x}),l&&(d[l.name]=!0),s){const e=o.evaluate(n,{},r).join(","),i="viewport"!==a.get("text-rotation-alignment")&&"point"!==a.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(t.WritingMode.vertical)>=0;for(const t of s.sections)if(t.image)d[t.image.name]=!0;else{const n=Lr(s.toString()),r=t.fontStack||e,a=p[r]=p[r]||{};this.calculateGlyphDependencies(t.text,a,i,this.allowVerticalPlacement,n)}}}"line"===a.get("symbol-placement")&&(this.features=function(t){const e={},n={},r=[];let i=0;function a(e){r.push(t[e]),i++}function o(t,e,i){const a=n[t];return delete n[t],n[e]=a,r[a].geometry[0].pop(),r[a].geometry[0]=r[a].geometry[0].concat(i[0]),a}function s(t,n,i){const a=e[n];return delete e[n],e[t]=a,r[a].geometry[0].shift(),r[a].geometry[0]=i[0].concat(r[a].geometry[0]),a}function l(t,e,n){const r=n?e[0][e[0].length-1]:e[0][0];return`${t}:${r.x}:${r.y}`}for(let c=0;c<t.length;c++){const u=t[c],h=u.geometry,d=u.text?u.text.toString():null;if(!d){a(c);continue}const p=l(d,h),f=l(d,h,!0);if(p in n&&f in e&&n[p]!==e[f]){const t=s(p,f,h),i=o(p,f,r[t].geometry);delete e[p],delete n[f],n[l(d,r[i].geometry,!0)]=i,r[t].geometry=null}else p in n?o(p,f,h):f in e?s(p,f,h):(a(c),e[p]=i-1,n[f]=i-1)}return r.filter((t=>t.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((t,e)=>t.sortKey-e.sortKey))}update(t,e,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,n),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,n))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,e){const n=this.lineVertexArray.length;if(void 0!==t.segment){let n=t.dist(e[t.segment+1]),r=t.dist(e[t.segment]);const i={};for(let a=t.segment+1;a<e.length;a++)i[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:n},a<e.length-1&&(n+=e[a+1].dist(e[a]));for(let a=t.segment||0;a>=0;a--)i[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:r},a>0&&(r+=e[a-1].dist(e[a]));for(let t=0;t<e.length;t++){const e=i[t];this.lineVertexArray.emplaceBack(e.x,e.y,e.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}addSymbols(e,n,r,i,a,o,s,l,c,u,h,d){const p=e.indexArray,f=e.layoutVertexArray,m=e.segments.prepareSegment(4*n.length,f,p,this.canOverlap?o.sortKey:void 0),g=this.glyphOffsetArray.length,y=m.vertexLength,v=this.allowVerticalPlacement&&s===t.WritingMode.vertical?Math.PI/2:0,_=o.text&&o.text.sections;for(let t=0;t<n.length;t++){const{tl:i,tr:a,bl:s,br:c,tex:u,pixelOffsetTL:h,pixelOffsetBR:g,minFontScaleX:y,minFontScaleY:x,glyphOffset:b,isSDF:w,sectionIndex:S}=n[t],M=m.vertexLength,E=b[1];zc(f,l.x,l.y,i.x,E+i.y,u.x,u.y,r,w,h.x,h.y,y,x),zc(f,l.x,l.y,a.x,E+a.y,u.x+u.w,u.y,r,w,g.x,h.y,y,x),zc(f,l.x,l.y,s.x,E+s.y,u.x,u.y+u.h,r,w,h.x,g.y,y,x),zc(f,l.x,l.y,c.x,E+c.y,u.x+u.w,u.y+u.h,r,w,g.x,g.y,y,x),Lc(e.dynamicLayoutVertexArray,l,v),p.emplaceBack(M,M+1,M+2),p.emplaceBack(M+1,M+2,M+3),m.vertexLength+=4,m.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(b[0]),t!==n.length-1&&S===n[t+1].sectionIndex||e.programConfigurations.populatePaintArrays(f.length,o,o.index,{},d,_&&_[S])}e.placedSymbolArray.emplaceBack(l.x,l.y,g,this.glyphOffsetArray.length-g,y,c,u,l.segment,r?r[0]:0,r?r[1]:0,i[0],i[1],s,0,!1,0,h)}_addCollisionDebugVertex(t,e,n,r,i,a){return e.emplaceBack(0,0),t.emplaceBack(n.x,n.y,r,i,Math.round(a.x),Math.round(a.y))}addCollisionDebugVertices(t,e,n,r,i,a,o){const s=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),l=s.vertexLength,c=i.layoutVertexArray,u=i.collisionVertexArray,h=o.anchorX,d=o.anchorY;this._addCollisionDebugVertex(c,u,a,h,d,new E(t,e)),this._addCollisionDebugVertex(c,u,a,h,d,new E(n,e)),this._addCollisionDebugVertex(c,u,a,h,d,new E(n,r)),this._addCollisionDebugVertex(c,u,a,h,d,new E(t,r)),s.vertexLength+=4;const p=i.indexArray;p.emplaceBack(l,l+1),p.emplaceBack(l+1,l+2),p.emplaceBack(l+2,l+3),p.emplaceBack(l+3,l),s.primitiveLength+=4}addDebugCollisionBoxes(t,e,n,r){for(let i=t;i<e;i++){const t=this.collisionBoxArray.get(i);this.addCollisionDebugVertices(t.x1,t.y1,t.x2,t.y2,r?this.textCollisionBox:this.iconCollisionBox,t.anchorPoint,n)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Oc(ca,il.members,da),this.iconCollisionBox=new Oc(ca,il.members,da);for(let t=0;t<this.symbolInstances.length;t++){const e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}}_deserializeCollisionBoxesForSymbol(t,e,n,r,i,a,o,s,l){const c={};for(let u=e;u<n;u++){const e=t.get(u);c.textBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY},c.textFeatureIndex=e.featureIndex;break}for(let u=r;u<i;u++){const e=t.get(u);c.verticalTextBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY},c.verticalTextFeatureIndex=e.featureIndex;break}for(let u=a;u<o;u++){const e=t.get(u);c.iconBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY},c.iconFeatureIndex=e.featureIndex;break}for(let u=s;u<l;u++){const e=t.get(u);c.verticalIconBox={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,anchorPointX:e.anchorPointX,anchorPointY:e.anchorPointY},c.verticalIconFeatureIndex=e.featureIndex;break}return c}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let e=0;e<this.symbolInstances.length;e++){const n=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,e){const n=t.placedSymbolArray.get(e),r=n.vertexStartIndex+4*n.numGlyphs;for(let i=n.vertexStartIndex;i<r;i+=4)t.indexArray.emplaceBack(i,i+1,i+2),t.indexArray.emplaceBack(i+1,i+2,i+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const e=Math.sin(t),n=Math.cos(t),r=[],i=[],a=[];for(let o=0;o<this.symbolInstances.length;++o){a.push(o);const t=this.symbolInstances.get(o);r.push(0|Math.round(e*t.anchorX+n*t.anchorY)),i.push(t.featureIndex)}return a.sort(((t,e)=>r[t]-r[e]||i[e]-i[t])),a}addToSortKeyRanges(t,e){const n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===e?n.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const t of this.symbolInstanceIndexes){const e=this.symbolInstances.get(t);this.featureSortOrder.push(e.featureIndex),[e.rightJustifiedTextSymbolIndex,e.centerJustifiedTextSymbolIndex,e.leftJustifiedTextSymbolIndex].forEach(((t,e,n)=>{t>=0&&n.indexOf(t)===e&&this.addIndicesForPlacedSymbol(this.text,t)})),e.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,e.verticalPlacedTextSymbolIndex),e.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,e.placedIconSymbolIndex),e.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,e.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Tr("SymbolBucket",Bc,{omit:["layers","collisionBoxArray","features","compareText"]}),Bc.MAX_GLYPHS=65535,Bc.addDynamicAttributes=Lc;const Fc=new pi({"symbol-placement":new li(rt.layout_symbol["symbol-placement"]),"symbol-spacing":new li(rt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new li(rt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ci(rt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new li(rt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new li(rt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new li(rt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new li(rt.layout_symbol["icon-ignore-placement"]),"icon-optional":new li(rt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new li(rt.layout_symbol["icon-rotation-alignment"]),"icon-size":new ci(rt.layout_symbol["icon-size"]),"icon-text-fit":new li(rt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new li(rt.layout_symbol["icon-text-fit-padding"]),"icon-image":new ci(rt.layout_symbol["icon-image"]),"icon-rotate":new ci(rt.layout_symbol["icon-rotate"]),"icon-padding":new ci(rt.layout_symbol["icon-padding"]),"icon-keep-upright":new li(rt.layout_symbol["icon-keep-upright"]),"icon-offset":new ci(rt.layout_symbol["icon-offset"]),"icon-anchor":new ci(rt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new li(rt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new li(rt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new li(rt.layout_symbol["text-rotation-alignment"]),"text-field":new ci(rt.layout_symbol["text-field"]),"text-font":new ci(rt.layout_symbol["text-font"]),"text-size":new ci(rt.layout_symbol["text-size"]),"text-max-width":new ci(rt.layout_symbol["text-max-width"]),"text-line-height":new li(rt.layout_symbol["text-line-height"]),"text-letter-spacing":new ci(rt.layout_symbol["text-letter-spacing"]),"text-justify":new ci(rt.layout_symbol["text-justify"]),"text-radial-offset":new ci(rt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new li(rt.layout_symbol["text-variable-anchor"]),"text-anchor":new ci(rt.layout_symbol["text-anchor"]),"text-max-angle":new li(rt.layout_symbol["text-max-angle"]),"text-writing-mode":new li(rt.layout_symbol["text-writing-mode"]),"text-rotate":new ci(rt.layout_symbol["text-rotate"]),"text-padding":new li(rt.layout_symbol["text-padding"]),"text-keep-upright":new li(rt.layout_symbol["text-keep-upright"]),"text-transform":new ci(rt.layout_symbol["text-transform"]),"text-offset":new ci(rt.layout_symbol["text-offset"]),"text-allow-overlap":new li(rt.layout_symbol["text-allow-overlap"]),"text-overlap":new li(rt.layout_symbol["text-overlap"]),"text-ignore-placement":new li(rt.layout_symbol["text-ignore-placement"]),"text-optional":new li(rt.layout_symbol["text-optional"])});var Nc={paint:new pi({"icon-opacity":new ci(rt.paint_symbol["icon-opacity"]),"icon-color":new ci(rt.paint_symbol["icon-color"]),"icon-halo-color":new ci(rt.paint_symbol["icon-halo-color"]),"icon-halo-width":new ci(rt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ci(rt.paint_symbol["icon-halo-blur"]),"icon-translate":new li(rt.paint_symbol["icon-translate"]),"icon-translate-anchor":new li(rt.paint_symbol["icon-translate-anchor"]),"text-opacity":new ci(rt.paint_symbol["text-opacity"]),"text-color":new ci(rt.paint_symbol["text-color"],{runtimeType:mt,getOverride:t=>t.textColor,hasOverride:t=>!!t.textColor}),"text-halo-color":new ci(rt.paint_symbol["text-halo-color"]),"text-halo-width":new ci(rt.paint_symbol["text-halo-width"]),"text-halo-blur":new ci(rt.paint_symbol["text-halo-blur"]),"text-translate":new li(rt.paint_symbol["text-translate"]),"text-translate-anchor":new li(rt.paint_symbol["text-translate-anchor"])}),layout:Fc};class Zc{constructor(t){if(void 0===t.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:ht,this.defaultValue=t}evaluate(t){if(t.formattedSection){const e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Tr("FormatSectionOverride",Zc,{omit:["defaultValue"]});class Uc extends mi{constructor(t){super(t,Nc)}recalculate(t,e){if(super.recalculate(t,e),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const t=this.layout.get("text-writing-mode");if(t){const e=[];for(const n of t)e.indexOf(n)<0&&e.push(n);this.layout._values["text-writing-mode"]=e}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,e,n,r){const i=this.layout.get(t).evaluate(e,{},n,r),a=this._unevaluatedLayout._values[t];return a.isDataDriven()||Rn(a.value)||!i?i:function(t,e){return e.replace(/{([^{}]+)}/g,((e,n)=>n in t?String(t[n]):""))}(e.properties,i)}createBucket(t){return new Bc(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const t of Nc.paint.overridableProperties){if(!Uc.hasPaintOverride(this.layout,t))continue;const e=this.paint.get(t),n=new Zc(e),r=new Ln(n,e.property.specification);let i=null;i="constant"===e.value.kind||"source"===e.value.kind?new On("source",r):new Bn("composite",r,e.value.zoomStops),this.paint._values[t]=new oi(e.property,i,e.parameters)}}_handleOverridablePaintPropertyUpdate(t,e,n){return!(!this.layout||e.isDataDriven()||n.isDataDriven())&&Uc.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,e){const n=t.get("text-field"),r=Nc.paint.properties[e];let i=!1;const a=t=>{for(const e of t)if(r.overrides&&r.overrides.hasOverride(e))return void(i=!0)};if("constant"===n.value.kind&&n.value.value instanceof Bt)a(n.value.value.sections);else if("source"===n.value.kind){const t=e=>{i||(e instanceof qt&&jt(e.value)===_t?a(e.value.sections):e instanceof hn?a(e.sections):e.eachChild(t))},e=n.value;e._styleExpression&&t(e._styleExpression.expression)}return i}}function jc(t,e,n){let r="never";const i=t.get(e);return i?r=i:t.get(n)&&(r="always"),r}var Vc={paint:new pi({"background-color":new li(rt.paint_background["background-color"]),"background-pattern":new hi(rt.paint_background["background-pattern"]),"background-opacity":new li(rt.paint_background["background-opacity"])})},qc={paint:new pi({"raster-opacity":new li(rt.paint_raster["raster-opacity"]),"raster-hue-rotate":new li(rt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new li(rt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new li(rt.paint_raster["raster-brightness-max"]),"raster-saturation":new li(rt.paint_raster["raster-saturation"]),"raster-contrast":new li(rt.paint_raster["raster-contrast"]),"raster-resampling":new li(rt.paint_raster["raster-resampling"]),"raster-fade-duration":new li(rt.paint_raster["raster-fade-duration"])})};class $c extends mi{constructor(t){super(t,{}),this.onAdd=t=>{this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},this.onRemove=t=>{this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},this.implementation=t}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const Gc={circle:class extends mi{constructor(t){super(t,uo)}createBucket(t){return new Ha(t)}queryRadius(t){const e=t;return oo("circle-radius",this,e)+oo("circle-stroke-width",this,e)+so(this.paint.get("circle-translate"))}queryIntersectsFeature(t,e,n,r,i,a,o,s){const l=lo(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),a.angle,o),c=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n),u="map"===this.paint.get("circle-pitch-alignment"),h=u?l:function(t,e){return t.map((t=>So(t,e)))}(l,s),d=u?c*o:c;for(const p of r)for(const t of p){const e=u?t:So(t,s);let n=d;const r=bo([],[t.x,t.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?n*=r[3]/a.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(n*=a.cameraToCenterDistance/r[3]),Ka(h,e,n))return!0}return!1}},heatmap:class extends mi{constructor(t){super(t,Eo),this._updateColorRamp()}createBucket(t){return new Mo(t)}_handleSpecialPaintPropertyUpdate(t){"heatmap-color"===t&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Ao({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}},hillshade:class extends mi{constructor(t){super(t,zo)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}},fill:class extends mi{constructor(t){super(t,vs)}recalculate(t,e){super.recalculate(t,e);const n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new gs(t)}queryRadius(){return so(this.paint.get("fill-translate"))}queryIntersectsFeature(t,e,n,r,i,a,o){return Ya(lo(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),a.angle,o),r)}isTileClipped(){return!0}},"fill-extrusion":class extends mi{constructor(t){super(t,Zs)}createBucket(t){return new Bs(t)}queryRadius(){return so(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(t,e,n,r,i,a,o,s){const l=lo(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,o),c=this.paint.get("fill-extrusion-height").evaluate(e,n),u=this.paint.get("fill-extrusion-base").evaluate(e,n),h=function(t,e,n,r){const i=[];for(const a of t){const t=[a.x,a.y,0,1];bo(t,t,e),i.push(new E(t[0]/t[3],t[1]/t[3]))}return i}(l,s),d=function(t,e,n,r){const i=[],a=[],o=r[8]*e,s=r[9]*e,l=r[10]*e,c=r[11]*e,u=r[8]*n,h=r[9]*n,d=r[10]*n,p=r[11]*n;for(const f of t){const t=[],e=[];for(const n of f){const i=n.x,a=n.y,f=r[0]*i+r[4]*a+r[12],m=r[1]*i+r[5]*a+r[13],g=r[2]*i+r[6]*a+r[14],y=r[3]*i+r[7]*a+r[15],v=g+l,_=y+c,x=f+u,b=m+h,w=g+d,S=y+p,M=new E((f+o)/_,(m+s)/_);M.z=v/_,t.push(M);const k=new E(x/S,b/S);k.z=w/S,e.push(k)}i.push(t),a.push(e)}return[i,a]}(r,u,c,s);return function(t,e,n){let r=1/0;Ya(n,e)&&(r=js(n,e[0]));for(let i=0;i<e.length;i++){const a=e[i],o=t[i];for(let t=0;t<a.length-1;t++){const e=a[t],i=[e,a[t+1],o[t+1],o[t],e];Xa(n,i)&&(r=Math.min(r,js(n,i)))}}return r!==1/0&&r}(d[0],d[1],h)}},line:class extends mi{constructor(t){super(t,Js),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(t){"line-gradient"===t&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Me,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,e){super.recalculate(t,e),this.paint._values["line-floorwidth"]=Qs.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new Ks(t)}queryRadius(t){const e=t,n=tl(oo("line-width",this,e),oo("line-gap-width",this,e)),r=oo("line-offset",this,e);return n/2+Math.abs(r)+so(this.paint.get("line-translate"))}queryIntersectsFeature(t,e,n,r,i,a,o){const s=lo(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,o),l=o/2*tl(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),c=this.paint.get("line-offset").evaluate(e,n);return c&&(r=function(t,e){const n=[];for(let r=0;r<t.length;r++){const i=t[r],a=[];for(let t=0;t<i.length;t++){const n=i[t-1],r=i[t],o=i[t+1],s=0===t?new E(0,0):r.sub(n)._unit()._perp(),l=t===i.length-1?new E(0,0):o.sub(r)._unit()._perp(),c=s._add(l)._unit(),u=c.x*l.x+c.y*l.y;0!==u&&c._mult(1/u),a.push(c._mult(e)._add(r))}n.push(a)}return n}(r,c*o)),function(t,e,n){for(let r=0;r<e.length;r++){const i=e[r];if(t.length>=3)for(let e=0;e<i.length;e++)if(io(t,i[e]))return!0;if(Ja(t,i,n))return!0}return!1}(s,r,l)}isTileClipped(){return!0}},symbol:Uc,background:class extends mi{constructor(t){super(t,Vc)}},raster:class extends mi{constructor(t){super(t,qc)}}};class Wc{constructor(t){this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){delete this._channel,this._callback=()=>{}}}const Hc=6371008.8;class Xc{constructor(t,e){if(isNaN(t)||isNaN(e))throw new Error(`Invalid LngLat object: (${t}, ${e})`);if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Xc(o(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const e=Math.PI/180,n=this.lat*e,r=t.lat*e,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((t.lng-this.lng)*e);return Hc*Math.acos(Math.min(i,1))}toBounds(t=0){const e=360*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return new Kc(new Xc(this.lng-n,this.lat-e),new Xc(this.lng+n,this.lat+e))}static convert(t){if(t instanceof Xc)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new Xc(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new Xc(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Kc{constructor(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}setNorthEast(t){return this._ne=t instanceof Xc?new Xc(t.lng,t.lat):Xc.convert(t),this}setSouthWest(t){return this._sw=t instanceof Xc?new Xc(t.lng,t.lat):Xc.convert(t),this}extend(t){const e=this._sw,n=this._ne;let r,i;if(t instanceof Xc)r=t,i=t;else{if(!(t instanceof Kc))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(Kc.convert(t)):this.extend(Xc.convert(t)):this;if(r=t._sw,i=t._ne,!r||!i)return this}return e||n?(e.lng=Math.min(r.lng,e.lng),e.lat=Math.min(r.lat,e.lat),n.lng=Math.max(i.lng,n.lng),n.lat=Math.max(i.lat,n.lat)):(this._sw=new Xc(r.lng,r.lat),this._ne=new Xc(i.lng,i.lat)),this}getCenter(){return new Xc((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Xc(this.getWest(),this.getNorth())}getSouthEast(){return new Xc(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:e,lat:n}=Xc.convert(t);let r=this._sw.lng<=e&&e<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=e&&e>=this._ne.lng),this._sw.lat<=n&&n<=this._ne.lat&&r}static convert(t){return t instanceof Kc?t:t?new Kc(t):t}}const Yc=2*Math.PI*Hc;function Jc(t){return Yc*Math.cos(t*Math.PI/180)}function Qc(t){return(180+t)/360}function tu(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function eu(t,e){return t/Jc(e)}function nu(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}class ru{constructor(t,e,n=0){this.x=+t,this.y=+e,this.z=+n}static fromLngLat(t,e=0){const n=Xc.convert(t);return new ru(Qc(n.lng),tu(n.lat),eu(e,n.lat))}toLngLat(){return new Xc(360*this.x-180,nu(this.y))}toAltitude(){return this.z*Jc(nu(this.y))}meterInMercatorCoordinateUnits(){return 1/Yc*(t=nu(this.y),1/Math.cos(t*Math.PI/180));var t}}function iu(t,e,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}class au{constructor(t,e,n){if(t<0||t>25||n<0||n>=Math.pow(2,t)||e<0||e>=Math.pow(2,t))throw new Error(`x=${e}, y=${n}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=e,this.y=n,this.key=lu(0,t,t,e,n)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,e,n){const r=(a=this.y,o=this.z,s=iu(256*(i=this.x),256*(a=Math.pow(2,o)-a-1),o),l=iu(256*(i+1),256*(a+1),o),s[0]+","+s[1]+","+l[0]+","+l[1]);var i,a,o,s,l;const c=function(t,e,n){let r,i="";for(let a=t;a>0;a--)r=1<<a-1,i+=(e&r?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===n?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,e>1?"@2x":"").replace(/{quadkey}/g,c).replace(/{bbox-epsg-3857}/g,r)}isChildOf(t){const e=this.z-t.z;return e>0&&t.x===this.x>>e&&t.y===this.y>>e}getTilePoint(t){const e=Math.pow(2,this.z);return new E((t.x*e-this.x)*ja,(t.y*e-this.y)*ja)}toString(){return`${this.z}/${this.x}/${this.y}`}}class ou{constructor(t,e){this.wrap=t,this.canonical=e,this.key=lu(t,e.z,e.z,e.x,e.y)}}class su{constructor(t,e,n,r,i){if(t<n)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${n}`);this.overscaledZ=t,this.wrap=e,this.canonical=new au(n,+r,+i),this.key=lu(e,t,n,r,i)}clone(){return new su(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const e=this.canonical.z-t;return t>this.canonical.z?new su(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new su(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)}calculateScaledKey(t,e){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const n=this.canonical.z-t;return t>this.canonical.z?lu(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):lu(this.wrap*+e,t,t,this.canonical.x>>n,this.canonical.y>>n)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e}children(t){if(this.overscaledZ>=t)return[new su(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const e=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new su(e,this.wrap,e,n,r),new su(e,this.wrap,e,n+1,r),new su(e,this.wrap,e,n,r+1),new su(e,this.wrap,e,n+1,r+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new su(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new su(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new ou(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new ru(t.x-this.wrap,t.y))}}function lu(t,e,n,r,i){(t*=2)<0&&(t=-1*t-1);const a=1<<n;return(a*a*t+a*i+r).toString(36)+n.toString(36)+e.toString(36)}Tr("CanonicalTileID",au),Tr("OverscaledTileID",su,{omit:["posMatrix"]});class cu{constructor(t,e,n){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return void f(`"${n}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=e.height;const r=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer),this.encoding=n||"mapbox";for(let i=0;i<r;i++)this.data[this._idx(-1,i)]=this.data[this._idx(0,i)],this.data[this._idx(r,i)]=this.data[this._idx(r-1,i)],this.data[this._idx(i,-1)]=this.data[this._idx(i,0)],this.data[this._idx(i,r)]=this.data[this._idx(i,r-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(r,-1)]=this.data[this._idx(r-1,0)],this.data[this._idx(-1,r)]=this.data[this._idx(0,r-1)],this.data[this._idx(r,r)]=this.data[this._idx(r-1,r-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let i=0;i<r;i++)for(let t=0;t<r;t++){const e=this.get(i,t);e>this.max&&(this.max=e),e<this.min&&(this.min=e)}}get(t,e){const n=new Uint8Array(this.data.buffer),r=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(n[r],n[r+1],n[r+2])}getUnpackVector(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)}_unpackMapbox(t,e,n){return(256*t*256+256*e+n)/10-1e4}_unpackTerrarium(t,e,n){return 256*t+e+n/256-32768}getPixels(){return new Po({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,e,n){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let r=e*this.dim,i=e*this.dim+this.dim,a=n*this.dim,o=n*this.dim+this.dim;switch(e){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:a=o-1;break;case 1:o=a+1}const s=-e*this.dim,l=-n*this.dim;for(let c=a;c<o;c++)for(let e=r;e<i;e++)this.data[this._idx(e,c)]=t.data[this._idx(e+s,c+l)]}}Tr("DEMData",cu);class uu{constructor(t){this._stringToNumber={},this._numberToString=[];for(let e=0;e<t.length;e++){const n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class hu{constructor(t,e,n,r,i){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=n,t._y=r,this.properties=t.properties,this.id=i}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t}}class du{constructor(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Er(ja,16,0),this.grid3D=new Er(ja,16,0),this.featureIndexArray=new Ji,this.promoteId=e}insert(t,e,n,r,i,a){const o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);const s=a?this.grid3D:this.grid;for(let l=0;l<e.length;l++){const t=e[l],n=[1/0,1/0,-1/0,-1/0];for(let e=0;e<t.length;e++){const r=t[e];n[0]=Math.min(n[0],r.x),n[1]=Math.min(n[1],r.y),n[2]=Math.max(n[2],r.x),n[3]=Math.max(n[3],r.y)}n[0]<ja&&n[1]<ja&&n[2]>=0&&n[3]>=0&&s.insert(o,n[0],n[1],n[2],n[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ws.VectorTile(new cl(this.rawTileData)).layers,this.sourceLayerCoder=new uu(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,e,n,r){this.loadVTLayers();const i=t.params||{},a=ja/t.tileSize/t.scale,o=Xn(i.filter),s=t.queryGeometry,l=t.queryPadding*a,c=fu(s),u=this.grid.query(c.minX-l,c.minY-l,c.maxX+l,c.maxY+l),h=fu(t.cameraQueryGeometry),d=this.grid3D.query(h.minX-l,h.minY-l,h.maxX+l,h.maxY+l,((e,n,r,i)=>function(t,e,n,r,i){for(const o of t)if(e<=o.x&&n<=o.y&&r>=o.x&&i>=o.y)return!0;const a=[new E(e,n),new E(e,i),new E(r,i),new E(r,n)];if(t.length>2)for(const o of a)if(io(t,o))return!0;for(let o=0;o<t.length-1;o++)if(ao(t[o],t[o+1],a))return!0;return!1}(t.cameraQueryGeometry,e-l,n-l,r+l,i+l)));for(const m of d)u.push(m);u.sort(mu);const p={};let f;for(let m=0;m<u.length;m++){const l=u[m];if(l===f)continue;f=l;const c=this.featureIndexArray.get(l);let h=null;this.loadMatchingFeature(p,c.bucketIndex,c.sourceLayerIndex,c.featureIndex,o,i.layers,i.availableImages,e,n,r,((e,n,r)=>(h||(h=$a(e)),n.queryIntersectsFeature(s,e,r,h,this.z,t.transform,a,t.pixelPosMatrix))))}return p}loadMatchingFeature(t,e,n,r,i,a,o,l,c,u,h){const d=this.bucketLayerIDs[e];if(a&&!function(t,e){for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(a,d))return;const p=this.sourceLayerCoder.decode(n),f=this.vtLayers[p].feature(r);if(i.needGeometry){const t=Ga(f,!0);if(!i.filter(new Qr(this.tileID.overscaledZ),t,this.tileID.canonical))return}else if(!i.filter(new Qr(this.tileID.overscaledZ),f))return;const m=this.getId(f,p);for(let g=0;g<d.length;g++){const e=d[g];if(a&&a.indexOf(e)<0)continue;const n=l[e];if(!n)continue;let i={};m&&u&&(i=u.getState(n.sourceLayer||"_geojsonTileLayer",m));const p=s({},c[e]);p.paint=pu(p.paint,n.paint,f,i,o),p.layout=pu(p.layout,n.layout,f,i,o);const y=!h||h(f,n,i);if(!y)continue;const v=new hu(f,this.z,this.x,this.y,m);v.layer=p;let _=t[e];void 0===_&&(_=t[e]=[]),_.push({featureIndex:r,feature:v,intersectionZ:y})}}lookupSymbolFeatures(t,e,n,r,i,a,o,s){const l={};this.loadVTLayers();const c=Xn(i);for(const u of t)this.loadMatchingFeature(l,n,r,u,c,a,o,s,e);return l}hasLayer(t){for(const e of this.bucketLayerIDs)for(const n of e)if(t===n)return!0;return!1}getId(t,e){let n=t.id;return this.promoteId&&(n=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]],"boolean"==typeof n&&(n=Number(n))),n}}function pu(t,e,n,r,i){return u(t,((t,a)=>{const o=e instanceof si?e.get(a):null;return o&&o.evaluate?o.evaluate(n,r,i):o}))}function fu(t){let e=1/0,n=1/0,r=-1/0,i=-1/0;for(const a of t)e=Math.min(e,a.x),n=Math.min(n,a.y),r=Math.max(r,a.x),i=Math.max(i,a.y);return{minX:e,minY:n,maxX:r,maxY:i}}function mu(t,e){return e-t}var gu;Tr("FeatureIndex",du,{omit:["rawTileData","sourceLayerCoder"]}),t.PerformanceMarkers=void 0,(gu=t.PerformanceMarkers||(t.PerformanceMarkers={})).create="create",gu.load="load",gu.fullLoad="fullLoad";let yu=null,vu=[];const _u=1e3/30,xu={mark(t){performance.mark(t)},frame(t){const e=t;null!=yu&&vu.push(e-yu),yu=e},clearMetrics(){yu=null,vu=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const e in t.PerformanceMarkers)performance.clearMarks(t.PerformanceMarkers[e])},getPerformanceMetrics(){performance.measure("loadTime",t.PerformanceMarkers.create,t.PerformanceMarkers.load),performance.measure("fullLoadTime",t.PerformanceMarkers.create,t.PerformanceMarkers.fullLoad);const e=performance.getEntriesByName("loadTime")[0].duration,n=performance.getEntriesByName("fullLoadTime")[0].duration,r=vu.length,i=1/(vu.reduce(((t,e)=>t+e),0)/r/1e3),a=vu.filter((t=>t>_u)).reduce(((t,e)=>t+(e-_u)/_u),0);return{loadTime:e,fullLoadTime:n,fps:i,percentDroppedFrames:a/(r+a)*100}}};t.AJAXError=j,t.ARRAY_TYPE=po,t.Actor=class{constructor(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},c(["receive","process"],this),this.invoker=new Wc(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=y()?t:window}send(t,e,n,r,i=!1){const a=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(this.callbacks[a]=n);const o=w(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:t,hasCallback:!!n,targetMapId:r,mustQueue:i,sourceMapId:this.mapId,data:Ir(e,o)},o),{cancel:()=>{n&&delete this.callbacks[a],this.target.postMessage({id:a,type:"<cancel>",targetMapId:r,sourceMapId:this.mapId})}}}receive(t){const e=t.data,n=e.id;if(n&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[n];const t=this.cancelCallbacks[n];delete this.cancelCallbacks[n],t&&t()}else y()||e.mustQueue?(this.tasks[n]=e,this.taskQueue.push(n),this.invoker.trigger()):this.processTask(n,e)}process(){if(!this.taskQueue.length)return;const t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(t,e)}processTask(t,e){if("<response>"===e.type){const n=this.callbacks[t];delete this.callbacks[t],n&&(e.error?n(Pr(e.error)):n(null,Pr(e.data)))}else{let n=!1;const r=w(this.globalScope)?void 0:[],i=e.hasCallback?(e,i)=>{n=!0,delete this.cancelCallbacks[t],this.target.postMessage({id:t,type:"<response>",sourceMapId:this.mapId,error:e?Ir(e):null,data:Ir(i,r)},r)}:t=>{n=!0};let a=null;const o=Pr(e.data);if(this.parent[e.type])a=this.parent[e.type](e.sourceMapId,o,i);else if(this.parent.getWorkerSource){const t=e.type.split(".");a=this.parent.getWorkerSource(e.sourceMapId,t[0],o.source)[t[1]](o,i)}else i(new Error(`Could not find function ${e.type}`));!n&&a&&a.cancel&&(this.cancelCallbacks[t]=a.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},t.AlphaImage=Io,t.CanonicalTileID=au,t.CollisionBoxArray=qi,t.CollisionCircleLayoutArray=class extends zi{},t.Color=Rt,t.DEMData=cu,t.DataConstantProperty=li,t.DictionaryCoder=uu,t.EXTENT=ja,t.ErrorEvent=et,t.EvaluationParameters=Qr,t.Event=tt,t.Evented=nt,t.FeatureIndex=du,t.FillBucket=gs,t.FillExtrusionBucket=Bs,t.GeoJSONFeature=hu,t.ImageAtlas=Bl,t.ImagePosition=Ol,t.LineBucket=Ks,t.LineStripIndexArray=class extends Ui{},t.LngLat=Xc,t.LngLatBounds=Kc,t.MercatorCoordinate=ru,t.ONE_EM=ll,t.OverscaledTileID=su,t.PerformanceUtils=xu,t.PosArray=Qi,t.Properties=pi,t.QuadTriangleArray=class extends Ri{},t.RGBAImage=Po,t.RasterBoundsArray=class extends wi{},t.RequestPerformance=class{constructor(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let t=performance.getEntriesByName(this._marks.measure);return 0===t.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),t=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),t}},t.ResourceType=U,t.SegmentVector=ma,t.SymbolBucket=Bc,t.Transitionable=ni,t.TriangleIndexArray=ha,t.Uniform1f=Ca,t.Uniform1i=class extends Ta{constructor(t,e){super(t,e),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))}},t.Uniform2f=class extends Ta{constructor(t,e){super(t,e),this.current=[0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))}},t.Uniform3f=class extends Ta{constructor(t,e){super(t,e),this.current=[0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))}},t.Uniform4f=Ia,t.UniformColor=Pa,t.UniformMatrix4f=class extends Ta{constructor(t,e){super(t,e),this.current=Aa}set(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(let e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}}},t.UnwrappedTileID=ou,t.ValidationError=it,t.ZoomHistory=Ar,t.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},t.addDynamicAttributes=Lc,t.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);let r=t.length;const i=new Array(t.length);let a=null;t.forEach(((t,o)=>{e(t,((t,e)=>{t&&(a=t),i[o]=e,0==--r&&n(a,i)}))}))},t.bezier=r,t.bindAll=c,t.cacheEntryPossiblyAdded=function(t){R++,R>z&&(t.getActor().send("enforceCacheSizeLimit",A),R=0)},t.clamp=a,t.clearTileCache=function(t){const e=caches.delete(C);t&&e.catch(t).then((()=>t()))},t.clipLine=uc,t.clone=function(t){var e=new po(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=d,t.clone$2=function(t){var e=new po(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},t.collisionCircleLayout=al,t.config=T,t.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.create=function(){var t=new po(16);return po!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=fo,t.createExpression=Dn,t.createFilter=Xn,t.createLayout=_i,t.createStyleLayer=function(t){return"custom"===t.type?new $c(t):new Gc[t.type](t)},t.cross=function(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[0],s=n[1],l=n[2];return t[0]=i*l-a*s,t[1]=a*o-r*l,t[2]=r*s-i*o,t},t.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},t.dot$1=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},t.ease=i,t.emitValidationErrors=Mr,t.enforceCacheSizeLimit=function(t){L(),I&&I.then((e=>{e.keys().then((n=>{for(let r=0;r<n.length-t;r++)e.delete(n[r])}))}))},t.equals=function(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],p=t[11],f=t[12],m=t[13],g=t[14],y=t[15],v=e[0],_=e[1],x=e[2],b=e[3],w=e[4],S=e[5],M=e[6],E=e[7],k=e[8],T=e[9],C=e[10],I=e[11],P=e[12],A=e[13],z=e[14],L=e[15];return Math.abs(n-v)<=ho*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(r-_)<=ho*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(i-x)<=ho*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(a-b)<=ho*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(o-w)<=ho*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(s-S)<=ho*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(l-M)<=ho*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(c-E)<=ho*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(u-k)<=ho*Math.max(1,Math.abs(u),Math.abs(k))&&Math.abs(h-T)<=ho*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(d-C)<=ho*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(p-I)<=ho*Math.max(1,Math.abs(p),Math.abs(I))&&Math.abs(f-P)<=ho*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(m-A)<=ho*Math.max(1,Math.abs(m),Math.abs(A))&&Math.abs(g-z)<=ho*Math.max(1,Math.abs(g),Math.abs(z))&&Math.abs(y-L)<=ho*Math.max(1,Math.abs(y),Math.abs(L))},t.evaluateSizeForFeature=function(t,{uSize:e,uSizeT:n},{lowerSize:r,upperSize:i}){return"source"===t.kind?r/tc:"composite"===t.kind?Ee(r/tc,i/tc,n):e},t.evaluateSizeForZoom=function(t,e){let n=0,r=0;if("constant"===t.kind)r=t.layoutSize;else if("source"!==t.kind){const{interpolationType:i,minZoom:o,maxZoom:s}=t,l=i?a(qe.interpolationFactor(i,e,o,s),0,1):0;"camera"===t.kind?r=Ee(t.minSize,t.maxSize,l):n=l}return{uSizeT:n,uSize:r}},t.evaluateVariableOffset=Sc,t.evented=Xr,t.exported=M,t.exported$1=D,t.extend=s,t.filterObject=h,t.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.getAnchorAlignment=Kl,t.getAnchorJustification=Mc,t.getArrayBuffer=G,t.getImage=Y,t.getJSON=function(t,e){return $(s(t,{type:"json"}),e)},t.getOverlapMode=jc,t.getRTLTextPluginStatus=Kr,t.getReferrer=V,t.getVideo=function(t,e){const n=window.document.createElement("video");n.muted=!0,n.onloadstart=function(){e(null,n)};for(let r=0;r<t.length;r++){const e=window.document.createElement("source");W(t[r])||(n.crossOrigin="Anonymous"),e.src=t[r],n.appendChild(e)}return{cancel:()=>{}}},t.identity=mo,t.invert=function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],p=e[11],f=e[12],m=e[13],g=e[14],y=e[15],v=n*s-r*o,_=n*l-i*o,x=n*c-a*o,b=r*l-i*s,w=r*c-a*s,S=i*c-a*l,M=u*m-h*f,E=u*g-d*f,k=u*y-p*f,T=h*g-d*m,C=h*y-p*m,I=d*y-p*g,P=v*I-_*C+x*T+b*k-w*E+S*M;return P?(t[0]=(s*I-l*C+c*T)*(P=1/P),t[1]=(i*C-r*I-a*T)*P,t[2]=(m*S-g*w+y*b)*P,t[3]=(d*w-h*S-p*b)*P,t[4]=(l*k-o*I-c*E)*P,t[5]=(n*I-i*k+a*E)*P,t[6]=(g*x-f*S-y*_)*P,t[7]=(u*S-d*x+p*_)*P,t[8]=(o*C-s*k+c*M)*P,t[9]=(r*k-n*C-a*M)*P,t[10]=(f*w-m*x+y*v)*P,t[11]=(h*x-u*w-p*v)*P,t[12]=(s*E-o*T-l*M)*P,t[13]=(n*T-r*E+i*M)*P,t[14]=(m*_-f*b-g*v)*P,t[15]=(u*b-h*_+d*v)*P,t):null},t.isImageBitmap=S,t.isSafari=w,t.isWorker=y,t.keysDifference=function(t,e){const n=[];for(const r in t)r in e||n.push(r);return n},t.lazyLoadRTLTextPlugin=function(){Jr.isLoading()||Jr.isLoaded()||"deferred"!==Kr()||Yr()},t.makeRequest=$,t.mapObject=u,t.mercatorXfromLng=Qc,t.mercatorYfromLat=tu,t.mercatorZfromAltitude=eu,t.mul=vo,t.mul$1=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t},t.multiply=go,t.nextPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},t.normalize=function(t,e){var n=e[0],r=e[1],i=e[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t},t.number=Ee,t.ortho=function(t,e,n,r,i,a,o){var s=1/(e-n),l=1/(r-i),c=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*l,t[14]=(o+a)*c,t[15]=1,t},t.parseCacheControl=v,t.parseGlyphPbf=function(t){return new cl(t).readFields(zl,[])},t.pbf=cl,t.performSymbolLayout=function(e){e.bucket.createArrays(),e.bucket.tilePixelRatio=ja/(512*e.bucket.overscaling),e.bucket.compareText={},e.bucket.iconsNeedLinear=!1;const n=e.bucket.layers[0].layout,r=e.bucket.layers[0]._unevaluatedLayout._values,i={layoutIconSize:r["icon-size"].possiblyEvaluate(new Qr(e.bucket.zoom+1),e.canonical),layoutTextSize:r["text-size"].possiblyEvaluate(new Qr(e.bucket.zoom+1),e.canonical),textMaxSize:r["text-size"].possiblyEvaluate(new Qr(18))};if("composite"===e.bucket.textSizeData.kind){const{minZoom:t,maxZoom:n}=e.bucket.textSizeData;i.compositeTextSizes=[r["text-size"].possiblyEvaluate(new Qr(t),e.canonical),r["text-size"].possiblyEvaluate(new Qr(n),e.canonical)]}if("composite"===e.bucket.iconSizeData.kind){const{minZoom:t,maxZoom:n}=e.bucket.iconSizeData;i.compositeIconSizes=[r["icon-size"].possiblyEvaluate(new Qr(t),e.canonical),r["icon-size"].possiblyEvaluate(new Qr(n),e.canonical)]}const a=n.get("text-line-height")*ll,o="viewport"!==n.get("text-rotation-alignment")&&"point"!==n.get("symbol-placement"),s=n.get("text-keep-upright"),l=n.get("text-size");for(const c of e.bucket.features){const r=n.get("text-font").evaluate(c,{},e.canonical).join(","),u=l.evaluate(c,{},e.canonical),h=i.layoutTextSize.evaluate(c,{},e.canonical),d=i.layoutIconSize.evaluate(c,{},e.canonical),p={horizontal:{},vertical:void 0},m=c.text;let g,y=[0,0];if(m){const i=m.toString(),l=n.get("text-letter-spacing").evaluate(c,{},e.canonical)*ll,d=Rr(i)?l:0,f=n.get("text-anchor").evaluate(c,{},e.canonical),g=n.get("text-variable-anchor");if(!g){const t=n.get("text-radial-offset").evaluate(c,{},e.canonical);y=t?Sc(f,[t*ll,wc]):n.get("text-offset").evaluate(c,{},e.canonical).map((t=>t*ll))}let v=o?"center":n.get("text-justify").evaluate(c,{},e.canonical);const _=n.get("symbol-placement"),x="point"===_?n.get("text-max-width").evaluate(c,{},e.canonical)*ll:0,b=()=>{e.bucket.allowVerticalPlacement&&Lr(i)&&(p.vertical=Ul(m,e.glyphMap,e.glyphPositions,e.imagePositions,r,x,a,f,"left",d,y,t.WritingMode.vertical,!0,_,h,u))};if(!o&&g){const n="auto"===v?g.map((t=>Mc(t))):[v];let i=!1;for(let o=0;o<n.length;o++){const s=n[o];if(!p.horizontal[s])if(i)p.horizontal[s]=p.horizontal[0];else{const n=Ul(m,e.glyphMap,e.glyphPositions,e.imagePositions,r,x,a,"center",s,d,y,t.WritingMode.horizontal,!1,_,h,u);n&&(p.horizontal[s]=n,i=1===n.positionedLines.length)}}b()}else{"auto"===v&&(v=Mc(f));const n=Ul(m,e.glyphMap,e.glyphPositions,e.imagePositions,r,x,a,f,v,d,y,t.WritingMode.horizontal,!1,_,h,u);n&&(p.horizontal[v]=n),b(),Lr(i)&&o&&s&&(p.vertical=Ul(m,e.glyphMap,e.glyphPositions,e.imagePositions,r,x,a,f,v,d,y,t.WritingMode.vertical,!1,_,h,u))}}let v=!1;if(c.icon&&c.icon.name){const t=e.imageMap[c.icon.name];t&&(g=Jl(e.imagePositions[c.icon.name],n.get("icon-offset").evaluate(c,{},e.canonical),n.get("icon-anchor").evaluate(c,{},e.canonical)),v=!!t.sdf,void 0===e.bucket.sdfIcons?e.bucket.sdfIcons=v:e.bucket.sdfIcons!==v&&f("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(t.pixelRatio!==e.bucket.pixelRatio||0!==n.get("icon-rotate").constantOr(1))&&(e.bucket.iconsNeedLinear=!0))}const _=Cc(p.horizontal)||p.vertical;e.bucket.iconsInText=!!_&&_.iconsInText,(_||g)&&Ec(e.bucket,c,p,g,e.imageMap,i,h,d,y,v,e.canonical)}e.showCollisionBoxes&&e.bucket.generateCollisionDebugBuffers()},t.perspective=function(t,e,n,r,i){var a,o=1/Math.tan(e/2);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(t[10]=(i+r)*(a=1/(r-i)),t[14]=2*i*r*a):(t[10]=-1,t[14]=-2*r),t},t.pick=function(t,e){const n={};for(let r=0;r<e.length;r++){const i=e[r];i in t&&(n[i]=t[i])}return n},t.plugin=Jr,t.pointGeometry=E,t.polygonIntersectsPolygon=Xa,t.potpack=Dl,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=Tr,t.registerForPluginStateChange=function(t){return t({pluginStatus:$r,pluginURL:Gr}),Xr.on("pluginStateChange",t),t},t.renderColorRamp=Ao,t.rotateX=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*i+c*r,t[5]=o*i+u*r,t[6]=s*i+h*r,t[7]=l*i+d*r,t[8]=c*i-a*r,t[9]=u*i-o*r,t[10]=h*i-s*r,t[11]=d*i-l*r,t},t.rotateZ=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[0],o=e[1],s=e[2],l=e[3],c=e[4],u=e[5],h=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i+c*r,t[1]=o*i+u*r,t[2]=s*i+h*r,t[3]=l*i+d*r,t[4]=c*i-a*r,t[5]=u*i-o*r,t[6]=h*i-s*r,t[7]=d*i-l*r,t},t.scale=function(t,e,n){var r=n[0],i=n[1],a=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.scale$1=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},t.setCacheLimits=function(t,e){A=t,z=e},t.setRTLTextPlugin=function(t,e,n=!1){if($r===Ur||$r===jr||$r===Vr)throw new Error("setRTLTextPlugin cannot be called multiple times.");Gr=M.resolveURL(t),$r=Ur,qr=e,Hr(),n||Yr()},t.spec=rt,t.sphericalToCartesian=function([t,e,n]){return e+=90,e*=Math.PI/180,n*=Math.PI/180,{x:t*Math.cos(e)*Math.sin(n),y:t*Math.sin(e)*Math.sin(n),z:t*Math.cos(n)}},t.sqrLen=function(t){var e=t[0],n=t[1];return e*e+n*n},t.sub=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},t.toEvaluationFeature=Ga,t.transformMat3=function(t,e,n){var r=e[0],i=e[1],a=e[2];return t[0]=r*n[0]+i*n[3]+a*n[6],t[1]=r*n[1]+i*n[4]+a*n[7],t[2]=r*n[2]+i*n[5]+a*n[8],t},t.transformMat4=bo,t.transformMat4$1=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t},t.translate=function(t,e,n){var r,i,a,o,s,l,c,u,h,d,p,f,m=n[0],g=n[1],y=n[2];return e===t?(t[12]=e[0]*m+e[4]*g+e[8]*y+e[12],t[13]=e[1]*m+e[5]*g+e[9]*y+e[13],t[14]=e[2]*m+e[6]*g+e[10]*y+e[14],t[15]=e[3]*m+e[7]*g+e[11]*y+e[15]):(i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],p=e[10],f=e[11],t[0]=r=e[0],t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=l,t[6]=c,t[7]=u,t[8]=h,t[9]=d,t[10]=p,t[11]=f,t[12]=r*m+s*g+h*y+e[12],t[13]=i*m+l*g+d*y+e[13],t[14]=a*m+c*g+p*y+e[14],t[15]=o*m+u*g+f*y+e[15]),t},t.triggerPluginCompletionEvent=Wr,t.unicodeBlockLookup=zr,t.uniqueId=function(){return l++},t.validateCustomStyleLayer=function(t){const e=[],n=t.id;return void 0===n&&e.push({message:`layers.${n}: missing required property "id"`}),void 0===t.render&&e.push({message:`layers.${n}: missing required method "render"`}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),e},t.validateLight=br,t.validateStyle=xr,t.vectorTile=ws,t.warnOnce=f,t.wrap=o})),r(["./shared"],(function(t){function e(t){const n=typeof t;if("number"===n||"boolean"===n||"string"===n||null==t)return JSON.stringify(t);if(Array.isArray(t)){let n="[";for(const r of t)n+=`${e(r)},`;return`${n}]`}const r=Object.keys(t).sort();let i="{";for(let a=0;a<r.length;a++)i+=`${JSON.stringify(r[a])}:${e(t[r[a]])},`;return`${i}}`}function n(n){let r="";for(const i of t.refProperties)r+=`/${e(n[i])}`;return r}class r{constructor(t){this.keyCache={},t&&this.replace(t)}replace(t){this._layerConfigs={},this._layers={},this.update(t,[])}update(e,r){for(const n of e){this._layerConfigs[n.id]=n;const e=this._layers[n.id]=t.createStyleLayer(n);e._featureFilter=t.createFilter(e.filter),this.keyCache[n.id]&&delete this.keyCache[n.id]}for(const t of r)delete this.keyCache[t],delete this._layerConfigs[t],delete this._layers[t];this.familiesBySource={};const i=function(t,e){const r={};for(let a=0;a<t.length;a++){const i=e&&e[t[a].id]||n(t[a]);e&&(e[t[a].id]=i);let o=r[i];o||(o=r[i]=[]),o.push(t[a])}const i=[];for(const n in r)i.push(r[n]);return i}(Object.values(this._layerConfigs),this.keyCache);for(const t of i){const e=t.map((t=>this._layers[t.id])),n=e[0];if("none"===n.visibility)continue;const r=n.source||"";let i=this.familiesBySource[r];i||(i=this.familiesBySource[r]={});const a=n.sourceLayer||"_geojsonTileLayer";let o=i[a];o||(o=i[a]=[]),o.push(e)}}}class i{constructor(e){const n={},r=[];for(const t in e){const i=e[t],a=n[t]={};for(const t in i){const e=i[+t];if(!e||0===e.bitmap.width||0===e.bitmap.height)continue;const n={x:0,y:0,w:e.bitmap.width+2,h:e.bitmap.height+2};r.push(n),a[t]={rect:n,metrics:e.metrics}}}const{w:i,h:a}=t.potpack(r),o=new t.AlphaImage({width:i||1,height:a||1});for(const s in e){const r=e[s];for(const e in r){const i=r[+e];if(!i||0===i.bitmap.width||0===i.bitmap.height)continue;const a=n[s][e].rect;t.AlphaImage.copy(i.bitmap,o,{x:0,y:0},{x:a.x+1,y:a.y+1},i.bitmap)}}this.image=o,this.positions=n}}t.register("GlyphAtlas",i);class a{constructor(e){this.tileID=new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId}parse(e,n,r,a,s){this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;const l=new t.DictionaryCoder(Object.keys(e.layers).sort()),c=new t.FeatureIndex(this.tileID,this.promoteId);c.bucketLayerIDs=[];const u={},h={featureIndex:c,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:r},d=n.familiesBySource[this.source];for(const i in d){const n=e.layers[i];if(!n)continue;1===n.version&&t.warnOnce(`Vector tile source "${this.source}" layer "${i}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const a=l.encode(i),s=[];for(let t=0;t<n.length;t++){const e=n.feature(t),r=c.getId(e,i);s.push({feature:e,id:r,index:t,sourceLayerIndex:a})}for(const e of d[i]){const n=e[0];n.source!==this.source&&t.warnOnce(`layer.source = ${n.source} does not equal this.source = ${this.source}`),n.minzoom&&this.zoom<Math.floor(n.minzoom)||n.maxzoom&&this.zoom>=n.maxzoom||"none"!==n.visibility&&(o(e,this.zoom,r),(u[n.id]=n.createBucket({index:c.bucketLayerIDs.length,layers:e,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:a,sourceID:this.source})).populate(s,h,this.tileID.canonical),c.bucketLayerIDs.push(e.map((t=>t.id))))}}let p,f,m,g;const y=t.mapObject(h.glyphDependencies,(t=>Object.keys(t).map(Number)));Object.keys(y).length?a.send("getGlyphs",{uid:this.uid,stacks:y},((t,e)=>{p||(p=t,f=e,x.call(this))})):f={};const v=Object.keys(h.iconDependencies);v.length?a.send("getImages",{icons:v,source:this.source,tileID:this.tileID,type:"icons"},((t,e)=>{p||(p=t,m=e,x.call(this))})):m={};const _=Object.keys(h.patternDependencies);function x(){if(p)return s(p);if(f&&m&&g){const e=new i(f),n=new t.ImageAtlas(m,g);for(const i in u){const a=u[i];a instanceof t.SymbolBucket?(o(a.layers,this.zoom,r),t.performSymbolLayout({bucket:a,glyphMap:f,glyphPositions:e.positions,imageMap:m,imagePositions:n.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):a.hasPattern&&(a instanceof t.LineBucket||a instanceof t.FillBucket||a instanceof t.FillExtrusionBucket)&&(o(a.layers,this.zoom,r),a.addFeatures(h,this.tileID.canonical,n.patternPositions))}this.status="done",s(null,{buckets:Object.values(u).filter((t=>!t.isEmpty())),featureIndex:c,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:n,glyphMap:this.returnDependencies?f:null,iconMap:this.returnDependencies?m:null,glyphPositions:this.returnDependencies?e.positions:null})}}_.length?a.send("getImages",{icons:_,source:this.source,tileID:this.tileID,type:"patterns"},((t,e)=>{p||(p=t,g=e,x.call(this))})):g={},x.call(this)}}function o(e,n,r){const i=new t.EvaluationParameters(n);for(const t of e)t.recalculate(i,r)}function s(e,n){const r=t.getArrayBuffer(e.request,((e,r,i,a)=>{e?n(e):r&&n(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(r)),rawData:r,cacheControl:i,expires:a})}));return()=>{r.cancel(),n()}}class l{constructor(t,e,n,r){this.actor=t,this.layerIndex=e,this.availableImages=n,this.loadVectorData=r||s,this.loading={},this.loaded={}}loadTile(e,n){const r=e.uid;this.loading||(this.loading={});const i=!!(e&&e.request&&e.request.collectResourceTiming)&&new t.RequestPerformance(e.request),o=this.loading[r]=new a(e);o.abort=this.loadVectorData(e,((e,a)=>{if(delete this.loading[r],e||!a)return o.status="done",this.loaded[r]=o,n(e);const s=a.rawData,l={};a.expires&&(l.expires=a.expires),a.cacheControl&&(l.cacheControl=a.cacheControl);const c={};if(i){const t=i.finish();t&&(c.resourceTiming=JSON.parse(JSON.stringify(t)))}o.vectorTile=a.vectorTile,o.parse(a.vectorTile,this.layerIndex,this.availableImages,this.actor,((e,r)=>{if(e||!r)return n(e);n(null,t.extend({rawTileData:s.slice(0)},r,l,c))})),this.loaded=this.loaded||{},this.loaded[r]=o}))}reloadTile(t,e){const n=this.loaded,r=t.uid,i=this;if(n&&n[r]){const a=n[r];a.showCollisionBoxes=t.showCollisionBoxes;const o=(t,n)=>{const r=a.reloadCallback;r&&(delete a.reloadCallback,a.parse(a.vectorTile,i.layerIndex,this.availableImages,i.actor,r)),e(t,n)};"parsing"===a.status?a.reloadCallback=o:"done"===a.status&&(a.vectorTile?a.parse(a.vectorTile,this.layerIndex,this.availableImages,this.actor,o):o())}}abortTile(t,e){const n=this.loading,r=t.uid;n&&n[r]&&n[r].abort&&(n[r].abort(),delete n[r]),e()}removeTile(t,e){const n=this.loaded,r=t.uid;n&&n[r]&&delete n[r],e()}}class c{constructor(){this.loaded={}}loadTile(e,n){const{uid:r,encoding:i,rawImageData:a}=e,o=t.isImageBitmap(a)?this.getImageData(a):a,s=new t.DEMData(r,o,i);this.loaded=this.loaded||{},this.loaded[r]=s,n(null,s)}getImageData(e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);const n=this.offscreenCanvasContext.getImageData(-1,-1,e.width+2,e.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:n.width,height:n.height},n.data)}removeTile(t){const e=this.loaded,n=t.uid;e&&e[n]&&delete e[n]}}var u=function t(e,n){var r,i=e&&e.type;if("FeatureCollection"===i)for(r=0;r<e.features.length;r++)t(e.features[r],n);else if("GeometryCollection"===i)for(r=0;r<e.geometries.length;r++)t(e.geometries[r],n);else if("Feature"===i)t(e.geometry,n);else if("Polygon"===i)h(e.coordinates,n);else if("MultiPolygon"===i)for(r=0;r<e.coordinates.length;r++)h(e.coordinates[r],n);return e};function h(t,e){if(0!==t.length){d(t[0],e);for(var n=1;n<t.length;n++)d(t[n],!e)}}function d(t,e){for(var n=0,r=0,i=0,a=t.length,o=a-1;i<a;o=i++){var s=(t[i][0]-t[o][0])*(t[o][1]+t[i][1]),l=n+s;r+=Math.abs(n)>=Math.abs(s)?n-l+s:s-l+n,n=l}n+r>=0!=!!e&&t.reverse()}const p=t.vectorTile.VectorTileFeature.prototype.toGeoJSON;class f{constructor(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))}loadGeometry(){if(1===this._feature.type){const e=[];for(const n of this._feature.geometry)e.push([new t.pointGeometry(n[0],n[1])]);return e}{const e=[];for(const n of this._feature.geometry){const r=[];for(const e of n)r.push(new t.pointGeometry(e[0],e[1]));e.push(r)}return e}}toGeoJSON(t,e,n){return p.call(this,t,e,n)}}class m{constructor(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e}feature(t){return new f(this._features[t])}}var g={exports:{}},y=t.pointGeometry,v=t.vectorTile.VectorTileFeature,_=x;function x(t,e){this.options=e||{},this.features=t,this.length=t.length}function b(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}x.prototype.feature=function(t){return new b(this.features[t],this.options.extent)},b.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var n=t[e],r=[],i=0;i<n.length;i++)r.push(new y(n[i][0],n[i][1]));this.geometry.push(r)}return this.geometry},b.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,r=1/0,i=-1/0,a=0;a<t.length;a++)for(var o=t[a],s=0;s<o.length;s++){var l=o[s];e=Math.min(e,l.x),n=Math.max(n,l.x),r=Math.min(r,l.y),i=Math.max(i,l.y)}return[e,r,n,i]},b.prototype.toGeoJSON=v.prototype.toGeoJSON;var w=t.pbf,S=_;function M(t){var e=new w;return function(t,e){for(var n in t.layers)e.writeMessage(3,E,t.layers[n])}(t,e),e.finish()}function E(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)r.feature=t.feature(n),e.writeMessage(2,k,r);var i=r.keys;for(n=0;n<i.length;n++)e.writeStringField(3,i[n]);var a=r.values;for(n=0;n<a.length;n++)e.writeMessage(4,A,a[n])}function k(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,T,t),e.writeVarintField(3,n.type),e.writeMessage(4,P,n)}function T(t,e){var n=t.feature,r=t.keys,i=t.values,a=t.keycache,o=t.valuecache;for(var s in n.properties){var l=n.properties[s],c=a[s];if(null!==l){void 0===c&&(r.push(s),a[s]=c=r.length-1),e.writeVarint(c);var u=typeof l;"string"!==u&&"boolean"!==u&&"number"!==u&&(l=JSON.stringify(l));var h=u+":"+l,d=o[h];void 0===d&&(i.push(l),o[h]=d=i.length-1),e.writeVarint(d)}}}function C(t,e){return(e<<3)+(7&t)}function I(t){return t<<1^t>>31}function P(t,e){for(var n=t.loadGeometry(),r=t.type,i=0,a=0,o=n.length,s=0;s<o;s++){var l=n[s],c=1;1===r&&(c=l.length),e.writeVarint(C(1,c));for(var u=3===r?l.length-1:l.length,h=0;h<u;h++){1===h&&1!==r&&e.writeVarint(C(2,u-1));var d=l[h].x-i,p=l[h].y-a;e.writeVarint(I(d)),e.writeVarint(I(p)),i+=d,a+=p}3===r&&e.writeVarint(C(7,1))}}function A(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function z(t,e,n,r,i,a){if(i-r<=n)return;const o=r+i>>1;L(t,e,o,r,i,a%2),z(t,e,n,r,o-1,a+1),z(t,e,n,o+1,i,a+1)}function L(t,e,n,r,i,a){for(;i>r;){if(i-r>600){const o=i-r+1,s=n-r+1,l=Math.log(o),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(o-c)/o)*(s-o/2<0?-1:1);L(t,e,n,Math.max(r,Math.floor(n-s*c/o+u)),Math.min(i,Math.floor(n+(o-s)*c/o+u)),a)}const o=e[2*n+a];let s=r,l=i;for(R(t,e,r,n),e[2*i+a]>o&&R(t,e,r,i);s<l;){for(R(t,e,s,l),s++,l--;e[2*s+a]<o;)s++;for(;e[2*l+a]>o;)l--}e[2*r+a]===o?R(t,e,r,l):(l++,R(t,e,l,i)),l<=n&&(r=l+1),n<=l&&(i=l-1)}}function R(t,e,n,r){D(t,n,r),D(e,2*n,2*r),D(e,2*n+1,2*r+1)}function D(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function O(t,e,n,r){const i=t-n,a=e-r;return i*i+a*a}g.exports=M,g.exports.fromVectorTileJs=M,g.exports.fromGeojsonVt=function(t,e){e=e||{};var n={};for(var r in t)n[r]=new S(t[r].features,e),n[r].name=r,n[r].version=e.version,n[r].extent=e.extent;return M({layers:n})},g.exports.GeoJSONWrapper=S;const B=t=>t[0],F=t=>t[1];class N{constructor(t,e=B,n=F,r=64,i=Float64Array){this.nodeSize=r,this.points=t;const a=t.length<65536?Uint16Array:Uint32Array,o=this.ids=new a(t.length),s=this.coords=new i(2*t.length);for(let l=0;l<t.length;l++)o[l]=l,s[2*l]=e(t[l]),s[2*l+1]=n(t[l]);z(o,s,r,0,o.length-1,0)}range(t,e,n,r){return function(t,e,n,r,i,a,o){const s=[0,t.length-1,0],l=[];let c,u;for(;s.length;){const h=s.pop(),d=s.pop(),p=s.pop();if(d-p<=o){for(let o=p;o<=d;o++)c=e[2*o],u=e[2*o+1],c>=n&&c<=i&&u>=r&&u<=a&&l.push(t[o]);continue}const f=Math.floor((p+d)/2);c=e[2*f],u=e[2*f+1],c>=n&&c<=i&&u>=r&&u<=a&&l.push(t[f]);const m=(h+1)%2;(0===h?n<=c:r<=u)&&(s.push(p),s.push(f-1),s.push(m)),(0===h?i>=c:a>=u)&&(s.push(f+1),s.push(d),s.push(m))}return l}(this.ids,this.coords,t,e,n,r,this.nodeSize)}within(t,e,n){return function(t,e,n,r,i,a){const o=[0,t.length-1,0],s=[],l=i*i;for(;o.length;){const c=o.pop(),u=o.pop(),h=o.pop();if(u-h<=a){for(let i=h;i<=u;i++)O(e[2*i],e[2*i+1],n,r)<=l&&s.push(t[i]);continue}const d=Math.floor((h+u)/2),p=e[2*d],f=e[2*d+1];O(p,f,n,r)<=l&&s.push(t[d]);const m=(c+1)%2;(0===c?n-i<=p:r-i<=f)&&(o.push(h),o.push(d-1),o.push(m)),(0===c?n+i>=p:r+i>=f)&&(o.push(d+1),o.push(u),o.push(m))}return s}(this.ids,this.coords,t,e,n,this.nodeSize)}}const Z={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},U=Math.fround||(j=new Float32Array(1),t=>(j[0]=+t,j[0]));var j;class V{constructor(t){this.options=Y(Object.create(Z),t),this.trees=new Array(this.options.maxZoom+1)}load(t){const{log:e,minZoom:n,maxZoom:r,nodeSize:i}=this.options;e&&console.time("total time");const a=`prepare ${t.length} points`;e&&console.time(a),this.points=t;let o=[];for(let s=0;s<t.length;s++)t[s].geometry&&o.push($(t[s],s));this.trees[r+1]=new N(o,J,Q,i,Float32Array),e&&console.timeEnd(a);for(let s=r;s>=n;s--){const t=+Date.now();o=this._cluster(o,s),this.trees[s]=new N(o,J,Q,i,Float32Array),e&&console.log("z%d: %d clusters in %dms",s,o.length,+Date.now()-t)}return e&&console.timeEnd("total time"),this}getClusters(t,e){let n=((t[0]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,t[1]));let i=180===t[2]?180:((t[2]+180)%360+360)%360-180;const a=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,i=180;else if(n>i){const t=this.getClusters([n,r,180,a],e),o=this.getClusters([-180,r,i,a],e);return t.concat(o)}const o=this.trees[this._limitZoom(e)],s=o.range(H(n),X(a),H(i),X(r)),l=[];for(const c of s){const t=o.points[c];l.push(t.numPoints?G(t):this.points[t.index])}return l}getChildren(t){const e=this._getOriginId(t),n=this._getOriginZoom(t),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);const a=i.points[e];if(!a)throw new Error(r);const o=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=i.within(a.x,a.y,o),l=[];for(const c of s){const e=i.points[c];e.parentId===t&&l.push(e.numPoints?G(e):this.points[e.index])}if(0===l.length)throw new Error(r);return l}getLeaves(t,e,n){const r=[];return this._appendLeaves(r,t,e=e||10,n=n||0,0),r}getTile(t,e,n){const r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),{extent:a,radius:o}=this.options,s=o/a,l=(n-s)/i,c=(n+1+s)/i,u={features:[]};return this._addTileFeatures(r.range((e-s)/i,l,(e+1+s)/i,c),r.points,e,n,i,u),0===e&&this._addTileFeatures(r.range(1-s/i,l,1,c),r.points,i,n,i,u),e===i-1&&this._addTileFeatures(r.range(0,l,s/i,c),r.points,-1,n,i,u),u.features.length?u:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){const n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e}_appendLeaves(t,e,n,r,i){const a=this.getChildren(e);for(const o of a){const e=o.properties;if(e&&e.cluster?i+e.point_count<=r?i+=e.point_count:i=this._appendLeaves(t,e.cluster_id,n,r,i):i<r?i++:t.push(o),t.length===n)break}return i}_addTileFeatures(t,e,n,r,i,a){for(const o of t){const t=e[o],s=t.numPoints;let l,c,u;if(s)l=W(t),c=t.x,u=t.y;else{const e=this.points[t.index];l=e.properties,c=H(e.geometry.coordinates[0]),u=X(e.geometry.coordinates[1])}const h={type:1,geometry:[[Math.round(this.options.extent*(c*i-n)),Math.round(this.options.extent*(u*i-r))]],tags:l};let d;s?d=t.id:this.options.generateId?d=t.index:this.points[t.index].id&&(d=this.points[t.index].id),void 0!==d&&(h.id=d),a.features.push(h)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}_cluster(t,e){const n=[],{radius:r,extent:i,reduce:a,minPoints:o}=this.options,s=r/(i*Math.pow(2,e));for(let l=0;l<t.length;l++){const r=t[l];if(r.zoom<=e)continue;r.zoom=e;const i=this.trees[e+1],c=i.within(r.x,r.y,s),u=r.numPoints||1;let h=u;for(const t of c){const n=i.points[t];n.zoom>e&&(h+=n.numPoints||1)}if(h>u&&h>=o){let t=r.x*u,o=r.y*u,s=a&&u>1?this._map(r,!0):null;const d=(l<<5)+(e+1)+this.points.length;for(const n of c){const l=i.points[n];if(l.zoom<=e)continue;l.zoom=e;const c=l.numPoints||1;t+=l.x*c,o+=l.y*c,l.parentId=d,a&&(s||(s=this._map(r,!0)),a(s,this._map(l)))}r.parentId=d,n.push(q(t/h,o/h,d,h,s))}else if(n.push(r),h>1)for(const t of c){const r=i.points[t];r.zoom<=e||(r.zoom=e,n.push(r))}}return n}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e){if(t.numPoints)return e?Y({},t.properties):t.properties;const n=this.points[t.index].properties,r=this.options.map(n);return e&&r===n?Y({},r):r}}function q(t,e,n,r,i){return{x:U(t),y:U(e),zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function $(t,e){const[n,r]=t.geometry.coordinates;return{x:U(H(n)),y:U(X(r)),zoom:1/0,index:e,parentId:-1}}function G(t){return{type:"Feature",id:t.id,properties:W(t),geometry:{type:"Point",coordinates:[(e=t.x,360*(e-.5)),K(t.y)]}};var e}function W(t){const e=t.numPoints,n=e>=1e4?`${Math.round(e/1e3)}k`:e>=1e3?Math.round(e/100)/10+"k":e;return Y(Y({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function H(t){return t/360+.5}function X(t){const e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function K(t){const e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function Y(t,e){for(const n in e)t[n]=e[n];return t}function J(t){return t.x}function Q(t){return t.y}function tt(t,e,n,r){for(var i,a=r,o=n-e>>1,s=n-e,l=t[e],c=t[e+1],u=t[n],h=t[n+1],d=e+3;d<n;d+=3){var p=et(t[d],t[d+1],l,c,u,h);if(p>a)i=d,a=p;else if(p===a){var f=Math.abs(d-o);f<s&&(i=d,s=f)}}a>r&&(i-e>3&&tt(t,e,i,r),t[i+2]=a,n-i>3&&tt(t,i,n,r))}function et(t,e,n,r,i,a){var o=i-n,s=a-r;if(0!==o||0!==s){var l=((t-n)*o+(e-r)*s)/(o*o+s*s);l>1?(n=i,r=a):l>0&&(n+=o*l,r+=s*l)}return(o=t-n)*o+(s=e-r)*s}function nt(t,e,n,r){var i={id:void 0===t?null:t,type:e,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)rt(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<e.length;r++)rt(t,e[r]);else if("MultiPolygon"===n)for(r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)rt(t,e[r][i])}(i),i}function rt(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function it(t,e,n,r){if(e.geometry){var i=e.geometry.coordinates,a=e.geometry.type,o=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],l=e.id;if(n.promoteId?l=e.properties[n.promoteId]:n.generateId&&(l=r||0),"Point"===a)at(i,s);else if("MultiPoint"===a)for(var c=0;c<i.length;c++)at(i[c],s);else if("LineString"===a)ot(i,s,o,!1);else if("MultiLineString"===a){if(n.lineMetrics){for(c=0;c<i.length;c++)ot(i[c],s=[],o,!1),t.push(nt(l,"LineString",s,e.properties));return}st(i,s,o,!1)}else if("Polygon"===a)st(i,s,o,!0);else{if("MultiPolygon"!==a){if("GeometryCollection"===a){for(c=0;c<e.geometry.geometries.length;c++)it(t,{id:l,geometry:e.geometry.geometries[c],properties:e.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<i.length;c++){var u=[];st(i[c],u,o,!0),s.push(u)}}t.push(nt(l,a,s,e.properties))}}function at(t,e){e.push(lt(t[0])),e.push(ct(t[1])),e.push(0)}function ot(t,e,n,r){for(var i,a,o=0,s=0;s<t.length;s++){var l=lt(t[s][0]),c=ct(t[s][1]);e.push(l),e.push(c),e.push(0),s>0&&(o+=r?(i*c-l*a)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(c-a,2))),i=l,a=c}var u=e.length-3;e[2]=1,tt(e,0,u,n),e[u+2]=1,e.size=Math.abs(o),e.start=0,e.end=e.size}function st(t,e,n,r){for(var i=0;i<t.length;i++){var a=[];ot(t[i],a,n,r),e.push(a)}}function lt(t){return t/360+.5}function ct(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function ut(t,e,n,r,i,a,o,s){if(r/=e,a>=(n/=e)&&o<r)return t;if(o<n||a>=r)return null;for(var l=[],c=0;c<t.length;c++){var u=t[c],h=u.geometry,d=u.type,p=0===i?u.minX:u.minY,f=0===i?u.maxX:u.maxY;if(p>=n&&f<r)l.push(u);else if(!(f<n||p>=r)){var m=[];if("Point"===d||"MultiPoint"===d)ht(h,m,n,r,i);else if("LineString"===d)dt(h,m,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===d)ft(h,m,n,r,i,!1);else if("Polygon"===d)ft(h,m,n,r,i,!0);else if("MultiPolygon"===d)for(var g=0;g<h.length;g++){var y=[];ft(h[g],y,n,r,i,!0),y.length&&m.push(y)}if(m.length){if(s.lineMetrics&&"LineString"===d){for(g=0;g<m.length;g++)l.push(nt(u.id,d,m[g],u.tags));continue}"LineString"!==d&&"MultiLineString"!==d||(1===m.length?(d="LineString",m=m[0]):d="MultiLineString"),"Point"!==d&&"MultiPoint"!==d||(d=3===m.length?"Point":"MultiPoint"),l.push(nt(u.id,d,m,u.tags))}}}return l.length?l:null}function ht(t,e,n,r,i){for(var a=0;a<t.length;a+=3){var o=t[a+i];o>=n&&o<=r&&(e.push(t[a]),e.push(t[a+1]),e.push(t[a+2]))}}function dt(t,e,n,r,i,a,o){for(var s,l,c=pt(t),u=0===i?gt:yt,h=t.start,d=0;d<t.length-3;d+=3){var p=t[d],f=t[d+1],m=t[d+2],g=t[d+3],y=t[d+4],v=0===i?p:f,_=0===i?g:y,x=!1;o&&(s=Math.sqrt(Math.pow(p-g,2)+Math.pow(f-y,2))),v<n?_>n&&(l=u(c,p,f,g,y,n),o&&(c.start=h+s*l)):v>r?_<r&&(l=u(c,p,f,g,y,r),o&&(c.start=h+s*l)):mt(c,p,f,m),_<n&&v>=n&&(l=u(c,p,f,g,y,n),x=!0),_>r&&v<=r&&(l=u(c,p,f,g,y,r),x=!0),!a&&x&&(o&&(c.end=h+s*l),e.push(c),c=pt(t)),o&&(h+=s)}var b=t.length-3;p=t[b],f=t[b+1],m=t[b+2],(v=0===i?p:f)>=n&&v<=r&&mt(c,p,f,m),b=c.length-3,a&&b>=3&&(c[b]!==c[0]||c[b+1]!==c[1])&&mt(c,c[0],c[1],c[2]),c.length&&e.push(c)}function pt(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function ft(t,e,n,r,i,a){for(var o=0;o<t.length;o++)dt(t[o],e,n,r,i,a,!1)}function mt(t,e,n,r){t.push(e),t.push(n),t.push(r)}function gt(t,e,n,r,i,a){var o=(a-e)/(r-e);return t.push(a),t.push(n+(i-n)*o),t.push(1),o}function yt(t,e,n,r,i,a){var o=(a-n)/(i-n);return t.push(e+(r-e)*o),t.push(a),t.push(1),o}function vt(t,e){for(var n=[],r=0;r<t.length;r++){var i,a=t[r],o=a.type;if("Point"===o||"MultiPoint"===o||"LineString"===o)i=_t(a.geometry,e);else if("MultiLineString"===o||"Polygon"===o){i=[];for(var s=0;s<a.geometry.length;s++)i.push(_t(a.geometry[s],e))}else if("MultiPolygon"===o)for(i=[],s=0;s<a.geometry.length;s++){for(var l=[],c=0;c<a.geometry[s].length;c++)l.push(_t(a.geometry[s][c],e));i.push(l)}n.push(nt(a.id,o,i,a.tags))}return n}function _t(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var r=0;r<t.length;r+=3)n.push(t[r]+e,t[r+1],t[r+2]);return n}function xt(t,e){if(t.transformed)return t;var n,r,i,a=1<<t.z,o=t.x,s=t.y;for(n=0;n<t.features.length;n++){var l=t.features[n],c=l.geometry,u=l.type;if(l.geometry=[],1===u)for(r=0;r<c.length;r+=2)l.geometry.push(bt(c[r],c[r+1],e,a,o,s));else for(r=0;r<c.length;r++){var h=[];for(i=0;i<c[r].length;i+=2)h.push(bt(c[r][i],c[r][i+1],e,a,o,s));l.geometry.push(h)}}return t.transformed=!0,t}function bt(t,e,n,r,i,a){return[Math.round(n*(t*r-i)),Math.round(n*(e*r-a))]}function wt(t,e,n,r,i){for(var a=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),o={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){o.numFeatures++,St(o,t[s],a,i);var l=t[s].minX,c=t[s].minY,u=t[s].maxX,h=t[s].maxY;l<o.minX&&(o.minX=l),c<o.minY&&(o.minY=c),u>o.maxX&&(o.maxX=u),h>o.maxY&&(o.maxY=h)}return o}function St(t,e,n,r){var i=e.geometry,a=e.type,o=[];if("Point"===a||"MultiPoint"===a)for(var s=0;s<i.length;s+=3)o.push(i[s]),o.push(i[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===a)Mt(o,i,t,n,!1,!1);else if("MultiLineString"===a||"Polygon"===a)for(s=0;s<i.length;s++)Mt(o,i[s],t,n,"Polygon"===a,0===s);else if("MultiPolygon"===a)for(var l=0;l<i.length;l++){var c=i[l];for(s=0;s<c.length;s++)Mt(o,c[s],t,n,!0,0===s)}if(o.length){var u=e.tags||null;if("LineString"===a&&r.lineMetrics){for(var h in u={},e.tags)u[h]=e.tags[h];u.mapbox_clip_start=i.start/i.size,u.mapbox_clip_end=i.end/i.size}var d={geometry:o,type:"Polygon"===a||"MultiPolygon"===a?3:"LineString"===a||"MultiLineString"===a?2:1,tags:u};null!==e.id&&(d.id=e.id),t.features.push(d)}}function Mt(t,e,n,r,i,a){var o=r*r;if(r>0&&e.size<(i?o:r))n.numPoints+=e.length/3;else{for(var s=[],l=0;l<e.length;l+=3)(0===r||e[l+2]>o)&&(n.numSimplified++,s.push(e[l]),s.push(e[l+1])),n.numPoints++;i&&function(t,e){for(var n=0,r=0,i=t.length,a=i-2;r<i;a=r,r+=2)n+=(t[r]-t[a])*(t[r+1]+t[a+1]);if(n>0===e)for(r=0,i=t.length;r<i/2;r+=2){var o=t[r],s=t[r+1];t[r]=t[i-2-r],t[r+1]=t[i-1-r],t[i-2-r]=o,t[i-1-r]=s}}(s,a),t.push(s)}}function Et(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)it(n,t.features[r],e,r);else it(n,"Feature"===t.type?t:{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=function(t,e){var n=e.buffer/e.extent,r=t,i=ut(t,1,-1-n,n,0,-1,2,e),a=ut(t,1,1-n,2+n,0,-1,2,e);return(i||a)&&(r=ut(t,1,-n,1+n,0,-1,2,e)||[],i&&(r=vt(i,1).concat(r)),a&&(r=r.concat(vt(a,-1)))),r}(r,e),r.length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function kt(t,e,n){return 32*((1<<t)*n+e)+t}function Tt(t,e){const n=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);const r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return e(null,null);const i=new m(r.features);let a=g.exports(i);0===a.byteOffset&&a.byteLength===a.buffer.byteLength||(a=new Uint8Array(a)),e(null,{vectorTile:i,rawData:a.buffer})}Et.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Et.prototype.splitTile=function(t,e,n,r,i,a,o){for(var s=[t,e,n,r],l=this.options,c=l.debug;s.length;){r=s.pop(),n=s.pop(),e=s.pop(),t=s.pop();var u=1<<e,h=kt(e,n,r),d=this.tiles[h];if(!d&&(c>1&&console.time("creation"),d=this.tiles[h]=wt(t,e,n,r,l),this.tileCoords.push({z:e,x:n,y:r}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));var p="z"+e;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(d.source=t,i){if(e===l.maxZoom||e===i)continue;var f=1<<i-e;if(n!==Math.floor(a/f)||r!==Math.floor(o/f))continue}else if(e===l.indexMaxZoom||d.numPoints<=l.indexMaxPoints)continue;if(d.source=null,0!==t.length){c>1&&console.time("clipping");var m,g,y,v,_,x,b=.5*l.buffer/l.extent,w=.5-b,S=.5+b,M=1+b;m=g=y=v=null,_=ut(t,u,n-b,n+S,0,d.minX,d.maxX,l),x=ut(t,u,n+w,n+M,0,d.minX,d.maxX,l),t=null,_&&(m=ut(_,u,r-b,r+S,1,d.minY,d.maxY,l),g=ut(_,u,r+w,r+M,1,d.minY,d.maxY,l),_=null),x&&(y=ut(x,u,r-b,r+S,1,d.minY,d.maxY,l),v=ut(x,u,r+w,r+M,1,d.minY,d.maxY,l),x=null),c>1&&console.timeEnd("clipping"),s.push(m||[],e+1,2*n,2*r),s.push(g||[],e+1,2*n,2*r+1),s.push(y||[],e+1,2*n+1,2*r),s.push(v||[],e+1,2*n+1,2*r+1)}}},Et.prototype.getTile=function(t,e,n){var r=this.options,i=r.extent,a=r.debug;if(t<0||t>24)return null;var o=1<<t,s=kt(t,e=(e%o+o)%o,n);if(this.tiles[s])return xt(this.tiles[s],i);a>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var l,c=t,u=e,h=n;!l&&c>0;)c--,u=Math.floor(u/2),h=Math.floor(h/2),l=this.tiles[kt(c,u,h)];return l&&l.source?(a>1&&console.log("found parent tile z%d-%d-%d",c,u,h),a>1&&console.time("drilling down"),this.splitTile(l.source,c,u,h,t,e,n),a>1&&console.timeEnd("drilling down"),this.tiles[s]?xt(this.tiles[s],i):null):null};class Ct extends l{constructor(t,e,n,r){super(t,e,n,Tt),r&&(this.loadGeoJSON=r)}loadData(e,n){var r;null===(r=this._pendingRequest)||void 0===r||r.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const i=!!(e&&e.request&&e.request.collectResourceTiming)&&new t.RequestPerformance(e.request);this._pendingCallback=n,this._pendingRequest=this.loadGeoJSON(e,((r,a)=>{if(delete this._pendingCallback,delete this._pendingRequest,r||!a)return n(r);if("object"!=typeof a)return n(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`));{u(a,!0);try{if(e.filter){const n=t.createExpression(e.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===n.result)throw new Error(n.value.map((t=>`${t.key}: ${t.message}`)).join(", "));const r=a.features.filter((t=>n.value.evaluate({zoom:0},t)));a={type:"FeatureCollection",features:r}}this._geoJSONIndex=e.cluster?new V(function({superclusterOptions:e,clusterProperties:n}){if(!n||!e)return e;const r={},i={},a={accumulated:null,zoom:0},o={properties:null},s=Object.keys(n);for(const l of s){const[e,a]=n[l],o=t.createExpression(a),s=t.createExpression("string"==typeof e?[e,["accumulated"],["get",l]]:e);r[l]=o.value,i[l]=s.value}return e.map=t=>{o.properties=t;const e={};for(const n of s)e[n]=r[n].evaluate(a,o);return e},e.reduce=(t,e)=>{o.properties=e;for(const n of s)a.accumulated=t[n],t[n]=i[n].evaluate(a,o)},e}(e)).load(a.features):function(t,e){return new Et(t,e)}(a,e.geojsonVtOptions)}catch(r){return n(r)}this.loaded={};const o={};if(i){const t=i.finish();t&&(o.resourceTiming={},o.resourceTiming[e.source]=JSON.parse(JSON.stringify(t)))}n(null,o)}}))}reloadTile(t,e){const n=this.loaded;return n&&n[t.uid]?super.reloadTile(t,e):this.loadTile(t,e)}loadGeoJSON(e,n){if(e.request)return t.getJSON(e.request,n);if("string"==typeof e.data)try{n(null,JSON.parse(e.data))}catch(t){n(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`))}else n(new Error(`Input data given to '${e.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()}getClusterExpansionZoom(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}}getClusterChildren(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}}getClusterLeaves(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}}}class It{constructor(e){this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:l,geojson:Ct},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(t,e)=>{if(this.workerSourceTypes[t])throw new Error(`Worker source with name "${t}" already registered.`);this.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=e=>{if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}}setReferrer(t,e){this.referrer=e}setImages(t,e,n){this.availableImages[t]=e;for(const r in this.workerSources[t]){const n=this.workerSources[t][r];for(const t in n)n[t].availableImages=e}n()}setLayers(t,e,n){this.getLayerIndex(t).replace(e),n()}updateLayers(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()}loadTile(t,e,n){this.getWorkerSource(t,e.type,e.source).loadTile(e,n)}loadDEMTile(t,e,n){this.getDEMWorkerSource(t,e.source).loadTile(e,n)}reloadTile(t,e,n){this.getWorkerSource(t,e.type,e.source).reloadTile(e,n)}abortTile(t,e,n){this.getWorkerSource(t,e.type,e.source).abortTile(e,n)}removeTile(t,e,n){this.getWorkerSource(t,e.type,e.source).removeTile(e,n)}removeDEMTile(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)}removeSource(t,e,n){if(!this.workerSources[t]||!this.workerSources[t][e.type]||!this.workerSources[t][e.type][e.source])return;const r=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==r.removeSource?r.removeSource(e,n):n()}loadWorkerSource(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}}syncRTLPluginState(e,n,r){try{t.plugin.setState(n);const e=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=e){this.self.importScripts(e);const n=t.plugin.isParsed();r(n?void 0:new Error(`RTL Text Plugin failed to import scripts from ${e}`),n)}}catch(t){r(t.toString())}}getAvailableImages(t){let e=this.availableImages[t];return e||(e=[]),e}getLayerIndex(t){let e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new r),e}getWorkerSource(t,e,n){if(this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),!this.workerSources[t][e][n]){const r={send:(e,n,r)=>{this.actor.send(e,n,r,t)}};this.workerSources[t][e][n]=new this.workerSourceTypes[e](r,this.getLayerIndex(t),this.getAvailableImages(t))}return this.workerSources[t][e][n]}getDEMWorkerSource(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new c),this.demWorkerSources[t][e]}enforceCacheSizeLimit(e,n){t.enforceCacheSizeLimit(n)}}return t.isWorker()&&(self.worker=new It(self)),It})),r(["./shared"],(function(t){var e=n;function n(t){return!function(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{e=new Worker(r),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(r),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var n=e.getImageData(0,0,1,1);return n&&n.width===t.width}()?(void 0===r[e=t&&t.failIfMajorPerformanceCaveat]&&(r[e]=function(t){var e,r=function(t){var e=document.createElement("canvas"),r=Object.create(n.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=t,e.getContext("webgl",r)||e.getContext("experimental-webgl",r)}(t);if(!r)return!1;try{e=r.createShader(r.VERTEX_SHADER)}catch(t){return!1}return!(!e||r.isContextLost())&&(r.shaderSource(e,"void main() {}"),r.compileShader(e),!0===r.getShaderParameter(e,r.COMPILE_STATUS))}(e)),r[e]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var e}(t)}var r={};function i(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!i(t[n],e[n]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!i(t[n],e[n]))return!1;return!0}return t===e}n.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class a{static testProp(t){if(!a.docStyle)return t[0];for(let e=0;e<t.length;e++)if(t[e]in a.docStyle)return t[e];return t[0]}static create(t,e,n){const r=window.document.createElement(t);return void 0!==e&&(r.className=e),n&&n.appendChild(r),r}static createNS(t,e){return window.document.createElementNS(t,e)}static disableDrag(){a.docStyle&&a.selectProp&&(a.userSelect=a.docStyle[a.selectProp],a.docStyle[a.selectProp]="none")}static enableDrag(){a.docStyle&&a.selectProp&&(a.docStyle[a.selectProp]=a.userSelect)}static setTransform(t,e){t.style[a.transformProp]=e}static addEventListener(t,e,n,r={}){t.addEventListener(e,n,"passive"in r?r:r.capture)}static removeEventListener(t,e,n,r={}){t.removeEventListener(e,n,"passive"in r?r:r.capture)}static suppressClickInternal(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",a.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",a.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",a.suppressClickInternal,!0)}),0)}static mousePos(e,n){const r=e.getBoundingClientRect();return new t.pointGeometry(n.clientX-r.left-e.clientLeft,n.clientY-r.top-e.clientTop)}static touchPos(e,n){const r=e.getBoundingClientRect(),i=[];for(let a=0;a<n.length;a++)i.push(new t.pointGeometry(n[a].clientX-r.left-e.clientLeft,n[a].clientY-r.top-e.clientTop));return i}static mouseButton(t){return t.button}static remove(t){t.parentNode&&t.parentNode.removeChild(t)}}a.docStyle="undefined"!=typeof window&&window.document&&window.document.documentElement.style,a.selectProp=a.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),a.transformProp=a.testProp(["transform","WebkitTransform"]);class o{constructor(t){this._transformRequestFn=t}transformRequest(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}}normalizeSpriteURL(t,e,n){const r=function(t){const e=t.match(s);if(!e)throw new Error(`Unable to parse URL "${t}"`);return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}(t);return r.path+=`${e}${n}`,function(t){const e=t.params.length?`?${t.params.join("&")}`:"";return`${t.protocol}://${t.authority}${t.path}${e}`}(r)}setTransformRequest(t){this._transformRequestFn=t}}const s=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class l{constructor(t,e,n,r){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(e,r)}update(e,n,r){const{width:i,height:a}=e,o=!(this.size&&this.size[0]===i&&this.size[1]===a||r),{context:s}=this,{gl:l}=s;if(this.useMipmap=Boolean(n&&n.useMipmap),l.bindTexture(l.TEXTURE_2D,this.texture),s.pixelStoreUnpackFlipY.set(!1),s.pixelStoreUnpack.set(1),s.pixelStoreUnpackPremultiplyAlpha.set(this.format===l.RGBA&&(!n||!1!==n.premultiply)),o)this.size=[i,a],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||t.isImageBitmap(e)?l.texImage2D(l.TEXTURE_2D,0,this.format,this.format,l.UNSIGNED_BYTE,e):l.texImage2D(l.TEXTURE_2D,0,this.format,i,a,0,this.format,l.UNSIGNED_BYTE,e.data);else{const{x:n,y:o}=r||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||t.isImageBitmap(e)?l.texSubImage2D(l.TEXTURE_2D,0,n,o,l.RGBA,l.UNSIGNED_BYTE,e):l.texSubImage2D(l.TEXTURE_2D,0,n,o,i,a,l.RGBA,l.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&l.generateMipmap(l.TEXTURE_2D)}bind(t,e,n){const{context:r}=this,{gl:i}=r;i.bindTexture(i.TEXTURE_2D,this.texture),n!==i.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=i.LINEAR),t!==this.filter&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,n||t),this.filter=t),e!==this.wrap&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,e),this.wrap=e)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}function c(t){const{userImage:e}=t;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}class u extends t.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:t,callback:e}of this.requestors)this._notify(t,e);this.requestors=[]}}getImage(t){return this.images[t]}addImage(t,e){if(this.images[t])throw new Error(`Image id ${t} already exist, use updateImage instead`);this._validate(t,e)&&(this.images[t]=e)}_validate(e,n){let r=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "stretchX" value`))),r=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "stretchY" value`))),r=!1),this._validateContent(n.content,n)||(this.fire(new t.ErrorEvent(new Error(`Image "${e}" has invalid "content" value`))),r=!1),r}_validateStretch(t,e){if(!t)return!0;let n=0;for(const r of t){if(r[0]<n||r[1]<r[0]||e<r[1])return!1;n=r[1]}return!0}_validateContent(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))}updateImage(t,e){const n=this.images[t];if(n.data.width!==e.data.width||n.data.height!==e.data.height)throw new Error(`size mismatch between old image (${n.data.width}x${n.data.height}) and new image (${e.data.width}x${e.data.height}).`);e.version=n.version+1,this.images[t]=e,this.updatedImages[t]=!0}removeImage(t){const e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t,e){let n=!0;if(!this.isLoaded())for(const r of t)this.images[r]||(n=!1);this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})}_notify(e,n){const r={};for(const i of e){this.images[i]||this.fire(new t.Event("styleimagemissing",{id:i}));const e=this.images[i];e?r[i]={data:e.data.clone(),pixelRatio:e.pixelRatio,sdf:e.sdf,version:e.version,stretchX:e.stretchX,stretchY:e.stretchY,content:e.content,hasRenderCallback:Boolean(e.userImage&&e.userImage.render)}:t.warnOnce(`Image "${i}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}n(null,r)}getPixelSize(){const{width:t,height:e}=this.atlasImage;return{width:t,height:e}}getPattern(e){const n=this.patterns[e],r=this.getImage(e);if(!r)return null;if(n&&n.position.version===r.version)return n.position;if(n)n.position.version=r.version;else{const n={w:r.data.width+2,h:r.data.height+2,x:0,y:0},i=new t.ImagePosition(n,r);this.patterns[e]={bin:n,position:i}}return this._updatePatternAtlas(),this.patterns[e].position}bind(t){const e=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new l(t,this.atlasImage,e.RGBA),this.atlasTexture.bind(e.LINEAR,e.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const t in this.patterns)e.push(this.patterns[t].bin);const{w:n,h:r}=t.potpack(e),i=this.atlasImage;i.resize({width:n||1,height:r||1});for(const a in this.patterns){const{bin:e}=this.patterns[a],n=e.x+1,r=e.y+1,o=this.images[a].data,s=o.width,l=o.height;t.RGBAImage.copy(o,i,{x:0,y:0},{x:n,y:r},{width:s,height:l}),t.RGBAImage.copy(o,i,{x:0,y:l-1},{x:n,y:r-1},{width:s,height:1}),t.RGBAImage.copy(o,i,{x:0,y:0},{x:n,y:r+l},{width:s,height:1}),t.RGBAImage.copy(o,i,{x:s-1,y:0},{x:n-1,y:r},{width:1,height:l}),t.RGBAImage.copy(o,i,{x:0,y:0},{x:n+s,y:r},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const n of e){if(this.callbackDispatchedThisFrame[n])continue;this.callbackDispatchedThisFrame[n]=!0;const e=this.images[n];e||t.warnOnce(`Image with ID: "${n}" was not found`),c(e)&&this.updateImage(n,e)}}}const h=1e20;function d(t,e,n,r,i,a,o,s,l){for(let c=e;c<e+r;c++)p(t,n*a+c,a,i,o,s,l);for(let c=n;c<n+i;c++)p(t,c*a+e,1,r,o,s,l)}function p(t,e,n,r,i,a,o){a[0]=0,o[0]=-h,o[1]=h,i[0]=t[e];for(let s=1,l=0,c=0;s<r;s++){i[s]=t[e+s*n];const r=s*s;do{const t=a[l];c=(i[s]-i[t]+r-t*t)/(s-t)/2}while(c<=o[l]&&--l>-1);l++,a[l]=s,o[l]=c,o[l+1]=h}for(let s=0,l=0;s<r;s++){for(;o[l+1]<s;)l++;const r=a[l],c=s-r;t[e+s*n]=i[r]+c*c}}class f{constructor(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}}setURL(t){this.url=t}getGlyphs(e,n){const r=[];for(const t in e)for(const n of e[t])r.push({stack:t,id:n});t.asyncAll(r,(({stack:t,id:e},n)=>{let r=this.entries[t];r||(r=this.entries[t]={glyphs:{},requests:{},ranges:{}});let i=r.glyphs[e];if(void 0!==i)return void n(null,{stack:t,id:e,glyph:i});if(i=this._tinySDF(r,t,e),i)return r.glyphs[e]=i,void n(null,{stack:t,id:e,glyph:i});const a=Math.floor(e/256);if(256*a>65535)return void n(new Error("glyphs > 65535 not supported"));if(r.ranges[a])return void n(null,{stack:t,id:e,glyph:i});let o=r.requests[a];o||(o=r.requests[a]=[],f.loadGlyphRange(t,a,this.url,this.requestManager,((t,e)=>{if(e){for(const t in e)this._doesCharSupportLocalGlyph(+t)||(r.glyphs[+t]=e[+t]);r.ranges[a]=!0}for(const n of o)n(t,e);delete r.requests[a]}))),o.push(((r,i)=>{r?n(r):i&&n(null,{stack:t,id:e,glyph:i[e]||null})}))}),((t,e)=>{if(t)n(t);else if(e){const t={};for(const{stack:n,id:r,glyph:i}of e)(t[n]||(t[n]={}))[r]=i&&{id:i.id,bitmap:i.bitmap.clone(),metrics:i.metrics};n(null,t)}}))}_doesCharSupportLocalGlyph(e){return!!this.localIdeographFontFamily&&(t.unicodeBlockLookup["CJK Unified Ideographs"](e)||t.unicodeBlockLookup["Hangul Syllables"](e)||t.unicodeBlockLookup.Hiragana(e)||t.unicodeBlockLookup.Katakana(e))}_tinySDF(e,n,r){const i=this.localIdeographFontFamily;if(!i)return;if(!this._doesCharSupportLocalGlyph(r))return;let a=e.tinySDF;if(!a){let t="400";/bold/i.test(n)?t="900":/medium/i.test(n)?t="500":/light/i.test(n)&&(t="200"),a=e.tinySDF=new f.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:i,fontWeight:t})}const o=a.draw(String.fromCharCode(r));return{id:r,bitmap:new t.AlphaImage({width:o.width||30,height:o.height||30},o.data),metrics:{width:o.glyphWidth||24,height:o.glyphHeight||24,left:o.glyphLeft||0,top:o.glyphTop-27||-8,advance:o.glyphAdvance||24}}}}f.loadGlyphRange=function(e,n,r,i,a){const o=256*n,s=o+255,l=i.transformRequest(r.replace("{fontstack}",e).replace("{range}",`${o}-${s}`),t.ResourceType.Glyphs);t.getArrayBuffer(l,((e,n)=>{if(e)a(e);else if(n){const e={};for(const r of t.parseGlyphPbf(n))e[r.id]=r;a(null,e)}}))},f.TinySDF=class{constructor({fontSize:t=24,buffer:e=3,radius:n=8,cutoff:r=.25,fontFamily:i="sans-serif",fontWeight:a="normal",fontStyle:o="normal"}={}){this.buffer=e,this.cutoff=r,this.radius=n;const s=this.size=t+4*e,l=this._createCanvas(s),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font=`${o} ${a} ${t}px ${i}`,c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s)}_createCanvas(t){const e=document.createElement("canvas");return e.width=e.height=t,e}draw(t){const{width:e,actualBoundingBoxAscent:n,actualBoundingBoxDescent:r,actualBoundingBoxLeft:i,actualBoundingBoxRight:a}=this.ctx.measureText(t),o=Math.ceil(n),s=Math.min(this.size-this.buffer,Math.ceil(a-i)),l=Math.min(this.size-this.buffer,o+Math.ceil(r)),c=s+2*this.buffer,u=l+2*this.buffer,p=Math.max(c*u,0),f=new Uint8ClampedArray(p),m={data:f,width:c,height:u,glyphWidth:s,glyphHeight:l,glyphTop:o,glyphLeft:0,glyphAdvance:e};if(0===s||0===l)return m;const{ctx:g,buffer:y,gridInner:v,gridOuter:_}=this;g.clearRect(y,y,s,l),g.fillText(t,y,y+o);const x=g.getImageData(y,y,s,l);_.fill(h,0,p),v.fill(0,0,p);for(let d=0;d<l;d++)for(let t=0;t<s;t++){const e=x.data[4*(d*s+t)+3]/255;if(0===e)continue;const n=(d+y)*c+t+y;if(1===e)_[n]=0,v[n]=h;else{const t=.5-e;_[n]=t>0?t*t:0,v[n]=t<0?t*t:0}}d(_,0,0,c,u,c,this.f,this.v,this.z),d(v,y,y,s,l,c,this.f,this.v,this.z);for(let h=0;h<p;h++){const t=Math.sqrt(_[h])-Math.sqrt(v[h]);f[h]=Math.round(255-255*(t/this.radius+this.cutoff))}return m}};const m=new t.Properties({anchor:new t.DataConstantProperty(t.spec.light.anchor),position:new class{constructor(){this.specification=t.spec.light.position}possiblyEvaluate(e,n){return t.sphericalToCartesian(e.expression.evaluate(n))}interpolate(e,n,r){return{x:t.number(e.x,n.x,r),y:t.number(e.y,n.y,r),z:t.number(e.z,n.z,r)}}},color:new t.DataConstantProperty(t.spec.light.color),intensity:new t.DataConstantProperty(t.spec.light.intensity)}),g="-transition";class y extends t.Evented{constructor(e){super(),this._transitionable=new t.Transitionable(m),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,n={}){if(!this._validate(t.validateLight,e,n))for(const t in e){const n=e[t];t.endsWith(g)?this._transitionable.setTransition(t.slice(0,-g.length),n):this._transitionable.setValue(t,n)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(e,n,r){return(!r||!1!==r.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.spec})))}}class v{constructor(t,e){this.width=t,this.height=e,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(t,e){const n=t.join(",")+String(e);return this.dashEntry[n]||(this.dashEntry[n]=this.addDash(t,e)),this.dashEntry[n]}getDashRanges(t,e,n){const r=[];let i=t.length%2==1?-t[t.length-1]*n:0,a=t[0]*n,o=!0;r.push({left:i,right:a,isDash:o,zeroLength:0===t[0]});let s=t[0];for(let l=1;l<t.length;l++){o=!o;const e=t[l];i=s*n,s+=e,a=s*n,r.push({left:i,right:a,isDash:o,zeroLength:0===e})}return r}addRoundDash(t,e,n){const r=e/2;for(let i=-n;i<=n;i++){const e=this.width*(this.nextRow+n+i);let a=0,o=t[a];for(let s=0;s<this.width;s++){s/o.right>1&&(o=t[++a]);const l=Math.abs(s-o.left),c=Math.abs(s-o.right),u=Math.min(l,c);let h;const d=i/n*(r+1);if(o.isDash){const t=r-Math.abs(d);h=Math.sqrt(u*u+t*t)}else h=r-Math.sqrt(u*u+d*d);this.data[e+s]=Math.max(0,Math.min(255,h+128))}}}addRegularDash(t){for(let o=t.length-1;o>=0;--o){const e=t[o],n=t[o+1];e.zeroLength?t.splice(o,1):n&&n.isDash===e.isDash&&(n.left=e.left,t.splice(o,1))}const e=t[0],n=t[t.length-1];e.isDash===n.isDash&&(e.left=n.left-this.width,n.right=e.right+this.width);const r=this.width*this.nextRow;let i=0,a=t[i];for(let o=0;o<this.width;o++){o/a.right>1&&(a=t[++i]);const e=Math.abs(o-a.left),n=Math.abs(o-a.right),s=Math.min(e,n);this.data[r+o]=Math.max(0,Math.min(255,(a.isDash?s:-s)+128))}}addDash(e,n){const r=n?7:0,i=2*r+1;if(this.nextRow+i>this.height)return t.warnOnce("LineAtlas out of space"),null;let a=0;for(let t=0;t<e.length;t++)a+=e[t];if(0!==a){const t=this.width/a,i=this.getDashRanges(e,this.width,t);n?this.addRoundDash(i,t,r):this.addRegularDash(i)}const o={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:a};return this.nextRow+=i,this.dirty=!0,o}bind(t){const e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))}}class _{constructor(e,n){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=t.uniqueId();const r=this.workerPool.acquire(this.id);for(let t=0;t<r.length;t++){const e=new _.Actor(r[t],n,this.id);e.name=`Worker ${t}`,this.actors.push(e)}if(!this.actors.length)throw new Error("No actors found")}broadcast(e,n,r){t.asyncAll(this.actors,((t,r)=>{t.send(e,n,r)}),r=r||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((t=>{t.remove()})),this.actors=[],this.workerPool.release(this.id)}}function x(e,n,r){const i=function(n,i){if(n)return r(n);if(i){const n=t.pick(t.extend(i,e),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);i.vector_layers&&(n.vectorLayers=i.vector_layers,n.vectorLayerIds=n.vectorLayers.map((t=>t.id))),r(null,n)}};return e.url?t.getJSON(n.transformRequest(e.url,t.ResourceType.Source),i):t.exported.frame((()=>i(null,e)))}_.Actor=t.Actor;class b{constructor(e,n,r){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=n||0,this.maxzoom=r||24}validateBounds(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(e){const n=Math.pow(2,e.z),r=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*n),a=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*n),o=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*n);return e.x>=r&&e.x<a&&e.y>=i&&e.y<o}}class w extends t.Evented{constructor(e,n,r,i){if(super(),this.id=e,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(n,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i)}load(){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=x(this._options,this.map._requestManager,((e,n)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),e?this.fire(new t.ErrorEvent(e)):n&&(t.extend(this,n),n.bounds&&(this.tileBounds=new b(n.bounds,this.minzoom,this.maxzoom)),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t(),this.load()}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return t.extend({},this._options)}loadTile(e,n){const r=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),i={request:this.map._requestManager.transformRequest(r,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function a(r,i){return delete e.request,e.aborted?n(null):r&&404!==r.status?n(r):(i&&i.resourceTiming&&(e.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&e.setExpiryData(i),e.loadVectorData(i,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}i.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state?"loading"===e.state?e.reloadCallback=n:e.request=e.actor.send("reloadTile",i,a.bind(this)):(e.actor=this.dispatcher.getActor(),e.request=e.actor.send("loadTile",i,a.bind(this)))}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)}unloadTile(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class S extends t.Evented{constructor(e,n,r,i){super(),this.id=e,this.dispatcher=r,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},n),t.extend(this,t.pick(n,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=x(this._options,this.map._requestManager,((e,n)=>{this._tileJSONRequest=null,this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):n&&(t.extend(this,n),n.bounds&&(this.tileBounds=new b(n.bounds,this.minzoom,this.maxzoom)),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return t.extend({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(e,n){const r=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.request=t.getImage(this.map._requestManager.transformRequest(r,t.ResourceType.Tile),((r,i,a)=>{if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(r)e.state="errored",n(r);else if(i){this.map._refreshExpiredTiles&&e.setExpiryData(a);const r=this.map.painter.context,o=r.gl;e.texture=this.map.painter.getTileTexture(i.width),e.texture?e.texture.update(i,{useMipmap:!0}):(e.texture=new l(r,i,o.RGBA,{useMipmap:!0}),e.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),r.extTextureFilterAnisotropic&&o.texParameterf(o.TEXTURE_2D,r.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,r.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(this.dispatcher),n(null)}}))}abortTile(t,e){t.request&&(t.request.cancel(),delete t.request),e()}unloadTile(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()}hasTransition(){return!1}}let M;class E extends S{constructor(e,n,r,i){super(e,n,r,i),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(e,n){const r=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function i(t,r){t&&(e.state="errored",n(t)),r&&(e.dem=r,e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0,e.state="loaded",n(null))}e.request=t.getImage(this.map._requestManager.transformRequest(r,t.ResourceType.Tile),function(r,a){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(r)e.state="errored",n(r);else if(a){this.map._refreshExpiredTiles&&e.setExpiryData(a),delete a.cacheControl,delete a.expires;const n=t.isImageBitmap(a)&&(null==M&&(M="undefined"!=typeof OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),M)?a:t.exported.getImageData(a,1),r={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:n,encoding:this.encoding};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",r,i.bind(this)))}}.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)}_getNeighboringTiles(e){const n=e.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,a=0===n.x?e.wrap-1:e.wrap,o=(n.x+1+r)%r,s=n.x+1===r?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,a,n.z,i,n.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,o,n.y).key]={backfilled:!1},n.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,a,n.z,i,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,o,n.y-1).key]={backfilled:!1}),n.y+1<r&&(l[new t.OverscaledTileID(e.overscaledZ,a,n.z,i,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,n.z,o,n.y+1).key]={backfilled:!1}),l}unloadTile(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})}}class k extends t.Evented{constructor(e,n,r,i){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=r.getActor(),this.setEventedParent(i),this._data=n.data,this._options=t.extend({},n),this._collectResourceTiming=n.collectResourceTiming,void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId;const a=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*a,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*a,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?n.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,n.clusterMinPoints||2),extent:t.EXTENT,radius:(n.clusterRadius||50)*a,log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(t){this.map=t,this.load()}setData(t){return this._data=t,this._updateWorkerData("content"),this}getClusterExpansionZoom(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this}getClusterChildren(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this}getClusterLeaves(t,e,n,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:n},r),this}_updateWorkerData(e){const n=t.extend({},this.workerOptions),r=this._data;"string"==typeof r?(n.request=this.map._requestManager.transformRequest(t.exported.resolveURL(r),t.ResourceType.Source),n.request.collectResourceTiming=this._collectResourceTiming):n.data=JSON.stringify(r),this._pendingLoads++,this.fire(new t.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,n,((n,r)=>{if(this._pendingLoads--,this._removed||r&&r.abandoned)return void this.fire(new t.Event("dataabort",{dataType:"source",sourceDataType:e}));let i=null;if(r&&r.resourceTiming&&r.resourceTiming[this.id]&&(i=r.resourceTiming[this.id].slice(0)),n)return void this.fire(new t.ErrorEvent(n));const a={dataType:"source",sourceDataType:e};this._collectResourceTiming&&i&&i.length>0&&t.extend(a,{resourceTiming:i}),this.fire(new t.Event("data",a))}))}loaded(){return 0===this._pendingLoads}loadTile(t,e){const n=t.actor?"reloadTile":"loadTile";t.actor=this.actor;const r={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};t.request=this.actor.send(n,r,((r,i)=>(delete t.request,t.unloadVectorData(),t.aborted?e(null):r?e(r):(t.loadVectorData(i,this.map.painter,"reloadTile"===n),e(null)))))}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0}unloadTile(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return t.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var T=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class C extends t.Evented{constructor(t,e,n,r){super(),this.id=t,this.dispatcher=n,this.coordinates=e.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(r),this.options=e}load(e,n){this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),((r,i)=>{this._loaded=!0,r?this.fire(new t.ErrorEvent(r)):i&&(this.image=i,e&&(this.coordinates=e),n&&n(),this._finishLoading())}))}loaded(){return this._loaded}updateImage(t){return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,(()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}setCoordinates(e){this.coordinates=e;const n=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){let n=1/0,r=1/0,i=-1/0,a=-1/0;for(const t of e)n=Math.min(n,t.x),r=Math.min(r,t.y),i=Math.max(i,t.x),a=Math.max(a,t.y);const o=Math.max(i-n,a-r),s=Math.max(0,Math.floor(-Math.log(o)/Math.LN2)),l=Math.pow(2,s);return new t.CanonicalTileID(s,Math.floor((n+i)/2*l),Math.floor((r+a)/2*l))}(n),this.minzoom=this.maxzoom=this.tileID.z;const r=n.map((t=>this.tileID.getTilePoint(t)._round()));return this._boundsArray=new t.RasterBoundsArray,this._boundsArray.emplaceBack(r[0].x,r[0].y,0,0),this._boundsArray.emplaceBack(r[1].x,r[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(r[3].x,r[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(r[2].x,r[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const e=this.map.painter.context,n=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,T.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new l(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}loadTile(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class I extends C{constructor(t,e,n,r){super(t,e,n,r),this.roundZoom=!0,this.type="video",this.options=e}load(){this._loaded=!1;const e=this.options;this.urls=[];for(const n of e.urls)this.urls.push(this.map._requestManager.transformRequest(n,t.ResourceType.Source).url);t.getVideo(this.urls,((e,n)=>{this._loaded=!0,e?this.fire(new t.ErrorEvent(e)):n&&(this.video=n,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const n=this.video.seekable;e<n.start(0)||e>n.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${n.start(0)} and ${n.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const e=this.map.painter.context,n=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,T.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new l(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class P extends C{constructor(e,n,r,i){super(e,n,r,i),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some((t=>!Array.isArray(t)||2!==t.length||t.some((t=>"number"!=typeof t))))||this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError(`sources.${e}`,null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const n=this.map.painter.context,r=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,T.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new l(n,this.canvas,r.RGBA,{premultiply:!0});for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}const A={vector:w,raster:S,"raster-dem":E,geojson:k,video:I,image:C,canvas:P};function z(e,n){const r=t.create();return t.translate(r,r,[1,1,0]),t.scale(r,r,[.5*e.width,.5*e.height,1]),t.multiply(r,r,e.calculatePosMatrix(n.toUnwrapped()))}function L(t,e,n,r,i,a){const o=function(t,e,n){if(t)for(const r of t){const t=e[r];if(t&&t.source===n&&"fill-extrusion"===t.type)return!0}else for(const r in e){const t=e[r];if(t.source===n&&"fill-extrusion"===t.type)return!0}return!1}(i&&i.layers,e,t.id),s=a.maxPitchScaleFactor(),l=t.tilesIn(r,s,o);l.sort(R);const c=[];for(const h of l)c.push({wrappedTileID:h.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(e,n,t._state,h.queryGeometry,h.cameraQueryGeometry,h.scale,i,a,s,z(t.transform,h.tileID))});const u=function(t){const e={},n={};for(const r of t){const t=r.queryResults,i=r.wrappedTileID,a=n[i]=n[i]||{};for(const n in t){const r=t[n],i=a[n]=a[n]||{},o=e[n]=e[n]||[];for(const t of r)i[t.featureIndex]||(i[t.featureIndex]=!0,o.push(t))}}return e}(c);for(const h in u)u[h].forEach((e=>{const n=e.feature,r=t.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=r}));return u}function R(t,e){const n=t.tileID,r=e.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}class D{constructor(e,n){this.tileID=e,this.uid=t.uniqueId(),this.uses=0,this.tileSize=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const n=e+this.timeAdded;n<t.exported.now()||this.fadeEndTime&&n<this.fadeEndTime||(this.fadeEndTime=n)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(t){this.demTexture&&t.saveTileTexture(this.demTexture),this.textures.forEach((e=>t.saveTileTexture(e))),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(e,n,r){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(t,e){const n={};if(!e)return n;for(const r of t){const t=r.layerIds.map((t=>e.getLayer(t))).filter(Boolean);if(0!==t.length){r.layers=t,r.stateDependentLayerIds&&(r.stateDependentLayers=r.stateDependentLayerIds.map((e=>t.filter((t=>t.id===e))[0])));for(const e of t)n[e.id]=r}}return n}(e.buckets,n.style),this.hasSymbolBuckets=!1;for(const e in this.buckets){const n=this.buckets[e];if(n instanceof t.SymbolBucket){if(this.hasSymbolBuckets=!0,!r)break;n.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const e in this.buckets){const n=this.buckets[e];if(n instanceof t.SymbolBucket&&n.hasRTLText){this.hasRTLText=!0,t.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const t in this.buckets){const e=this.buckets[t];this.queryPadding=Math.max(this.queryPadding,n.style.getLayer(t).queryRadius(e))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new t.CollisionBoxArray}unloadVectorData(){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(const n in this.buckets){const e=this.buckets[n];e.uploadPending()&&e.upload(t)}const e=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new l(t,this.imageAtlas.image,e.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new l(t,this.glyphAtlasImage,e.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,e,n,r,i,a,o,s,l,c){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:i,scale:a,tileSize:this.tileSize,pixelPosMatrix:c,transform:s,params:o,queryPadding:this.queryPadding*l},t,e,n):{}}querySourceFeatures(e,n){const r=this.latestFeatureIndex;if(!r||!r.rawTileData)return;const i=r.loadVTLayers(),a=n?n.sourceLayer:"",o=i._geojsonTileLayer||i[a];if(!o)return;const s=t.createFilter(n&&n.filter),{z:l,x:c,y:u}=this.tileID.canonical,h={z:l,x:c,y:u};for(let d=0;d<o.length;d++){const n=o.feature(d);if(s.needGeometry){const e=t.toEvaluationFeature(n,!0);if(!s.filter(new t.EvaluationParameters(this.tileID.overscaledZ),e,this.tileID.canonical))continue}else if(!s.filter(new t.EvaluationParameters(this.tileID.overscaledZ),n))continue;const i=r.getId(n,a),p=new t.GeoJSONFeature(n,l,c,u,i);p.tile=h,e.push(p)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const n=this.expirationTime;if(e.cacheControl){const n=t.parseCacheControl(e.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const t=Date.now();let e=!1;if(this.expirationTime>t)e=!1;else if(n)if(this.expirationTime<n)e=!0;else{const r=this.expirationTime-n;r?this.expirationTime=t+Math.max(r,3e4):e=!0}else e=!0;e?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(t,e){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(t).length)return;const n=this.latestFeatureIndex.loadVTLayers();for(const r in this.buckets){if(!e.style.hasLayer(r))continue;const i=this.buckets[r],a=i.layers[0].sourceLayer||"_geojsonTileLayer",o=n[a],s=t[a];if(!o||!s||0===Object.keys(s).length)continue;i.update(s,o,this.imageAtlas&&this.imageAtlas.patternPositions||{});const l=e&&e.style&&e.style.getLayer(r);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(i)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<t.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=t.exported.now()+e}setDependencies(t,e){const n={};for(const r of e)n[r]=!0;this.dependencies[t]=n}hasDependency(t,e){for(const n of t){const t=this.dependencies[n];if(t)for(const n of e)if(t[n])return!0}return!1}}class O{constructor(t,e){this.max=t,this.onRemove=e,this.reset()}reset(){for(const t in this.data)for(const e of this.data[t])e.timeout&&clearTimeout(e.timeout),this.onRemove(e.value);return this.data={},this.order=[],this}add(t,e,n){const r=t.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);const i={value:e,timeout:void 0};if(void 0!==n&&(i.timeout=setTimeout((()=>{this.remove(t,i)}),n)),this.data[r].push(i),this.order.push(r),this.order.length>this.max){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value}getByKey(t){const e=this.data[t];return e?e[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,e){if(!this.has(t))return this;const n=t.wrapped().key,r=void 0===e?0:this.data[n].indexOf(e),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}filter(t){const e=[];for(const n in this.data)for(const r of this.data[n])t(r.value)||e.push(r);for(const n of e)this.remove(n.value.tileID,n)}}class B{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,n,r){const i=String(n);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][i]=this.stateChanges[e][i]||{},t.extend(this.stateChanges[e][i],r),null===this.deletedStates[e]){this.deletedStates[e]={};for(const t in this.state[e])t!==i&&(this.deletedStates[e][t]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][i]){this.deletedStates[e][i]={};for(const t in this.state[e][i])r[t]||(this.deletedStates[e][i][t]=null)}else for(const t in r)this.deletedStates[e]&&this.deletedStates[e][i]&&null===this.deletedStates[e][i][t]&&delete this.deletedStates[e][i][t]}removeFeatureState(t,e,n){if(null===this.deletedStates[t])return;const r=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},n&&void 0!==e)null!==this.deletedStates[t][r]&&(this.deletedStates[t][r]=this.deletedStates[t][r]||{},this.deletedStates[t][r][n]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][r])for(n in this.deletedStates[t][r]={},this.stateChanges[t][r])this.deletedStates[t][r][n]=null;else this.deletedStates[t][r]=null;else this.deletedStates[t]=null}getState(e,n){const r=String(n),i=t.extend({},(this.state[e]||{})[r],(this.stateChanges[e]||{})[r]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const t=this.deletedStates[e][n];if(null===t)return{};for(const e in t)delete i[e]}return i}initializeTileState(t,e){t.setFeatureState(this.state,e)}coalesceChanges(e,n){const r={};for(const i in this.stateChanges){this.state[i]=this.state[i]||{};const e={};for(const n in this.stateChanges[i])this.state[i][n]||(this.state[i][n]={}),t.extend(this.state[i][n],this.stateChanges[i][n]),e[n]=this.state[i][n];r[i]=e}for(const i in this.deletedStates){this.state[i]=this.state[i]||{};const e={};if(null===this.deletedStates[i])for(const t in this.state[i])e[t]={},this.state[i][t]={};else for(const t in this.deletedStates[i]){if(null===this.deletedStates[i][t])this.state[i][t]={};else for(const e of Object.keys(this.deletedStates[i][t]))delete this.state[i][t][e];e[t]=this.state[i][t]}r[i]=r[i]||{},t.extend(r[i],e)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(const t in e)e[t].setFeatureState(r,n)}}class F extends t.Evented{constructor(e,n,r){super(),this.id=e,this.dispatcher=r,this.on("data",(t=>{"source"===t.dataType&&"metadata"===t.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))})),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=function(e,n,r,i){const a=new A[n.type](e,n,r,i);if(a.id!==e)throw new Error(`Expected Source id to be ${e} instead of ${a.id}`);return t.bindAll(["load","abort","unload","serialize","prepare"],a),a}(e,n,r,this),this._tiles={},this._cache=new O(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new B}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}onRemove(t){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const t in this._tiles){const e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(t,e){return this._source.loadTile(t,e)}_unloadTile(t){if(this._source.unloadTile)return this._source.unloadTile(t,(()=>{}))}_abortTile(e){this._source.abortTile&&this._source.abortTile(e,(()=>{})),this._source.fire(new t.Event("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const e in this._tiles){const n=this._tiles[e];n.upload(t),n.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((t=>t.tileID)).sort(N).map((t=>t.key))}getRenderableIds(e){const n=[];for(const t in this._tiles)this._isIdRenderable(t,e)&&n.push(this._tiles[t]);return e?n.sort(((e,n)=>{const r=e.tileID,i=n.tileID,a=new t.pointGeometry(r.canonical.x,r.canonical.y)._rotate(this.transform.angle),o=new t.pointGeometry(i.canonical.x,i.canonical.y)._rotate(this.transform.angle);return r.overscaledZ-i.overscaledZ||o.y-a.y||o.x-a.x})).map((t=>t.tileID.key)):n.map((t=>t.tileID)).sort(N).map((t=>t.key))}hasRenderableParent(t){const e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)}_isIdRenderable(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")}}_reloadTile(t,e){const n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))}_tileLoaded(e,n,r,i){if(i)return e.state="errored",void(404!==i.status?this._source.fire(new t.ErrorEvent(i,{tile:e})):this.update(this.transform,this.terrain));e.timeAdded=t.exported.now(),"expired"===r&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))}_backfillDEM(t){const e=this.getRenderableIds();for(let r=0;r<e.length;r++){const i=e[r];if(t.neighboringTiles&&t.neighboringTiles[i]){const e=this.getTileByID(i);n(t,e),n(e,t)}}function n(t,e){t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0;let n=e.tileID.canonical.x-t.tileID.canonical.x;const r=e.tileID.canonical.y-t.tileID.canonical.y,i=Math.pow(2,t.tileID.canonical.z),a=e.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,r),t.neighboringTiles&&t.neighboringTiles[a]&&(t.neighboringTiles[a].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,e,n,r){for(const i in this._tiles){let a=this._tiles[i];if(r[i]||!a.hasData()||a.tileID.overscaledZ<=e||a.tileID.overscaledZ>n)continue;let o=a.tileID;for(;a&&a.tileID.overscaledZ>e+1;){const t=a.tileID.scaledTo(a.tileID.overscaledZ-1);a=this._tiles[t.key],a&&a.hasData()&&(o=t)}let s=o;for(;s.overscaledZ>e;)if(s=s.scaledTo(s.overscaledZ-1),t[s.key]){r[o.key]=o;break}}}findLoadedParent(t,e){if(t.key in this._loadedParentTiles){const n=this._loadedParentTiles[t.key];return n&&n.tileID.overscaledZ>=e?n:null}for(let n=t.overscaledZ-1;n>=e;n--){const e=t.scaledTo(n),r=this._getLoadedTile(e);if(r)return r}}_getLoadedTile(t){const e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(t.wrapped().key)}updateCacheSize(t){const e=Math.ceil(t.width/this._source.tileSize)+1,n=Math.ceil(t.height/this._source.tileSize)+1,r=Math.floor(e*n*5),i="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(i)}handleWrapJump(t){const e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){const t={};for(const n in this._tiles){const r=this._tiles[n];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+e),t[r.tileID.key]=r}this._tiles=t;for(const e in this._timers)clearTimeout(this._timers[e]),delete this._timers[e];for(const e in this._tiles)this._setTileReloadTimer(e,this._tiles[e])}}update(e,n){if(this.transform=e,this.terrain=n,!this._sourceLoaded||this._paused)return;let r;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?r=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((e=>new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y))):(r=e.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:n}),this._source.hasTile&&(r=r.filter((t=>this._source.hasTile(t))))):r=[];const i=e.coveringZoomLevel(this._source),a=Math.max(i-F.maxOverzooming,this._source.minzoom),o=Math.max(i+F.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const t={};for(const e of r)if(e.canonical.z>this._source.minzoom){const n=e.scaledTo(e.canonical.z-1);t[n.key]=n;const r=e.scaledTo(Math.max(this._source.minzoom,Math.min(e.canonical.z,5)));t[r.key]=r}r=r.concat(Object.values(t))}const s=this._updateRetainedTiles(r,i);if(Z(this._source.type)){const e={},l={},c=Object.keys(s);for(const n of c){const r=s[n],i=this._tiles[n];if(!i||i.fadeEndTime&&i.fadeEndTime<=t.exported.now())continue;const o=this.findLoadedParent(r,a);o&&(this._addTile(o.tileID),e[o.tileID.key]=o.tileID),l[n]=r}this._retainLoadedChildren(l,i,o,s);for(const t in e)s[t]||(this._coveredTiles[t]=!0,s[t]=e[t]);if(n){const t={},e={};for(const n of r)this._tiles[n.key].hasData()?t[n.key]=n:e[n.key]=n;for(const n in e){const r=e[n].children(this._source.maxzoom);this._tiles[r[0].key]&&this._tiles[r[1].key]&&this._tiles[r[2].key]&&this._tiles[r[3].key]&&(t[r[0].key]=s[r[0].key]=r[0],t[r[1].key]=s[r[1].key]=r[1],t[r[2].key]=s[r[2].key]=r[2],t[r[3].key]=s[r[3].key]=r[3],delete e[n])}for(const n in e){const r=this.findLoadedParent(e[n],this._source.minzoom);if(r){t[r.tileID.key]=s[r.tileID.key]=r.tileID;for(const e in t)t[e].isChildOf(r.tileID)&&delete t[e]}}for(const n in this._tiles)t[n]||(this._coveredTiles[n]=!0)}}for(const t in s)this._tiles[t].clearFadeHold();const l=t.keysDifference(this._tiles,s);for(const t of l){const e=this._tiles[t];e.hasSymbolBuckets&&!e.holdingForFade()?e.setHoldDuration(this.map._fadeDuration):e.hasSymbolBuckets&&!e.symbolFadeFinished()||this._removeTile(t)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)}_updateRetainedTiles(t,e){const n={},r={},i=Math.max(e-F.maxOverzooming,this._source.minzoom),a=Math.max(e+F.maxUnderzooming,this._source.minzoom),o={};for(const s of t){const t=this._addTile(s);n[s.key]=s,t.hasData()||e<this._source.maxzoom&&(o[s.key]=s)}this._retainLoadedChildren(o,e,a,n);for(const s of t){let t=this._tiles[s.key];if(t.hasData())continue;if(e+1>this._source.maxzoom){const t=s.children(this._source.maxzoom)[0],e=this.getTile(t);if(e&&e.hasData()){n[t.key]=t;continue}}else{const t=s.children(this._source.maxzoom);if(n[t[0].key]&&n[t[1].key]&&n[t[2].key]&&n[t[3].key])continue}let a=t.wasRequested();for(let e=s.overscaledZ-1;e>=i;--e){const i=s.scaledTo(e);if(r[i.key])break;if(r[i.key]=!0,t=this.getTile(i),!t&&a&&(t=this._addTile(i)),t&&(n[i.key]=i,a=t.wasRequested(),t.hasData()))break}}return n}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const e=[];let n,r=this._tiles[t].tileID;for(;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}e.push(r.key);const t=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(t),n)break;r=t}for(const t of e)this._loadedParentTiles[t]=n}}_addTile(e){let n=this._tiles[e.key];if(n)return n;n=this._cache.getAndRemove(e),n&&(this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,n)));const r=n;return n||(n=new D(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(n,this._tileLoaded.bind(this,n,e.key,n.state))),n.uses++,this._tiles[e.key]=n,r||this._source.fire(new t.Event("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n}_setTileReloadTimer(t,e){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const n=e.getExpiryTimeout();n&&(this._timers[t]=setTimeout((()=>{this._reloadTile(t,"expired"),delete this._timers[t]}),n))}_removeTile(t){const e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(t);this._cache.reset()}tilesIn(e,n,r){const i=[],a=this.transform;if(!a)return i;const o=r?a.getCameraQueryGeometry(e):e,s=e.map((t=>a.pointCoordinate(t,this.terrain))),l=o.map((t=>a.pointCoordinate(t,this.terrain))),c=this.getIds();let u=1/0,h=1/0,d=-1/0,p=-1/0;for(const t of l)u=Math.min(u,t.x),h=Math.min(h,t.y),d=Math.max(d,t.x),p=Math.max(p,t.y);for(let f=0;f<c.length;f++){const e=this._tiles[c[f]];if(e.holdingForFade())continue;const r=e.tileID,o=Math.pow(2,a.zoom-e.tileID.overscaledZ),m=n*e.queryPadding*t.EXTENT/e.tileSize/o,g=[r.getTilePoint(new t.MercatorCoordinate(u,h)),r.getTilePoint(new t.MercatorCoordinate(d,p))];if(g[0].x-m<t.EXTENT&&g[0].y-m<t.EXTENT&&g[1].x+m>=0&&g[1].y+m>=0){const t=s.map((t=>r.getTilePoint(t))),n=l.map((t=>r.getTilePoint(t)));i.push({tile:e,tileID:r,queryGeometry:t,cameraQueryGeometry:n,scale:o})}}return i}getVisibleCoordinates(t){const e=this.getRenderableIds(t).map((t=>this._tiles[t].tileID));for(const n of e)n.posMatrix=this.transform.calculatePosMatrix(n.toUnwrapped());return e}hasTransition(){if(this._source.hasTransition())return!0;if(Z(this._source.type))for(const e in this._tiles){const n=this._tiles[e];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=t.exported.now())return!0}return!1}setFeatureState(t,e,n){this._state.updateState(t=t||"_geojsonTileLayer",e,n)}removeFeatureState(t,e,n){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,n)}getFeatureState(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)}setDependencies(t,e,n){const r=this._tiles[t];r&&r.setDependencies(e,n)}reloadTilesForDependencies(t,e){for(const n in this._tiles)this._tiles[n].hasDependency(t,e)&&this._reloadTile(n,"reloading");this._cache.filter((n=>!n.hasDependency(t,e)))}}function N(t,e){const n=Math.abs(2*t.wrap)-+(t.wrap<0),r=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||r-n||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function Z(t){return"raster"===t||"image"===t||"video"===t}F.maxOverzooming=10,F.maxUnderzooming=3;const U="mapboxgl_preloaded_worker_pool";class j{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<j.workerCount;)this.workers.push(new Worker(bi.workerUrl));return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach((t=>{t.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[U]}numActive(){return Object.keys(this.active).length}}const V=Math.floor(t.exported.hardwareConcurrency/2);let q;function $(){return q||(q=new j),q}function G(e,n){const r={};for(const t in e)"ref"!==t&&(r[t]=e[t]);return t.refProperties.forEach((t=>{t in n&&(r[t]=n[t])})),r}function W(t){t=t.slice();const e=Object.create(null);for(let n=0;n<t.length;n++)e[t[n].id]=t[n];for(let n=0;n<t.length;n++)"ref"in t[n]&&(t[n]=G(t[n],e[t[n].ref]));return t}j.workerCount=Math.max(Math.min(V,6),1);const H={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function X(t,e,n){n.push({command:H.addSource,args:[t,e[t]]})}function K(t,e,n){e.push({command:H.removeSource,args:[t]}),n[t]=!0}function Y(t,e,n,r){K(t,n,r),X(t,e,n)}function J(t,e,n){let r;for(r in t[n])if(Object.prototype.hasOwnProperty.call(t[n],r)&&"data"!==r&&!i(t[n][r],e[n][r]))return!1;for(r in e[n])if(Object.prototype.hasOwnProperty.call(e[n],r)&&"data"!==r&&!i(t[n][r],e[n][r]))return!1;return!0}function Q(t,e,n,r,a,o){let s;for(s in e=e||{},t=t||{})Object.prototype.hasOwnProperty.call(t,s)&&(i(t[s],e[s])||n.push({command:o,args:[r,s,e[s],a]}));for(s in e)Object.prototype.hasOwnProperty.call(e,s)&&!Object.prototype.hasOwnProperty.call(t,s)&&(i(t[s],e[s])||n.push({command:o,args:[r,s,e[s],a]}))}function tt(t){return t.id}function et(t,e){return t[e.id]=e,t}class nt{constructor(t,e){this.reset(t,e)}reset(t,e){this.points=t||[],this._distances=[0];for(let n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(1===this.points.length)return this.points[0];e=t.clamp(e,0,1);let n=1,r=this._distances[n];const i=e*this.paddedLength+this.padding;for(;r<i&&n<this._distances.length;)r=this._distances[++n];const a=n-1,o=this._distances[a],s=r-o,l=s>0?(i-o)/s:0;return this.points[a].mult(1-l).add(this.points[n].mult(l))}}function rt(t,e){let n=!0;return"always"===t||"never"!==t&&"never"!==e||(n=!1),n}class it{constructor(t,e,n){const r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(let a=0;a<this.xCellCount*this.yCellCount;a++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}insertCircle(t,e,n,r){this._forEachCell(e-r,n-r,e+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(r)}_insertBoxCell(t,e,n,r,i,a){this.boxCells[i].push(a)}_insertCircleCell(t,e,n,r,i,a){this.circleCells[i].push(a)}_query(t,e,n,r,i,a,o){if(n<0||t>this.width||r<0||e>this.height)return[];const s=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=r){if(i)return[{key:null,x1:t,y1:e,x2:n,y2:r}];for(let t=0;t<this.boxKeys.length;t++)s.push({key:this.boxKeys[t],x1:this.bboxes[4*t],y1:this.bboxes[4*t+1],x2:this.bboxes[4*t+2],y2:this.bboxes[4*t+3]});for(let t=0;t<this.circleKeys.length;t++){const e=this.circles[3*t],n=this.circles[3*t+1],r=this.circles[3*t+2];s.push({key:this.circleKeys[t],x1:e-r,y1:n-r,x2:e+r,y2:n+r})}}else this._forEachCell(t,e,n,r,this._queryCell,s,{hitTest:i,overlapMode:a,seenUids:{box:{},circle:{}}},o);return s}query(t,e,n,r){return this._query(t,e,n,r,!1,null)}hitTest(t,e,n,r,i,a){return this._query(t,e,n,r,!0,i,a).length>0}hitTestCircle(t,e,n,r,i){const a=t-n,o=t+n,s=e-n,l=e+n;if(o<0||a>this.width||l<0||s>this.height)return!1;const c=[];return this._forEachCell(a,s,o,l,this._queryCellCircle,c,{hitTest:!0,overlapMode:r,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}},i),c.length>0}_queryCell(t,e,n,r,i,a,o,s){const{seenUids:l,hitTest:c,overlapMode:u}=o,h=this.boxCells[i];if(null!==h){const i=this.bboxes;for(const o of h)if(!l.box[o]){l.box[o]=!0;const h=4*o,d=this.boxKeys[o];if(t<=i[h+2]&&e<=i[h+3]&&n>=i[h+0]&&r>=i[h+1]&&(!s||s(d))&&(!c||!rt(u,d.overlapMode))&&(a.push({key:d,x1:i[h],y1:i[h+1],x2:i[h+2],y2:i[h+3]}),c))return!0}}const d=this.circleCells[i];if(null!==d){const i=this.circles;for(const o of d)if(!l.circle[o]){l.circle[o]=!0;const h=3*o,d=this.circleKeys[o];if(this._circleAndRectCollide(i[h],i[h+1],i[h+2],t,e,n,r)&&(!s||s(d))&&(!c||!rt(u,d.overlapMode))){const t=i[h],e=i[h+1],n=i[h+2];if(a.push({key:d,x1:t-n,y1:e-n,x2:t+n,y2:e+n}),c)return!0}}}return!1}_queryCellCircle(t,e,n,r,i,a,o,s){const{circle:l,seenUids:c,overlapMode:u}=o,h=this.boxCells[i];if(null!==h){const t=this.bboxes;for(const e of h)if(!c.box[e]){c.box[e]=!0;const n=4*e,r=this.boxKeys[e];if(this._circleAndRectCollide(l.x,l.y,l.radius,t[n+0],t[n+1],t[n+2],t[n+3])&&(!s||s(r))&&!rt(u,r.overlapMode))return a.push(!0),!0}}const d=this.circleCells[i];if(null!==d){const t=this.circles;for(const e of d)if(!c.circle[e]){c.circle[e]=!0;const n=3*e,r=this.circleKeys[e];if(this._circlesCollide(t[n],t[n+1],t[n+2],l.x,l.y,l.radius)&&(!s||s(r))&&!rt(u,r.overlapMode))return a.push(!0),!0}}}_forEachCell(t,e,n,r,i,a,o,s){const l=this._convertToXCellCoord(t),c=this._convertToYCellCoord(e),u=this._convertToXCellCoord(n),h=this._convertToYCellCoord(r);for(let d=l;d<=u;d++)for(let l=c;l<=h;l++)if(i.call(this,t,e,n,r,this.xCellCount*l+d,a,o,s))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,e,n,r,i,a){const o=r-t,s=i-e,l=n+a;return l*l>o*o+s*s}_circleAndRectCollide(t,e,n,r,i,a,o){const s=(a-r)/2,l=Math.abs(t-(r+s));if(l>s+n)return!1;const c=(o-i)/2,u=Math.abs(e-(i+c));if(u>c+n)return!1;if(l<=s||u<=c)return!0;const h=l-s,d=u-c;return h*h+d*d<=n*n}}function at(e,n,r,i,a){const o=t.create();return n?(t.scale(o,o,[1/a,1/a,1]),r||t.rotateZ(o,o,i.angle)):t.multiply(o,i.labelPlaneMatrix,e),o}function ot(e,n,r,i,a){if(n){const n=t.clone(e);return t.scale(n,n,[a,a,1]),r||t.rotateZ(n,n,-i.angle),n}return i.glCoordMatrix}function st(e,n,r){let i;r?(i=[e.x,e.y,r(e.x,e.y),1],t.transformMat4(i,i,n)):(i=[e.x,e.y,0,1],vt(i,i,n));const a=i[3];return{point:new t.pointGeometry(i[0]/a,i[1]/a),signedDistanceFromCamera:a}}function lt(t,e){return.5+t/e*.5}function ct(t,e){const n=t[0]/t[3],r=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&r>=-e[1]&&r<=e[1]}function ut(e,n,r,i,a,o,s,l,c,u){const h=i?e.textSizeData:e.iconSizeData,d=t.evaluateSizeForZoom(h,r.transform.zoom),p=[256/r.width*2+1,256/r.height*2+1],f=i?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;f.clear();const m=e.lineVertexArray,g=i?e.text.placedSymbolArray:e.icon.placedSymbolArray,y=r.transform.width/r.transform.height;let v=!1;for(let _=0;_<g.length;_++){const i=g.get(_);if(i.hidden||i.writingMode===t.WritingMode.vertical&&!v){yt(i.numGlyphs,f);continue}let x;if(v=!1,u?(x=[i.anchorX,i.anchorY,u(i.anchorX,i.anchorY),1],t.transformMat4(x,x,n)):(x=[i.anchorX,i.anchorY,0,1],vt(x,x,n)),!ct(x,p)){yt(i.numGlyphs,f);continue}const b=lt(r.transform.cameraToCenterDistance,x[3]),w=t.evaluateSizeForFeature(h,d,i),S=s?w/b:w*b,M=new t.pointGeometry(i.anchorX,i.anchorY),E=st(M,a,u).point,k={},T=pt(i,S,!1,l,n,a,o,e.glyphOffsetArray,m,f,E,M,k,y,c,u);v=T.useVertical,(T.notEnoughRoom||v||T.needsFlipping&&pt(i,S,!0,l,n,a,o,e.glyphOffsetArray,m,f,E,M,k,y,c,u).notEnoughRoom)&&yt(i.numGlyphs,f)}i?e.text.dynamicLayoutVertexBuffer.updateData(f):e.icon.dynamicLayoutVertexBuffer.updateData(f)}function ht(t,e,n,r,i,a,o,s,l,c,u,h,d){const p=s.glyphStartIndex+s.numGlyphs,f=s.lineStartIndex,m=s.lineStartIndex+s.lineLength,g=e.getoffsetX(s.glyphStartIndex),y=e.getoffsetX(p-1),v=mt(t*g,n,r,i,a,o,s.segment,f,m,l,c,u,h,d);if(!v)return null;const _=mt(t*y,n,r,i,a,o,s.segment,f,m,l,c,u,h,d);return _?{first:v,last:_}:null}function dt(e,n,r,i){return e===t.WritingMode.horizontal&&Math.abs(r.y-n.y)>Math.abs(r.x-n.x)*i?{useVertical:!0}:(e===t.WritingMode.vertical?n.y<r.y:n.x>r.x)?{needsFlipping:!0}:null}function pt(e,n,r,i,a,o,s,l,c,u,h,d,p,f,m,g){const y=n/24,v=e.lineOffsetX*y,_=e.lineOffsetY*y;let x;if(e.numGlyphs>1){const t=e.glyphStartIndex+e.numGlyphs,n=e.lineStartIndex,a=e.lineStartIndex+e.lineLength,u=ht(y,l,v,_,r,h,d,e,c,o,p,m,g);if(!u)return{notEnoughRoom:!0};const b=st(u.first.point,s,g).point,w=st(u.last.point,s,g).point;if(i&&!r){const t=dt(e.writingMode,b,w,f);if(t)return t}x=[u.first];for(let i=e.glyphStartIndex+1;i<t-1;i++)x.push(mt(y*l.getoffsetX(i),v,_,r,h,d,e.segment,n,a,c,o,p,m,g));x.push(u.last)}else{if(i&&!r){const n=st(d,a,g).point,r=e.lineStartIndex+e.segment+1,i=new t.pointGeometry(c.getx(r),c.gety(r)),o=st(i,a,g),s=o.signedDistanceFromCamera>0?o.point:ft(d,i,n,1,a,g),l=dt(e.writingMode,n,s,f);if(l)return l}const n=mt(y*l.getoffsetX(e.glyphStartIndex),v,_,r,h,d,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,c,o,p,m,g);if(!n)return{notEnoughRoom:!0};x=[n]}for(const b of x)t.addDynamicAttributes(u,b.point,b.angle);return{}}function ft(t,e,n,r,i,a){const o=st(t.add(t.sub(e)._unit()),i,a).point,s=n.sub(o);return n.add(s._mult(r/s.mag()))}function mt(e,n,r,i,a,o,s,l,c,u,h,d,p,f){const m=i?e-n:e+n;let g=m>0?1:-1,y=0;i&&(g*=-1,y=Math.PI),g<0&&(y+=Math.PI);let v=g>0?l+s:l+s+1,_=a,x=a,b=0,w=0;const S=Math.abs(m),M=[];for(;b+w<=S;){if(v+=g,v<l||v>=c)return null;if(x=_,M.push(_),_=d[v],void 0===_){const e=new t.pointGeometry(u.getx(v),u.gety(v)),n=st(e,h,f);if(n.signedDistanceFromCamera>0)_=d[v]=n.point;else{const n=v-g;_=ft(0===b?o:new t.pointGeometry(u.getx(n),u.gety(n)),e,x,S-b+1,h,f)}}b+=w,w=x.dist(_)}const E=(S-b)/w,k=_.sub(x),T=k.mult(E)._add(x);T._add(k._unit()._perp()._mult(r*g));const C=y+Math.atan2(_.y-x.y,_.x-x.x);return M.push(T),{point:T,angle:p?C:0,path:M}}const gt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function yt(t,e){for(let n=0;n<t;n++){const t=e.length;e.resize(t+4),e.float32.set(gt,3*t)}}function vt(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t[3]=n[3]*r+n[7]*i+n[15],t}const _t=100;class xt{constructor(t,e=new it(t.width+200,t.height+200,25),n=new it(t.width+200,t.height+200,25)){this.transform=t,this.grid=e,this.ignoredGrid=n,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+_t,this.screenBottomBoundary=t.height+_t,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(t,e,n,r,i,a){const o=this.projectAndGetPerspectiveRatio(r,t.anchorPointX,t.anchorPointY,a),s=n*o.perspectiveRatio,l=t.x1*s+o.point.x,c=t.y1*s+o.point.y,u=t.x2*s+o.point.x,h=t.y2*s+o.point.y;return!this.isInsideGrid(l,c,u,h)||"always"!==e&&this.grid.hitTest(l,c,u,h,e,i)||o.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[l,c,u,h],offscreen:this.isOffscreen(l,c,u,h)}}placeCollisionCircles(e,n,r,i,a,o,s,l,c,u,h,d,p,f){const m=[],g=new t.pointGeometry(n.anchorX,n.anchorY),y=st(g,o,f),v=lt(this.transform.cameraToCenterDistance,y.signedDistanceFromCamera),_=(u?a/v:a*v)/t.ONE_EM,x=st(g,s,f).point,b=ht(_,i,n.lineOffsetX*_,n.lineOffsetY*_,!1,x,g,n,r,s,{},!1,f);let w=!1,S=!1,M=!0;if(b){const n=.5*d*v+p,r=new t.pointGeometry(-100,-100),i=new t.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),a=new nt,o=b.first,s=b.last;let u=[];for(let t=o.path.length-1;t>=1;t--)u.push(o.path[t]);for(let t=1;t<s.path.length;t++)u.push(s.path[t]);const g=2.5*n;if(l){const t=u.map((t=>st(t,l,f)));u=t.some((t=>t.signedDistanceFromCamera<=0))?[]:t.map((t=>t.point))}let y=[];if(u.length>0){const e=u[0].clone(),n=u[0].clone();for(let t=1;t<u.length;t++)e.x=Math.min(e.x,u[t].x),e.y=Math.min(e.y,u[t].y),n.x=Math.max(n.x,u[t].x),n.y=Math.max(n.y,u[t].y);y=e.x>=r.x&&n.x<=i.x&&e.y>=r.y&&n.y<=i.y?[u]:n.x<r.x||e.x>i.x||n.y<r.y||e.y>i.y?[]:t.clipLine([u],r.x,r.y,i.x,i.y)}for(const t of y){a.reset(t,.25*n);let r=0;r=a.length<=.5*n?1:Math.ceil(a.paddedLength/g)+1;for(let t=0;t<r;t++){const i=t/Math.max(r-1,1),o=a.lerp(i),s=o.x+_t,l=o.y+_t;m.push(s,l,n,0);const u=s-n,d=l-n,p=s+n,f=l+n;if(M=M&&this.isOffscreen(u,d,p,f),S=S||this.isInsideGrid(u,d,p,f),"always"!==e&&this.grid.hitTestCircle(s,l,n,e,h)&&(w=!0,!c))return{circles:[],offscreen:!1,collisionDetected:w}}}}return{circles:!c&&w||!S||v<this.perspectiveRatioCutoff?[]:m,offscreen:M,collisionDetected:w}}queryRenderedSymbols(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const n=[];let r=1/0,i=1/0,a=-1/0,o=-1/0;for(const u of e){const e=new t.pointGeometry(u.x+_t,u.y+_t);r=Math.min(r,e.x),i=Math.min(i,e.y),a=Math.max(a,e.x),o=Math.max(o,e.y),n.push(e)}const s=this.grid.query(r,i,a,o).concat(this.ignoredGrid.query(r,i,a,o)),l={},c={};for(const u of s){const e=u.key;if(void 0===l[e.bucketInstanceId]&&(l[e.bucketInstanceId]={}),l[e.bucketInstanceId][e.featureIndex])continue;const r=[new t.pointGeometry(u.x1,u.y1),new t.pointGeometry(u.x2,u.y1),new t.pointGeometry(u.x2,u.y2),new t.pointGeometry(u.x1,u.y2)];t.polygonIntersectsPolygon(n,r)&&(l[e.bucketInstanceId][e.featureIndex]=!0,void 0===c[e.bucketInstanceId]&&(c[e.bucketInstanceId]=[]),c[e.bucketInstanceId].push(e.featureIndex))}return c}insertCollisionBox(t,e,n,r,i,a){(n?this.ignoredGrid:this.grid).insert({bucketInstanceId:r,featureIndex:i,collisionGroupID:a,overlapMode:e},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,e,n,r,i,a){const o=n?this.ignoredGrid:this.grid,s={bucketInstanceId:r,featureIndex:i,collisionGroupID:a,overlapMode:e};for(let l=0;l<t.length;l+=4)o.insertCircle(s,t[l],t[l+1],t[l+2])}projectAndGetPerspectiveRatio(e,n,r,i){let a;return i?(a=[n,r,i(n,r),1],t.transformMat4(a,a,e)):(a=[n,r,0,1],vt(a,a,e)),{point:new t.pointGeometry((a[0]/a[3]+1)/2*this.transform.width+_t,(-a[1]/a[3]+1)/2*this.transform.height+_t),perspectiveRatio:.5+this.transform.cameraToCenterDistance/a[3]*.5}}isOffscreen(t,e,n,r){return n<_t||t>=this.screenRightBoundary||r<_t||e>this.screenBottomBoundary}isInsideGrid(t,e,n,r){return n>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary}getViewportMatrix(){const e=t.identity([]);return t.translate(e,e,[-100,-100,0]),e}}function bt(e,n,r){return n*(t.EXTENT/(e.tileSize*Math.pow(2,r-e.tileID.overscaledZ)))}class wt{constructor(t,e,n,r){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):r&&n?1:0,this.placed=n}isHidden(){return 0===this.opacity&&!this.placed}}class St{constructor(t,e,n,r,i){this.text=new wt(t?t.text:null,e,n,i),this.icon=new wt(t?t.icon:null,e,r,i)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Mt{constructor(t,e,n){this.text=t,this.icon=e,this.skipFade=n}}class Et{constructor(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]}}class kt{constructor(t,e,n,r,i){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i}}class Tt{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:t=>t.collisionGroupID===e}}return this.collisionGroups[t]}}function Ct(e,n,r,i,a){const{horizontalAlign:o,verticalAlign:s}=t.getAnchorAlignment(e),l=-(o-.5)*n,c=-(s-.5)*r,u=t.evaluateVariableOffset(e,i);return new t.pointGeometry(l+u[0]*a,c+u[1]*a)}function It(e,n,r,i,a,o){const{x1:s,x2:l,y1:c,y2:u,anchorPointX:h,anchorPointY:d}=e,p=new t.pointGeometry(n,r);return i&&p._rotate(a?o:-o),{x1:s+p.x,y1:c+p.y,x2:l+p.x,y2:u+p.y,anchorPointX:h,anchorPointY:d}}class Pt{constructor(t,e,n,r,i){this.transform=t.clone(),this.terrain=e,this.collisionIndex=new xt(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=n,this.retainedQueryData={},this.collisionGroups=new Tt(r),this.collisionCircleArrays={},this.prevPlacement=i,i&&(i.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(e,n,r,i){const a=r.getBucket(n),o=r.latestFeatureIndex;if(!a||!o||n.id!==a.layerIds[0])return;const s=r.collisionBoxArray,l=a.layers[0].layout,c=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),u=r.tileSize/t.EXTENT,h=this.transform.calculatePosMatrix(r.tileID.toUnwrapped()),d="map"===l.get("text-pitch-alignment"),p="map"===l.get("text-rotation-alignment"),f=bt(r,1,this.transform.zoom),m=at(h,d,p,this.transform,f);let g=null;if(d){const e=ot(h,d,p,this.transform,f);g=t.multiply([],this.transform.labelPlaneMatrix,e)}this.retainedQueryData[a.bucketInstanceId]=new kt(a.bucketInstanceId,o,a.sourceLayerIndex,a.index,r.tileID);const y={bucket:a,layout:l,posMatrix:h,textLabelPlaneMatrix:m,labelToScreenMatrix:g,scale:c,textPixelRatio:u,holdingForFade:r.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(a.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(a.sourceID)};if(i)for(const t of a.sortKeyRanges){const{sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:i}=t;e.push({sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:i,parameters:y})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:a.symbolInstances.length,parameters:y})}attemptAnchorPlacement(t,e,n,r,i,a,o,s,l,c,u,h,d,p,f,m){const g=[h.textOffset0,h.textOffset1],y=Ct(t,n,r,g,i),v=this.collisionIndex.placeCollisionBox(It(e,y.x,y.y,a,o,this.transform.angle),u,s,l,c.predicate,m);if((!f||0!==this.collisionIndex.placeCollisionBox(It(f,y.x,y.y,a,o,this.transform.angle),u,s,l,c.predicate,m).box.length)&&v.box.length>0){let e;if(this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(e=this.prevPlacement.variableOffsets[h.crossTileID].anchor),0===h.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[h.crossTileID]={textOffset:g,width:n,height:r,anchor:t,textBoxScale:i,prevAnchor:e},this.markUsedJustification(d,t,h,p),d.allowVerticalPlacement&&(this.markUsedOrientation(d,p,h),this.placedOrientations[h.crossTileID]=p),{shift:y,placedGlyphBoxes:v}}}placeLayerBucketPart(e,n,r){const{bucket:i,layout:a,posMatrix:o,textLabelPlaneMatrix:s,labelToScreenMatrix:l,textPixelRatio:c,holdingForFade:u,collisionBoxArray:h,partiallyEvaluatedTextSize:d,collisionGroup:p}=e.parameters,f=a.get("text-optional"),m=a.get("icon-optional"),g=t.getOverlapMode(a,"text-overlap","text-allow-overlap"),y="always"===g,v=t.getOverlapMode(a,"icon-overlap","icon-allow-overlap"),_="always"===v,x="map"===a.get("text-rotation-alignment"),b="map"===a.get("text-pitch-alignment"),w="none"!==a.get("icon-text-fit"),S="viewport-y"===a.get("symbol-z-order"),M=y&&(_||!i.hasIconData()||m),E=_&&(y||!i.hasTextData()||f);!i.collisionArrays&&h&&i.deserializeCollisionBoxes(h);const k=(e,h)=>{if(n[e.crossTileID])return;if(u)return void(this.placements[e.crossTileID]=new Mt(!1,!1,!1));let _=!1,S=!1,k=!0,T=null,C={box:null,offscreen:null},I={box:null,offscreen:null},P=null,A=null,z=null,L=0,R=0,D=0;h.textFeatureIndex?L=h.textFeatureIndex:e.useRuntimeCollisionCircles&&(L=e.featureIndex),h.verticalTextFeatureIndex&&(R=h.verticalTextFeatureIndex);const O=this.retainedQueryData[i.bucketInstanceId].tileID,B=this.terrain?(t,e)=>this.terrain.getElevation(O,t,e):null;for(const t of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const e=h[t];e&&(e.elevation=B?B(e.anchorPointX,e.anchorPointY):0)}const F=h.textBox;if(F){const n=n=>{let r=t.WritingMode.horizontal;if(i.allowVerticalPlacement&&!n&&this.prevPlacement){const t=this.prevPlacement.placedOrientations[e.crossTileID];t&&(this.placedOrientations[e.crossTileID]=t,r=t,this.markUsedOrientation(i,r,e))}return r},r=(n,r)=>{if(i.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&h.verticalTextBox){for(const e of i.writingModes)if(e===t.WritingMode.vertical?(C=r(),I=C):C=n(),C&&C.box&&C.box.length)break}else C=n()};if(a.get("text-variable-anchor")){let s=a.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[e.crossTileID]){const t=this.prevPlacement.variableOffsets[e.crossTileID];s.indexOf(t.anchor)>0&&(s=s.filter((e=>e!==t.anchor)),s.unshift(t.anchor))}const l=(t,n,r)=>{const a=t.x2-t.x1,l=t.y2-t.y1,u=e.textBoxScale,h=w&&"never"===v?n:null;let d={box:[],offscreen:!1};const f="never"!==g?2*s.length:s.length;for(let m=0;m<f;++m){const n=this.attemptAnchorPlacement(s[m%s.length],t,a,l,u,x,b,c,o,p,m>=s.length?g:"never",e,i,r,h,B);if(n&&(d=n.placedGlyphBoxes,d&&d.box&&d.box.length)){_=!0,T=n.shift;break}}return d};r((()=>l(F,h.iconBox,t.WritingMode.horizontal)),(()=>{const n=h.verticalTextBox;return i.allowVerticalPlacement&&!(C&&C.box&&C.box.length)&&e.numVerticalGlyphVertices>0&&n?l(n,h.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}})),C&&(_=C.box,k=C.offscreen);const u=n(C&&C.box);if(!_&&this.prevPlacement){const t=this.prevPlacement.variableOffsets[e.crossTileID];t&&(this.variableOffsets[e.crossTileID]=t,this.markUsedJustification(i,t.anchor,e,u))}}else{const a=(t,n)=>{const r=this.collisionIndex.placeCollisionBox(t,g,c,o,p.predicate,B);return r&&r.box&&r.box.length&&(this.markUsedOrientation(i,n,e),this.placedOrientations[e.crossTileID]=n),r};r((()=>a(F,t.WritingMode.horizontal)),(()=>{const n=h.verticalTextBox;return i.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&n?a(n,t.WritingMode.vertical):{box:null,offscreen:null}})),n(C&&C.box&&C.box.length)}}if(P=C,_=P&&P.box&&P.box.length>0,k=P&&P.offscreen,e.useRuntimeCollisionCircles){const n=i.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),c=t.evaluateSizeForFeature(i.textSizeData,d,n),u=a.get("text-padding");A=this.collisionIndex.placeCollisionCircles(g,n,i.lineVertexArray,i.glyphOffsetArray,c,o,s,l,r,b,p.predicate,e.collisionCircleDiameter,u,B),A.circles.length&&A.collisionDetected&&!r&&t.warnOnce("Collisions detected, but collision boxes are not shown"),_=y||A.circles.length>0&&!A.collisionDetected,k=k&&A.offscreen}if(h.iconFeatureIndex&&(D=h.iconFeatureIndex),h.iconBox){const t=t=>{const e=w&&T?It(t,T.x,T.y,x,b,this.transform.angle):t;return this.collisionIndex.placeCollisionBox(e,v,c,o,p.predicate,B)};I&&I.box&&I.box.length&&h.verticalIconBox?(z=t(h.verticalIconBox),S=z.box.length>0):(z=t(h.iconBox),S=z.box.length>0),k=k&&z.offscreen}const N=f||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,Z=m||0===e.numIconVertices;if(N||Z?Z?N||(S=S&&_):_=S&&_:S=_=S&&_,_&&P&&P.box&&this.collisionIndex.insertCollisionBox(P.box,g,a.get("text-ignore-placement"),i.bucketInstanceId,I&&I.box&&R?R:L,p.ID),S&&z&&this.collisionIndex.insertCollisionBox(z.box,v,a.get("icon-ignore-placement"),i.bucketInstanceId,D,p.ID),A&&(_&&this.collisionIndex.insertCollisionCircles(A.circles,g,a.get("text-ignore-placement"),i.bucketInstanceId,L,p.ID),r)){const t=i.bucketInstanceId;let e=this.collisionCircleArrays[t];void 0===e&&(e=this.collisionCircleArrays[t]=new Et);for(let n=0;n<A.circles.length;n+=4)e.circles.push(A.circles[n+0]),e.circles.push(A.circles[n+1]),e.circles.push(A.circles[n+2]),e.circles.push(A.collisionDetected?1:0)}if(0===e.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===i.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[e.crossTileID]=new Mt(_||M,S||E,k||i.justReloaded),n[e.crossTileID]=!0};if(S){if(0!==e.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");const t=i.getSortedSymbolIndexes(this.transform.angle);for(let e=t.length-1;e>=0;--e){const n=t[e];k(i.symbolInstances.get(n),i.collisionArrays[n])}}else for(let t=e.symbolInstanceStart;t<e.symbolInstanceEnd;t++)k(i.symbolInstances.get(t),i.collisionArrays[t]);if(r&&i.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[i.bucketInstanceId];t.invert(e.invProjMatrix,o),e.viewportMatrix=this.collisionIndex.getViewportMatrix()}i.justReloaded=!1}markUsedJustification(e,n,r,i){let a;a=i===t.WritingMode.vertical?r.verticalPlacedTextSymbolIndex:{left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(n)];const o=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex];for(const t of o)t>=0&&(e.text.placedSymbolArray.get(t).crossTileID=a>=0&&t!==a?0:r.crossTileID)}markUsedOrientation(e,n,r){const i=n===t.WritingMode.horizontal||n===t.WritingMode.horizontalOnly?n:0,a=n===t.WritingMode.vertical?n:0,o=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex];for(const t of o)e.text.placedSymbolArray.get(t).placedOrientation=i;r.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=a)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const e=this.prevPlacement;let n=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;const r=e?e.symbolFadeChange(t):1,i=e?e.opacities:{},a=e?e.variableOffsets:{},o=e?e.placedOrientations:{};for(const s in this.placements){const t=this.placements[s],e=i[s];e?(this.opacities[s]=new St(e,r,t.text,t.icon),n=n||t.text!==e.text.placed||t.icon!==e.icon.placed):(this.opacities[s]=new St(null,r,t.text,t.icon,t.skipFade),n=n||t.text||t.icon)}for(const s in i){const t=i[s];if(!this.opacities[s]){const e=new St(t,r,!1,!1);e.isHidden()||(this.opacities[s]=e,n=n||t.text.placed||t.icon.placed)}}for(const s in a)this.variableOffsets[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.variableOffsets[s]=a[s]);for(const s in o)this.placedOrientations[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.placedOrientations[s]=o[s]);if(e&&void 0===e.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");n?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)}updateLayerOpacities(t,e){const n={};for(const r of e){const e=r.getBucket(t);e&&r.latestFeatureIndex&&t.id===e.layerIds[0]&&this.updateBucketOpacities(e,n,r.collisionBoxArray)}}updateBucketOpacities(e,n,r){e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const i=e.layers[0].layout,a=new St(null,0,!1,!1,!0),o=i.get("text-allow-overlap"),s=i.get("icon-allow-overlap"),l=i.get("text-variable-anchor"),c="map"===i.get("text-rotation-alignment"),u="map"===i.get("text-pitch-alignment"),h="none"!==i.get("icon-text-fit"),d=new St(null,0,o&&(s||!e.hasIconData()||i.get("icon-optional")),s&&(o||!e.hasTextData()||i.get("text-optional")),!0);!e.collisionArrays&&r&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(r);const p=(t,e,n)=>{for(let r=0;r<e/4;r++)t.opacityVertexArray.emplaceBack(n)};for(let f=0;f<e.symbolInstances.length;f++){const r=e.symbolInstances.get(f),{numHorizontalGlyphVertices:i,numVerticalGlyphVertices:o,crossTileID:s}=r;let m=this.opacities[s];n[s]?m=a:m||(m=d,this.opacities[s]=m),n[s]=!0;const g=r.numIconVertices>0,y=this.placedOrientations[r.crossTileID],v=y===t.WritingMode.vertical,_=y===t.WritingMode.horizontal||y===t.WritingMode.horizontalOnly;if(i>0||o>0){const t=Nt(m.text);p(e.text,i,v?Zt:t),p(e.text,o,_?Zt:t);const n=m.text.isHidden();[r.rightJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.leftJustifiedTextSymbolIndex].forEach((t=>{t>=0&&(e.text.placedSymbolArray.get(t).hidden=n||v?1:0)})),r.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).hidden=n||_?1:0);const a=this.variableOffsets[r.crossTileID];a&&this.markUsedJustification(e,a.anchor,r,y);const s=this.placedOrientations[r.crossTileID];s&&(this.markUsedJustification(e,"left",r,s),this.markUsedOrientation(e,s,r))}if(g){const t=Nt(m.icon),n=!(h&&r.verticalPlacedIconSymbolIndex&&v);r.placedIconSymbolIndex>=0&&(p(e.icon,r.numIconVertices,n?t:Zt),e.icon.placedSymbolArray.get(r.placedIconSymbolIndex).hidden=m.icon.isHidden()),r.verticalPlacedIconSymbolIndex>=0&&(p(e.icon,r.numVerticalIconVertices,n?Zt:t),e.icon.placedSymbolArray.get(r.verticalPlacedIconSymbolIndex).hidden=m.icon.isHidden())}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const n=e.collisionArrays[f];if(n){let r=new t.pointGeometry(0,0);if(n.textBox||n.verticalTextBox){let t=!0;if(l){const e=this.variableOffsets[s];e?(r=Ct(e.anchor,e.width,e.height,e.textOffset,e.textBoxScale),c&&r._rotate(u?this.transform.angle:-this.transform.angle)):t=!1}n.textBox&&At(e.textCollisionBox.collisionVertexArray,m.text.placed,!t||v,r.x,r.y),n.verticalTextBox&&At(e.textCollisionBox.collisionVertexArray,m.text.placed,!t||_,r.x,r.y)}const i=Boolean(!_&&n.verticalIconBox);n.iconBox&&At(e.iconCollisionBox.collisionVertexArray,m.icon.placed,i,h?r.x:0,h?r.y:0),n.verticalIconBox&&At(e.iconCollisionBox.collisionVertexArray,m.icon.placed,!i,h?r.x:0,h?r.y:0)}}}if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.text.opacityVertexArray.length!==e.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${e.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${e.text.layoutVertexArray.length}) / 4`);if(e.icon.opacityVertexArray.length!==e.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${e.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${e.icon.layoutVertexArray.length}) / 4`);if(e.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=t.invProjMatrix,e.placementViewportMatrix=t.viewportMatrix,e.collisionCircleArray=t.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,e){const n=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*n>t}setStale(){this.stale=!0}}function At(t,e,n,r,i){t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0)}const zt=Math.pow(2,25),Lt=Math.pow(2,24),Rt=Math.pow(2,17),Dt=Math.pow(2,16),Ot=Math.pow(2,9),Bt=Math.pow(2,8),Ft=Math.pow(2,1);function Nt(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;const e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*zt+e*Lt+n*Rt+e*Dt+n*Ot+e*Bt+n*Ft+e}const Zt=0;class Ut{constructor(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&!t.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,e,n,r,i){const a=this._bucketParts;for(;this._currentTileIndex<t.length;)if(e.getBucketParts(a,r,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,a.sort(((t,e)=>t.sortKey-e.sortKey)));this._currentPartIndex<a.length;)if(e.placeLayerBucketPart(a[this._currentPartIndex],this._seenCrossTileIDs,n),this._currentPartIndex++,i())return!0;return!1}}class jt{constructor(t,e,n,r,i,a,o,s){this.placement=new Pt(t,e,a,o,s),this._currentPlacementIndex=n.length-1,this._forceFullPlacement=r,this._showCollisionBoxes=i,this._done=!1}isDone(){return this._done}continuePlacement(e,n,r){const i=t.exported.now(),a=()=>{const e=t.exported.now()-i;return!this._forceFullPlacement&&e>2};for(;this._currentPlacementIndex>=0;){const t=n[e[this._currentPlacementIndex]],i=this.placement.collisionIndex.transform.zoom;if("symbol"===t.type&&(!t.minzoom||t.minzoom<=i)&&(!t.maxzoom||t.maxzoom>i)){if(this._inProgressLayer||(this._inProgressLayer=new Ut(t)),this._inProgressLayer.continuePlacement(r[t.source],this.placement,this._showCollisionBoxes,t,a))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const Vt=512/t.EXTENT/2;class qt{constructor(t,e,n){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(let r=0;r<e.length;r++){const n=e.get(r),i=n.key;this.indexedSymbolInstances[i]||(this.indexedSymbolInstances[i]=[]),this.indexedSymbolInstances[i].push({crossTileID:n.crossTileID,coord:this.getScaledCoordinates(n,t)})}}getScaledCoordinates(e,n){const r=Vt/Math.pow(2,n.canonical.z-this.tileID.canonical.z);return{x:Math.floor((n.canonical.x*t.EXTENT+e.anchorX)*r),y:Math.floor((n.canonical.y*t.EXTENT+e.anchorY)*r)}}findMatches(t,e,n){const r=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z);for(let i=0;i<t.length;i++){const a=t.get(i);if(a.crossTileID)continue;const o=this.indexedSymbolInstances[a.key];if(!o)continue;const s=this.getScaledCoordinates(a,e);for(const t of o)if(Math.abs(t.coord.x-s.x)<=r&&Math.abs(t.coord.y-s.y)<=r&&!n[t.crossTileID]){n[t.crossTileID]=!0,a.crossTileID=t.crossTileID;break}}}}class $t{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Gt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const e=Math.round((t-this.lng)/360);if(0!==e)for(const n in this.indexes){const t=this.indexes[n],r={};for(const n in t){const i=t[n];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+e),r[i.tileID.key]=i}this.indexes[n]=r}this.lng=t}addBucket(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let i=0;i<e.symbolInstances.length;i++)e.symbolInstances.get(i).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const r=this.usedCrossTileIDs[t.overscaledZ];for(const i in this.indexes){const n=this.indexes[i];if(Number(i)>t.overscaledZ)for(const i in n){const a=n[i];a.tileID.isChildOf(t)&&a.findMatches(e.symbolInstances,t,r)}else{const a=n[t.scaledTo(Number(i)).key];a&&a.findMatches(e.symbolInstances,t,r)}}for(let i=0;i<e.symbolInstances.length;i++){const t=e.symbolInstances.get(i);t.crossTileID||(t.crossTileID=n.generate(),r[t.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new qt(t,e.symbolInstances,e.bucketInstanceId),!0}removeBucketCrossTileIDs(t,e){for(const n in e.indexedSymbolInstances)for(const r of e.indexedSymbolInstances[n])delete this.usedCrossTileIDs[t][r.crossTileID]}removeStaleBuckets(t){let e=!1;for(const n in this.indexes){const r=this.indexes[n];for(const i in r)t[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],e=!0)}return e}}class Wt{constructor(){this.layerIndexes={},this.crossTileIDs=new $t,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,e,n){let r=this.layerIndexes[t.id];void 0===r&&(r=this.layerIndexes[t.id]=new Gt);let i=!1;const a={};r.handleWrapJump(n);for(const o of e){const e=o.getBucket(t);e&&t.id===e.layerIds[0]&&(e.bucketInstanceId||(e.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(o.tileID,e,this.crossTileIDs)&&(i=!0),a[e.bucketInstanceId]=!0)}return r.removeStaleBuckets(a)&&(i=!0),i}pruneUnusedLayers(t){const e={};t.forEach((t=>{e[t]=!0}));for(const n in this.layerIndexes)e[n]||delete this.layerIndexes[n]}}var Ht=t.createLayout([{name:"a_pos",type:"Int16",components:2}]);class Xt extends t.Evented{constructor(t){super(),this.sourceCache=t,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=t._cache.max,t.usedForTerrain=!0,t.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const t in this._tiles){const e=this._tiles[t];e.textures.forEach((t=>t.destroy())),e.textures=[]}}update(e,n){this.sourceCache.update(e,n),this._renderableTilesKeys=[];for(const r of e.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:n}))this._renderableTilesKeys.push(r.key),this._tiles[r.key]||(r.posMatrix=new Float64Array(16),t.ortho(r.posMatrix,0,t.EXTENT,0,t.EXTENT,0,1),this._tiles[r.key]=new D(r,this.tileSize))}removeOutdated(t){const e={};this.renderHistory=this.renderHistory.filter(((t,e)=>this.renderHistory.indexOf(t)===e)).slice(0,this.renderHistorySize);for(const n of this._renderableTilesKeys)e[n]=!0;for(const n of this.renderHistory)e[n]=!0;for(const n in this._tiles)e[n]||(this._tiles[n].clearTextures(t),delete this._tiles[n])}getRenderableTiles(){return this._renderableTilesKeys.map((t=>this.getTileByID(t)))}getTileByID(t){return this._tiles[t]}getTerrainCoords(e){const n={};for(const r of this._renderableTilesKeys){const i=this._tiles[r].tileID;if(i.canonical.equals(e.canonical)){const i=e.clone();i.posMatrix=new Float64Array(16),t.ortho(i.posMatrix,0,t.EXTENT,0,t.EXTENT,0,1),n[r]=i}else if(i.canonical.isChildOf(e.canonical)){const a=e.clone();a.posMatrix=new Float64Array(16);const o=i.canonical.z-e.canonical.z,s=i.canonical.x-(i.canonical.x>>o<<o),l=i.canonical.y-(i.canonical.y>>o<<o),c=t.EXTENT>>o;t.ortho(a.posMatrix,0,c,0,c,0,1),t.translate(a.posMatrix,a.posMatrix,[-s*c,-l*c,0]),n[r]=a}else if(e.canonical.isChildOf(i.canonical)){const a=e.clone();a.posMatrix=new Float64Array(16);const o=e.canonical.z-i.canonical.z,s=e.canonical.x-(e.canonical.x>>o<<o),l=e.canonical.y-(e.canonical.y>>o<<o),c=t.EXTENT>>o;t.ortho(a.posMatrix,0,t.EXTENT,0,t.EXTENT,0,1),t.translate(a.posMatrix,a.posMatrix,[s*c,l*c,0]),t.scale(a.posMatrix,a.posMatrix,[1/2**o,1/2**o,0]),n[r]=a}}return n}getSourceTile(t,e){const n=this.sourceCache._source;let r=t.overscaledZ-this.deltaZoom;if(r>n.maxzoom&&(r=n.maxzoom),r<n.minzoom)return null;this._sourceTileCache[t.key]||(this._sourceTileCache[t.key]=t.scaledTo(r).key);let i=this.sourceCache.getTileByID(this._sourceTileCache[t.key]);if((!i||!i.dem)&&e)for(;r>=n.minzoom&&(!i||!i.dem);)i=this.sourceCache.getTileByID(t.scaledTo(r--).key);return i}tilesAfterTime(t=Date.now()){return Object.values(this._tiles).filter((e=>e.timeLoaded>=t))}}class Kt{constructor(t,e,n){this.style=t,this.sourceCache=new Xt(e),this.options=n,this.exaggeration="number"==typeof n.exaggeration?n.exaggeration:1,this.elevationOffset="number"==typeof n.elevationOffset?n.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(e,n,r,i=t.EXTENT){if(!(n>=0&&n<i&&r>=0&&r<i))return this.elevationOffset;let a=0;const o=this.getTerrainData(e);if(o.tile&&o.tile.dem){const e=t.transformMat4$1([],[n/i*t.EXTENT,r/i*t.EXTENT],o.u_terrain_matrix),s=[e[0]*o.tile.dem.dim,e[1]*o.tile.dem.dim],l=[Math.floor(s[0]),Math.floor(s[1])],c=o.tile.dem.get(l[0],l[1]),u=o.tile.dem.get(l[0],l[1]+1),h=o.tile.dem.get(l[0]+1,l[1]),d=o.tile.dem.get(l[0]+1,l[1]+1);a=t.number(t.number(c,u,s[0]-l[0]),t.number(h,d,s[0]-l[0]),s[1]-l[1])}return a}rememberForRerender(t,e){for(const n in this.sourceCache._tiles){const r=this.sourceCache._tiles[n];(r.tileID.equals(e)||r.tileID.isChildOf(e))&&(t===this.sourceCache.sourceCache.id&&(r.timeLoaded=Date.now()),this._rerender[t]=this._rerender[t]||{},this._rerender[t][r.tileID.key]=!0)}}needsRerender(t,e){return this._rerender[t]&&this._rerender[t][e.key]}clearRerenderCache(){this._rerender={}}getElevation(e,n,r,i=t.EXTENT){return(this.getDEMElevation(e,n,r,i)+this.elevationOffset)*this.exaggeration}getTerrainData(e){if(!this._emptyDemTexture){const e=this.style.map.painter.context,n=new t.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new l(e,n,e.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new l(e,new t.RGBAImage({width:1,height:1}),e.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=t.identity([])}const n=this.sourceCache.getSourceTile(e,!0);if(n&&n.dem&&(!n.demTexture||n.needsTerrainPrepare)){const t=this.style.map.painter.context;n.demTexture=this.style.map.painter.getTileTexture(n.dem.stride),n.demTexture?n.demTexture.update(n.dem.getPixels(),{premultiply:!1}):n.demTexture=new l(t,n.dem.getPixels(),t.gl.RGBA,{premultiply:!1}),n.demTexture.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),n.needsTerrainPrepare=!1}const r=n&&n+n.tileID.key+e.key;if(r&&!this._demMatrixCache[r]){const r=this.sourceCache.sourceCache._source.maxzoom;let i=e.canonical.z-n.tileID.canonical.z;e.overscaledZ>e.canonical.z&&(e.canonical.z>=r?i=e.canonical.z-r:t.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const a=e.canonical.x-(e.canonical.x>>i<<i),o=e.canonical.y-(e.canonical.y>>i<<i),s=t.fromScaling(new Float64Array(16),[1/(t.EXTENT<<i),1/(t.EXTENT<<i),0]);t.translate(s,s,[a*t.EXTENT,o*t.EXTENT,0]),this._demMatrixCache[e.key]={matrix:s,coord:e}}return{u_depth:2,u_terrain:3,u_terrain_dim:n&&n.dem&&n.dem.dim||1,u_terrain_matrix:r?this._demMatrixCache[e.key].matrix:this._emptyDemMatrix,u_terrain_unpack:n&&n.dem&&n.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(n&&n.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:n}}getRTTFramebuffer(){const t=this.style.map.painter;if(!this._rttFramebuffer){const e=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=t.context.createFramebuffer(e,e,!0),this._rttFramebuffer.depthAttachment.set(t.context.createRenderbuffer(t.context.gl.DEPTH_COMPONENT16,e,e))}return this._rttFramebuffer}getFramebuffer(t){const e=this.style.map.painter,n=e.width/devicePixelRatio,r=e.height/devicePixelRatio;return!this._fbo||this._fbo.width===n&&this._fbo.height===r||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new l(e.context,{width:n,height:r,data:null},e.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(e.context.gl.NEAREST,e.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new l(e.context,{width:n,height:r,data:null},e.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(e.context.gl.NEAREST,e.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=e.context.createFramebuffer(n,r,!0),this._fbo.depthAttachment.set(e.context.createRenderbuffer(e.context.gl.DEPTH_COMPONENT16,n,r))),this._fbo.colorAttachment.set("coords"===t?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const e=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const n=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let t=0,a=0;t<this._coordsTextureSize;t++)for(let e=0;e<this._coordsTextureSize;e++,a+=4)n[a+0]=255&e,n[a+1]=255&t,n[a+2]=e>>8<<4|t>>8,n[a+3]=0;const r=new t.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(n.buffer)),i=new l(e,r,e.gl.RGBA,{premultiply:!1});return i.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=i,i}pointCoordinate(e){const n=new Uint8Array(4),r=this.style.map.painter,i=r.context,a=i.gl;i.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),a.readPixels(e.x,r.height/devicePixelRatio-e.y-1,1,1,a.RGBA,a.UNSIGNED_BYTE,n),i.bindFramebuffer.set(null);const o=n[0]+(n[2]>>4<<8),s=n[1]+((15&n[2])<<8),l=this.coordsIndex[255-n[3]],c=l&&this.sourceCache.getTileByID(l);if(!c)return null;const u=this._coordsTextureSize,h=(1<<c.tileID.canonical.z)*u;return new t.MercatorCoordinate((c.tileID.canonical.x*u+o)/h,(c.tileID.canonical.y*u+s)/h,this.getElevation(c.tileID,o,s,u))}getTerrainMesh(){if(this._mesh)return this._mesh;const e=this.style.map.painter.context,n=new t.PosArray,r=new t.TriangleIndexArray,i=this.meshSize,a=t.EXTENT/i,o=i*i;for(let t=0;t<=i;t++)for(let e=0;e<=i;e++)n.emplaceBack(e*a,t*a);for(let t=0;t<o;t+=i+1)for(let e=0;e<i;e++)r.emplaceBack(e+t,i+e+t+1,i+e+t+2),r.emplaceBack(e+t,i+e+t+2,e+t+1);return this._mesh={indexBuffer:e.createIndexBuffer(r),vertexBuffer:e.createVertexBuffer(n,Ht.members),segments:t.SegmentVector.simpleSegment(0,0,n.length,r.length)},this._mesh}getMinMaxElevation(t){const e=this.getTerrainData(t).tile,n={minElevation:null,maxElevation:null};return e&&e.dem&&(n.minElevation=(e.dem.min+this.elevationOffset)*this.exaggeration,n.maxElevation=(e.dem.max+this.elevationOffset)*this.exaggeration),n}}const Yt=(e,n)=>t.emitValidationErrors(e,n&&n.filter((t=>"source.canvas"!==t.identifier))),Jt=t.pick(H,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Qt=t.pick(H,["setCenter","setZoom","setBearing","setPitch"]),te=function(){const e={},n=t.spec.$version;for(const r in t.spec.$root){const i=t.spec.$root[r];if(i.required){let t=null;t="version"===r?n:"array"===i.type?[]:{},null!=t&&(e[r]=t)}}return e}();class ee extends t.Evented{constructor(e,n={}){super(),this.map=e,this.dispatcher=new _($(),this),this.imageManager=new u,this.imageManager.setEventedParent(this),this.glyphManager=new f(e._requestManager,n.localIdeographFontFamily),this.lineAtlas=new v(256,512),this.crossTileSymbolIndex=new Wt,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());const r=this;this._rtlTextPluginCallback=ee.registerForPluginStateChange((e=>{r.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},((e,n)=>{if(t.triggerPluginCompletionEvent(e),n&&n.every((t=>t)))for(const t in r.sourceCaches)r.sourceCaches[t].reload()}))})),this.on("data",(t=>{if("source"!==t.dataType||"metadata"!==t.sourceDataType)return;const e=this.sourceCaches[t.sourceId];if(!e)return;const n=e.getSource();if(n&&n.vectorLayerIds)for(const r in this._layers){const t=this._layers[r];t.source===n.id&&this._validateLayer(t)}}))}loadURL(e,n={}){this.fire(new t.Event("dataloading",{dataType:"style"}));const r="boolean"!=typeof n.validate||n.validate,i=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(i,((e,n)=>{this._request=null,e?this.fire(new t.ErrorEvent(e)):n&&this._load(n,r)}))}loadJSON(e,n={}){this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.exported.frame((()=>{this._request=null,this._load(e,!1!==n.validate)}))}loadEmpty(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(te,!1)}_load(e,n){if(n&&Yt(this,t.validateStyle(e)))return;this._loaded=!0,this.stylesheet=e;for(const t in e.sources)this.addSource(t,e.sources[t],{validate:!1});e.sprite?this._loadSprite(e.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);const r=W(this.stylesheet.layers);this._order=r.map((t=>t.id)),this._layers={},this._serializedLayers={};for(let i of r)i=t.createStyleLayer(i),i.setEventedParent(this,{layer:{id:i.id}}),this._layers[i.id]=i,this._serializedLayers[i.id]=i.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new y(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}_loadSprite(e){this._spriteRequest=function(e,n,r,i){let a,o,s;const l=r>1?"@2x":"";let c=t.getJSON(n.transformRequest(n.normalizeSpriteURL(e,l,".json"),t.ResourceType.SpriteJSON),((t,e)=>{c=null,s||(s=t,a=e,h())})),u=t.getImage(n.transformRequest(n.normalizeSpriteURL(e,l,".png"),t.ResourceType.SpriteImage),((t,e)=>{u=null,s||(s=t,o=e,h())}));function h(){if(s)i(s);else if(a&&o){const e=t.exported.getImageData(o),n={};for(const r in a){const{width:i,height:o,x:s,y:l,sdf:c,pixelRatio:u,stretchX:h,stretchY:d,content:p}=a[r],f=new t.RGBAImage({width:i,height:o});t.RGBAImage.copy(e,f,{x:s,y:l},{x:0,y:0},{width:i,height:o}),n[r]={data:f,pixelRatio:u,sdf:c,stretchX:h,stretchY:d,content:p}}i(null,n)}}return{cancel(){c&&(c.cancel(),c=null),u&&(u.cancel(),u=null)}}}(e,this.map._requestManager,this.map.getPixelRatio(),((e,n)=>{if(this._spriteRequest=null,e)this.fire(new t.ErrorEvent(e));else if(n)for(const t in n)this.imageManager.addImage(t,n[t]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))}))}_validateLayer(e){const n=this.sourceCaches[e.source];if(!n)return;const r=e.sourceLayer;if(!r)return;const i=n.getSource();("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(r))&&this.fire(new t.ErrorEvent(new Error(`Source layer "${r}" does not exist on source "${i.id}" as specified by style layer "${e.id}".`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(t){const e=[];for(const n of t){const t=this._layers[n];"custom"!==t.type&&e.push(t.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(const t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;const n=this._changed;if(this._changed){const t=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);(t.length||n.length)&&this._updateWorkerLayers(t,n);for(const e in this._updatedSources){const t=this._updatedSources[e];if("reload"===t)this._reloadSource(e);else{if("clear"!==t)throw new Error(`Invalid action ${t}`);this._clearSource(e)}}this._updateTilesForChangedImages();for(const r in this._updatedPaintProps)this._layers[r].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}const r={};for(const t in this.sourceCaches){const e=this.sourceCaches[t];r[t]=e.used,e.used=!1}for(const t of this._order){const n=this._layers[t];n.recalculate(e,this._availableImages),!n.isHidden(e.zoom)&&n.source&&(this.sourceCaches[n.source].used=!0)}for(const i in r){const e=this.sourceCaches[i];r[i]!==e.used&&e.fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:i}))}this.light.recalculate(e),this.z=e.zoom,n&&this.fire(new t.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateWorkerLayers(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(e){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),e){const t=this.sourceCaches[e.source];if(!t)throw new Error(`cannot load terrain, because there exists no source with ID: ${e.source}`);this.terrain=new Kt(this,t,e),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=t=>{t.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=t=>{t.tile&&(t.sourceId===e.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(t.sourceId,t.tile.tileID)):"geojson"===t.source.type&&this.terrain.rememberForRerender(t.sourceId,t.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new t.Event("terrain",{terrain:e}))}setState(e){if(this._checkLoaded(),Yt(this,t.validateStyle(e)))return!1;(e=t.clone$1(e)).layers=W(e.layers);const n=function(t,e){if(!t)return[{command:H.setStyle,args:[e]}];let n=[];try{if(!i(t.version,e.version))return[{command:H.setStyle,args:[e]}];i(t.center,e.center)||n.push({command:H.setCenter,args:[e.center]}),i(t.zoom,e.zoom)||n.push({command:H.setZoom,args:[e.zoom]}),i(t.bearing,e.bearing)||n.push({command:H.setBearing,args:[e.bearing]}),i(t.pitch,e.pitch)||n.push({command:H.setPitch,args:[e.pitch]}),i(t.sprite,e.sprite)||n.push({command:H.setSprite,args:[e.sprite]}),i(t.glyphs,e.glyphs)||n.push({command:H.setGlyphs,args:[e.glyphs]}),i(t.transition,e.transition)||n.push({command:H.setTransition,args:[e.transition]}),i(t.light,e.light)||n.push({command:H.setLight,args:[e.light]});const r={},a=[];!function(t,e,n,r){let a;for(a in e=e||{},t=t||{})Object.prototype.hasOwnProperty.call(t,a)&&(Object.prototype.hasOwnProperty.call(e,a)||K(a,n,r));for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&(Object.prototype.hasOwnProperty.call(t,a)?i(t[a],e[a])||("geojson"===t[a].type&&"geojson"===e[a].type&&J(t,e,a)?n.push({command:H.setGeoJSONSourceData,args:[a,e[a].data]}):Y(a,e,n,r)):X(a,e,n))}(t.sources,e.sources,a,r);const o=[];t.layers&&t.layers.forEach((t=>{r[t.source]?n.push({command:H.removeLayer,args:[t.id]}):o.push(t)})),n=n.concat(a),function(t,e,n){e=e||[];const r=(t=t||[]).map(tt),a=e.map(tt),o=t.reduce(et,{}),s=e.reduce(et,{}),l=r.slice(),c=Object.create(null);let u,h,d,p,f,m,g;for(u=0,h=0;u<r.length;u++)d=r[u],Object.prototype.hasOwnProperty.call(s,d)?h++:(n.push({command:H.removeLayer,args:[d]}),l.splice(l.indexOf(d,h),1));for(u=0,h=0;u<a.length;u++)d=a[a.length-1-u],l[l.length-1-u]!==d&&(Object.prototype.hasOwnProperty.call(o,d)?(n.push({command:H.removeLayer,args:[d]}),l.splice(l.lastIndexOf(d,l.length-h),1)):h++,m=l[l.length-u],n.push({command:H.addLayer,args:[s[d],m]}),l.splice(l.length-u,0,d),c[d]=!0);for(u=0;u<a.length;u++)if(d=a[u],p=o[d],f=s[d],!c[d]&&!i(p,f))if(i(p.source,f.source)&&i(p["source-layer"],f["source-layer"])&&i(p.type,f.type)){for(g in Q(p.layout,f.layout,n,d,null,H.setLayoutProperty),Q(p.paint,f.paint,n,d,null,H.setPaintProperty),i(p.filter,f.filter)||n.push({command:H.setFilter,args:[d,f.filter]}),i(p.minzoom,f.minzoom)&&i(p.maxzoom,f.maxzoom)||n.push({command:H.setLayerZoomRange,args:[d,f.minzoom,f.maxzoom]}),p)Object.prototype.hasOwnProperty.call(p,g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?Q(p[g],f[g],n,d,g.slice(6),H.setPaintProperty):i(p[g],f[g])||n.push({command:H.setLayerProperty,args:[d,g,f[g]]}));for(g in f)Object.prototype.hasOwnProperty.call(f,g)&&!Object.prototype.hasOwnProperty.call(p,g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?Q(p[g],f[g],n,d,g.slice(6),H.setPaintProperty):i(p[g],f[g])||n.push({command:H.setLayerProperty,args:[d,g,f[g]]}))}else n.push({command:H.removeLayer,args:[d]}),m=l[l.lastIndexOf(d)+1],n.push({command:H.addLayer,args:[f,m]})}(o,e.layers,n)}catch(t){console.warn("Unable to compute style diff:",t),n=[{command:H.setStyle,args:[e]}]}return n}(this.serialize(),e).filter((t=>!(t.command in Qt)));if(0===n.length)return!1;const r=n.filter((t=>!(t.command in Jt)));if(r.length>0)throw new Error(`Unimplemented: ${r.map((t=>t.command)).join(", ")}.`);return n.forEach((t=>{"setTransition"!==t.command&&this[t.command].apply(this,t.args)})),this.stylesheet=e,!0}addImage(e,n){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error(`An image named "${e}" already exists.`)));this.imageManager.addImage(e,n),this._afterImageUpdated(e)}updateImage(t,e){this.imageManager.updateImage(t,e)}getImage(t){return this.imageManager.getImage(t)}removeImage(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error(`An image named "${e}" does not exist.`)));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,n,r={}){if(this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error(`Source "${e}" already exists.`);if(!n.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(n).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.validateStyle.source,`sources.${e}`,n,null,r))return;this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);const i=this.sourceCaches[e]=new F(e,n,this.dispatcher);i.style=this,i.setEventedParent(this,(()=>({isSourceLoaded:this.loaded(),source:i.serialize(),sourceId:e}))),i.onAdd(this.map),this._changed=!0}removeSource(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(const r in this._layers)if(this._layers[r].source===e)return this.fire(new t.ErrorEvent(new Error(`Source "${e}" cannot be removed while layer "${r}" is using it.`)));const n=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],n.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),n.setEventedParent(null),n.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,e){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error(`There is no source with this ID=${t}`);const n=this.sourceCaches[t].getSource();if("geojson"!==n.type)throw new Error(`geojsonSource.type is ${n.type}, which is !== 'geojson`);n.setData(e),this._changed=!0}getSource(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()}addLayer(e,n,r={}){this._checkLoaded();const i=e.id;if(this.getLayer(i))return void this.fire(new t.ErrorEvent(new Error(`Layer "${i}" already exists on this map.`)));let a;if("custom"===e.type){if(Yt(this,t.validateCustomStyleLayer(e)))return;a=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(i,e.source),e=t.clone$1(e),e=t.extend(e,{source:i})),this._validate(t.validateStyle.layer,`layers.${i}`,e,{arrayIndex:-1},r))return;a=t.createStyleLayer(e),this._validateLayer(a),a.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[a.id]=a.serialize()}const o=n?this._order.indexOf(n):this._order.length;if(n&&-1===o)this.fire(new t.ErrorEvent(new Error(`Cannot add layer "${i}" before non-existing layer "${n}".`)));else{if(this._order.splice(o,0,i),this._layerOrderChanged=!0,this._layers[i]=a,this._removedLayers[i]&&a.source&&"custom"!==a.type){const t=this._removedLayers[i];delete this._removedLayers[i],t.type!==a.type?this._updatedSources[a.source]="clear":(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause())}this._updateLayer(a),a.onAdd&&a.onAdd(this.map)}}moveLayer(e,n){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===n)return;const r=this._order.indexOf(e);this._order.splice(r,1);const i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new t.ErrorEvent(new Error(`Cannot move layer "${e}" before non-existing layer "${n}".`))):(this._order.splice(i,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();const n=this._layers[e];if(!n)return void this.fire(new t.ErrorEvent(new Error(`Cannot remove non-existing layer "${e}".`)));n.setEventedParent(null);const r=this._order.indexOf(e);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map)}getLayer(t){return this._layers[t]}hasLayer(t){return t in this._layers}setLayerZoomRange(e,n,r){this._checkLoaded();const i=this.getLayer(e);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new t.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${e}".`)))}setFilter(e,n,r={}){this._checkLoaded();const a=this.getLayer(e);if(a){if(!i(a.filter,n))return null==n?(a.filter=void 0,void this._updateLayer(a)):void(this._validate(t.validateStyle.filter,`layers.${a.id}.filter`,n,null,r)||(a.filter=t.clone$1(n),this._updateLayer(a)))}else this.fire(new t.ErrorEvent(new Error(`Cannot filter non-existing layer "${e}".`)))}getFilter(e){return t.clone$1(this.getLayer(e).filter)}setLayoutProperty(e,n,r,a={}){this._checkLoaded();const o=this.getLayer(e);o?i(o.getLayoutProperty(n),r)||(o.setLayoutProperty(n,r,a),this._updateLayer(o)):this.fire(new t.ErrorEvent(new Error(`Cannot style non-existing layer "${e}".`)))}getLayoutProperty(e,n){const r=this.getLayer(e);if(r)return r.getLayoutProperty(n);this.fire(new t.ErrorEvent(new Error(`Cannot get style of non-existing layer "${e}".`)))}setPaintProperty(e,n,r,a={}){this._checkLoaded();const o=this.getLayer(e);o?i(o.getPaintProperty(n),r)||(o.setPaintProperty(n,r,a)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error(`Cannot style non-existing layer "${e}".`)))}getPaintProperty(t,e){return this.getLayer(t).getPaintProperty(e)}setFeatureState(e,n){this._checkLoaded();const r=e.source,i=e.sourceLayer,a=this.sourceCaches[r];if(void 0===a)return void this.fire(new t.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)));const o=a.getSource().type;"geojson"===o&&i?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==o||i?(void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),a.setFeatureState(i,e.id,n)):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,n){this._checkLoaded();const r=e.source,i=this.sourceCaches[r];if(void 0===i)return void this.fire(new t.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)));const a=i.getSource().type,o="vector"===a?e.sourceLayer:void 0;"vector"!==a||o?n&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):i.removeFeatureState(o,e.id,n):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(e){this._checkLoaded();const n=e.source,r=e.sourceLayer,i=this.sourceCaches[n];if(void 0!==i)return"vector"!==i.getSource().type||r?(void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),i.getFeatureState(r,e.id)):void this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new t.ErrorEvent(new Error(`The source '${n}' does not exist in the map's style.`)))}getTransition(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,(t=>t.serialize())),layers:this._serializeLayers(this._order)},(t=>void 0!==t))}_updateLayer(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(t){const e=t=>"fill-extrusion"===this._layers[t].type,n={},r=[];for(let a=this._order.length-1;a>=0;a--){const i=this._order[a];if(e(i)){n[i]=a;for(const e of t){const t=e[i];if(t)for(const e of t)r.push(e)}}}r.sort(((t,e)=>e.intersectionZ-t.intersectionZ));const i=[];for(let a=this._order.length-1;a>=0;a--){const o=this._order[a];if(e(o))for(let t=r.length-1;t>=0;t--){const e=r[t].feature;if(n[e.layer.id]<a)break;i.push(e),r.pop()}else for(const e of t){const t=e[o];if(t)for(const e of t)i.push(e.feature)}}return i}queryRenderedFeatures(e,n,r){n&&n.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",n.filter,null,n);const i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const e of n.layers){const n=this._layers[e];if(!n)return this.fire(new t.ErrorEvent(new Error(`The layer '${e}' does not exist in the map's style and cannot be queried for features.`))),[];i[n.source]=!0}}const a=[];n.availableImages=this._availableImages;for(const t in this.sourceCaches)n.layers&&!i[t]||a.push(L(this.sourceCaches[t],this._layers,this._serializedLayers,e,n,r));return this.placement&&a.push(function(t,e,n,r,i,a,o){const s={},l=a.queryRenderedSymbols(r),c=[];for(const u of Object.keys(l).map(Number))c.push(o[u]);c.sort(R);for(const u of c){const n=u.featureIndex.lookupSymbolFeatures(l[u.bucketInstanceId],e,u.bucketIndex,u.sourceLayerIndex,i.filter,i.layers,i.availableImages,t);for(const t in n){const e=s[t]=s[t]||[],r=n[t];r.sort(((t,e)=>{const n=u.featureSortOrder;if(n){const r=n.indexOf(t.featureIndex);return n.indexOf(e.featureIndex)-r}return e.featureIndex-t.featureIndex}));for(const t of r)e.push(t)}}for(const u in s)s[u].forEach((e=>{const r=e.feature,i=n[t[u].source].getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=i}));return s}(this._layers,this._serializedLayers,this.sourceCaches,e,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(a)}querySourceFeatures(e,n){n&&n.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",n.filter,null,n);const r=this.sourceCaches[e];return r?function(t,e){const n=t.getRenderableIds().map((e=>t.getTileByID(e))),r=[],i={};for(let a=0;a<n.length;a++){const t=n[a],o=t.tileID.canonical.key;i[o]||(i[o]=!0,t.querySourceFeatures(r,e))}return r}(r,n):[]}addSourceType(t,e,n){return ee.getSourceType(t)?n(new Error(`A source type called "${t}" already exists.`)):(ee.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},n):n(null,null))}getLight(){return this.light.getLight()}setLight(e,n={}){this._checkLoaded();const r=this.light.getLight();let a=!1;for(const t in e)if(!i(e[t],r[t])){a=!0;break}if(!a)return;const o={now:t.exported.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,n),this.light.updateTransitions(o)}_validate(e,n,r,i,a={}){return(!a||!1!==a.validate)&&Yt(this,e.call(t.validateStyle,t.extend({key:n,style:this.serialize(),value:r,styleSpec:t.spec},i)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const t in this._layers)this._layers[t].setEventedParent(null);for(const t in this.sourceCaches){const e=this.sourceCaches[t];e.setEventedParent(null),e.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(t){this.sourceCaches[t].clearTiles()}_reloadSource(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()}_updateSources(t){for(const e in this.sourceCaches)this.sourceCaches[e].update(t,this.terrain)}_generateCollisionBoxes(){for(const t in this.sourceCaches)this._reloadSource(t)}_updatePlacement(e,n,r,i,a=!1){let o=!1,s=!1;const l={};for(const t of this._order){const n=this._layers[t];if("symbol"!==n.type)continue;if(!l[n.source]){const t=this.sourceCaches[n.source];l[n.source]=t.getRenderableIds(!0).map((e=>t.getTileByID(e))).sort(((t,e)=>e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)))}const r=this.crossTileSymbolIndex.addLayer(n,l[n.source],e.center.lng);o=o||r}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((a=a||this._layerOrderChanged||0===r)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.exported.now(),e.zoom))&&(this.pauseablePlacement=new jt(e,this.terrain,this._order,a,n,r,i,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.exported.now()),s=!0),o&&this.pauseablePlacement.placement.setStale()),s||o)for(const t of this._order){const e=this._layers[t];"symbol"===e.type&&this.placement.updateLayerOpacities(e,l[e.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.exported.now())}_releaseSymbolFadeTiles(){for(const t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,e,n){this.imageManager.getImages(e.icons,n),this._updateTilesForChangedImages();const r=this.sourceCaches[e.source];r&&r.setDependencies(e.tileID.key,e.type,e.icons)}getGlyphs(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)}getResource(e,n,r){return t.makeRequest(n,r)}}ee.getSourceType=function(t){return A[t]},ee.setSourceType=function(t,e){A[t]=e},ee.registerForPluginStateChange=t.registerForPluginStateChange;var ne="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const re={prelude:ie("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}"),background:ie("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:ie("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:ie("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:ie("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:ie("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),heatmapTexture:ie("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:ie("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:ie("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:ie("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:ie("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:ie("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:ie("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:ie("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:ie("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat baseDelta=10.0;float ele=get_elevation(a_centroid);\n#else\nfloat baseDelta=0.0;float ele=0.0;\n#endif\nbase=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:ie("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat baseDelta=10.0;float ele=get_elevation(a_centroid);\n#else\nfloat baseDelta=0.0;float ele=0.0;\n#endif\nbase=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:ie("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ie("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:ie("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:ie("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:ie("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:ie("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:ie("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:ie("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:ie("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:ie("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:ie("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",ne),terrainDepth:ie("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",ne),terrainCoords:ie("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",ne)};function ie(t,e){const n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=e.match(/attribute ([\w]+) ([\w]+)/g),i=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=a?a.concat(i):i,s={};return{fragmentSource:t=t.replace(n,((t,e,n,r,i)=>(s[i]=!0,"define"===e?`\n#ifndef HAS_UNIFORM_u_${i}\nvarying ${n} ${r} ${i};\n#else\nuniform ${n} ${r} u_${i};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${i}\n    ${n} ${r} ${i} = u_${i};\n#endif\n`))),vertexSource:e=e.replace(n,((t,e,n,r,i)=>{const a="float"===r?"vec2":"vec4",o=i.match(/color/)?"color":a;return s[i]?"define"===e?`\n#ifndef HAS_UNIFORM_u_${i}\nuniform lowp float u_${i}_t;\nattribute ${n} ${a} a_${i};\nvarying ${n} ${r} ${i};\n#else\nuniform ${n} ${r} u_${i};\n#endif\n`:"vec4"===o?`\n#ifndef HAS_UNIFORM_u_${i}\n    ${i} = a_${i};\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${i}\n    ${i} = unpack_mix_${o}(a_${i}, u_${i}_t);\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`:"define"===e?`\n#ifndef HAS_UNIFORM_u_${i}\nuniform lowp float u_${i}_t;\nattribute ${n} ${a} a_${i};\n#else\nuniform ${n} ${r} u_${i};\n#endif\n`:"vec4"===o?`\n#ifndef HAS_UNIFORM_u_${i}\n    ${n} ${r} ${i} = a_${i};\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${i}\n    ${n} ${r} ${i} = unpack_mix_${o}(a_${i}, u_${i}_t);\n#else\n    ${n} ${r} ${i} = u_${i};\n#endif\n`})),staticAttributes:r,staticUniforms:o}}class ae{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,e,n,r,i,a,o,s,l){this.context=t;let c=this.boundPaintVertexBuffers.length!==r.length;for(let u=0;!c&&u<r.length;u++)this.boundPaintVertexBuffers[u]!==r[u]&&(c=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===n&&!c&&this.boundIndexBuffer===i&&this.boundVertexOffset===a&&this.boundDynamicVertexBuffer===o&&this.boundDynamicVertexBuffer2===s&&this.boundDynamicVertexBuffer3===l?(t.bindVertexArrayOES.set(this.vao),o&&o.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind(),l&&l.bind()):this.freshBind(e,n,r,i,a,o,s,l)}freshBind(t,e,n,r,i,a,o,s){let l;const c=t.numAttributes,u=this.context,h=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),l=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=a,this.boundDynamicVertexBuffer2=o,this.boundDynamicVertexBuffer3=s;else{l=u.currentNumAttributes||0;for(let t=c;t<l;t++)h.disableVertexAttribArray(t)}e.enableAttributes(h,t);for(const d of n)d.enableAttributes(h,t);a&&a.enableAttributes(h,t),o&&o.enableAttributes(h,t),s&&s.enableAttributes(h,t),e.bind(),e.setVertexAttribPointers(h,t,i);for(const d of n)d.bind(),d.setVertexAttribPointers(h,t,i);a&&(a.bind(),a.setVertexAttribPointers(h,t,i)),r&&r.bind(),o&&(o.bind(),o.setVertexAttribPointers(h,t,i)),s&&(s.bind(),s.setVertexAttribPointers(h,t,i)),u.currentNumAttributes=c}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function oe(t){const e=[];for(let n=0;n<t.length;n++){if(null===t[n])continue;const r=t[n].split(" ");e.push(r.pop())}return e}class se{constructor(e,n,r,i,a,o,s){const l=e.gl;this.program=l.createProgram();const c=oe(r.staticAttributes),u=i?i.getBinderAttributes():[],h=c.concat(u),d=re.prelude.staticUniforms?oe(re.prelude.staticUniforms):[],p=r.staticUniforms?oe(r.staticUniforms):[],f=i?i.getBinderUniforms():[],m=d.concat(p).concat(f),g=[];for(const t of m)g.indexOf(t)<0&&g.push(t);const y=i?i.defines():[];o&&y.push("#define OVERDRAW_INSPECTOR;"),s&&y.push("#define TERRAIN3D;");const v=y.concat(re.prelude.fragmentSource,r.fragmentSource).join("\n"),_=y.concat(re.prelude.vertexSource,r.vertexSource).join("\n"),x=l.createShader(l.FRAGMENT_SHADER);if(l.isContextLost())return void(this.failedToCreate=!0);l.shaderSource(x,v),l.compileShader(x),l.attachShader(this.program,x);const b=l.createShader(l.VERTEX_SHADER);if(l.isContextLost())return void(this.failedToCreate=!0);l.shaderSource(b,_),l.compileShader(b),l.attachShader(this.program,b),this.attributes={};const w={};this.numAttributes=h.length;for(let t=0;t<this.numAttributes;t++)h[t]&&(l.bindAttribLocation(this.program,t,h[t]),this.attributes[h[t]]=t);l.linkProgram(this.program),l.deleteShader(b),l.deleteShader(x);for(let t=0;t<g.length;t++){const e=g[t];if(e&&!w[e]){const t=l.getUniformLocation(this.program,e);t&&(w[e]=t)}}this.fixedUniforms=a(e,w),this.terrainUniforms=((e,n)=>({u_depth:new t.Uniform1i(e,n.u_depth),u_terrain:new t.Uniform1i(e,n.u_terrain),u_terrain_dim:new t.Uniform1f(e,n.u_terrain_dim),u_terrain_matrix:new t.UniformMatrix4f(e,n.u_terrain_matrix),u_terrain_unpack:new t.Uniform4f(e,n.u_terrain_unpack),u_terrain_offset:new t.Uniform1f(e,n.u_terrain_offset),u_terrain_exaggeration:new t.Uniform1f(e,n.u_terrain_exaggeration)}))(e,w),this.binderUniforms=i?i.getUniforms(e,w):[]}draw(t,e,n,r,i,a,o,s,l,c,u,h,d,p,f,m,g,y){const v=t.gl;if(this.failedToCreate)return;if(t.program.set(this.program),t.setDepthMode(n),t.setStencilMode(r),t.setColorMode(i),t.setCullFace(a),s){t.activeTexture.set(v.TEXTURE2),v.bindTexture(v.TEXTURE_2D,s.depthTexture),t.activeTexture.set(v.TEXTURE3),v.bindTexture(v.TEXTURE_2D,s.texture);for(const t in this.terrainUniforms)this.terrainUniforms[t].set(s[t])}for(const x in this.fixedUniforms)this.fixedUniforms[x].set(o[x]);f&&f.setUniforms(t,this.binderUniforms,d,{zoom:p});let _=0;switch(e){case v.LINES:_=2;break;case v.TRIANGLES:_=3;break;case v.LINE_STRIP:_=1}for(const x of h.get()){const n=x.vaos||(x.vaos={});(n[l]||(n[l]=new ae)).bind(t,this,c,f?f.getPaintVertexBuffers():[],u,x.vertexOffset,m,g,y),v.drawElements(e,x.primitiveLength*_,v.UNSIGNED_SHORT,x.primitiveOffset*_*2)}}}function le(t,e,n){const r=1/bt(n,1,e.transform.tileZoom),i=Math.pow(2,n.tileID.overscaledZ),a=n.tileSize*Math.pow(2,e.transform.tileZoom)/i,o=a*(n.tileID.canonical.x+n.tileID.wrap*i),s=a*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[r,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[o>>16,s>>16],u_pixel_coord_lower:[65535&o,65535&s]}}const ce=(e,n,r,i)=>{const a=n.style.light,o=a.properties.get("position"),s=[o.x,o.y,o.z],l=t.create$1();"viewport"===a.properties.get("anchor")&&t.fromRotation(l,-n.transform.angle),t.transformMat3(s,s,l);const c=a.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:a.properties.get("intensity"),u_lightcolor:[c.r,c.g,c.b],u_vertical_gradient:+r,u_opacity:i}},ue=(e,n,r,i,a,o,s)=>t.extend(ce(e,n,r,i),le(o,n,s),{u_height_factor:-Math.pow(2,a.overscaledZ)/s.tileSize/8}),he=t=>({u_matrix:t}),de=(e,n,r,i)=>t.extend(he(e),le(r,n,i)),pe=(t,e)=>({u_matrix:t,u_world:e}),fe=(e,n,r,i,a)=>t.extend(de(e,n,r,i),{u_world:a}),me=(t,e,n,r)=>{const i=t.transform;let a,o;if("map"===r.paint.get("circle-pitch-alignment")){const t=bt(n,1,i.zoom);a=!0,o=[t,t]}else a=!1,o=i.pixelsToGLUnits;return{u_camera_to_center_distance:i.cameraToCenterDistance,u_scale_with_map:+("map"===r.paint.get("circle-pitch-scale")),u_matrix:t.translatePosMatrix(e.posMatrix,n,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_pitch_with_map:+a,u_device_pixel_ratio:t.pixelRatio,u_extrude_scale:o}},ge=(t,e,n)=>{const r=bt(n,1,e.zoom),i=Math.pow(2,e.zoom-n.tileID.overscaledZ),a=n.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:r,u_extrude_scale:[e.pixelsToGLUnits[0]/(r*i),e.pixelsToGLUnits[1]/(r*i)],u_overscale_factor:a}},ye=(t,e,n=1)=>({u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:n}),ve=t=>({u_matrix:t}),_e=(t,e,n,r)=>({u_matrix:t,u_extrude_scale:bt(e,1,n),u_intensity:r});function xe(e,n){const r=Math.pow(2,n.canonical.z),i=n.canonical.y;return[new t.MercatorCoordinate(0,i/r).toLngLat().lat,new t.MercatorCoordinate(0,(i+1)/r).toLngLat().lat]}const be=(t,e,n,r)=>{const i=t.transform;return{u_matrix:ke(t,e,n,r),u_ratio:1/bt(e,1,i.zoom),u_device_pixel_ratio:t.pixelRatio,u_units_to_pixels:[1/i.pixelsToGLUnits[0],1/i.pixelsToGLUnits[1]]}},we=(e,n,r,i,a)=>t.extend(be(e,n,r,a),{u_image:0,u_image_height:i}),Se=(t,e,n,r,i)=>{const a=t.transform,o=Ee(e,a);return{u_matrix:ke(t,e,n,i),u_texsize:e.imageAtlasTexture.size,u_ratio:1/bt(e,1,a.zoom),u_device_pixel_ratio:t.pixelRatio,u_image:0,u_scale:[o,r.fromScale,r.toScale],u_fade:r.t,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]]}},Me=(e,n,r,i,a,o)=>{const s=e.lineAtlas,l=Ee(n,e.transform),c="round"===r.layout.get("line-cap"),u=s.getDash(i.from,c),h=s.getDash(i.to,c),d=u.width*a.fromScale,p=h.width*a.toScale;return t.extend(be(e,n,r,o),{u_patternscale_a:[l/d,-u.height/2],u_patternscale_b:[l/p,-h.height/2],u_sdfgamma:s.width/(256*Math.min(d,p)*e.pixelRatio)/2,u_image:0,u_tex_y_a:u.y,u_tex_y_b:h.y,u_mix:a.t})};function Ee(t,e){return 1/bt(t,1,e.tileZoom)}function ke(t,e,n,r){return t.translatePosMatrix(r?r.posMatrix:e.tileID.posMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}const Te=(t,e,n,r,i)=>{return{u_matrix:t,u_tl_parent:e,u_scale_parent:n,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(o=i.paint.get("raster-saturation"),o>0?1-1/(1.001-o):-o),u_contrast_factor:(a=i.paint.get("raster-contrast"),a>0?1/(1-a):1+a),u_spin_weights:Ce(i.paint.get("raster-hue-rotate"))};var a,o};function Ce(t){t*=Math.PI/180;const e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}const Ie=(t,e,n,r,i,a,o,s,l,c)=>{const u=i.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:u.cameraToCenterDistance,u_pitch:u.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:u.width/u.height,u_fade_change:i.options.fadeDuration?i.symbolFadeChange:1,u_matrix:a,u_label_plane_matrix:o,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+r,u_texsize:c,u_texture:0}},Pe=(e,n,r,i,a,o,s,l,c,u,h)=>{const d=a.transform;return t.extend(Ie(e,n,r,i,a,o,s,l,c,u),{u_gamma_scale:i?Math.cos(d._pitch)*d.cameraToCenterDistance:1,u_device_pixel_ratio:a.pixelRatio,u_is_halo:+h})},Ae=(e,n,r,i,a,o,s,l,c,u)=>t.extend(Pe(e,n,r,i,a,o,s,l,!0,c,!0),{u_texsize_icon:u,u_texture_icon:1}),ze=(t,e,n)=>({u_matrix:t,u_opacity:e,u_color:n}),Le=(e,n,r,i,a,o)=>t.extend(function(t,e,n,r){const i=n.imageManager.getPattern(t.from.toString()),a=n.imageManager.getPattern(t.to.toString()),{width:o,height:s}=n.imageManager.getPixelSize(),l=Math.pow(2,r.tileID.overscaledZ),c=r.tileSize*Math.pow(2,n.transform.tileZoom)/l,u=c*(r.tileID.canonical.x+r.tileID.wrap*l),h=c*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:a.tl,u_pattern_br_b:a.br,u_texsize:[o,s],u_mix:e.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:a.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/bt(r,1,n.transform.tileZoom),u_pixel_coord_upper:[u>>16,h>>16],u_pixel_coord_lower:[65535&u,65535&h]}}(i,o,r,a),{u_matrix:e,u_opacity:n}),Re={fillExtrusion:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_opacity:new t.Uniform1f(e,n.u_opacity)}),fillExtrusionPattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,n.u_height_factor),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade),u_opacity:new t.Uniform1f(e,n.u_opacity)}),fill:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}),fillPattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}),fillOutline:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world)}),fillOutlinePattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}),circle:(e,n)=>({u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,n.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}),collisionBox:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,n.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,n.u_overscale_factor)}),collisionCircle:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_inv_matrix:new t.UniformMatrix4f(e,n.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(e,n.u_viewport_size)}),debug:(e,n)=>({u_color:new t.UniformColor(e,n.u_color),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_overlay:new t.Uniform1i(e,n.u_overlay),u_overlay_scale:new t.Uniform1f(e,n.u_overlay_scale)}),clippingMask:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}),heatmap:(e,n)=>({u_extrude_scale:new t.Uniform1f(e,n.u_extrude_scale),u_intensity:new t.Uniform1f(e,n.u_intensity),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}),heatmapTexture:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_color_ramp:new t.Uniform1i(e,n.u_color_ramp),u_opacity:new t.Uniform1f(e,n.u_opacity)}),hillshade:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_latrange:new t.Uniform2f(e,n.u_latrange),u_light:new t.Uniform2f(e,n.u_light),u_shadow:new t.UniformColor(e,n.u_shadow),u_highlight:new t.UniformColor(e,n.u_highlight),u_accent:new t.UniformColor(e,n.u_accent)}),hillshadePrepare:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_dimension:new t.Uniform2f(e,n.u_dimension),u_zoom:new t.Uniform1f(e,n.u_zoom),u_unpack:new t.Uniform4f(e,n.u_unpack)}),line:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels)}),lineGradient:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_image:new t.Uniform1i(e,n.u_image),u_image_height:new t.Uniform1f(e,n.u_image_height)}),linePattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_texsize:new t.Uniform2f(e,n.u_texsize),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_image:new t.Uniform1i(e,n.u_image),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}),lineSDF:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,n.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,n.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,n.u_sdfgamma),u_image:new t.Uniform1i(e,n.u_image),u_tex_y_a:new t.Uniform1f(e,n.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,n.u_tex_y_b),u_mix:new t.Uniform1f(e,n.u_mix)}),raster:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_tl_parent:new t.Uniform2f(e,n.u_tl_parent),u_scale_parent:new t.Uniform1f(e,n.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,n.u_buffer_scale),u_fade_t:new t.Uniform1f(e,n.u_fade_t),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image0:new t.Uniform1i(e,n.u_image0),u_image1:new t.Uniform1i(e,n.u_image1),u_brightness_low:new t.Uniform1f(e,n.u_brightness_low),u_brightness_high:new t.Uniform1f(e,n.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,n.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,n.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,n.u_spin_weights)}),symbolIcon:(e,n)=>({u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture)}),symbolSDF:(e,n)=>({u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,n.u_is_halo)}),symbolTextAndIcon:(e,n)=>({u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texsize_icon:new t.Uniform2f(e,n.u_texsize_icon),u_texture:new t.Uniform1i(e,n.u_texture),u_texture_icon:new t.Uniform1i(e,n.u_texture_icon),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,n.u_is_halo)}),background:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_color:new t.UniformColor(e,n.u_color)}),backgroundPattern:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image:new t.Uniform1i(e,n.u_image),u_pattern_tl_a:new t.Uniform2f(e,n.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,n.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,n.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,n.u_pattern_br_b),u_texsize:new t.Uniform2f(e,n.u_texsize),u_mix:new t.Uniform1f(e,n.u_mix),u_pattern_size_a:new t.Uniform2f(e,n.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,n.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,n.u_scale_a),u_scale_b:new t.Uniform1f(e,n.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,n.u_tile_units_to_pixels)}),terrain:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_texture:new t.Uniform1i(e,n.u_texture)}),terrainDepth:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}),terrainCoords:(e,n)=>({u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_texture:new t.Uniform1i(e,n.u_texture),u_terrain_coords_id:new t.Uniform1f(e,n.u_terrain_coords_id)})};class De{constructor(t,e,n){this.context=t;const r=t.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const e=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Oe={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Be{constructor(t,e,n,r){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=r,this.context=t;const i=t.gl;this.buffer=i.createBuffer(),t.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){if(t.length!==this.length)throw new Error(`Length of new data is ${t.length}, which doesn't match current length of ${this.length}`);const e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,e){for(let n=0;n<this.attributes.length;n++){const r=e.attributes[this.attributes[n].name];void 0!==r&&t.enableVertexAttribArray(r)}}setVertexAttribPointers(t,e,n){for(let r=0;r<this.attributes.length;r++){const i=this.attributes[r],a=e.attributes[i.name];void 0!==a&&t.vertexAttribPointer(a,i.components,t[Oe[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Fe{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ne extends Fe{getDefault(){return t.Color.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class Ze extends Fe{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class Ue extends Fe{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class je extends Fe{getDefault(){return[!0,!0,!0,!0]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class Ve extends Fe{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class qe extends Fe{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class $e extends Fe{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class Ge extends Fe{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class We extends Fe{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}}class He extends Fe{getDefault(){return[0,1]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class Xe extends Fe{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}}class Ke extends Fe{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class Ye extends Fe{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}}class Je extends Fe{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class Qe extends Fe{getDefault(){return t.Color.transparent}set(t){const e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class tn extends Fe{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class en extends Fe{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}}class nn extends Fe{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class rn extends Fe{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class an extends Fe{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class on extends Fe{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class sn extends Fe{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class ln extends Fe{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class cn extends Fe{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class un extends Fe{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class hn extends Fe{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class dn extends Fe{getDefault(){return null}set(t){const e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class pn extends Fe{constructor(t){super(t),this.vao=t.extVertexArrayObject}getDefault(){return null}set(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)}}class fn extends Fe{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class mn extends Fe{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class gn extends Fe{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class yn extends Fe{constructor(t,e){super(t),this.context=t,this.parent=e}getDefault(){return null}}class vn extends yn{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class _n extends yn{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class xn{constructor(t,e,n,r){this.context=t,this.width=e,this.height=n;const i=t.gl,a=this.framebuffer=i.createFramebuffer();if(this.colorAttachment=new vn(t,a),r&&(this.depthAttachment=new _n(t,a)),i.checkFramebufferStatus(i.FRAMEBUFFER)!==i.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){const e=this.depthAttachment.get();e&&t.deleteRenderbuffer(e)}t.deleteFramebuffer(this.framebuffer)}}class bn{constructor(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n}}bn.Replace=[1,0],bn.disabled=new bn(bn.Replace,t.Color.transparent,[!1,!1,!1,!1]),bn.unblended=new bn(bn.Replace,t.Color.transparent,[!0,!0,!0,!0]),bn.alphaBlended=new bn([1,771],t.Color.transparent,[!0,!0,!0,!0]);class wn{constructor(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Ne(this),this.clearDepth=new Ze(this),this.clearStencil=new Ue(this),this.colorMask=new je(this),this.depthMask=new Ve(this),this.stencilMask=new qe(this),this.stencilFunc=new $e(this),this.stencilOp=new Ge(this),this.stencilTest=new We(this),this.depthRange=new He(this),this.depthTest=new Xe(this),this.depthFunc=new Ke(this),this.blend=new Ye(this),this.blendFunc=new Je(this),this.blendColor=new Qe(this),this.blendEquation=new tn(this),this.cullFace=new en(this),this.cullFaceSide=new nn(this),this.frontFace=new rn(this),this.program=new an(this),this.activeTexture=new on(this),this.viewport=new sn(this),this.bindFramebuffer=new ln(this),this.bindRenderbuffer=new cn(this),this.bindTexture=new un(this),this.bindVertexBuffer=new hn(this),this.bindElementBuffer=new dn(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new pn(this),this.pixelStoreUnpack=new fn(this),this.pixelStoreUnpackPremultiplyAlpha=new mn(this),this.pixelStoreUnpackFlipY=new gn(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,e){return new De(this,t,e)}createVertexBuffer(t,e,n){return new Be(this,t,e,n)}createRenderbuffer(t,e,n){const r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),i}createFramebuffer(t,e,n){return new xn(this,t,e,n)}clear({color:t,depth:e}){const n=this.gl;let r=0;t&&(r|=n.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==e&&(r|=n.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(e),this.depthMask.set(!0)),n.clear(r)}setCullFace(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){i(t.blendFunction,bn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Sn{constructor(t,e,n){this.func=t,this.mask=e,this.range=n}}Sn.ReadOnly=!1,Sn.ReadWrite=!0,Sn.disabled=new Sn(519,Sn.ReadOnly,[0,1]);const Mn=7680;class En{constructor(t,e,n,r,i,a){this.test=t,this.ref=e,this.mask=n,this.fail=r,this.depthFail=i,this.pass=a}}En.disabled=new En({func:519,mask:0},0,0,Mn,Mn,Mn);class kn{constructor(t,e,n){this.enable=t,this.mode=e,this.frontFace=n}}let Tn;function Cn(e,n,r,i,a,o,s){const l=e.context,c=l.gl,u=e.useProgram("collisionBox"),h=[];let d=0,p=0;for(let x=0;x<i.length;x++){const f=i[x],m=n.getTile(f),g=m.getBucket(r);if(!g)continue;let y=f.posMatrix;0===a[0]&&0===a[1]||(y=e.translatePosMatrix(f.posMatrix,m,a,o));const v=s?g.textCollisionBox:g.iconCollisionBox,_=g.collisionCircleArray;if(_.length>0){const n=t.create(),r=y;t.mul(n,g.placementInvProjMatrix,e.transform.glCoordMatrix),t.mul(n,n,g.placementViewportMatrix),h.push({circleArray:_,circleOffset:p,transform:r,invTransform:n,coord:f}),d+=_.length/4,p=d}v&&u.draw(l,c.LINES,Sn.disabled,En.disabled,e.colorModeForRenderPass(),kn.disabled,ge(y,e.transform,m),e.style.terrain&&e.style.terrain.getTerrainData(f),r.id,v.layoutVertexBuffer,v.indexBuffer,v.segments,null,e.transform.zoom,null,null,v.collisionVertexBuffer)}if(!s||!h.length)return;const f=e.useProgram("collisionCircle"),m=new t.CollisionCircleLayoutArray;m.resize(4*d),m._trim();let g=0;for(const t of h)for(let e=0;e<t.circleArray.length/4;e++){const n=4*e,r=t.circleArray[n+0],i=t.circleArray[n+1],a=t.circleArray[n+2],o=t.circleArray[n+3];m.emplace(g++,r,i,a,o,0),m.emplace(g++,r,i,a,o,1),m.emplace(g++,r,i,a,o,2),m.emplace(g++,r,i,a,o,3)}(!Tn||Tn.length<2*d)&&(Tn=function(e){const n=2*e,r=new t.QuadTriangleArray;r.resize(n),r._trim();for(let t=0;t<n;t++){const e=6*t;r.uint16[e+0]=4*t+0,r.uint16[e+1]=4*t+1,r.uint16[e+2]=4*t+2,r.uint16[e+3]=4*t+2,r.uint16[e+4]=4*t+3,r.uint16[e+5]=4*t+0}return r}(d));const y=l.createIndexBuffer(Tn,!0),v=l.createVertexBuffer(m,t.collisionCircleLayout.members,!0);for(const x of h){const n={u_matrix:x.transform,u_inv_matrix:x.invTransform,u_camera_to_center_distance:(_=e.transform).cameraToCenterDistance,u_viewport_size:[_.width,_.height]};f.draw(l,c.TRIANGLES,Sn.disabled,En.disabled,e.colorModeForRenderPass(),kn.disabled,n,e.style.terrain&&e.style.terrain.getTerrainData(x.coord),r.id,v,y,t.SegmentVector.simpleSegment(0,2*x.circleOffset,x.circleArray.length,x.circleArray.length/2),null,e.transform.zoom,null,null,null)}var _;v.destroy(),y.destroy()}kn.disabled=new kn(!1,1029,2305),kn.backCCW=new kn(!0,1029,2305);const In=t.identity(new Float32Array(16));function Pn(e,n,r,i,a,o){const{horizontalAlign:s,verticalAlign:l}=t.getAnchorAlignment(e),c=-(s-.5)*n,u=-(l-.5)*r,h=t.evaluateVariableOffset(e,i);return new t.pointGeometry((c/a+h[0])*o,(u/a+h[1])*o)}function An(e,n,r,i,a,o,s,l,c,u,h){const d=e.text.placedSymbolArray,p=e.text.dynamicLayoutVertexArray,f=e.icon.dynamicLayoutVertexArray,m={};p.clear();for(let g=0;g<d.length;g++){const f=d.get(g),y=e.allowVerticalPlacement&&!f.placedOrientation,v=f.hidden||!f.crossTileID||y?null:i[f.crossTileID];if(v){const i=new t.pointGeometry(f.anchorX,f.anchorY),d=st(i,r?s:o,h),g=lt(a.cameraToCenterDistance,d.signedDistanceFromCamera);let y=t.evaluateSizeForFeature(e.textSizeData,c,f)*g/t.ONE_EM;r&&(y*=e.tilePixelRatio/l);const{width:_,height:x,anchor:b,textOffset:w,textBoxScale:S}=v,M=Pn(b,_,x,w,S,y),E=r?st(i.add(M),o,h).point:d.point.add(n?M.rotate(-a.angle):M),k=e.allowVerticalPlacement&&f.placedOrientation===t.WritingMode.vertical?Math.PI/2:0;for(let e=0;e<f.numGlyphs;e++)t.addDynamicAttributes(p,E,k);u&&f.associatedIconIndex>=0&&(m[f.associatedIconIndex]={shiftedAnchor:E,angle:k})}else yt(f.numGlyphs,p)}if(u){f.clear();const n=e.icon.placedSymbolArray;for(let e=0;e<n.length;e++){const r=n.get(e);if(r.hidden)yt(r.numGlyphs,f);else{const n=m[e];if(n)for(let e=0;e<r.numGlyphs;e++)t.addDynamicAttributes(f,n.shiftedAnchor,n.angle);else yt(r.numGlyphs,f)}}e.icon.dynamicLayoutVertexBuffer.updateData(f)}e.text.dynamicLayoutVertexBuffer.updateData(p)}function zn(t,e,n){return n.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function Ln(e,n,r,i,a,o,s,l,c,u,h,d){const p=e.context,f=p.gl,m=e.transform,g="map"===l,y="map"===c,v="viewport"!==l&&"point"!==r.layout.get("symbol-placement"),_=g&&!y&&!v,x=!r.layout.get("symbol-sort-key").isConstant();let b=!1;const w=e.depthModeForSublayer(0,Sn.ReadOnly),S=r.layout.get("text-variable-anchor"),M=[];for(const E of i){const i=n.getTile(E),l=i.getBucket(r);if(!l)continue;const c=a?l.text:l.icon;if(!c||!c.segments.get().length)continue;const h=c.programConfigurations.get(r.id),d=a||l.sdfIcons,p=a?l.textSizeData:l.iconSizeData,w=y||0!==m.pitch,k=e.useProgram(zn(d,a,l),h),T=t.evaluateSizeForZoom(p,m.zoom),C=e.style.terrain&&e.style.terrain.getTerrainData(E);let I,P,A,z,L=[0,0],R=null;if(a){if(P=i.glyphAtlasTexture,A=f.LINEAR,I=i.glyphAtlasTexture.size,l.iconsInText){L=i.imageAtlasTexture.size,R=i.imageAtlasTexture;const t="composite"===p.kind||"camera"===p.kind;z=w||e.options.rotating||e.options.zooming||t?f.LINEAR:f.NEAREST}}else{const t=1!==r.layout.get("icon-size").constantOr(0)||l.iconsNeedLinear;P=i.imageAtlasTexture,A=d||e.options.rotating||e.options.zooming||t||w?f.LINEAR:f.NEAREST,I=i.imageAtlasTexture.size}const D=bt(i,1,e.transform.zoom),O=at(E.posMatrix,y,g,e.transform,D),B=ot(E.posMatrix,y,g,e.transform,D),F=S&&l.hasTextData(),N="none"!==r.layout.get("icon-text-fit")&&F&&l.hasIconData();if(v){const t=e.style.terrain?(t,n)=>e.style.terrain.getElevation(E,t,n):null,n="map"===r.layout.get("text-rotation-alignment");ut(l,E.posMatrix,e,a,O,B,y,u,n,t)}const Z=e.translatePosMatrix(E.posMatrix,i,o,s),U=v||a&&S||N?In:O,j=e.translatePosMatrix(B,i,o,s,!0),V=d&&0!==r.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1);let q;q=d?l.iconsInText?Ae(p.kind,T,_,y,e,Z,U,j,I,L):Pe(p.kind,T,_,y,e,Z,U,j,a,I,!0):Ie(p.kind,T,_,y,e,Z,U,j,a,I);const $={program:k,buffers:c,uniformValues:q,atlasTexture:P,atlasTextureIcon:R,atlasInterpolation:A,atlasInterpolationIcon:z,isSDF:d,hasHalo:V};if(x&&l.canOverlap){b=!0;const e=c.segments.get();for(const n of e)M.push({segments:new t.SegmentVector([n]),sortKey:n.sortKey,state:$,terrainData:C})}else M.push({segments:c.segments,sortKey:0,state:$,terrainData:C})}b&&M.sort(((t,e)=>t.sortKey-e.sortKey));for(const t of M){const n=t.state;if(p.activeTexture.set(f.TEXTURE0),n.atlasTexture.bind(n.atlasInterpolation,f.CLAMP_TO_EDGE),n.atlasTextureIcon&&(p.activeTexture.set(f.TEXTURE1),n.atlasTextureIcon&&n.atlasTextureIcon.bind(n.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),n.isSDF){const i=n.uniformValues;n.hasHalo&&(i.u_is_halo=1,Rn(n.buffers,t.segments,r,e,n.program,w,h,d,i,t.terrainData)),i.u_is_halo=0}Rn(n.buffers,t.segments,r,e,n.program,w,h,d,n.uniformValues,t.terrainData)}}function Rn(t,e,n,r,i,a,o,s,l,c){const u=r.context;i.draw(u,u.gl.TRIANGLES,a,o,s,kn.disabled,l,c,n.id,t.layoutVertexBuffer,t.indexBuffer,e,n.paint,r.transform.zoom,t.programConfigurations.get(n.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function Dn(t,e,n,r,i,a,o){const s=t.context.gl,l=n.paint.get("fill-pattern"),c=l&&l.constantOr(1),u=n.getCrossfadeParameters();let h,d,p,f,m;o?(d=c&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",h=s.LINES):(d=c?"fillPattern":"fill",h=s.TRIANGLES);for(const g of r){const r=e.getTile(g);if(c&&!r.patternsLoaded())continue;const y=r.getBucket(n);if(!y)continue;const v=y.programConfigurations.get(n.id),_=t.useProgram(d,v),x=t.style.terrain&&t.style.terrain.getTerrainData(g);c&&(t.context.activeTexture.set(s.TEXTURE0),r.imageAtlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE),v.updatePaintBuffers(u));const b=l.constantOr(null);if(b&&r.imageAtlas){const t=r.imageAtlas,e=t.patternPositions[b.to.toString()],n=t.patternPositions[b.from.toString()];e&&n&&v.setConstantPatternPositions(e,n)}const w=x?g:null,S=t.translatePosMatrix(w?w.posMatrix:g.posMatrix,r,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(o){f=y.indexBuffer2,m=y.segments2;const e=[s.drawingBufferWidth,s.drawingBufferHeight];p="fillOutlinePattern"===d&&c?fe(S,t,u,r,e):pe(S,e)}else f=y.indexBuffer,m=y.segments,p=c?de(S,t,u,r):he(S);_.draw(t.context,h,i,t.stencilModeForClipping(g),a,kn.disabled,p,x,n.id,y.layoutVertexBuffer,f,m,n.paint,t.transform.zoom,v)}}function On(t,e,n,r,i,a,o){const s=t.context,l=s.gl,c=n.paint.get("fill-extrusion-pattern"),u=c.constantOr(1),h=n.getCrossfadeParameters(),d=n.paint.get("fill-extrusion-opacity");for(const p of r){const r=e.getTile(p),f=r.getBucket(n);if(!f)continue;const m=t.style.terrain&&t.style.terrain.getTerrainData(p),g=f.programConfigurations.get(n.id),y=t.useProgram(u?"fillExtrusionPattern":"fillExtrusion",g);u&&(t.context.activeTexture.set(l.TEXTURE0),r.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),g.updatePaintBuffers(h));const v=c.constantOr(null);if(v&&r.imageAtlas){const t=r.imageAtlas,e=t.patternPositions[v.to.toString()],n=t.patternPositions[v.from.toString()];e&&n&&g.setConstantPatternPositions(e,n)}const _=t.translatePosMatrix(p.posMatrix,r,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),x=n.paint.get("fill-extrusion-vertical-gradient"),b=u?ue(_,t,x,d,p,h,r):ce(_,t,x,d);y.draw(s,s.gl.TRIANGLES,i,a,o,kn.backCCW,b,m,n.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,n.paint,t.transform.zoom,g,t.style.terrain&&f.centroidVertexBuffer)}}function Bn(t,e,n,r,i,a,o){const s=t.context,l=s.gl,c=n.fbo;if(!c)return;const u=t.useProgram("hillshade"),h=t.style.terrain&&t.style.terrain.getTerrainData(e);s.activeTexture.set(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,c.colorAttachment.get()),u.draw(s,l.TRIANGLES,i,a,o,kn.disabled,((t,e,n,r)=>{const i=n.paint.get("hillshade-shadow-color"),a=n.paint.get("hillshade-highlight-color"),o=n.paint.get("hillshade-accent-color");let s=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(s-=t.transform.angle);const l=!t.options.moving;return{u_matrix:r?r.posMatrix:t.transform.calculatePosMatrix(e.tileID.toUnwrapped(),l),u_image:0,u_latrange:xe(0,e.tileID),u_light:[n.paint.get("hillshade-exaggeration"),s],u_shadow:i,u_highlight:a,u_accent:o}})(t,n,r,h?e:null),h,r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}function Fn(e,n,r,i,a,o){const s=e.context,c=s.gl,u=n.dem;if(u&&u.data){const h=u.dim,d=u.stride,p=u.getPixels();if(s.activeTexture.set(c.TEXTURE1),s.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(d),n.demTexture){const t=n.demTexture;t.update(p,{premultiply:!1}),t.bind(c.NEAREST,c.CLAMP_TO_EDGE)}else n.demTexture=new l(s,p,c.RGBA,{premultiply:!1}),n.demTexture.bind(c.NEAREST,c.CLAMP_TO_EDGE);s.activeTexture.set(c.TEXTURE0);let f=n.fbo;if(!f){const t=new l(s,{width:h,height:h,data:null},c.RGBA);t.bind(c.LINEAR,c.CLAMP_TO_EDGE),f=n.fbo=s.createFramebuffer(h,h,!0),f.colorAttachment.set(t.texture)}s.bindFramebuffer.set(f.framebuffer),s.viewport.set([0,0,h,h]),e.useProgram("hillshadePrepare").draw(s,c.TRIANGLES,i,a,o,kn.disabled,((e,n)=>{const r=n.stride,i=t.create();return t.ortho(i,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(i,i,[0,-t.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:e.overscaledZ,u_unpack:n.getUnpackVector()}})(n.tileID,u),null,r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function Nn(e,n,r,i,a,o){const s=i.paint.get("raster-fade-duration");if(!o&&s>0){const i=t.exported.now(),o=(i-e.timeAdded)/s,l=n?(i-n.timeAdded)/s:-1,c=r.getSource(),u=a.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!n||Math.abs(n.tileID.overscaledZ-u)>Math.abs(e.tileID.overscaledZ-u),d=h&&e.refreshedUponExpiration?1:t.clamp(h?o:1-l,0,1);return e.refreshedUponExpiration&&o>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}const Zn=new t.Color(1,0,0,1),Un=new t.Color(0,1,0,1),jn=new t.Color(0,0,1,1),Vn=new t.Color(1,0,1,1),qn=new t.Color(0,1,1,1);function $n(t,e,n,r){Wn(t,0,e+n/2,t.transform.width,n,r)}function Gn(t,e,n,r){Wn(t,e-n/2,0,n,t.transform.height,r)}function Wn(t,e,n,r,i,a){const o=t.context,s=o.gl;s.enable(s.SCISSOR_TEST),s.scissor(e*t.pixelRatio,n*t.pixelRatio,r*t.pixelRatio,i*t.pixelRatio),o.clear({color:a}),s.disable(s.SCISSOR_TEST)}function Hn(e,n,r){const i=e.context,a=i.gl,o=r.posMatrix,s=e.useProgram("debug"),l=Sn.disabled,c=En.disabled,u=e.colorModeForRenderPass(),h="$debug",d=e.style.terrain&&e.style.terrain.getTerrainData(r);i.activeTexture.set(a.TEXTURE0),e.emptyTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE);const p=n.getTileByID(r.key).latestRawTileData,f=Math.floor((p&&p.byteLength||0)/1024),m=n.getTile(r).tileSize,g=512/Math.min(m,512)*(r.overscaledZ/e.transform.zoom)*.5;let y=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(y+=` => ${r.overscaledZ}`),function(t,e){t.initDebugOverlayCanvas();const n=t.debugOverlayCanvas,r=t.context.gl,i=t.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,n.width,n.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(e,5,5),i.strokeText(e,5,5),t.debugOverlayTexture.update(n),t.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(e,`${y} ${f}kB`),s.draw(i,a.TRIANGLES,l,c,bn.alphaBlended,kn.disabled,ye(o,t.Color.transparent,g),null,h,e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments),s.draw(i,a.LINE_STRIP,l,c,u,kn.disabled,ye(o,t.Color.red),d,h,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments)}function Xn(t,e,n){const r=t.context,i=r.gl,a=t.colorModeForRenderPass(),o=new Sn(i.LEQUAL,Sn.ReadWrite,t.depthRangeFor3D),s=t.useProgram("terrain"),l=e.getTerrainMesh(),c=e.getTerrainData(n.tileID);r.bindFramebuffer.set(null),r.viewport.set([0,0,t.width,t.height]),r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,e.getRTTFramebuffer().colorAttachment.get());const u=t.transform.calculatePosMatrix(n.tileID.toUnwrapped());s.draw(r,i.TRIANGLES,o,En.disabled,a,kn.backCCW,{u_matrix:u,u_texture:0},c,"terrain",l.vertexBuffer,l.indexBuffer,l.segments)}function Kn(t,e,n,r){const i=t.context,a=n.tileSize*e.qualityFactor;n.textures[r]||(n.textures[r]=t.getTileTexture(a)||new l(i,{width:a,height:a,data:null},i.gl.RGBA),n.textures[r].bind(i.gl.LINEAR,i.gl.CLAMP_TO_EDGE),0===r&&e.sourceCache.renderHistory.unshift(n.tileID.key));const o=e.getRTTFramebuffer();o.colorAttachment.set(n.textures[r].texture),i.bindFramebuffer.set(o.framebuffer),i.viewport.set([0,0,a,a])}class Yn{constructor(t){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=t,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=t.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const t=this.painter.style,e=t.terrain;for(const n in t.sourceCaches){this._coordsDescendingInv[n]={};const r=t.sourceCaches[n].getVisibleCoordinates();for(const t of r){const r=e.sourceCache.getTerrainCoords(t);for(const t in r)this._coordsDescendingInv[n][t]||(this._coordsDescendingInv[n][t]=[]),this._coordsDescendingInv[n][t].push(r[t])}}for(const n of t._order){const e=t._layers[n],r=e.source;if(this._renderToTexture[e.type]&&!this._coordsDescendingInvStr[r]){this._coordsDescendingInvStr[r]={};for(const t in this._coordsDescendingInv[r])this._coordsDescendingInvStr[r][t]=this._coordsDescendingInv[r][t].map((t=>t.key)).sort().join()}}return this._renderableTiles.forEach((t=>{for(const n in this._coordsDescendingInvStr){const r=this._coordsDescendingInvStr[n][t.tileID.key];r&&r!==t.textureCoords[n]&&t.clearTextures(this.painter),e.needsRerender(n,t.tileID)&&t.clearTextures(this.painter)}this._rerender[t.tileID.key]=!t.textures.length})),e.clearRerenderCache(),e.sourceCache.removeOutdated(this.painter),this}renderLayer(e){const n=e.type,r=this.painter,i=r.style._order,a=r.currentLayer,o=a+1===i.length;if(this._renderToTexture[n]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=n,this._stacks[this._stacks.length-1].push(i[a]),!o))return!0;if(this._renderToTexture[this._prevType]||"hillshade"===n||this._renderToTexture[n]&&o){this._prevType=n;const o=this._stacks.length-1,s=this._stacks[o]||[];for(const e of this._renderableTiles){if(Kn(r,r.style.terrain,e,o),this._rerender[e.tileID.key]){r.context.clear({color:t.Color.transparent});for(let t=0;t<s.length;t++){const n=r.style._layers[s[t]],i=n.source?this._coordsDescendingInv[n.source][e.tileID.key]:[e.tileID];r._renderTileClippingMasks(n,i),r.renderLayer(r,r.style.sourceCaches[n.source],n,i),n.source&&(e.textureCoords[n.source]=this._coordsDescendingInvStr[n.source][e.tileID.key])}}Xn(r,r.style.terrain,e)}if("hillshade"===n){this._stacks.push([i[a]]);for(const n of this._renderableTiles){const i=this._coordsDescendingInv[e.source][n.tileID.key];Kn(r,r.style.terrain,n,this._stacks.length-1),r.context.clear({color:t.Color.transparent}),r._renderTileClippingMasks(e,i),r.renderLayer(r,r.style.sourceCaches[e.source],e,i),Xn(r,r.style.terrain,n)}return!0}return this._renderToTexture[n]}return!1}}const Jn={symbol:function(e,n,r,i,a){if("translucent"!==e.renderPass)return;const o=En.disabled,s=e.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(e,n,r,i,a,o,s){const l=n.transform,c="map"===a,u="map"===o;for(const h of e){const e=i.getTile(h),a=e.getBucket(r);if(!a||!a.text||!a.text.segments.get().length)continue;const o=t.evaluateSizeForZoom(a.textSizeData,l.zoom),d=bt(e,1,n.transform.zoom),p=at(h.posMatrix,u,c,n.transform,d),f="none"!==r.layout.get("icon-text-fit")&&a.hasIconData();if(o){const t=Math.pow(2,l.zoom-e.tileID.overscaledZ);An(a,c,u,s,l,p,h.posMatrix,t,o,f,n.style.terrain?(t,e)=>n.style.terrain.getElevation(h,t,e):null)}}}(i,e,r,n,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),a),0!==r.paint.get("icon-opacity").constantOr(1)&&Ln(e,n,r,i,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),o,s),0!==r.paint.get("text-opacity").constantOr(1)&&Ln(e,n,r,i,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),o,s),n.map.showCollisionBoxes&&(Cn(e,n,r,i,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),Cn(e,n,r,i,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))},circle:function(e,n,r,i){if("translucent"!==e.renderPass)return;const a=r.paint.get("circle-opacity"),o=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),l=!r.layout.get("circle-sort-key").isConstant();if(0===a.constantOr(1)&&(0===o.constantOr(1)||0===s.constantOr(1)))return;const c=e.context,u=c.gl,h=e.depthModeForSublayer(0,Sn.ReadOnly),d=En.disabled,p=e.colorModeForRenderPass(),f=[];for(let m=0;m<i.length;m++){const a=i[m],o=n.getTile(a),s=o.getBucket(r);if(!s)continue;const c=s.programConfigurations.get(r.id),u=e.useProgram("circle",c),h=s.layoutVertexBuffer,d=s.indexBuffer,p=e.style.terrain&&e.style.terrain.getTerrainData(a),g={programConfiguration:c,program:u,layoutVertexBuffer:h,indexBuffer:d,uniformValues:me(e,a,o,r),terrainData:p};if(l){const e=s.segments.get();for(const n of e)f.push({segments:new t.SegmentVector([n]),sortKey:n.sortKey,state:g})}else f.push({segments:s.segments,sortKey:0,state:g})}l&&f.sort(((t,e)=>t.sortKey-e.sortKey));for(const t of f){const{programConfiguration:n,program:i,layoutVertexBuffer:a,indexBuffer:o,uniformValues:s,terrainData:l}=t.state;i.draw(c,u.TRIANGLES,h,d,p,kn.disabled,s,l,r.id,a,o,t.segments,r.paint,e.transform.zoom,n)}},heatmap:function(e,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){const a=e.context,o=a.gl,s=En.disabled,l=new bn([o.ONE,o.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,n){const r=t.gl;t.activeTexture.set(r.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);let i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),t.bindFramebuffer.set(i.framebuffer);else{const a=r.createTexture();r.bindTexture(r.TEXTURE_2D,a),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),i=n.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1),function(t,e,n,r){const i=t.gl;i.texImage2D(i.TEXTURE_2D,0,i.RGBA,e.width/4,e.height/4,0,i.RGBA,t.extRenderToTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:i.UNSIGNED_BYTE,null),r.colorAttachment.set(n)}(t,e,a,i)}}(a,e,r),a.clear({color:t.Color.transparent});for(let t=0;t<i.length;t++){const c=i[t];if(n.hasRenderableParent(c))continue;const u=n.getTile(c),h=u.getBucket(r);if(!h)continue;const d=h.programConfigurations.get(r.id),p=e.useProgram("heatmap",d),{zoom:f}=e.transform;p.draw(a,o.TRIANGLES,Sn.disabled,s,l,kn.disabled,_e(c.posMatrix,u,f,r.paint.get("heatmap-intensity")),null,r.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,r.paint,e.transform.zoom,d)}a.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){const r=e.context,i=r.gl,a=n.heatmapFbo;if(!a)return;r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,a.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);let o=n.colorRampTexture;o||(o=n.colorRampTexture=new l(r,n.colorRamp,i.RGBA)),o.bind(i.LINEAR,i.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(r,i.TRIANGLES,Sn.disabled,En.disabled,e.colorModeForRenderPass(),kn.disabled,((e,n,r,i)=>{const a=t.create();t.ortho(a,0,e.width,e.height,0,0,1);const o=e.context.gl;return{u_matrix:a,u_world:[o.drawingBufferWidth,o.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:n.paint.get("heatmap-opacity")}})(e,n),null,n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}(e,r))},line:function(e,n,r,i){if("translucent"!==e.renderPass)return;const a=r.paint.get("line-opacity"),o=r.paint.get("line-width");if(0===a.constantOr(1)||0===o.constantOr(1))return;const s=e.depthModeForSublayer(0,Sn.ReadOnly),c=e.colorModeForRenderPass(),u=r.paint.get("line-dasharray"),h=r.paint.get("line-pattern"),d=h.constantOr(1),p=r.paint.get("line-gradient"),f=r.getCrossfadeParameters(),m=d?"linePattern":u?"lineSDF":p?"lineGradient":"line",g=e.context,y=g.gl;let v=!0;for(const _ of i){const i=n.getTile(_);if(d&&!i.patternsLoaded())continue;const a=i.getBucket(r);if(!a)continue;const o=a.programConfigurations.get(r.id),x=e.context.program.get(),b=e.useProgram(m,o),w=v||b.program!==x,S=e.style.terrain&&e.style.terrain.getTerrainData(_),M=h.constantOr(null);if(M&&i.imageAtlas){const t=i.imageAtlas,e=t.patternPositions[M.to.toString()],n=t.patternPositions[M.from.toString()];e&&n&&o.setConstantPatternPositions(e,n)}const E=S?_:null,k=d?Se(e,i,r,f,E):u?Me(e,i,r,u,f,E):p?we(e,i,r,a.lineClipsArray.length,E):be(e,i,r,E);if(d)g.activeTexture.set(y.TEXTURE0),i.imageAtlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),o.updatePaintBuffers(f);else if(u&&(w||e.lineAtlas.dirty))g.activeTexture.set(y.TEXTURE0),e.lineAtlas.bind(g);else if(p){const i=a.gradients[r.id];let o=i.texture;if(r.gradientVersion!==i.version){let s=256;if(r.stepInterpolant){const r=n.getSource().maxzoom,i=_.canonical.z===r?Math.ceil(1<<e.transform.maxZoom-_.canonical.z):1;s=t.clamp(t.nextPowerOfTwo(a.maxLineLength/t.EXTENT*1024*i),256,g.maxTextureSize)}i.gradient=t.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:s,image:i.gradient||void 0,clips:a.lineClipsArray}),i.texture?i.texture.update(i.gradient):i.texture=new l(g,i.gradient,y.RGBA),i.version=r.gradientVersion,o=i.texture}g.activeTexture.set(y.TEXTURE0),o.bind(r.stepInterpolant?y.NEAREST:y.LINEAR,y.CLAMP_TO_EDGE)}b.draw(g,y.TRIANGLES,s,e.stencilModeForClipping(_),c,kn.disabled,k,S,r.id,a.layoutVertexBuffer,a.indexBuffer,a.segments,r.paint,e.transform.zoom,o,a.layoutVertexBuffer2),v=!1}},fill:function(e,n,r,i){const a=r.paint.get("fill-color"),o=r.paint.get("fill-opacity");if(0===o.constantOr(1))return;const s=e.colorModeForRenderPass(),l=r.paint.get("fill-pattern"),c=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===a.constantOr(t.Color.transparent).a&&1===o.constantOr(0)?"opaque":"translucent";if(e.renderPass===c){const t=e.depthModeForSublayer(1,"opaque"===e.renderPass?Sn.ReadWrite:Sn.ReadOnly);Dn(e,n,r,i,t,s,!1)}if("translucent"===e.renderPass&&r.paint.get("fill-antialias")){const t=e.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,Sn.ReadOnly);Dn(e,n,r,i,t,s,!0)}},"fill-extrusion":function(t,e,n,r){const i=n.paint.get("fill-extrusion-opacity");if(0!==i&&"translucent"===t.renderPass){const a=new Sn(t.context.gl.LEQUAL,Sn.ReadWrite,t.depthRangeFor3D);if(1!==i||n.paint.get("fill-extrusion-pattern").constantOr(1))On(t,e,n,r,a,En.disabled,bn.disabled),On(t,e,n,r,a,t.stencilModeFor3D(),t.colorModeForRenderPass());else{const i=t.colorModeForRenderPass();On(t,e,n,r,a,En.disabled,i)}}},hillshade:function(t,e,n,r){if("offscreen"!==t.renderPass&&"translucent"!==t.renderPass)return;const i=t.context,a=t.depthModeForSublayer(0,Sn.ReadOnly),o=t.colorModeForRenderPass(),[s,l]="translucent"===t.renderPass?t.stencilConfigForOverlap(r):[{},r];for(const c of l){const r=e.getTile(c);void 0!==r.needsHillshadePrepare&&r.needsHillshadePrepare&&"offscreen"===t.renderPass?Fn(t,r,n,a,En.disabled,o):"translucent"===t.renderPass&&Bn(t,c,r,n,a,s[c.overscaledZ],o)}i.viewport.set([0,0,t.width,t.height])},raster:function(t,e,n,r){if("translucent"!==t.renderPass)return;if(0===n.paint.get("raster-opacity"))return;if(!r.length)return;const i=t.context,a=i.gl,o=e.getSource(),s=t.useProgram("raster"),l=t.colorModeForRenderPass(),[c,u]=o instanceof C?[{},r]:t.stencilConfigForOverlap(r),h=u[u.length-1].overscaledZ,d=!t.options.moving;for(const p of u){const r=t.depthModeForSublayer(p.overscaledZ-h,1===n.paint.get("raster-opacity")?Sn.ReadWrite:Sn.ReadOnly,a.LESS),u=e.getTile(p);u.registerFadeDuration(n.paint.get("raster-fade-duration"));const f=e.findLoadedParent(p,0),m=Nn(u,f,e,n,t.transform,t.style.terrain);let g,y;const v="nearest"===n.paint.get("raster-resampling")?a.NEAREST:a.LINEAR;i.activeTexture.set(a.TEXTURE0),u.texture.bind(v,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),i.activeTexture.set(a.TEXTURE1),f?(f.texture.bind(v,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),g=Math.pow(2,f.tileID.overscaledZ-u.tileID.overscaledZ),y=[u.tileID.canonical.x*g%1,u.tileID.canonical.y*g%1]):u.texture.bind(v,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST);const _=t.style.terrain&&t.style.terrain.getTerrainData(p),x=_?p:null,b=x?x.posMatrix:t.transform.calculatePosMatrix(p.toUnwrapped(),d),w=Te(b,y||[0,0],g||1,m,n);o instanceof C?s.draw(i,a.TRIANGLES,r,En.disabled,l,kn.disabled,w,_,n.id,o.boundsBuffer,t.quadTriangleIndexBuffer,o.boundsSegments):s.draw(i,a.TRIANGLES,r,c[p.overscaledZ],l,kn.disabled,w,_,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,n,r){const i=n.paint.get("background-color"),a=n.paint.get("background-opacity");if(0===a)return;const o=t.context,s=o.gl,l=t.transform,c=l.tileSize,u=n.paint.get("background-pattern");if(t.isPatternMissing(u))return;const h=!u&&1===i.a&&1===a&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass!==h)return;const d=En.disabled,p=t.depthModeForSublayer(0,"opaque"===h?Sn.ReadWrite:Sn.ReadOnly),f=t.colorModeForRenderPass(),m=t.useProgram(u?"backgroundPattern":"background"),g=r||l.coveringTiles({tileSize:c,terrain:t.style.terrain});u&&(o.activeTexture.set(s.TEXTURE0),t.imageManager.bind(t.context));const y=n.getCrossfadeParameters();for(const v of g){const e=r?v.posMatrix:t.transform.calculatePosMatrix(v.toUnwrapped()),l=u?Le(e,a,t,u,{tileID:v,tileSize:c},y):ze(e,a,i),h=t.style.terrain&&t.style.terrain.getTerrainData(v);m.draw(o,s.TRIANGLES,p,d,f,kn.disabled,l,h,n.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}},debug:function(t,e,n){for(let r=0;r<n.length;r++)Hn(t,e,n[r])},custom:function(t,e,n){const r=t.context,i=n.implementation;if("offscreen"===t.renderPass){const e=i.prerender;e&&(t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),e.call(i,r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),r.setStencilMode(En.disabled);const e="3d"===i.renderingMode?new Sn(t.context.gl.LEQUAL,Sn.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,Sn.ReadOnly);r.setDepthMode(e),i.render(r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState(),r.bindFramebuffer.set(null)}}};class Qn{constructor(e,n){this.context=new wn(e),this.transform=n,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:t.create(),renderTime:0},this.setup(),this.numSublayers=F.maxUnderzooming+F.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Wt,this.gpuTimers={}}resize(t,e,n){if(this.width=t*n,this.height=e*n,this.pixelRatio=n,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const r of this.style._order)this.style._layers[r].resize()}setup(){const e=this.context,n=new t.PosArray;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(n,Ht.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);const r=new t.PosArray;r.emplaceBack(0,0),r.emplaceBack(t.EXTENT,0),r.emplaceBack(0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(r,Ht.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);const i=new t.RasterBoundsArray;i.emplaceBack(0,0,0,0),i.emplaceBack(t.EXTENT,0,t.EXTENT,0),i.emplaceBack(0,t.EXTENT,0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(i,T.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);const a=new t.PosArray;a.emplaceBack(0,0),a.emplaceBack(1,0),a.emplaceBack(0,1),a.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(a,Ht.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);const o=new t.LineStripIndexArray;o.emplaceBack(0),o.emplaceBack(1),o.emplaceBack(3),o.emplaceBack(2),o.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(o);const s=new t.TriangleIndexArray;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s),this.emptyTexture=new l(e,{width:1,height:1,data:new Uint8Array([0,0,0,0])},e.gl.RGBA);const c=this.context.gl;this.stencilClearMode=new En({func:c.ALWAYS,mask:0},0,255,c.ZERO,c.ZERO,c.ZERO)}clearStencil(){const e=this.context,n=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const r=t.create();t.ortho(r,0,this.width,this.height,0,0,1),t.scale(r,r,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,n.TRIANGLES,Sn.disabled,this.stencilClearMode,bn.disabled,kn.disabled,ve(r),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,e){if(this.currentStencilSource===t.source||!t.isTileClipped()||!e||!e.length)return;this.currentStencilSource=t.source;const n=this.context,r=n.gl;this.nextStencilID+e.length>256&&this.clearStencil(),n.setColorMode(bn.disabled),n.setDepthMode(Sn.disabled);const i=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const a of e){const t=this._tileClippingMaskIDs[a.key]=this.nextStencilID++,e=this.style.terrain&&this.style.terrain.getTerrainData(a);i.draw(n,r.TRIANGLES,Sn.disabled,new En({func:r.ALWAYS,mask:0},t,255,r.KEEP,r.KEEP,r.REPLACE),bn.disabled,kn.disabled,ve(a.posMatrix),e,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,e=this.context.gl;return new En({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)}stencilModeForClipping(t){const e=this.context.gl;return new En({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)}stencilConfigForOverlap(t){const e=this.context.gl,n=t.sort(((t,e)=>e.overscaledZ-t.overscaledZ)),r=n[n.length-1].overscaledZ,i=n[0].overscaledZ-r+1;if(i>1){this.currentStencilSource=void 0,this.nextStencilID+i>256&&this.clearStencil();const t={};for(let n=0;n<i;n++)t[n+r]=new En({func:e.GEQUAL,mask:255},n+this.nextStencilID,255,e.KEEP,e.KEEP,e.REPLACE);return this.nextStencilID+=i,[t,n]}return[{[r]:En.disabled},n]}colorModeForRenderPass(){const e=this.context.gl;if(this._showOverdrawInspector){const n=1/8;return new bn([e.CONSTANT_COLOR,e.ONE],new t.Color(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?bn.unblended:bn.alphaBlended}depthModeForSublayer(t,e,n){if(!this.opaquePassEnabledForLayer())return Sn.disabled;const r=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new Sn(n||this.context.gl.LEQUAL,e,[r,r])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,n){this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.exported.now()),this.imageManager.beginFrame();const r=this.style._order,i=this.style.sourceCaches,a=this.style.terrain&&new Yn(this);for(const t in i){const e=i[t];e.used&&e.prepare(this.context)}const o={},s={},l={};for(const t in i){const e=i[t];o[t]=e.getVisibleCoordinates(),s[t]=o[t].slice().reverse(),l[t]=e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let t=0;t<r.length;t++)if(this.style._layers[r[t]].is3D()){this.opaquePassCutoff=t;break}if(a){this.opaquePassCutoff=0;const e=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!t.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||e.length)&&(t.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(e,n){const r=e.context,i=r.gl,a=bn.unblended,o=new Sn(i.LEQUAL,Sn.ReadWrite,[0,1]),s=n.getTerrainMesh(),l=n.sourceCache.getRenderableTiles(),c=e.useProgram("terrainDepth");r.bindFramebuffer.set(n.getFramebuffer("depth").framebuffer),r.viewport.set([0,0,e.width/devicePixelRatio,e.height/devicePixelRatio]),r.clear({color:t.Color.transparent,depth:1});for(const t of l){const l=n.getTerrainData(t.tileID),u=e.transform.calculatePosMatrix(t.tileID.toUnwrapped());c.draw(r,i.TRIANGLES,o,En.disabled,a,kn.backCCW,{u_matrix:u},l,"terrain",s.vertexBuffer,s.indexBuffer,s.segments)}r.bindFramebuffer.set(null),r.viewport.set([0,0,e.width,e.height])}(this,this.style.terrain),function(e,n){const r=e.context,i=r.gl,a=bn.unblended,o=new Sn(i.LEQUAL,Sn.ReadWrite,[0,1]),s=n.getTerrainMesh(),l=n.getCoordsTexture(),c=n.sourceCache.getRenderableTiles(),u=e.useProgram("terrainCoords");r.bindFramebuffer.set(n.getFramebuffer("coords").framebuffer),r.viewport.set([0,0,e.width/devicePixelRatio,e.height/devicePixelRatio]),r.clear({color:t.Color.transparent,depth:1}),n.coordsIndex=[];for(const t of c){const c=n.getTerrainData(t.tileID);r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,l.texture);const h=e.transform.calculatePosMatrix(t.tileID.toUnwrapped());u.draw(r,i.TRIANGLES,o,En.disabled,a,kn.backCCW,{u_matrix:h,u_terrain_coords_id:(255-n.coordsIndex.length)/255,u_texture:0},c,"terrain",s.vertexBuffer,s.indexBuffer,s.segments),n.coordsIndex.push(t.tileID.key)}r.bindFramebuffer.set(null),r.viewport.set([0,0,e.width,e.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const t of r){const e=this.style._layers[t];if(!e.hasOffscreenPass()||e.isHidden(this.transform.zoom))continue;const n=s[e.source];("custom"===e.type||n.length)&&this.renderLayer(this,i[e.source],e,n)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!a)for(this.renderPass="opaque",this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){const t=this.style._layers[r[this.currentLayer]],e=i[t.source],n=o[t.source];this._renderTileClippingMasks(t,n),this.renderLayer(this,e,t,n)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){const t=this.style._layers[r[this.currentLayer]],e=i[t.source];if(a&&a.renderLayer(t))continue;const n=("symbol"===t.type?l:s)[t.source];this._renderTileClippingMasks(t,o[t.source]),this.renderLayer(this,e,t,n)}if(this.options.showTileBoundaries){let t,e;Object.values(this.style._layers).forEach((n=>{n.source&&!n.isHidden(this.transform.zoom)&&(n.source!==(e&&e.id)&&(e=this.style.sourceCaches[n.source]),(!t||t.getSource().maxzoom<e.getSource().maxzoom)&&(t=e))})),t&&Jn.debug(this,t,t.getVisibleCoordinates())}this.options.showPadding&&function(t){const e=t.transform.padding;$n(t,t.transform.height-(e.top||0),3,Zn),$n(t,e.bottom||0,3,Un),Gn(t,e.left||0,3,jn),Gn(t,t.transform.width-(e.right||0),3,Vn);const n=t.transform.centerPoint;!function(t,e,n,r){Wn(t,e-1,n-10,2,20,r),Wn(t,e-10,n-1,20,2,r)}(t,n.x,t.transform.height-n.y,qn)}(this),this.context.setDefault()}renderLayer(t,e,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"custom"===n.type||(r||[]).length)&&(this.id=n.id,this.gpuTimingStart(n),Jn[n.type](t,e,n,r,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(t){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;let n=this.gpuTimers[t.id];n||(n=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),n.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,n.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}collectGpuTimers(){const t=this.gpuTimers;return this.gpuTimers={},t}queryGpuTimers(t){const e={};for(const n in t){const r=t[n],i=this.context.extTimerQuery,a=i.getQueryObjectEXT(r.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(r.query),e[n]=a}return e}translatePosMatrix(e,n,r,i,a){if(!r[0]&&!r[1])return e;const o=a?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(o){const t=Math.sin(o),e=Math.cos(o);r=[r[0]*e-r[1]*t,r[0]*t+r[1]*e]}const s=[a?r[0]:bt(n,r[0],this.transform.zoom),a?r[1]:bt(n,r[1],this.transform.zoom),0],l=new Float32Array(16);return t.translate(l,e,s),l}saveTileTexture(t){const e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const e=this._tileTextures[t];return e&&e.length>0?e.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const e=this.imageManager.getPattern(t.from.toString()),n=this.imageManager.getPattern(t.to.toString());return!e||!n}useProgram(t,e){this.cache=this.cache||{};const n=t+(e?e.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[n]||(this.cache[n]=new se(this.context,t,re[t],e,Re[t],this._showOverdrawInspector,this.style.terrain)),this.cache[n]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new l(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class tr{constructor(t,e){this.points=t,this.planes=e}static fromInvProjectionMatrix(e,n,r){const i=Math.pow(2,r),a=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((r=>{const a=1/(r=t.transformMat4([],r,e))[3]/n*i;return t.mul$1(r,r,[a,a,1/r[3],a])})),o=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((e=>{const n=t.sub([],a[e[0]],a[e[1]]),r=t.sub([],a[e[2]],a[e[1]]),i=t.normalize([],t.cross([],n,r)),o=-t.dot(i,a[e[1]]);return i.concat(o)}));return new tr(a,o)}}class er{constructor(e,n){this.min=e,this.max=n,this.center=t.scale$1([],t.add([],this.min,this.max),.5)}quadrant(e){const n=[e%2==0,e<2],r=t.clone$2(this.min),i=t.clone$2(this.max);for(let t=0;t<n.length;t++)r[t]=n[t]?this.min[t]:this.center[t],i[t]=n[t]?this.center[t]:this.max[t];return i[2]=this.max[2],new er(r,i)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}intersects(e){const n=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let r=!0;for(let i=0;i<e.planes.length;i++){const a=e.planes[i];let o=0;for(let e=0;e<n.length;e++)t.dot$1(a,n[e])>=0&&o++;if(0===o)return 0;o!==n.length&&(r=!1)}if(r)return 2;for(let t=0;t<3;t++){let n=Number.MAX_VALUE,r=-Number.MAX_VALUE;for(let i=0;i<e.points.length;i++){const a=e.points[i][t]-this.min[t];n=Math.min(n,a),r=Math.max(r,a)}if(r<0||n>this.max[t]-this.min[t])return 0}return 1}}class nr{constructor(t=0,e=0,n=0,r=0){if(isNaN(t)||t<0||isNaN(e)||e<0||isNaN(n)||n<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=n,this.right=r}interpolate(e,n,r){return null!=n.top&&null!=e.top&&(this.top=t.number(e.top,n.top,r)),null!=n.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,n.bottom,r)),null!=n.left&&null!=e.left&&(this.left=t.number(e.left,n.left,r)),null!=n.right&&null!=e.right&&(this.right=t.number(e.right,n.right,r)),this}getCenter(e,n){const r=t.clamp((this.left+e-this.right)/2,0,e),i=t.clamp((this.top+n-this.bottom)/2,0,n);return new t.pointGeometry(r,i)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new nr(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class rr{constructor(e,n,r,i,a){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=void 0===a||!!a,this._minZoom=e||0,this._maxZoom=n||22,this._minPitch=null==r?0:r,this._maxPitch=null==i?60:i,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new nr,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const t=new rr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t._elevation=this._elevation,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._calcMatrices(),t}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new t.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(e){const n=-t.wrap(e,-180,180)*Math.PI/180;var r;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=(r=new t.ARRAY_TYPE(4),t.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r),function(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(n),l=Math.cos(n);t[0]=r*l+a*s,t[1]=i*l+o*s,t[2]=r*-s+a*l,t[3]=i*-s+o*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const n=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(t){const e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(t){t!==this._elevation&&(this._elevation=t,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,e,n){this._unmodified=!1,this._edgeInsets.interpolate(t,e,n),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){const e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)}getVisibleUnwrappedCoordinates(e){const n=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies){const r=this.pointCoordinate(new t.pointGeometry(0,0)),i=this.pointCoordinate(new t.pointGeometry(this.width,0)),a=this.pointCoordinate(new t.pointGeometry(this.width,this.height)),o=this.pointCoordinate(new t.pointGeometry(0,this.height)),s=Math.floor(Math.min(r.x,i.x,a.x,o.x)),l=Math.floor(Math.max(r.x,i.x,a.x,o.x)),c=1;for(let u=s-c;u<=l+c;u++)0!==u&&n.push(new t.UnwrappedTileID(u,e))}return n}coveringTiles(e){var n,r;let i=this.coveringZoomLevel(e);const a=i;if(void 0!==e.minzoom&&i<e.minzoom)return[];void 0!==e.maxzoom&&i>e.maxzoom&&(i=e.maxzoom);const o=this.pointCoordinate(this.getCameraPoint()),s=t.MercatorCoordinate.fromLngLat(this.center),l=Math.pow(2,i),c=[l*o.x,l*o.y,0],u=[l*s.x,l*s.y,0],h=tr.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i);let d=e.minzoom||0;!e.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(d=i);const p=e.terrain?2/Math.min(this.tileSize,e.tileSize)*this.tileSize:3,f=t=>({aabb:new er([t*l,0,0],[(t+1)*l,l,0]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}),m=[],g=[],y=i,v=e.reparseOverscaled?a:i;if(this._renderWorldCopies)for(let t=1;t<=3;t++)m.push(f(-t)),m.push(f(t));for(m.push(f(0));m.length>0;){const i=m.pop(),a=i.x,o=i.y;let s=i.fullyVisible;if(!s){const t=i.aabb.intersects(h);if(0===t)continue;s=2===t}const l=e.terrain?c:u,f=i.aabb.distanceX(l),_=i.aabb.distanceY(l),x=Math.max(Math.abs(f),Math.abs(_)),b=p+(1<<y-i.zoom)-2;if(i.zoom===y||x>b&&i.zoom>=d){const e=y-i.zoom,n=c[0]-.5-(a<<e),r=c[1]-.5-(o<<e);g.push({tileID:new t.OverscaledTileID(i.zoom===y?v:i.zoom,i.wrap,i.zoom,a,o),distanceSq:t.sqrLen([u[0]-.5-a,u[1]-.5-o]),tileDistanceToCamera:Math.sqrt(n*n+r*r)})}else for(let c=0;c<4;c++){const l=(a<<1)+c%2,u=(o<<1)+(c>>1),h=i.zoom+1;let d=i.aabb.quadrant(c);if(e.terrain){const a=new t.OverscaledTileID(h,i.wrap,h,l,u),o=e.terrain.getMinMaxElevation(a),s=null!==(n=o.minElevation)&&void 0!==n?n:this.elevation,c=null!==(r=o.maxElevation)&&void 0!==r?r:this.elevation;d=new er([d.min[0],d.min[1],s],[d.max[0],d.max[1],c])}m.push({aabb:d,zoom:h,x:l,y:u,wrap:i.wrap,fullyVisible:s})}}return g.sort(((t,e)=>t.distanceSq-e.distanceSq)).map((t=>t.tileID))}resize(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(e){const n=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.pointGeometry(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(n)*this.worldSize)}unproject(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(t){this.freezeElevation||(this.elevation=t?this.getElevation(this._center,t):0)}getElevation(e,n){const r=t.MercatorCoordinate.fromLngLat(e),i=(1<<this.tileZoom)*t.EXTENT,a=r.x*i,o=r.y*i,s=Math.floor(a/t.EXTENT),l=Math.floor(o/t.EXTENT),c=new t.OverscaledTileID(this.tileZoom,0,this.tileZoom,s,l);return n.getElevation(c,a%t.EXTENT,o%t.EXTENT,t.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(e){const n=this.pointLocation(this.centerPoint,e),r=this.getElevation(n,e);if(!(this.elevation-r))return;const i=this.getCameraPosition(),a=t.MercatorCoordinate.fromLngLat(i.lngLat,i.altitude),o=t.MercatorCoordinate.fromLngLat(n,r),s=a.x-o.x,l=a.y-o.y,c=a.z-o.z,u=Math.sqrt(s*s+l*l+c*c),h=this.scaleZoom(this.cameraToCenterDistance/u/this.tileSize);this._elevation=r,this._center=n,this.zoom=h}setLocationAtPoint(e,n){const r=this.pointCoordinate(n),i=this.pointCoordinate(this.centerPoint),a=this.locationCoordinate(e),o=new t.MercatorCoordinate(a.x-(r.x-i.x),a.y-(r.y-i.y));this.center=this.coordinateLocation(o),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(t,e){return e?this.coordinatePoint(this.locationCoordinate(t),this.getElevation(t,e),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(t))}pointLocation(t,e){return this.coordinateLocation(this.pointCoordinate(t,e))}locationCoordinate(e){return t.MercatorCoordinate.fromLngLat(e)}coordinateLocation(t){return t&&t.toLngLat()}pointCoordinate(e,n){if(n){const t=n.pointCoordinate(e);if(null!=t)return t}const r=[e.x,e.y,0,1],i=[e.x,e.y,1,1];t.transformMat4(r,r,this.pixelMatrixInverse),t.transformMat4(i,i,this.pixelMatrixInverse);const a=r[3],o=i[3],s=r[1]/a,l=i[1]/o,c=r[2]/a,u=i[2]/o,h=c===u?0:(0-c)/(u-c);return new t.MercatorCoordinate(t.number(r[0]/a,i[0]/o,h)/this.worldSize,t.number(s,l,h)/this.worldSize)}coordinatePoint(e,n=0,r=this.pixelMatrix){const i=[e.x*this.worldSize,e.y*this.worldSize,n,1];return t.transformMat4(i,i,r),new t.pointGeometry(i[0]/i[3],i[1]/i[3])}getBounds(){const e=Math.max(0,this.height/2-this.getHorizon());return(new t.LngLatBounds).extend(this.pointLocation(new t.pointGeometry(0,e))).extend(this.pointLocation(new t.pointGeometry(this.width,e))).extend(this.pointLocation(new t.pointGeometry(this.width,this.height))).extend(this.pointLocation(new t.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(e,n=!1){const r=e.key,i=n?this._alignedPosMatrixCache:this._posMatrixCache;if(i[r])return i[r];const a=e.canonical,o=this.worldSize/this.zoomScale(a.z),s=a.x+Math.pow(2,a.z)*e.wrap,l=t.identity(new Float64Array(16));return t.translate(l,l,[s*o,a.y*o,0]),t.scale(l,l,[o/t.EXTENT,o/t.EXTENT,1]),t.multiply(l,n?this.alignedProjMatrix:this.projMatrix,l),i[r]=new Float32Array(l),i[r]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let e,n,r,i,a=-90,o=90,s=-180,l=180;const c=this.size,u=this._unmodified;if(this.latRange){const n=this.latRange;a=t.mercatorYfromLat(n[1])*this.worldSize,o=t.mercatorYfromLat(n[0])*this.worldSize,e=o-a<c.y?c.y/(o-a):0}if(this.lngRange){const e=this.lngRange;s=t.wrap(t.mercatorXfromLng(e[0])*this.worldSize,0,this.worldSize),l=t.wrap(t.mercatorXfromLng(e[1])*this.worldSize,0,this.worldSize),l<s&&(l+=this.worldSize),n=l-s<c.x?c.x/(l-s):0}const h=this.point,d=Math.max(n||0,e||0);if(d)return this.center=this.unproject(new t.pointGeometry(n?(l+s)/2:h.x,e?(o+a)/2:h.y)),this.zoom+=this.scaleZoom(d),this._unmodified=u,void(this._constraining=!1);if(this.latRange){const t=h.y,e=c.y/2;t-e<a&&(i=a+e),t+e>o&&(i=o-e)}if(this.lngRange){const e=(s+l)/2,n=t.wrap(h.x,e-this.worldSize/2,e+this.worldSize/2),i=c.x/2;n-i<s&&(r=s+i),n+i>l&&(r=l-i)}void 0===r&&void 0===i||(this.center=this.unproject(new t.pointGeometry(void 0!==r?r:h.x,void 0!==i?i:h.y)).wrap()),this._unmodified=u,this._constraining=!1}_calcMatrices(){if(!this.height)return;const e=this.centerOffset,n=this.point.x,r=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let i=t.identity(new Float64Array(16));t.scale(i,i,[this.width/2,-this.height/2,1]),t.translate(i,i,[1,-1,0]),this.labelPlaneMatrix=i,i=t.identity(new Float64Array(16)),t.scale(i,i,[1,-1,1]),t.translate(i,i,[-1,-1,0]),t.scale(i,i,[2/this.width,2/this.height,1]),this.glCoordMatrix=i,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const a=Math.PI/2+this._pitch,o=this._fov*(.5+e.y/this.height),s=Math.sin(o)*this.cameraToSeaLevelDistance/Math.sin(t.clamp(Math.PI-a-o,.01,Math.PI-.01)),l=this.getHorizon(),c=2*Math.atan(l/this.cameraToCenterDistance)*(.5+e.y/(2*l)),u=Math.sin(c)*this.cameraToSeaLevelDistance/Math.sin(t.clamp(Math.PI-a-c,.01,Math.PI-.01)),h=Math.cos(Math.PI/2-this._pitch)*s+this.cameraToSeaLevelDistance,d=Math.cos(Math.PI/2-this._pitch)*u+this.cameraToSeaLevelDistance,p=1.01*Math.min(h,d),f=this.height/50;i=new Float64Array(16),t.perspective(i,this._fov,this.width/this.height,f,p),i[8]=2*-e.x/this.width,i[9]=2*e.y/this.height,t.scale(i,i,[1,-1,1]),t.translate(i,i,[0,0,-this.cameraToCenterDistance]),t.rotateX(i,i,this._pitch),t.rotateZ(i,i,this.angle),t.translate(i,i,[-n,-r,0]),this.mercatorMatrix=t.scale([],i,[this.worldSize,this.worldSize,this.worldSize]),t.scale(i,i,[1,1,this._pixelPerMeter]),this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,i),t.translate(i,i,[0,0,-this.elevation]),this.projMatrix=i,this.invProjMatrix=t.invert([],i),this.pixelMatrix3D=t.multiply(new Float64Array(16),this.labelPlaneMatrix,i);const m=this.width%2/2,g=this.height%2/2,y=Math.cos(this.angle),v=Math.sin(this.angle),_=n-Math.round(n)+y*m+v*g,x=r-Math.round(r)+y*g+v*m,b=new Float64Array(i);if(t.translate(b,b,[_>.5?_-1:_,x>.5?x-1:x,0]),this.alignedProjMatrix=b,i=t.invert(new Float64Array(16),this.pixelMatrix),!i)throw new Error("failed to invert matrix");this.pixelMatrixInverse=i,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const e=this.pointCoordinate(new t.pointGeometry(0,0)),n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.pointGeometry(0,e))}getCameraQueryGeometry(e){const n=this.getCameraPoint();if(1===e.length)return[e[0],n];{let r=n.x,i=n.y,a=n.x,o=n.y;for(const t of e)r=Math.min(r,t.x),i=Math.min(i,t.y),a=Math.max(a,t.x),o=Math.max(o,t.y);return[new t.pointGeometry(r,i),new t.pointGeometry(a,i),new t.pointGeometry(a,o),new t.pointGeometry(r,o),new t.pointGeometry(r,i)]}}}class ir{constructor(e){this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(t,e){let n=!1,r=null;const i=()=>{r=null,n&&(t(),r=setTimeout(i,300),n=!1)};return()=>(n=!0,r||i(),r)}(this._updateHashUnthrottled.bind(this))}addTo(t){return this._map=t,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(t){const e=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,r=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,r),a=Math.round(e.lng*i)/i,o=Math.round(e.lat*i)/i,s=this._map.getBearing(),l=this._map.getPitch();let c="";if(c+=t?`/${a}/${o}/${n}`:`${n}/${o}/${a}`,(s||l)&&(c+="/"+Math.round(10*s)/10),l&&(c+=`/${Math.round(l)}`),this._hashName){const t=this._hashName;let e=!1;const n=window.location.hash.slice(1).split("&").map((n=>{const r=n.split("=")[0];return r===t?(e=!0,`${r}=${c}`):n})).filter((t=>t));return e||n.push(`${t}=${c}`),`#${n.join("&")}`}return`#${c}`}_getCurrentHash(){const t=window.location.hash.replace("#","");if(this._hashName){let e;return t.split("&").map((t=>t.split("="))).forEach((t=>{t[0]===this._hashName&&(e=t)})),(e&&e[1]||"").split("/")}return t.split("/")}_onHashChange(){const t=this._getCurrentHash();if(t.length>=3&&!t.some((t=>isNaN(t)))){const e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1}_updateHashUnthrottled(){const t=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,t)}catch(t){}}}const ar={linearity:.3,easing:t.bezier(0,0,.3,1)},or=t.extend({deceleration:2500,maxSpeed:1400},ar),sr=t.extend({deceleration:20,maxSpeed:1400},ar),lr=t.extend({deceleration:1e3,maxSpeed:360},ar),cr=t.extend({deceleration:1e3,maxSpeed:90},ar);class ur{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.exported.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,n=t.exported.now();for(;e.length>0&&n-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const n={zoom:0,bearing:0,pitch:0,pan:new t.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:t}of this._inertiaBuffer)n.zoom+=t.zoomDelta||0,n.bearing+=t.bearingDelta||0,n.pitch+=t.pitchDelta||0,t.panDelta&&n.pan._add(t.panDelta),t.around&&(n.around=t.around),t.pinchAround&&(n.pinchAround=t.pinchAround);const r=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,i={};if(n.pan.mag()){const a=dr(n.pan.mag(),r,t.extend({},or,e||{}));i.offset=n.pan.mult(a.amount/n.pan.mag()),i.center=this._map.transform.center,hr(i,a)}if(n.zoom){const t=dr(n.zoom,r,sr);i.zoom=this._map.transform.zoom+t.amount,hr(i,t)}if(n.bearing){const e=dr(n.bearing,r,lr);i.bearing=this._map.transform.bearing+t.clamp(e.amount,-179,179),hr(i,e)}if(n.pitch){const t=dr(n.pitch,r,cr);i.pitch=this._map.transform.pitch+t.amount,hr(i,t)}if(i.zoom||i.bearing){const t=void 0===n.pinchAround?n.around:n.pinchAround;i.around=t?this._map.unproject(t):this._map.getCenter()}return this.clear(),t.extend(i,{noMoveStart:!0})}}function hr(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function dr(e,n,r){const{maxSpeed:i,linearity:a,deceleration:o}=r,s=t.clamp(e*a/(n/1e3),-i,i),l=Math.abs(s)/(o*a);return{easing:r.easing,duration:1e3*l,amount:s*(l/2)}}class pr extends t.Event{constructor(e,n,r,i={}){const o=a.mousePos(n.getCanvasContainer(),r),s=n.unproject(o);super(e,t.extend({point:o,lngLat:s,originalEvent:r},i)),this._defaultPrevented=!1,this.target=n}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class fr extends t.Event{constructor(e,n,r){const i="touchend"===e?r.changedTouches:r.touches,o=a.touchPos(n.getCanvasContainer(),i),s=o.map((t=>n.unproject(t))),l=o.reduce(((t,e,n,r)=>t.add(e.div(r.length))),new t.pointGeometry(0,0));super(e,{points:o,point:l,lngLats:s,lngLat:n.unproject(l),originalEvent:r}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class mr extends t.Event{constructor(t,e,n){super(t,{originalEvent:n}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class gr{constructor(t,e){this._map=t,this._clickTolerance=e.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new mr(t.type,this._map,t))}mousedown(t,e){return this._mousedownPos=e,this._firePreventable(new pr(t.type,this._map,t))}mouseup(t){this._map.fire(new pr(t.type,this._map,t))}click(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||this._map.fire(new pr(t.type,this._map,t))}dblclick(t){return this._firePreventable(new pr(t.type,this._map,t))}mouseover(t){this._map.fire(new pr(t.type,this._map,t))}mouseout(t){this._map.fire(new pr(t.type,this._map,t))}touchstart(t){return this._firePreventable(new fr(t.type,this._map,t))}touchmove(t){this._map.fire(new fr(t.type,this._map,t))}touchend(t){this._map.fire(new fr(t.type,this._map,t))}touchcancel(t){this._map.fire(new fr(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class yr{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(t){this._map.fire(new pr(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new pr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._ignoreContextMenu||this._map.fire(new pr(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class vr{constructor(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(a.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)}mousemoveWindow(t,e){if(!this._active)return;const n=e;if(this._lastPos.equals(n)||!this._box&&n.dist(this._startPos)<this._clickTolerance)return;const r=this._startPos;this._lastPos=n,this._box||(this._box=a.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));const i=Math.min(r.x,n.x),o=Math.max(r.x,n.x),s=Math.min(r.y,n.y),l=Math.max(r.y,n.y);a.setTransform(this._box,`translate(${i}px,${s}px)`),this._box.style.width=o-i+"px",this._box.style.height=l-s+"px"}mouseupWindow(e,n){if(!this._active)return;if(0!==e.button)return;const r=this._startPos,i=n;if(this.reset(),a.suppressClick(),r.x!==i.x||r.y!==i.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:t=>t.fitScreenCoordinates(r,i,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",e)}keydown(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(a.remove(this._box),this._box=null),a.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,n){return this._map.fire(new t.Event(e,{originalEvent:n}))}}function _r(t,e){if(t.length!==e.length)throw new Error(`The number of touches and points are not equal - touches ${t.length}, points ${e.length}`);const n={};for(let r=0;r<t.length;r++)n[t[r].identifier]=e[r];return n}class xr{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,n,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),r.length===this.numTouches&&(this.centroid=function(e){const n=new t.pointGeometry(0,0);for(const t of e)n._add(t);return n.div(e.length)}(n),this.touches=_r(r,n)))}touchmove(t,e,n){if(this.aborted||!this.centroid)return;const r=_r(n,e);for(const i in this.touches){const t=this.touches[i],e=r[i];(!e||e.dist(t)>30)&&(this.aborted=!0)}}touchend(t,e,n){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){const t=!this.aborted&&this.centroid;if(this.reset(),t)return t}}}class br{constructor(t){this.singleTap=new xr(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,e,n){this.singleTap.touchstart(t,e,n)}touchmove(t,e,n){this.singleTap.touchmove(t,e,n)}touchend(t,e,n){const r=this.singleTap.touchend(t,e,n);if(r){const e=t.timeStamp-this.lastTime<500,n=!this.lastTap||this.lastTap.dist(r)<30;if(e&&n||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}class wr{constructor(){this._zoomIn=new br({numTouches:1,numTaps:2}),this._zoomOut=new br({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,e,n){this._zoomIn.touchstart(t,e,n),this._zoomOut.touchstart(t,e,n)}touchmove(t,e,n){this._zoomIn.touchmove(t,e,n),this._zoomOut.touchmove(t,e,n)}touchend(t,e,n){const r=this._zoomIn.touchend(t,e,n),i=this._zoomOut.touchend(t,e,n);return r?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(r)},{originalEvent:t})}):i?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:e=>e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(i)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Sr={0:1,2:2};class Mr{constructor(t){this.reset(),this._clickTolerance=t.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(t,e){return!1}_move(t,e){return{}}mousedown(t,e){if(this._lastPoint)return;const n=a.mouseButton(t);this._correctButton(t,n)&&(this._lastPoint=e,this._eventButton=n)}mousemoveWindow(t,e){const n=this._lastPoint;if(n)if(t.preventDefault(),function(t,e){const n=Sr[e];return void 0===t.buttons||(t.buttons&n)!==n}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(n,e)}mouseupWindow(t){this._lastPoint&&a.mouseButton(t)===this._eventButton&&(this._moved&&a.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Er extends Mr{mousedown(t,e){super.mousedown(t,e),this._lastPoint&&(this._active=!0)}_correctButton(t,e){return 0===e&&!t.ctrlKey}_move(t,e){return{around:e,panDelta:e.sub(t)}}}class kr extends Mr{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const n=.8*(e.x-t.x);if(n)return this._active=!0,{bearingDelta:n}}contextmenu(t){t.preventDefault()}}class Tr extends Mr{_correctButton(t,e){return 0===e&&t.ctrlKey||2===e}_move(t,e){const n=-.5*(e.y-t.y);if(n)return this._active=!0,{pitchDelta:n}}contextmenu(t){t.preventDefault()}}class Cr{constructor(t,e){this._minTouches=t.cooperativeGestures?2:1,this._clickTolerance=t.clickTolerance||1,this._map=e,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new t.pointGeometry(0,0),setTimeout((()=>{this._cancelCooperativeMessage=!1}),200)}touchstart(t,e,n){return this._calculateTransform(t,e,n)}touchmove(t,e,n){if(this._map._cooperativeGestures&&(2===this._minTouches&&n.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(t,!1,n.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(n.length<this._minTouches))return t.preventDefault(),this._calculateTransform(t,e,n)}touchend(t,e,n){this._calculateTransform(t,e,n),this._active&&n.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,n,r){r.length>0&&(this._active=!0);const i=_r(r,n),a=new t.pointGeometry(0,0),o=new t.pointGeometry(0,0);let s=0;for(const t in i){const e=i[t],n=this._touches[t];n&&(a._add(e),o._add(e.sub(n)),s++,i[t]=e)}if(this._touches=i,s<this._minTouches||!o.mag())return;const l=o.div(s);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:a.div(s),panDelta:l}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ir{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(t){}_move(t,e,n){return{}}touchstart(t,e,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([e[0],e[1]]))}touchmove(t,e,n){if(!this._firstTwoTouches)return;t.preventDefault();const[r,i]=this._firstTwoTouches,a=Pr(n,e,r),o=Pr(n,e,i);if(!a||!o)return;const s=this._aroundCenter?null:a.add(o).div(2);return this._move([a,o],s,t)}touchend(t,e,n){if(!this._firstTwoTouches)return;const[r,i]=this._firstTwoTouches,o=Pr(n,e,r),s=Pr(n,e,i);o&&s||(this._active&&a.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Pr(t,e,n){for(let r=0;r<t.length;r++)if(t[r].identifier===n)return e[r]}function Ar(t,e){return Math.log(t/e)/Math.LN2}class zr extends Ir{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,e){const n=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Ar(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ar(this._distance,n),pinchAround:e}}}function Lr(t,e){return 180*t.angleWith(e)/Math.PI}class Rr extends Ir{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,e){const n=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Lr(this._vector,n),pinchAround:e}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const e=25/(Math.PI*this._minDiameter)*360,n=Lr(t,this._startVector);return Math.abs(n)<e}}function Dr(t){return Math.abs(t.y)>Math.abs(t.x)}class Or extends Ir{constructor(t){super(),this._map=t}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(t,e,n){super.touchstart(t,e,n),this._currentTouchCount=n.length}_start(t){this._lastPoints=t,Dr(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,e,n){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const r=t[0].sub(this._lastPoints[0]),i=t[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(r,i,n.timeStamp),this._valid?(this._lastPoints=t,this._active=!0,{pitchDelta:(r.y+i.y)/2*-.5}):void 0}gestureBeginsVertically(t,e,n){if(void 0!==this._valid)return this._valid;const r=t.mag()>=2,i=e.mag()>=2;if(!r&&!i)return;if(!r||!i)return void 0===this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;const a=t.y>0==e.y>0;return Dr(t)&&Dr(e)&&a}}const Br={panStep:100,bearingStep:15,pitchStep:10};class Fr{constructor(){const t=Br;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let e=0,n=0,r=0,i=0,a=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),i=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),i=1);break;case 38:t.shiftKey?r=1:(t.preventDefault(),a=-1);break;case 40:t.shiftKey?r=-1:(t.preventDefault(),a=1);break;default:return}return this._rotationDisabled&&(n=0,r=0),{cameraAnimation:o=>{const s=o.getZoom();o.easeTo({duration:300,easeId:"keyboardHandler",easing:Nr,zoom:e?Math.round(s)+e*(t.shiftKey?2:1):s,bearing:o.getBearing()+n*this._bearingStep,pitch:o.getPitch()+r*this._pitchStep,offset:[-i*this._panStep,-a*this._panStep],center:o.getCenter()},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Nr(t){return t*(2-t)}const Zr=4.000244140625;class Ur{constructor(e,n){this._map=e,this._el=e.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,t.bindAll(["_onTimeout"],this)}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(e){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;e.preventDefault()}let n=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const r=t.exported.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%Zr==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this._active||this._start(e)),e.preventDefault()}_onTimeout(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const n=a.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(n)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const e=this._map.transform;if(0!==this._delta){const t="wheel"===this._type&&Math.abs(this._delta)>Zr?this._wheelZoomRate:this._defaultZoomRate;let n=2/(1+Math.exp(-Math.abs(this._delta*t)));this._delta<0&&0!==n&&(n=1/n);const r="number"==typeof this._targetZoom?e.zoomScale(this._targetZoom):e.scale;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(r*n))),"wheel"===this._type&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const n="number"==typeof this._targetZoom?this._targetZoom:e.zoom,r=this._startZoom,i=this._easing;let a,o=!1;if("wheel"===this._type&&r&&i){const e=Math.min((t.exported.now()-this._lastWheelEventTime)/200,1),s=i(e);a=t.number(r,n,s),e<1?this._frameId||(this._frameId=!0):o=!0}else a=n,o=!0;return this._active=!0,o&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!o,zoomDelta:a-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let n=t.ease;if(this._prevEase){const e=this._prevEase,r=(t.exported.now()-e.start)/e.duration,i=e.easing(r+.01)-e.easing(r),a=.27/Math.sqrt(i*i+1e-4)*.01,o=Math.sqrt(.0729-a*a);n=t.bezier(a,o,.25,1)}return this._prevEase={start:t.exported.now(),duration:e,easing:n},n}reset(){this._active=!1}}class jr{constructor(t,e){this._clickZoom=t,this._tapZoom=e}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Vr{constructor(){this.reset()}reset(){this._active=!1}dblclick(t,e){return t.preventDefault(),{cameraAnimation:n=>{n.easeTo({duration:300,zoom:n.getZoom()+(t.shiftKey?-1:1),around:n.unproject(e)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class qr{constructor(){this._tap=new br({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(t,e,n){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=e[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(t,e,n))}touchmove(t,e,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;const r=e[0],i=r.y-this._swipePoint.y;return this._swipePoint=r,t.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(t,e,n)}touchend(t,e,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(t,e,n)&&(this._tapTime=t.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $r{constructor(t,e,n){this._el=t,this._mousePan=e,this._touchPan=n}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Gr{constructor(t,e,n){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=n}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Wr{constructor(t,e,n,r){this._el=t,this._touchZoom=e,this._touchRotate=n,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Hr=t=>t.zoom||t.drag||t.pitch||t.rotate;class Xr extends t.Event{}function Kr(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}class Yr{constructor(e,n){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ur(e),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(n),t.bindAll(["handleEvent","handleWindowEvent"],this);const r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[window,"blur",void 0]];for(const[t,i,o]of this._listeners)a.addEventListener(t,i,t===document?this.handleWindowEvent:this.handleEvent,o)}destroy(){for(const[t,e,n]of this._listeners)a.removeEventListener(t,e,t===document?this.handleWindowEvent:this.handleEvent,n)}_addDefaultHandlers(t){const e=this._map,n=e.getCanvasContainer();this._add("mapEvent",new gr(e,t));const r=e.boxZoom=new vr(e,t);this._add("boxZoom",r);const i=new wr,a=new Vr;e.doubleClickZoom=new jr(a,i),this._add("tapZoom",i),this._add("clickZoom",a);const o=new qr;this._add("tapDragZoom",o);const s=e.touchPitch=new Or(e);this._add("touchPitch",s);const l=new kr(t),c=new Tr(t);e.dragRotate=new Gr(t,l,c),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);const u=new Er(t),h=new Cr(t,e);e.dragPan=new $r(n,u,h),this._add("mousePan",u),this._add("touchPan",h,["touchZoom","touchRotate"]);const d=new Rr,p=new zr;e.touchZoomRotate=new Wr(n,p,d,o),this._add("touchRotate",d,["touchPan","touchZoom"]),this._add("touchZoom",p,["touchPan","touchRotate"]);const f=e.scrollZoom=new Ur(e,this);this._add("scrollZoom",f,["mousePan"]);const m=e.keyboard=new Fr;this._add("keyboard",m),this._add("blockableMapEvent",new yr(e));for(const g of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])t.interactive&&t[g]&&e[g].enable(t[g])}_add(t,e,n){this._handlers.push({handlerName:t,handler:e,allowed:n}),this._handlersById[t]=e}stop(t){if(!this._updatingCamera){for(const{handler:t}of this._handlers)t.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Hr(this._eventsInProgress))||this.isZooming()}_blockedByActive(t,e,n){for(const r in t)if(r!==n&&(!e||e.indexOf(r)<0))return!0;return!1}handleWindowEvent(t){this.handleEvent(t,`${t.type}Window`)}_getMapTouches(t){const e=[];for(const n of t)this._el.contains(n.target)&&e.push(n);return e}handleEvent(t,e){if("blur"===t.type)return void this.stop(!0);this._updatingCamera=!0;const n="renderFrame"===t.type?void 0:t,r={needsRenderFrame:!1},i={},o={},s=t.touches,l=s?this._getMapTouches(s):void 0,c=l?a.touchPos(this._el,l):a.mousePos(this._el,t);for(const{handlerName:a,handler:d,allowed:p}of this._handlers){if(!d.isEnabled())continue;let s;this._blockedByActive(o,p,a)?d.reset():d[e||t.type]&&(s=d[e||t.type](t,c,l),this.mergeHandlerResult(r,i,s,a,n),s&&s.needsRenderFrame&&this._triggerRenderFrame()),(s||d.isActive())&&(o[a]=d)}const u={};for(const a in this._previousActiveHandlers)o[a]||(u[a]=n);this._previousActiveHandlers=o,(Object.keys(u).length||Kr(r))&&(this._changes.push([r,i,u]),this._triggerRenderFrame()),(Object.keys(o).length||Kr(r))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:h}=r;h&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],h(this._map))}mergeHandlerResult(e,n,r,i,a){if(!r)return;t.extend(e,r);const o={handlerName:i,originalEvent:r.originalEvent||a};void 0!==r.zoomDelta&&(n.zoom=o),void 0!==r.panDelta&&(n.drag=o),void 0!==r.pitchDelta&&(n.pitch=o),void 0!==r.bearingDelta&&(n.rotate=o)}_applyChanges(){const e={},n={},r={};for(const[i,a,o]of this._changes)i.panDelta&&(e.panDelta=(e.panDelta||new t.pointGeometry(0,0))._add(i.panDelta)),i.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+i.zoomDelta),i.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+i.bearingDelta),i.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+i.pitchDelta),void 0!==i.around&&(e.around=i.around),void 0!==i.pinchAround&&(e.pinchAround=i.pinchAround),i.noInertia&&(e.noInertia=i.noInertia),t.extend(n,a),t.extend(r,o);this._updateMapTransform(e,n,r),this._changes=[]}_updateMapTransform(e,n,r){const i=this._map,a=i.transform,o=i.style&&i.style.terrain;if(!(Kr(e)||o&&this._drag))return this._fireEvents(n,r,!0);let{panDelta:s,zoomDelta:l,bearingDelta:c,pitchDelta:u,around:h,pinchAround:d}=e;void 0!==d&&(h=d),i._stop(!0),h=h||i.transform.centerPoint;const p=a.pointLocation(s?h.sub(s):h);c&&(a.bearing+=c),u&&(a.pitch+=u),l&&(a.zoom+=l),o?n.drag&&!this._drag?(this._drag={center:a.centerPoint,lngLat:a.pointLocation(h),point:h,handlerName:n.drag.handlerName},i.fire(new t.Event("freezeElevation",{freeze:!0}))):this._drag&&r[this._drag.handlerName]?(i.fire(new t.Event("freezeElevation",{freeze:!1})),this._drag=null):n.drag&&this._drag&&(a.center=a.pointLocation(a.centerPoint.sub(s))):a.setLocationAtPoint(p,h),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(n,r,!0)}_fireEvents(e,n,r){const i=Hr(this._eventsInProgress),a=Hr(e),o={};for(const t in e){const{originalEvent:n}=e[t];this._eventsInProgress[t]||(o[`${t}start`]=n),this._eventsInProgress[t]=e[t]}!i&&a&&this._fireEvent("movestart",a.originalEvent);for(const t in o)this._fireEvent(t,o[t]);a&&this._fireEvent("move",a.originalEvent);for(const t in e){const{originalEvent:n}=e[t];this._fireEvent(t,n)}const s={};let l;for(const t in this._eventsInProgress){const{handlerName:e,originalEvent:r}=this._eventsInProgress[t];this._handlersById[e].isActive()||(delete this._eventsInProgress[t],l=n[e]||r,s[`${t}end`]=l)}for(const t in s)this._fireEvent(t,s[t]);const c=Hr(this._eventsInProgress);if(r&&(i||a)&&!c){this._updatingCamera=!0;const e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),n=t=>0!==t&&-this._bearingSnap<t&&t<this._bearingSnap;e?(n(e.bearing||this._map.getBearing())&&(e.bearing=0),this._map.easeTo(e,{originalEvent:l})):(this._map.fire(new t.Event("moveend",{originalEvent:l})),n(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(e,n){this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((t=>{delete this._frameId,this.handleEvent(new Xr("renderFrame",{timeStamp:t})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Jr={extend:(e,...n)=>t.extend(e,...n),run(t){t()},logToElement(t,e=!1,n="log"){const r=window.document.getElementById(n);r&&(e&&(r.innerHTML=""),r.innerHTML+=`<br>${t}`)}};class Qr extends t.Evented{constructor(e,n){super(),this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=n.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}getCenter(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(t,e){return this.jumpTo({center:t},e)}panBy(e,n,r){return e=t.pointGeometry.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},n),r)}panTo(e,n,r){return this.easeTo(t.extend({center:e},n),r)}getZoom(){return this.transform.zoom}setZoom(t,e){return this.jumpTo({zoom:t},e),this}zoomTo(e,n,r){return this.easeTo(t.extend({zoom:e},n),r)}zoomIn(t,e){return this.zoomTo(this.getZoom()+1,t,e),this}zoomOut(t,e){return this.zoomTo(this.getZoom()-1,t,e),this}getBearing(){return this.transform.bearing}setBearing(t,e){return this.jumpTo({bearing:t},e),this}getPadding(){return this.transform.padding}setPadding(t,e){return this.jumpTo({padding:t},e),this}rotateTo(e,n,r){return this.easeTo(t.extend({bearing:e},n),r)}resetNorth(e,n){return this.rotateTo(0,t.extend({duration:1e3},e),n),this}resetNorthPitch(e,n){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),n),this}snapToNorth(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this}getPitch(){return this.transform.pitch}setPitch(t,e){return this.jumpTo({pitch:t},e),this}cameraForBounds(e,n){e=t.LngLatBounds.convert(e);const r=n&&n.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),r,n)}_cameraForBoxAndBearing(e,n,r,i){const a={top:0,bottom:0,right:0,left:0};if("number"==typeof(i=t.extend({padding:a,offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding){const t=i.padding;i.padding={top:t,bottom:t,right:t,left:t}}i.padding=t.extend(a,i.padding);const o=this.transform,s=o.padding,l=o.project(t.LngLat.convert(e)),c=o.project(t.LngLat.convert(n)),u=l.rotate(-r*Math.PI/180),h=c.rotate(-r*Math.PI/180),d=new t.pointGeometry(Math.max(u.x,h.x),Math.max(u.y,h.y)),p=new t.pointGeometry(Math.min(u.x,h.x),Math.min(u.y,h.y)),f=d.sub(p),m=(o.width-(s.left+s.right+i.padding.left+i.padding.right))/f.x,g=(o.height-(s.top+s.bottom+i.padding.top+i.padding.bottom))/f.y;if(g<0||m<0)return void t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const y=Math.min(o.scaleZoom(o.scale*Math.min(m,g)),i.maxZoom),v=t.pointGeometry.convert(i.offset),_=new t.pointGeometry((i.padding.left-i.padding.right)/2,(i.padding.top-i.padding.bottom)/2).rotate(r*Math.PI/180),x=v.add(_).mult(o.scale/o.zoomScale(y));return{center:o.unproject(l.add(c).div(2).sub(x)),zoom:y,bearing:r}}fitBounds(t,e,n){return this._fitInternal(this.cameraForBounds(t,e),e,n)}fitScreenCoordinates(e,n,r,i,a){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.pointGeometry.convert(e)),this.transform.pointLocation(t.pointGeometry.convert(n)),r,i),i,a)}_fitInternal(e,n,r){return e?(delete(n=t.extend(e,n)).padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this}jumpTo(e,n){this.stop();const r=this.transform;let i=!1,a=!1,o=!1;return"zoom"in e&&r.zoom!==+e.zoom&&(i=!0,r.zoom=+e.zoom),void 0!==e.center&&(r.center=t.LngLat.convert(e.center)),"bearing"in e&&r.bearing!==+e.bearing&&(a=!0,r.bearing=+e.bearing),"pitch"in e&&r.pitch!==+e.pitch&&(o=!0,r.pitch=+e.pitch),null==e.padding||r.isPaddingEqual(e.padding)||(r.padding=e.padding),this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),i&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),a&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),o&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n))}calculateCameraOptionsFromTo(e,n,r,i=0){const a=t.MercatorCoordinate.fromLngLat(e,n),o=t.MercatorCoordinate.fromLngLat(r,i),s=o.x-a.x,l=o.y-a.y,c=o.z-a.z,u=Math.hypot(s,l,c);if(0===u)throw new Error("Can't calculate camera options with same From and To");const h=Math.hypot(s,l),d=this.transform.scaleZoom(this.transform.cameraToCenterDistance/u/this.transform.tileSize),p=180*Math.atan2(s,-l)/Math.PI;let f=180*Math.acos(h/u)/Math.PI;return f=c<0?90-f:90+f,{center:o.toLngLat(),zoom:d,pitch:f,bearing:p}}easeTo(e,n){this._stop(!1,e.easeId),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||!e.essential&&t.exported.prefersReducedMotion)&&(e.duration=0);const r=this.transform,i=this.getZoom(),a=this.getBearing(),o=this.getPitch(),s=this.getPadding(),l="zoom"in e?+e.zoom:i,c="bearing"in e?this._normalizeBearing(e.bearing,a):a,u="pitch"in e?+e.pitch:o,h="padding"in e?e.padding:r.padding,d=t.pointGeometry.convert(e.offset);let p=r.centerPoint.add(d);const f=r.pointLocation(p),m=t.LngLat.convert(e.center||f);this._normalizeCenter(m);const g=r.project(f),y=r.project(m).sub(g),v=r.zoomScale(l-i);let _,x;e.around&&(_=t.LngLat.convert(e.around),x=r.locationPoint(_));const b={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||l!==i,this._rotating=this._rotating||a!==c,this._pitching=this._pitching||u!==o,this._padding=!r.isPaddingEqual(h),this._easeId=e.easeId,this._prepareEase(n,e.noMoveStart,b),this._ease((e=>{if(this._zooming&&(r.zoom=t.number(i,l,e)),this._rotating&&(r.bearing=t.number(a,c,e)),this._pitching&&(r.pitch=t.number(o,u,e)),this._padding&&(r.interpolatePadding(s,h,e),p=r.centerPoint.add(d)),_)r.setLocationAtPoint(_,x);else{const t=r.zoomScale(r.zoom-i),n=l>i?Math.min(2,v):Math.max(.5,v),a=Math.pow(n,1-e),o=r.unproject(g.add(y.mult(e*a)).mult(t));r.setLocationAtPoint(r.renderWorldCopies?o.wrap():o,p)}this._fireMoveEvents(n)}),(t=>{this._afterEase(n,t)}),e),this}_prepareEase(e,n,r={}){this._moving=!0,this.fire(new t.Event("freezeElevation",{freeze:!0})),n||r.moving||this.fire(new t.Event("movestart",e)),this._zooming&&!r.zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&!r.rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&!r.pitching&&this.fire(new t.Event("pitchstart",e))}_fireMoveEvents(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))}_afterEase(e,n){if(this._easeId&&n&&this._easeId===n)return;delete this._easeId,this.fire(new t.Event("freezeElevation",{freeze:!1}));const r=this._zooming,i=this._rotating,a=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new t.Event("zoomend",e)),i&&this.fire(new t.Event("rotateend",e)),a&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))}flyTo(e,n){if(!e.essential&&t.exported.prefersReducedMotion){const r=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,n)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);const r=this.transform,i=this.getZoom(),a=this.getBearing(),o=this.getPitch(),s=this.getPadding(),l="zoom"in e?t.clamp(+e.zoom,r.minZoom,r.maxZoom):i,c="bearing"in e?this._normalizeBearing(e.bearing,a):a,u="pitch"in e?+e.pitch:o,h="padding"in e?e.padding:r.padding,d=r.zoomScale(l-i),p=t.pointGeometry.convert(e.offset);let f=r.centerPoint.add(p);const m=r.pointLocation(f),g=t.LngLat.convert(e.center||m);this._normalizeCenter(g);const y=r.project(m),v=r.project(g).sub(y);let _=e.curve;const x=Math.max(r.width,r.height),b=x/d,w=v.mag();if("minZoom"in e){const n=t.clamp(Math.min(e.minZoom,i,l),r.minZoom,r.maxZoom),a=x/r.zoomScale(n-i);_=Math.sqrt(a/w*2)}const S=_*_;function M(t){const e=(b*b-x*x+(t?-1:1)*S*S*w*w)/(2*(t?b:x)*S*w);return Math.log(Math.sqrt(e*e+1)-e)}function E(t){return(Math.exp(t)-Math.exp(-t))/2}function k(t){return(Math.exp(t)+Math.exp(-t))/2}const T=M(0);let C=function(t){return k(T)/k(T+_*t)},I=function(t){return x*((k(T)*(E(e=T+_*t)/k(e))-E(T))/S)/w;var e},P=(M(1)-T)/_;if(Math.abs(w)<1e-6||!isFinite(P)){if(Math.abs(x-b)<1e-6)return this.easeTo(e,n);const t=b<x?-1:1;P=Math.abs(Math.log(b/x))/_,I=function(){return 0},C=function(e){return Math.exp(t*_*e)}}return e.duration="duration"in e?+e.duration:1e3*P/("screenSpeed"in e?+e.screenSpeed/_:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=a!==c,this._pitching=u!==o,this._padding=!r.isPaddingEqual(h),this._prepareEase(n,!1),this._ease((e=>{const d=e*P,m=1/C(d);r.zoom=1===e?l:i+r.scaleZoom(m),this._rotating&&(r.bearing=t.number(a,c,e)),this._pitching&&(r.pitch=t.number(o,u,e)),this._padding&&(r.interpolatePadding(s,h,e),f=r.centerPoint.add(p));const _=1===e?g:r.unproject(y.add(v.mult(I(d))).mult(m));r.setLocationAtPoint(r.renderWorldCopies?_.wrap():_,f),this._fireMoveEvents(n)}),(()=>this._afterEase(n)),e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const t=this._onEaseEnd;delete this._onEaseEnd,t.call(this,e)}if(!t){const t=this.handlers;t&&t.stop(!1)}return this}_ease(e,n,r){!1===r.animate||0===r.duration?(e(1),n()):(this._easeStart=t.exported.now(),this._easeOptions=r,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const e=Math.min((t.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(e,n){e=t.wrap(e,-180,180);const r=Math.abs(e-n);return Math.abs(e-360-n)<r&&(e-=360),Math.abs(e+360-n)<r&&(e+=360),e}_normalizeCenter(t){const e=this.transform;if(!e.renderWorldCopies||e.lngRange)return;const n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}}class ti{constructor(e={}){this.options=e,t.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(t){return this._map=t,this._compact=this.options&&this.options.compact,this._container=a.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=a.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=a.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){a.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(t,e){const n=this._map._getUIString(`AttributionControl.${e}`);t.title=n,t.setAttribute("aria-label",n)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(t){!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType&&"terrain"!==t.type||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((t=>"string"!=typeof t?"":t))):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}const e=this._map.style.sourceCaches;for(const r in e){const n=e[r];if(n.used||n.usedForTerrain){const e=n.getSource();e.attribution&&t.indexOf(e.attribution)<0&&t.push(e.attribution)}}t=t.filter((t=>String(t).trim())),t.sort(((t,e)=>t.length-e.length)),t=t.filter(((e,n)=>{for(let r=n+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0}));const n=t.join(" | ");n!==this._attribHTML&&(this._attribHTML=n,t.length?(this._innerContainer.innerHTML=n,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class ei{constructor(e={}){this.options=e,t.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=a.create("div","maplibregl-ctrl mapboxgl-ctrl");const e=a.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://maplibre.org/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){a.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const t=this._container.children;if(t.length){const e=t[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&e.classList.add("maplibregl-compact","mapboxgl-compact"):e.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class ni{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e}remove(t){const e=this._currentlyRunning,n=e?this._queue.concat(e):this._queue;for(const r of n)if(r.id===t)return void(r.cancelled=!0)}run(t=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const e=this._currentlyRunning=this._queue;this._queue=[];for(const n of e)if(!n.cancelled&&(n.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const ri={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},ii={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},ai={showCompass:!0,showZoom:!0,visualizePitch:!1};class oi{constructor(e,n,r=!1){this._clickTolerance=10,this.element=n,this.mouseRotate=new kr({clickTolerance:e.dragRotate._mouseRotate._clickTolerance}),this.map=e,r&&(this.mousePitch=new Tr({clickTolerance:e.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),a.addEventListener(n,"mousedown",this.mousedown),a.addEventListener(n,"touchstart",this.touchstart,{passive:!1}),a.addEventListener(n,"touchmove",this.touchmove),a.addEventListener(n,"touchend",this.touchend),a.addEventListener(n,"touchcancel",this.reset)}down(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),a.disableDrag()}move(t,e){const n=this.map,r=this.mouseRotate.mousemoveWindow(t,e);if(r&&r.bearingDelta&&n.setBearing(n.getBearing()+r.bearingDelta),this.mousePitch){const r=this.mousePitch.mousemoveWindow(t,e);r&&r.pitchDelta&&n.setPitch(n.getPitch()+r.pitchDelta)}}off(){const t=this.element;a.removeEventListener(t,"mousedown",this.mousedown),a.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),a.removeEventListener(t,"touchmove",this.touchmove),a.removeEventListener(t,"touchend",this.touchend),a.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){a.enableDrag(),a.removeEventListener(window,"mousemove",this.mousemove),a.removeEventListener(window,"mouseup",this.mouseup)}mousedown(e){this.down(t.extend({},e,{ctrlKey:!0,preventDefault:()=>e.preventDefault()}),a.mousePos(this.element,e)),a.addEventListener(window,"mousemove",this.mousemove),a.addEventListener(window,"mouseup",this.mouseup)}mousemove(t){this.move(t,a.mousePos(this.element,t))}mouseup(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()}touchstart(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=a.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>t.preventDefault()},this._startPos))}touchmove(t){1!==t.targetTouches.length?this.reset():(this._lastPos=a.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:()=>t.preventDefault()},this._lastPos))}touchend(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function si(e,n,r){if(e=new t.LngLat(e.lng,e.lat),n){const i=new t.LngLat(e.lng-360,e.lat),a=new t.LngLat(e.lng+360,e.lat),o=r.locationPoint(e).distSqr(n);r.locationPoint(i).distSqr(n)<o?e=i:r.locationPoint(a).distSqr(n)<o&&(e=a)}for(;Math.abs(e.lng-r.center.lng)>180;){const t=r.locationPoint(e);if(t.x>=0&&t.y>=0&&t.x<=r.width&&t.y<=r.height)break;e.lng>r.center.lng?e.lng-=360:e.lng+=360}return e}const li={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ci(t,e,n){const r=t.classList;for(const i in li)r.remove(`maplibregl-${n}-anchor-${i}`,`mapboxgl-${n}-anchor-${i}`);r.add(`maplibregl-${n}-anchor-${e}`,`mapboxgl-${n}-anchor-${e}`)}class ui extends t.Evented{constructor(e,n){if(super(),(e instanceof HTMLElement||n)&&(e=t.extend({element:e},n)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&"auto"!==e.pitchAlignment?e.pitchAlignment:this._rotationAlignment,e&&e.element)this._element=e.element,this._offset=t.pointGeometry.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=a.create("div"),this._element.setAttribute("aria-label","Map marker");const n=a.createNS("http://www.w3.org/2000/svg","svg"),r=41,i=27;n.setAttributeNS(null,"display","block"),n.setAttributeNS(null,"height",`${r}px`),n.setAttributeNS(null,"width",`${i}px`),n.setAttributeNS(null,"viewBox",`0 0 ${i} ${r}`);const o=a.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"stroke","none"),o.setAttributeNS(null,"stroke-width","1"),o.setAttributeNS(null,"fill","none"),o.setAttributeNS(null,"fill-rule","evenodd");const s=a.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");const l=a.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");const c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const t of c){const e=a.createNS("http://www.w3.org/2000/svg","ellipse");e.setAttributeNS(null,"opacity","0.04"),e.setAttributeNS(null,"cx","10.5"),e.setAttributeNS(null,"cy","5.80029008"),e.setAttributeNS(null,"rx",t.rx),e.setAttributeNS(null,"ry",t.ry),l.appendChild(e)}const u=a.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill",this._color);const h=a.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),u.appendChild(h);const d=a.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"opacity","0.25"),d.setAttributeNS(null,"fill","#000000");const p=a.createNS("http://www.w3.org/2000/svg","path");p.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),d.appendChild(p);const f=a.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"transform","translate(6.0, 7.0)"),f.setAttributeNS(null,"fill","#FFFFFF");const m=a.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(8.0, 8.0)");const g=a.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#000000"),g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962");const y=a.createNS("http://www.w3.org/2000/svg","circle");y.setAttributeNS(null,"fill","#FFFFFF"),y.setAttributeNS(null,"cx","5.5"),y.setAttributeNS(null,"cy","5.5"),y.setAttributeNS(null,"r","5.4999962"),m.appendChild(g),m.appendChild(y),s.appendChild(l),s.appendChild(u),s.appendChild(d),s.appendChild(f),s.appendChild(m),n.appendChild(s),n.setAttributeNS(null,"height",r*this._scale+"px"),n.setAttributeNS(null,"width",i*this._scale+"px"),this._element.appendChild(n),this._offset=t.pointGeometry.convert(e&&e.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",(t=>{t.preventDefault()})),this._element.addEventListener("mousedown",(t=>{t.preventDefault()})),ci(this._element,this._anchor,"marker"),this._popup=null}addTo(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),a.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const e=38.1,n=13.5,r=Math.sqrt(Math.pow(n,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-e],"bottom-left":[r,-1*(e-n+r)],"bottom-right":[-r,-1*(e-n+r)],left:[n,-1*(e-n)],right:[-n,-1*(e-n)]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(t){const e=t.code,n=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==n&&13!==n||this.togglePopup()}_onMapClick(t){const e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this}_update(t){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=si(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(e=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let n="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?n="rotateX(0deg)":"map"===this._pitchAlignment&&(n=`rotateX(${this._map.getPitch()}deg)`),t&&"moveend"!==t.type||(this._pos=this._pos.round()),a.setTransform(this._element,`${li[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${n} ${e}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout((()=>{const t=this._map.unproject(this._pos),e=40075016.686*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=t.distanceTo(this._lngLat)>20*e?"0.2":"1.0",this._opacityTimeout=null}),100))}getOffset(){return this._offset}setOffset(e){return this._offset=t.pointGeometry.convert(e),this._update(),this}_onMove(e){if(!this._isDragging){const t=this._clickTolerance||this._map._clickTolerance;this._isDragging=e.point.dist(this._pointerdownPos)>=t}this._isDragging&&(this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"}_addDragHandler(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._pointerdownPos=t.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const hi={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let di,pi=0,fi=!1;const mi={maxWidth:100,unit:"metric"};function gi(t,e,n){const r=n&&n.maxWidth||100,i=t._container.clientHeight/2,a=t.unproject([0,i]),o=t.unproject([r,i]),s=a.distanceTo(o);if(n&&"imperial"===n.unit){const n=3.2808*s;n>5280?yi(e,r,n/5280,t._getUIString("ScaleControl.Miles")):yi(e,r,n,t._getUIString("ScaleControl.Feet"))}else n&&"nautical"===n.unit?yi(e,r,s/1852,t._getUIString("ScaleControl.NauticalMiles")):s>=1e3?yi(e,r,s/1e3,t._getUIString("ScaleControl.Kilometers")):yi(e,r,s,t._getUIString("ScaleControl.Meters"))}function yi(t,e,n,r){const i=function(t){const e=Math.pow(10,`${Math.floor(t)}`.length-1);let n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(t){const e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(n),e*n}(n);t.style.width=e*(i/n)+"px",t.innerHTML=`${i}&nbsp;${r}`}const vi={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},_i=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function xi(e){if(e){if("number"==typeof e){const n=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{center:new t.pointGeometry(0,0),top:new t.pointGeometry(0,e),"top-left":new t.pointGeometry(n,n),"top-right":new t.pointGeometry(-n,n),bottom:new t.pointGeometry(0,-e),"bottom-left":new t.pointGeometry(n,-n),"bottom-right":new t.pointGeometry(-n,-n),left:new t.pointGeometry(e,0),right:new t.pointGeometry(-e,0)}}if(e instanceof t.pointGeometry||Array.isArray(e)){const n=t.pointGeometry.convert(e);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:t.pointGeometry.convert(e.center||[0,0]),top:t.pointGeometry.convert(e.top||[0,0]),"top-left":t.pointGeometry.convert(e["top-left"]||[0,0]),"top-right":t.pointGeometry.convert(e["top-right"]||[0,0]),bottom:t.pointGeometry.convert(e.bottom||[0,0]),"bottom-left":t.pointGeometry.convert(e["bottom-left"]||[0,0]),"bottom-right":t.pointGeometry.convert(e["bottom-right"]||[0,0]),left:t.pointGeometry.convert(e.left||[0,0]),right:t.pointGeometry.convert(e.right||[0,0])}}return xi(new t.pointGeometry(0,0))}const bi={supported:e,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:class extends Qr{constructor(e){var n;if(t.PerformanceUtils.mark(t.PerformanceMarkers.create),null!=(e=t.extend({},ii,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new rr(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),{bearingSnap:e.bearingSnap}),this._interactive=e.interactive,this._cooperativeGestures=e.cooperativeGestures,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new ni,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},ri,e.locale),this._clickTolerance=e.clickTolerance,this._pixelRatio=null!==(n=e.pixelRatio)&&void 0!==n?n:devicePixelRatio,this._requestManager=new o(e.transformRequest),"string"==typeof e.container){if(this._container=document.getElementById(e.container),!this._container)throw new Error(`Container '${e.container}' not found.`)}else{if(!(e.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),"undefined"!=typeof window&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Yr(this,e),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=e.hash&&new ir("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new ti({customAttribution:e.customAttribution})),e.maplibreLogo&&this.addControl(new ei,e.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(e=>{this._update("style"===e.dataType),this.fire(new t.Event(`${e.dataType}data`,e))})),this.on("dataloading",(e=>{this.fire(new t.Event(`${e.dataType}dataloading`,e))})),this.on("dataabort",(e=>{this.fire(new t.Event("sourcedataabort",e))}))}_getMapId(){return this._mapId}addControl(e,n){if(void 0===n&&(n=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const r=e.onAdd(this);this._controls.push(e);const i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this}removeControl(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this}hasControl(t){return this._controls.indexOf(t)>-1}calculateCameraOptionsFromTo(t,e,n,r){return null==r&&this.style.terrain&&(r=this.transform.getElevation(n,this.style.terrain)),super.calculateCameraOptionsFromTo(t,e,n,r)}resize(e){const n=this._containerDimensions(),r=n[0],i=n[1];this._resizeCanvas(r,i,this.getPixelRatio()),this.transform.resize(r,i),this.painter.resize(r,i,this.getPixelRatio());const a=!this._moving;return a&&(this.stop(),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e))),this.fire(new t.Event("resize",e)),a&&this.fire(new t.Event("moveend",e)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(t){const[e,n]=this._containerDimensions();this._pixelRatio=t,this._resizeCanvas(e,n,t),this.painter.resize(e,n,t)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()}setMinZoom(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(t){if((t=null==t?60:t)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(t){return this.transform.renderWorldCopies=t,this._update()}project(e){return this.transform.locationPoint(t.LngLat.convert(e),this.style&&this.style.terrain)}unproject(e){return this.transform.pointLocation(t.pointGeometry.convert(e),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(t,e,n){if("mouseenter"===t||"mouseover"===t){let r=!1;const i=i=>{const a=this.getLayer(e)?this.queryRenderedFeatures(i.point,{layers:[e]}):[];a.length?r||(r=!0,n.call(this,new pr(t,this,i.originalEvent,{features:a}))):r=!1};return{layer:e,listener:n,delegates:{mousemove:i,mouseout:()=>{r=!1}}}}if("mouseleave"===t||"mouseout"===t){let r=!1;const i=i=>{(this.getLayer(e)?this.queryRenderedFeatures(i.point,{layers:[e]}):[]).length?r=!0:r&&(r=!1,n.call(this,new pr(t,this,i.originalEvent)))},a=e=>{r&&(r=!1,n.call(this,new pr(t,this,e.originalEvent)))};return{layer:e,listener:n,delegates:{mousemove:i,mouseout:a}}}{const r=t=>{const r=this.getLayer(e)?this.queryRenderedFeatures(t.point,{layers:[e]}):[];r.length&&(t.features=r,n.call(this,t),delete t.features)};return{layer:e,listener:n,delegates:{[t]:r}}}}on(t,e,n){if(void 0===n)return super.on(t,e);const r=this._createDelegatedListener(t,e,n);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(r);for(const i in r.delegates)this.on(i,r.delegates[i]);return this}once(t,e,n){if(void 0===n)return super.once(t,e);const r=this._createDelegatedListener(t,e,n);for(const i in r.delegates)this.once(i,r.delegates[i]);return this}off(t,e,n){return void 0===n?super.off(t,e):(this._delegatedListeners&&this._delegatedListeners[t]&&(r=>{const i=this._delegatedListeners[t];for(let t=0;t<i.length;t++){const r=i[t];if(r.layer===e&&r.listener===n){for(const t in r.delegates)this.off(t,r.delegates[t]);return i.splice(t,1),this}}})(),this)}queryRenderedFeatures(e,n){if(!this.style)return[];let r;if(void 0!==n||void 0===e||e instanceof t.pointGeometry||Array.isArray(e)||(n=e,e=void 0),n=n||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.pointGeometry||"number"==typeof e[0])r=[t.pointGeometry.convert(e)];else{const n=t.pointGeometry.convert(e[0]),i=t.pointGeometry.convert(e[1]);r=[n,new t.pointGeometry(i.x,n.y),i,new t.pointGeometry(n.x,i.y),n]}return this.style.queryRenderedFeatures(r,n,this.transform)}querySourceFeatures(t,e){return this.style.querySourceFeatures(t,e)}setStyle(e,n){return!1!==(n=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(e,n))}setTransformRequest(t){return this._requestManager.setTransformRequest(t),this}_getUIString(t){const e=this._locale[t];if(null==e)throw new Error(`Missing UI string '${t}'`);return e}_updateStyle(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new ee(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ee(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(e,n){if("string"==typeof e){const r=this._requestManager.transformRequest(e,t.ResourceType.Style);t.getJSON(r,((e,r)=>{e?this.fire(new t.ErrorEvent(e)):r&&this._updateDiff(r,n)}))}else"object"==typeof e&&this._updateDiff(e,n)}_updateDiff(e,n){try{this.style.setState(e)&&this._update(!0)}catch(r){t.warnOnce(`Unable to perform style diff: ${r.message||r.error||r}.  Rebuilding the style from scratch.`),this._updateStyle(e,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")}addSource(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)}isSourceLoaded(e){const n=this.style&&this.style.sourceCaches[e];if(void 0!==n)return n.loaded();this.fire(new t.ErrorEvent(new Error(`There is no source with ID '${e}'`)))}setTerrain(t){return this.style.setTerrain(t),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const t=this.style&&this.style.sourceCaches;for(const e in t){const n=t[e]._tiles;for(const t in n){const e=n[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}}return!0}addSourceType(t,e,n){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,n)}removeSource(t){return this.style.removeSource(t),this._update(!0)}getSource(t){return this.style.getSource(t)}addImage(e,n,{pixelRatio:r=1,sdf:i=!1,stretchX:a,stretchY:o,content:s}={}){if(this._lazyInitEmptyStyle(),n instanceof HTMLImageElement||t.isImageBitmap(n)){const{width:l,height:c,data:u}=t.exported.getImageData(n);this.style.addImage(e,{data:new t.RGBAImage({width:l,height:c},u),pixelRatio:r,stretchX:a,stretchY:o,content:s,sdf:i,version:0})}else{if(void 0===n.width||void 0===n.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:l,height:c,data:u}=n,h=n;this.style.addImage(e,{data:new t.RGBAImage({width:l,height:c},new Uint8Array(u)),pixelRatio:r,stretchX:a,stretchY:o,content:s,sdf:i,version:0,userImage:h}),h.onAdd&&h.onAdd(this,e)}}}updateImage(e,n){const r=this.style.getImage(e);if(!r)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const i=n instanceof HTMLImageElement||t.isImageBitmap(n)?t.exported.getImageData(n):n,{width:a,height:o,data:s}=i;if(void 0===a||void 0===o)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(a!==r.data.width||o!==r.data.height)return this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const l=!(n instanceof HTMLImageElement||t.isImageBitmap(n));r.data.replace(s,l),this.style.updateImage(e,r)}hasImage(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(t){this.style.removeImage(t)}loadImage(e,n){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),n)}listImages(){return this.style.listImages()}addLayer(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)}moveLayer(t,e){return this.style.moveLayer(t,e),this._update(!0)}removeLayer(t){return this.style.removeLayer(t),this._update(!0)}getLayer(t){return this.style.getLayer(t)}setLayerZoomRange(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0)}setFilter(t,e,n={}){return this.style.setFilter(t,e,n),this._update(!0)}getFilter(t){return this.style.getFilter(t)}setPaintProperty(t,e,n,r={}){return this.style.setPaintProperty(t,e,n,r),this._update(!0)}getPaintProperty(t,e){return this.style.getPaintProperty(t,e)}setLayoutProperty(t,e,n,r={}){return this.style.setLayoutProperty(t,e,n,r),this._update(!0)}getLayoutProperty(t,e){return this.style.getLayoutProperty(t,e)}setLight(t,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(t,e){return this.style.setFeatureState(t,e),this._update()}removeFeatureState(t,e){return this.style.removeFeatureState(t,e),this._update()}getFeatureState(t){return this.style.getFeatureState(t)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]}_setupContainer(){const t=this._container;t.classList.add("maplibregl-map","mapboxgl-map");const e=this._canvasContainer=a.create("div","maplibregl-canvas-container mapboxgl-canvas-container",t);this._interactive&&e.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=a.create("canvas","maplibregl-canvas mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const n=this._containerDimensions();this._resizeCanvas(n[0],n[1],this.getPixelRatio());const r=this._controlContainer=a.create("div","maplibregl-control-container mapboxgl-control-container",t),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((t=>{i[t]=a.create("div",`maplibregl-ctrl-${t} mapboxgl-ctrl-${t}`,r)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const t=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=a.create("div","maplibregl-cooperative-gesture-screen",t);let e="Control",n="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";0===navigator.platform.indexOf("Mac")&&(n="boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use \u2318 + scroll to zoom the map",e="Meta"),this._cooperativeGesturesScreen.innerHTML=`\n            <div class="maplibregl-desktop-message">${n}</div>\n            <div class="maplibregl-mobile-message">${"boolean"!=typeof this._cooperativeGestures&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>\n        `,document.addEventListener("keydown",(t=>{t.key===e&&(this._metaPress=!0)})),document.addEventListener("keyup",(t=>{t.key===e&&(this._metaPress=!1)})),this._canvasContainer.addEventListener("wheel",(t=>{this._onCooperativeGesture(t,this._metaPress,1)}),!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(t,e,n){this._canvas.width=n*t,this._canvas.height=n*e,this._canvas.style.width=`${t}px`,this._canvas.style.height=`${e}px`}_setupPainter(){const n=t.extend({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);r?(this.painter=new Qn(r,this.transform),t.exported$1.testSupport(r)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))}_contextRestored(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))}_onMapScroll(t){if(t.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(t,e,n){return!e&&n<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout((()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")}),100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(t){return this._update(),this._renderTaskQueue.add(t)}_cancelRenderFrame(t){this._renderTaskQueue.remove(t)}_render(e){let n,r=0;const i=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(n=i.createQueryEXT(),i.beginQueryEXT(i.TIME_ELAPSED_EXT,n),r=t.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),this._removed)return;let a=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const e=this.transform.zoom,n=t.exported.now();this.style.zoomHistory.update(e,n);const r=new t.EvaluationParameters(e,{now:n,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),i=r.crossFadingFactor();1===i&&i===this._crossFadingFactor||(a=!0,this._crossFadingFactor=i),this.style.update(r)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,t.PerformanceUtils.mark(t.PerformanceMarkers.load),this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const e=t.exported.now()-r;i.endQueryEXT(i.TIME_ELAPSED_EXT,n),setTimeout((()=>{const r=i.getQueryObjectEXT(n,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(n),this.fire(new t.Event("gpu-timing-frame",{cpuTime:e,gpuTime:r}))}),50)}if(this.listens("gpu-timing-layer")){const e=this.painter.collectGpuTimers();setTimeout((()=>{const n=this.painter.queryGpuTimers(e);this.fire(new t.Event("gpu-timing-layer",{layerTimes:n}))}),50)}const o=this._sourcesDirty||this._styleDirty||this._placementDirty;return o||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),!this._loaded||this._fullyLoaded||o||(this._fullyLoaded=!0,t.PerformanceUtils.mark(t.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const t of this._controls)t.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),"undefined"!=typeof window&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e&&e.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),a.remove(this._canvasContainer),a.remove(this._controlContainer),this._cooperativeGestures&&a.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),t.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new t.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=t.exported.frame((e=>{t.PerformanceUtils.frame(e),this._frame=null,this._render(e)})))}_onWindowOnline(){this._update()}_onWindowResize(t){this._trackResize&&this.resize({originalEvent:t})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())}get showPadding(){return!!this._showPadding}set showPadding(t){this._showPadding!==t&&(this._showPadding=t,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())}get repaint(){return!!this._repaint}set repaint(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(t){this._vertices=t,this._update()}_setCacheLimits(e,n){t.setCacheLimits(e,n)}get version(){return"2.4.0"}},NavigationControl:class{constructor(e){this.options=t.extend({},ai,e),this._container=a.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",(t=>this._map.zoomIn({},{originalEvent:t}))),a.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",(t=>this._map.zoomOut({},{originalEvent:t}))),a.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",(t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})})),this._compassIcon=a.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const t=this._map.getZoom(),e=t===this._map.getMaxZoom(),n=t===this._map.getMinZoom();this._zoomInButton.disabled=e,this._zoomOutButton.disabled=n,this._zoomInButton.setAttribute("aria-disabled",e.toString()),this._zoomOutButton.setAttribute("aria-disabled",n.toString())}_rotateCompassArrow(){const t=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=t}onAdd(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new oi(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){a.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(t,e){const n=a.create("button",t,this._container);return n.type="button",n.addEventListener("click",e),n}_setButtonTitle(t,e){const n=this._map._getUIString(`NavigationControl.${e}`);t.title=n,t.setAttribute("aria-label",n)}},GeolocateControl:class extends t.Evented{constructor(e){super(),this.options=t.extend({},hi,e),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(t){var e;return this._map=t,this._container=a.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),e=this._setupUI,void 0!==di?e(di):void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then((t=>{di="denied"!==t.state,e(di)})):(di=!!window.navigator.geolocation,e(di)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),a.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,pi=0,fi=!1}_isOutOfMapMaxBounds(t){const e=this._map.getMaxBounds(),n=t.coords;return e&&(n.longitude<e.getWest()||n.longitude>e.getEast()||n.latitude<e.getSouth()||n.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}}_updateCamera(e){const n=new t.LngLat(e.coords.longitude,e.coords.latitude),r=e.coords.accuracy,i=this._map.getBearing(),a=t.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(r),a,{geolocateSource:!0})}_updateMarker(e){if(e){const n=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const t=this._map._container.clientHeight/2,e=this._map.unproject([0,t]),n=this._map.unproject([1,t]),r=e.distanceTo(n),i=Math.ceil(2*this._accuracy/r);this._circleElement.style.width=`${i}px`,this._circleElement.style.height=`${i}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&fi)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(e){if(this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this._geolocateButton=a.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),a.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}else{const t=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=a.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new ui(this._dotElement),this._circleElement=a.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ui({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(e=>{e.geolocateSource||"ACTIVE_LOCK"!==this._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new t.Event("trackuserlocationend")))}))}trigger(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":pi--,fi=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let t;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),pi++,pi>1?(t={maximumAge:6e5,timeout:0},fi=!0):(t=this.options.positionOptions,fi=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:ti,LogoControl:ei,ScaleControl:class{constructor(e){this.options=t.extend({},mi,e),t.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){gi(this._map,this._container,this.options)}onAdd(t){return this._map=t,this._container=a.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){a.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(t){this.options.unit=t,gi(this._map,this._container,this.options)}},FullscreenControl:class{constructor(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=a.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){a.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const t=this._fullscreenButton=a.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);a.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",t).setAttribute("aria-hidden","true"),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(e){this.options=e,t.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(t){return this._map=t,this._container=a.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=a.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),a.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){a.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends t.Evented{constructor(e){super(),this.options=t.extend(Object.create(vi),e),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&a.remove(this._content),this._container&&(a.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(t){return this.setDOMContent(document.createTextNode(t))}setHTML(t){const e=document.createDocumentFragment(),n=document.createElement("body");let r;for(n.innerHTML=t;r=n.firstChild,r;)e.appendChild(r);return this.setDOMContent(e)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(t){return this.options.maxWidth=t,this._update(),this}setDOMContent(t){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=a.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(t),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(t){this._container&&this._container.classList.add(t)}removeClassName(t){this._container&&this._container.classList.remove(t)}setOffset(t){return this.options.offset=t,this._update(),this}toggleClassName(t){if(this._container)return this._container.classList.toggle(t)}_createCloseButton(){this.options.closeButton&&(this._closeButton=a.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(t){this._update(t.point)}_onMouseMove(t){this._update(t.point)}_onDrag(t){this._update(t.point)}_update(t){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(this._container||(this._container=a.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=a.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((t=>this._container.classList.add(t))),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=si(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!t)return;const e=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);let n=this.options.anchor;const r=xi(this.options.offset);if(!n){const t=this._container.offsetWidth,i=this._container.offsetHeight;let a;a=e.y+r.bottom.y<i?["top"]:e.y>this._map.transform.height-i?["bottom"]:[],e.x<t/2?a.push("left"):e.x>this._map.transform.width-t/2&&a.push("right"),n=0===a.length?"bottom":a.join("-")}const i=e.add(r[n]).round();a.setTransform(this._container,`${li[n]} translate(${i.x}px,${i.y}px)`),ci(this._container,n,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const t=this._container.querySelector(_i);t&&t.focus()}_onClose(){this.remove()}},Marker:ui,Style:ee,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.pointGeometry,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,AJAXError:t.AJAXError,config:t.config,CanvasSource:P,GeoJSONSource:k,ImageSource:C,RasterDEMTileSource:E,RasterTileSource:S,VectorTileSource:w,VideoSource:I,prewarm:function(){$().acquire(U)},clearPrewarmedResources:function(){const t=q;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(U),q=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return j.workerCount},set workerCount(t){j.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage(e){t.clearTileCache(e)},workerUrl:"",addProtocol(e,n){t.config.REGISTERED_PROTOCOLS[e]=n},removeProtocol(e){delete t.config.REGISTERED_PROTOCOLS[e]}};return Jr.extend(bi,{isSafari:t.isSafari,getPerformanceMetrics:t.PerformanceUtils.getPerformanceMetrics}),bi})),n}()},907:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,{Z:function(){return r}})},4942:function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,{Z:function(){return r}})},7462:function(t,e,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r.apply(this,arguments)}n.d(e,{Z:function(){return r}})},3366:function(t,e,n){"use strict";function r(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}n.d(e,{Z:function(){return r}})},885:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(181);function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);o=!0);}catch(l){s=!0,i=l}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(t,e)||(0,r.Z)(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},2982:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(907);var i=n(181);function a(t){return function(t){if(Array.isArray(t))return(0,r.Z)(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||(0,i.Z)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},181:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(907);function i(t,e){if(t){if("string"===typeof t)return(0,r.Z)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(t,e):void 0}}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var a=e[r]={exports:{}};return t[r].call(a.exports,a,a.exports,n),a.exports}n.m=t,n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},function(){var t,e=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};t=t||[null,e({}),e([]),e(e)];for(var s=2&i&&r;"object"==typeof s&&!~t.indexOf(s);s=e(s))Object.getOwnPropertyNames(s).forEach((function(t){o[t]=function(){return r[t]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.f={},n.e=function(t){return Promise.all(Object.keys(n.f).reduce((function(e,r){return n.f[r](t,e),e}),[]))},n.u=function(t){return"static/js/"+t+"."+{636:"e71d7793",787:"09c10f86"}[t]+".chunk.js"},n.miniCssF=function(t){},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){var t={},e="mapup-reactjs:";n.l=function(r,i,a,o){if(t[r])t[r].push(i);else{var s,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==e+a){s=h;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",e+a),s.src=r),t[r]=[i];var d=function(e,n){s.onerror=s.onload=null,clearTimeout(p);var i=t[r];if(delete t[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(t){return t(n)})),e)return e(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),l&&document.head.appendChild(s)}}}(),n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.p="/usemap-reactjs/",function(){var t={179:0};n.f.j=function(e,r){var i=n.o(t,e)?t[e]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=t[e]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(e),s=new Error;n.l(o,(function(r){if(n.o(t,e)&&(0!==(i=t[e])&&(t[e]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+e+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+e,e)}};var e=function(e,r){var i,a,o=r[0],s=r[1],l=r[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)l(n)}for(e&&e(r);c<o.length;c++)a=o[c],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0},r=self.webpackChunkmapup_reactjs=self.webpackChunkmapup_reactjs||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}(),function(){"use strict";var t=n(2791),e=n(1250),r=n(885),i=n(3366),a=n(7462),o=n(8182),s=n(4419),l=n(6863),c=n(8929),u=n(9853),h=n(2065),d=n(1217),p=n(5878);function f(t){return(0,d.Z)("MuiPaper",t)}(0,p.Z)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);var m=n(184),g=["className","component","elevation","square","variant"],y=function(t){return((t<1?5.11916*Math.pow(t,2):4.5*Math.log(t+1)+2)/100).toFixed(2)},v=(0,l.ZP)("div",{name:"MuiPaper",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,e[n.variant],!n.square&&e.rounded,"elevation"===n.variant&&e["elevation".concat(n.elevation)]]}})((function(t){var e,n=t.theme,r=t.ownerState;return(0,a.Z)({backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,transition:n.transitions.create("box-shadow")},!r.square&&{borderRadius:n.shape.borderRadius},"outlined"===r.variant&&{border:"1px solid ".concat((n.vars||n).palette.divider)},"elevation"===r.variant&&(0,a.Z)({boxShadow:(n.vars||n).shadows[r.elevation]},!n.vars&&"dark"===n.palette.mode&&{backgroundImage:"linear-gradient(".concat((0,h.Fq)("#fff",y(r.elevation)),", ").concat((0,h.Fq)("#fff",y(r.elevation)),")")},n.vars&&{backgroundImage:null==(e=n.vars.overlays)?void 0:e[r.elevation]}))})),_=t.forwardRef((function(t,e){var n=(0,c.Z)({props:t,name:"MuiPaper"}),r=n.className,l=n.component,u=void 0===l?"div":l,h=n.elevation,d=void 0===h?1:h,p=n.square,y=void 0!==p&&p,_=n.variant,x=void 0===_?"elevation":_,b=(0,i.Z)(n,g),w=(0,a.Z)({},n,{component:u,elevation:d,square:y,variant:x}),S=function(t){var e=t.square,n=t.elevation,r=t.variant,i=t.classes,a={root:["root",r,!e&&"rounded","elevation"===r&&"elevation".concat(n)]};return(0,s.Z)(a,f,i)}(w);return(0,m.jsx)(v,(0,a.Z)({as:u,ownerState:w,className:(0,o.Z)(S.root,r),ref:e},b))}));function x(t){return(0,d.Z)("MuiAppBar",t)}(0,p.Z)("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent"]);var b=["className","color","enableColorOnDark","position"],w=function(t,e){return"".concat(null==t?void 0:t.replace(")",""),", ").concat(e,")")},S=(0,l.ZP)(_,{name:"MuiAppBar",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,e["position".concat((0,u.Z)(n.position))],e["color".concat((0,u.Z)(n.color))]]}})((function(t){var e=t.theme,n=t.ownerState,r="light"===e.palette.mode?e.palette.grey[100]:e.palette.grey[900];return(0,a.Z)({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},"fixed"===n.position&&{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},"absolute"===n.position&&{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0},"sticky"===n.position&&{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0},"static"===n.position&&{position:"static"},"relative"===n.position&&{position:"relative"},!e.vars&&(0,a.Z)({},"default"===n.color&&{backgroundColor:r,color:e.palette.getContrastText(r)},n.color&&"default"!==n.color&&"inherit"!==n.color&&"transparent"!==n.color&&{backgroundColor:e.palette[n.color].main,color:e.palette[n.color].contrastText},"inherit"===n.color&&{color:"inherit"},"dark"===e.palette.mode&&!n.enableColorOnDark&&{backgroundColor:null,color:null},"transparent"===n.color&&(0,a.Z)({backgroundColor:"transparent",color:"inherit"},"dark"===e.palette.mode&&{backgroundImage:"none"})),e.vars&&(0,a.Z)({},"default"===n.color&&{"--AppBar-background":n.enableColorOnDark?e.vars.palette.AppBar.defaultBg:w(e.vars.palette.AppBar.darkBg,e.vars.palette.AppBar.defaultBg),"--AppBar-color":n.enableColorOnDark?e.vars.palette.text.primary:w(e.vars.palette.AppBar.darkColor,e.vars.palette.text.primary)},n.color&&!n.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":n.enableColorOnDark?e.vars.palette[n.color].main:w(e.vars.palette.AppBar.darkBg,e.vars.palette[n.color].main),"--AppBar-color":n.enableColorOnDark?e.vars.palette[n.color].contrastText:w(e.vars.palette.AppBar.darkColor,e.vars.palette[n.color].contrastText)},{backgroundColor:"var(--AppBar-background)",color:"inherit"===n.color?"inherit":"var(--AppBar-color)"},"transparent"===n.color&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))})),M=t.forwardRef((function(t,e){var n=(0,c.Z)({props:t,name:"MuiAppBar"}),r=n.className,l=n.color,h=void 0===l?"primary":l,d=n.enableColorOnDark,p=void 0!==d&&d,f=n.position,g=void 0===f?"fixed":f,y=(0,i.Z)(n,b),v=(0,a.Z)({},n,{color:h,position:g,enableColorOnDark:p}),_=function(t){var e=t.color,n=t.position,r=t.classes,i={root:["root","color".concat((0,u.Z)(e)),"position".concat((0,u.Z)(n))]};return(0,s.Z)(i,x,r)}(v);return(0,m.jsx)(S,(0,a.Z)({square:!0,component:"header",ownerState:v,elevation:4,className:(0,o.Z)(_.root,r,"fixed"===g&&"mui-fixed"),ref:e},y))})),E=n(2421),k=n(104),T=n(2982),C=n(2466),I=n(114),P=["sx"];function A(t){var e,n=t.sx,r=function(t){var e={systemProps:{},otherProps:{}};return Object.keys(t).forEach((function(n){I.Gc[n]?e.systemProps[n]=t[n]:e.otherProps[n]=t[n]})),e}((0,i.Z)(t,P)),o=r.systemProps,s=r.otherProps;return e=Array.isArray(n)?[o].concat((0,T.Z)(n)):"function"===typeof n?function(){var t=n.apply(void 0,arguments);return(0,C.P)(t)?(0,a.Z)({},o,t):o}:(0,a.Z)({},o,n),(0,a.Z)({},s,{sx:e})}var z=n(418),L=["className","component"];var R=n(5902),D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.defaultTheme,r=e.defaultClassName,s=void 0===r?"MuiBox-root":r,l=e.generateClassName,c=e.styleFunctionSx,u=void 0===c?k.Z:c,h=(0,E.ZP)("div",{shouldForwardProp:function(t){return"theme"!==t&&"sx"!==t&&"as"!==t}})(u),d=t.forwardRef((function(t,e){var r=(0,z.Z)(n),c=A(t),u=c.className,d=c.component,p=void 0===d?"div":d,f=(0,i.Z)(c,L);return(0,m.jsx)(h,(0,a.Z)({as:p,ref:e,className:(0,o.Z)(u,l?l(s):s),theme:r},f))}));return d}({defaultTheme:(0,n(4360).Z)(),defaultClassName:"MuiBox-root",generateClassName:R.Z.generate}),O=D,B=(n(76),n(9886)),F=(n(2110),n(5438)),N=n(9140),Z=n(2561),U=(0,B.w)((function(e,n){var r=e.styles,i=(0,N.O)([r],void 0,(0,t.useContext)(B.T)),a=(0,t.useRef)();return(0,Z.j)((function(){var t=n.key+"-global",e=new n.sheet.constructor({key:t,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy}),r=!1,o=document.querySelector('style[data-emotion="'+t+" "+i.name+'"]');return n.sheet.tags.length&&(e.before=n.sheet.tags[0]),null!==o&&(r=!0,o.setAttribute("data-emotion",t),e.hydrate([o])),a.current=[e,r],function(){e.flush()}}),[n]),(0,Z.j)((function(){var t=a.current,e=t[0];if(t[1])t[1]=!1;else{if(void 0!==i.next&&(0,F.My)(n,i.next,!0),e.tags.length){var r=e.tags[e.tags.length-1].nextElementSibling;e.before=r,e.flush()}n.insert("",i,e,!1)}}),[n,i.name]),null}));function j(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,N.O)(e)}var V=function(){var t=j.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function q(t){var e=t.styles,n=t.defaultTheme,r=void 0===n?{}:n,i="function"===typeof e?function(t){return e(void 0===(n=t)||null===n||0===Object.keys(n).length?r:t);var n}:e;return(0,m.jsx)(U,{styles:i})}var $=n(4205);var G=function(t){return(0,m.jsx)(q,(0,a.Z)({},t,{defaultTheme:$.Z}))},W=function(t,e){return(0,a.Z)({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},e&&{colorScheme:t.palette.mode})},H=function(t){return(0,a.Z)({color:(t.vars||t).palette.text.primary},t.typography.body1,{backgroundColor:(t.vars||t).palette.background.default,"@media print":{backgroundColor:(t.vars||t).palette.common.white}})};var X=function(e){var n=(0,c.Z)({props:e,name:"MuiCssBaseline"}),r=n.children,i=n.enableColorScheme,o=void 0!==i&&i;return(0,m.jsxs)(t.Fragment,{children:[(0,m.jsx)(G,{styles:function(t){return function(t){var e,n,r={html:W(t,arguments.length>1&&void 0!==arguments[1]&&arguments[1]),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:t.typography.fontWeightBold},body:(0,a.Z)({margin:0},H(t),{"&::backdrop":{backgroundColor:(t.vars||t).palette.background.default}})},i=null==(e=t.components)||null==(n=e.MuiCssBaseline)?void 0:n.styleOverrides;return i&&(r=[r,i]),r}(t,o)}}),r]})},K=n(4942);function Y(t){return(0,d.Z)("MuiToolbar",t)}(0,p.Z)("MuiToolbar",["root","gutters","regular","dense"]);var J=["className","component","disableGutters","variant"],Q=(0,l.ZP)("div",{name:"MuiToolbar",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,!n.disableGutters&&e.gutters,e[n.variant]]}})((function(t){var e=t.theme,n=t.ownerState;return(0,a.Z)({position:"relative",display:"flex",alignItems:"center"},!n.disableGutters&&(0,K.Z)({paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},e.breakpoints.up("sm"),{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}),"dense"===n.variant&&{minHeight:48})}),(function(t){var e=t.theme;return"regular"===t.ownerState.variant&&e.mixins.toolbar})),tt=t.forwardRef((function(t,e){var n=(0,c.Z)({props:t,name:"MuiToolbar"}),r=n.className,l=n.component,u=void 0===l?"div":l,h=n.disableGutters,d=void 0!==h&&h,p=n.variant,f=void 0===p?"regular":p,g=(0,i.Z)(n,J),y=(0,a.Z)({},n,{component:u,disableGutters:d,variant:f}),v=function(t){var e=t.classes,n={root:["root",!t.disableGutters&&"gutters",t.variant]};return(0,s.Z)(n,Y,e)}(y);return(0,m.jsx)(Q,(0,a.Z)({as:u,className:(0,o.Z)(v.root,r),ref:e,ownerState:y},g))})),et=n(7933),nt=n(9511),rt=n(2763);function it(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function at(t,e){return at=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},at(t,e)}var ot=t.createContext(null);function st(e,n){var r=Object.create(null);return e&&t.Children.map(e,(function(t){return t})).forEach((function(e){r[e.key]=function(e){return n&&(0,t.isValidElement)(e)?n(e):e}(e)})),r}function lt(t,e,n){return null!=n[e]?n[e]:t.props[e]}function ct(e,n,r){var i=st(e.children),a=function(t,e){function n(n){return n in e?e[n]:t[n]}t=t||{},e=e||{};var r,i=Object.create(null),a=[];for(var o in t)o in e?a.length&&(i[o]=a,a=[]):a.push(o);var s={};for(var l in e){if(i[l])for(r=0;r<i[l].length;r++){var c=i[l][r];s[i[l][r]]=n(c)}s[l]=n(l)}for(r=0;r<a.length;r++)s[a[r]]=n(a[r]);return s}(n,i);return Object.keys(a).forEach((function(o){var s=a[o];if((0,t.isValidElement)(s)){var l=o in n,c=o in i,u=n[o],h=(0,t.isValidElement)(u)&&!u.props.in;!c||l&&!h?c||!l||h?c&&l&&(0,t.isValidElement)(u)&&(a[o]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:u.props.in,exit:lt(s,"exit",e),enter:lt(s,"enter",e)})):a[o]=(0,t.cloneElement)(s,{in:!1}):a[o]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:!0,exit:lt(s,"exit",e),enter:lt(s,"enter",e)})}})),a}var ut=Object.values||function(t){return Object.keys(t).map((function(e){return t[e]}))},ht=function(e){var n,r;function o(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}r=e,(n=o).prototype=Object.create(r.prototype),n.prototype.constructor=n,at(n,r);var s=o.prototype;return s.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},s.componentWillUnmount=function(){this.mounted=!1},o.getDerivedStateFromProps=function(e,n){var r,i,a=n.children,o=n.handleExited;return{children:n.firstRender?(r=e,i=o,st(r.children,(function(e){return(0,t.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:lt(e,"appear",r),enter:lt(e,"enter",r),exit:lt(e,"exit",r)})}))):ct(e,a,o),firstRender:!1}},s.handleExited=function(t,e){var n=st(this.props.children);t.key in n||(t.props.onExited&&t.props.onExited(e),this.mounted&&this.setState((function(e){var n=(0,a.Z)({},e.children);return delete n[t.key],{children:n}})))},s.render=function(){var e=this.props,n=e.component,r=e.childFactory,a=(0,i.Z)(e,["component","childFactory"]),o=this.state.contextValue,s=ut(this.state.children).map(r);return delete a.appear,delete a.enter,delete a.exit,null===n?t.createElement(ot.Provider,{value:o},s):t.createElement(ot.Provider,{value:o},t.createElement(n,a,s))},o}(t.Component);ht.propTypes={},ht.defaultProps={component:"div",childFactory:function(t){return t}};var dt=ht;var pt=function(e){var n=e.className,i=e.classes,a=e.pulsate,s=void 0!==a&&a,l=e.rippleX,c=e.rippleY,u=e.rippleSize,h=e.in,d=e.onExited,p=e.timeout,f=t.useState(!1),g=(0,r.Z)(f,2),y=g[0],v=g[1],_=(0,o.Z)(n,i.ripple,i.rippleVisible,s&&i.ripplePulsate),x={width:u,height:u,top:-u/2+c,left:-u/2+l},b=(0,o.Z)(i.child,y&&i.childLeaving,s&&i.childPulsate);return h||y||v(!0),t.useEffect((function(){if(!h&&null!=d){var t=setTimeout(d,p);return function(){clearTimeout(t)}}}),[d,h,p]),(0,m.jsx)("span",{className:_,style:x,children:(0,m.jsx)("span",{className:b})})};var ft,mt,gt,yt,vt,_t,xt,bt,wt=(0,p.Z)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),St=["center","classes","className"],Mt=V(vt||(vt=ft||(ft=it(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),Et=V(_t||(_t=mt||(mt=it(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),kt=V(xt||(xt=gt||(gt=it(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),Tt=(0,l.ZP)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Ct=(0,l.ZP)(pt,{name:"MuiTouchRipple",slot:"Ripple"})(bt||(bt=yt||(yt=it(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),wt.rippleVisible,Mt,550,(function(t){return t.theme.transitions.easing.easeInOut}),wt.ripplePulsate,(function(t){return t.theme.transitions.duration.shorter}),wt.child,wt.childLeaving,Et,550,(function(t){return t.theme.transitions.easing.easeInOut}),wt.childPulsate,kt,(function(t){return t.theme.transitions.easing.easeInOut})),It=t.forwardRef((function(e,n){var s=(0,c.Z)({props:e,name:"MuiTouchRipple"}),l=s.center,u=void 0!==l&&l,h=s.classes,d=void 0===h?{}:h,p=s.className,f=(0,i.Z)(s,St),g=t.useState([]),y=(0,r.Z)(g,2),v=y[0],_=y[1],x=t.useRef(0),b=t.useRef(null);t.useEffect((function(){b.current&&(b.current(),b.current=null)}),[v]);var w=t.useRef(!1),S=t.useRef(null),M=t.useRef(null),E=t.useRef(null);t.useEffect((function(){return function(){clearTimeout(S.current)}}),[]);var k=t.useCallback((function(t){var e=t.pulsate,n=t.rippleX,r=t.rippleY,i=t.rippleSize,a=t.cb;_((function(t){return[].concat((0,T.Z)(t),[(0,m.jsx)(Ct,{classes:{ripple:(0,o.Z)(d.ripple,wt.ripple),rippleVisible:(0,o.Z)(d.rippleVisible,wt.rippleVisible),ripplePulsate:(0,o.Z)(d.ripplePulsate,wt.ripplePulsate),child:(0,o.Z)(d.child,wt.child),childLeaving:(0,o.Z)(d.childLeaving,wt.childLeaving),childPulsate:(0,o.Z)(d.childPulsate,wt.childPulsate)},timeout:550,pulsate:e,rippleX:n,rippleY:r,rippleSize:i},x.current)])})),x.current+=1,b.current=a}),[d]),C=t.useCallback((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=e.pulsate,i=void 0!==r&&r,a=e.center,o=void 0===a?u||e.pulsate:a,s=e.fakeElement,l=void 0!==s&&s;if("mousedown"===(null==t?void 0:t.type)&&w.current)w.current=!1;else{"touchstart"===(null==t?void 0:t.type)&&(w.current=!0);var c,h,d,p=l?null:E.current,f=p?p.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(o||void 0===t||0===t.clientX&&0===t.clientY||!t.clientX&&!t.touches)c=Math.round(f.width/2),h=Math.round(f.height/2);else{var m=t.touches&&t.touches.length>0?t.touches[0]:t,g=m.clientX,y=m.clientY;c=Math.round(g-f.left),h=Math.round(y-f.top)}if(o)(d=Math.sqrt((2*Math.pow(f.width,2)+Math.pow(f.height,2))/3))%2===0&&(d+=1);else{var v=2*Math.max(Math.abs((p?p.clientWidth:0)-c),c)+2,_=2*Math.max(Math.abs((p?p.clientHeight:0)-h),h)+2;d=Math.sqrt(Math.pow(v,2)+Math.pow(_,2))}null!=t&&t.touches?null===M.current&&(M.current=function(){k({pulsate:i,rippleX:c,rippleY:h,rippleSize:d,cb:n})},S.current=setTimeout((function(){M.current&&(M.current(),M.current=null)}),80)):k({pulsate:i,rippleX:c,rippleY:h,rippleSize:d,cb:n})}}),[u,k]),I=t.useCallback((function(){C({},{pulsate:!0})}),[C]),P=t.useCallback((function(t,e){if(clearTimeout(S.current),"touchend"===(null==t?void 0:t.type)&&M.current)return M.current(),M.current=null,void(S.current=setTimeout((function(){P(t,e)})));M.current=null,_((function(t){return t.length>0?t.slice(1):t})),b.current=e}),[]);return t.useImperativeHandle(n,(function(){return{pulsate:I,start:C,stop:P}}),[I,C,P]),(0,m.jsx)(Tt,(0,a.Z)({className:(0,o.Z)(wt.root,d.root,p),ref:E},f,{children:(0,m.jsx)(dt,{component:null,exit:!0,children:v})}))})),Pt=It;function At(t){return(0,d.Z)("MuiButtonBase",t)}var zt,Lt=(0,p.Z)("MuiButtonBase",["root","disabled","focusVisible"]),Rt=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],Dt=(0,l.ZP)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:function(t,e){return e.root}})((zt={display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"}},(0,K.Z)(zt,"&.".concat(Lt.disabled),{pointerEvents:"none",cursor:"default"}),(0,K.Z)(zt,"@media print",{colorAdjust:"exact"}),zt)),Ot=t.forwardRef((function(e,n){var l=(0,c.Z)({props:e,name:"MuiButtonBase"}),u=l.action,h=l.centerRipple,d=void 0!==h&&h,p=l.children,f=l.className,g=l.component,y=void 0===g?"button":g,v=l.disabled,_=void 0!==v&&v,x=l.disableRipple,b=void 0!==x&&x,w=l.disableTouchRipple,S=void 0!==w&&w,M=l.focusRipple,E=void 0!==M&&M,k=l.LinkComponent,T=void 0===k?"a":k,C=l.onBlur,I=l.onClick,P=l.onContextMenu,A=l.onDragLeave,z=l.onFocus,L=l.onFocusVisible,R=l.onKeyDown,D=l.onKeyUp,O=l.onMouseDown,B=l.onMouseLeave,F=l.onMouseUp,N=l.onTouchEnd,Z=l.onTouchMove,U=l.onTouchStart,j=l.tabIndex,V=void 0===j?0:j,q=l.TouchRippleProps,$=l.touchRippleRef,G=l.type,W=(0,i.Z)(l,Rt),H=t.useRef(null),X=t.useRef(null),K=(0,et.Z)(X,$),Y=(0,rt.Z)(),J=Y.isFocusVisibleRef,Q=Y.onFocus,tt=Y.onBlur,it=Y.ref,at=t.useState(!1),ot=(0,r.Z)(at,2),st=ot[0],lt=ot[1];_&&st&&lt(!1),t.useImperativeHandle(u,(function(){return{focusVisible:function(){lt(!0),H.current.focus()}}}),[]);var ct=t.useState(!1),ut=(0,r.Z)(ct,2),ht=ut[0],dt=ut[1];t.useEffect((function(){dt(!0)}),[]);var pt=ht&&!b&&!_;function ft(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S;return(0,nt.Z)((function(r){return e&&e(r),!n&&X.current&&X.current[t](r),!0}))}t.useEffect((function(){st&&E&&!b&&ht&&X.current.pulsate()}),[b,E,st,ht]);var mt=ft("start",O),gt=ft("stop",P),yt=ft("stop",A),vt=ft("stop",F),_t=ft("stop",(function(t){st&&t.preventDefault(),B&&B(t)})),xt=ft("start",U),bt=ft("stop",N),wt=ft("stop",Z),St=ft("stop",(function(t){tt(t),!1===J.current&&lt(!1),C&&C(t)}),!1),Mt=(0,nt.Z)((function(t){H.current||(H.current=t.currentTarget),Q(t),!0===J.current&&(lt(!0),L&&L(t)),z&&z(t)})),Et=function(){var t=H.current;return y&&"button"!==y&&!("A"===t.tagName&&t.href)},kt=t.useRef(!1),Tt=(0,nt.Z)((function(t){E&&!kt.current&&st&&X.current&&" "===t.key&&(kt.current=!0,X.current.stop(t,(function(){X.current.start(t)}))),t.target===t.currentTarget&&Et()&&" "===t.key&&t.preventDefault(),R&&R(t),t.target===t.currentTarget&&Et()&&"Enter"===t.key&&!_&&(t.preventDefault(),I&&I(t))})),Ct=(0,nt.Z)((function(t){E&&" "===t.key&&X.current&&st&&!t.defaultPrevented&&(kt.current=!1,X.current.stop(t,(function(){X.current.pulsate(t)}))),D&&D(t),I&&t.target===t.currentTarget&&Et()&&" "===t.key&&!t.defaultPrevented&&I(t)})),It=y;"button"===It&&(W.href||W.to)&&(It=T);var zt={};"button"===It?(zt.type=void 0===G?"button":G,zt.disabled=_):(W.href||W.to||(zt.role="button"),_&&(zt["aria-disabled"]=_));var Lt=(0,et.Z)(it,H),Ot=(0,et.Z)(n,Lt);var Bt=(0,a.Z)({},l,{centerRipple:d,component:y,disabled:_,disableRipple:b,disableTouchRipple:S,focusRipple:E,tabIndex:V,focusVisible:st}),Ft=function(t){var e=t.disabled,n=t.focusVisible,r=t.focusVisibleClassName,i=t.classes,a={root:["root",e&&"disabled",n&&"focusVisible"]},o=(0,s.Z)(a,At,i);return n&&r&&(o.root+=" ".concat(r)),o}(Bt);return(0,m.jsxs)(Dt,(0,a.Z)({as:It,className:(0,o.Z)(Ft.root,f),ownerState:Bt,onBlur:St,onClick:I,onContextMenu:gt,onFocus:Mt,onKeyDown:Tt,onKeyUp:Ct,onMouseDown:mt,onMouseLeave:_t,onMouseUp:vt,onDragLeave:yt,onTouchEnd:bt,onTouchMove:wt,onTouchStart:xt,ref:Ot,tabIndex:_?-1:V,type:G},zt,W,{children:[p,pt?(0,m.jsx)(Pt,(0,a.Z)({ref:K,center:d},q)):null]}))})),Bt=Ot;function Ft(t){return(0,d.Z)("MuiToggleButton",t)}var Nt=(0,p.Z)("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge"]),Zt=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],Ut=(0,l.ZP)(Bt,{name:"MuiToggleButton",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,e["size".concat((0,u.Z)(n.size))]]}})((function(t){var e,n,r=t.theme,i=t.ownerState,o="standard"===i.color?r.palette.text.primary:r.palette[i.color].main;return r.vars&&(o="standard"===i.color?r.vars.palette.text.primary:r.vars.palette[i.color].main,n="standard"===i.color?r.vars.palette.text.primaryChannel:r.vars.palette[i.color].mainChannel),(0,a.Z)({},r.typography.button,{borderRadius:(r.vars||r).shape.borderRadius,padding:11,border:"1px solid ".concat((r.vars||r).palette.divider),color:(r.vars||r).palette.action.active},i.fullWidth&&{width:"100%"},(e={},(0,K.Z)(e,"&.".concat(Nt.disabled),{color:(r.vars||r).palette.action.disabled,border:"1px solid ".concat((r.vars||r).palette.action.disabledBackground)}),(0,K.Z)(e,"&:hover",{textDecoration:"none",backgroundColor:r.vars?"rgba(".concat(r.vars.palette.text.primaryChannel," / ").concat(r.vars.palette.action.hoverOpacity,")"):(0,h.Fq)(r.palette.text.primary,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}),(0,K.Z)(e,"&.".concat(Nt.selected),{color:o,backgroundColor:r.vars?"rgba(".concat(n," / ").concat(r.vars.palette.action.selectedOpacity,")"):(0,h.Fq)(o,r.palette.action.selectedOpacity),"&:hover":{backgroundColor:r.vars?"rgba(".concat(n," / calc(").concat(r.vars.palette.action.selectedOpacity," + ").concat(r.vars.palette.action.hoverOpacity,"))"):(0,h.Fq)(o,r.palette.action.selectedOpacity+r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:r.vars?"rgba(".concat(n," / ").concat(r.vars.palette.action.selectedOpacity,")"):(0,h.Fq)(o,r.palette.action.selectedOpacity)}}}),e),"small"===i.size&&{padding:7,fontSize:r.typography.pxToRem(13)},"large"===i.size&&{padding:15,fontSize:r.typography.pxToRem(15)})})),jt=t.forwardRef((function(t,e){var n=(0,c.Z)({props:t,name:"MuiToggleButton"}),r=n.children,l=n.className,h=n.color,d=void 0===h?"standard":h,p=n.disabled,f=void 0!==p&&p,g=n.disableFocusRipple,y=void 0!==g&&g,v=n.fullWidth,_=void 0!==v&&v,x=n.onChange,b=n.onClick,w=n.selected,S=n.size,M=void 0===S?"medium":S,E=n.value,k=(0,i.Z)(n,Zt),T=(0,a.Z)({},n,{color:d,disabled:f,disableFocusRipple:y,fullWidth:_,size:M}),C=function(t){var e=t.classes,n=t.fullWidth,r=t.selected,i=t.disabled,a=t.size,o=t.color,l={root:["root",r&&"selected",i&&"disabled",n&&"fullWidth","size".concat((0,u.Z)(a)),o]};return(0,s.Z)(l,Ft,e)}(T);return(0,m.jsx)(Ut,(0,a.Z)({className:(0,o.Z)(C.root,l),disabled:f,focusRipple:!y,ref:e,onClick:function(t){b&&(b(t,E),t.defaultPrevented)||x&&x(t,E)},onChange:x,value:E,ownerState:T,"aria-pressed":w},k,{children:r}))}));n(7441);function Vt(t,e){return void 0!==e&&void 0!==t&&(Array.isArray(e)?e.indexOf(t)>=0:t===e)}function qt(t){return(0,d.Z)("MuiToggleButtonGroup",t)}var $t=(0,p.Z)("MuiToggleButtonGroup",["root","selected","vertical","disabled","grouped","groupedHorizontal","groupedVertical"]),Gt=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],Wt=(0,l.ZP)("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[(0,K.Z)({},"& .".concat($t.grouped),e.grouped),(0,K.Z)({},"& .".concat($t.grouped),e["grouped".concat((0,u.Z)(n.orientation))]),e.root,"vertical"===n.orientation&&e.vertical,n.fullWidth&&e.fullWidth]}})((function(t){var e=t.ownerState,n=t.theme;return(0,a.Z)({display:"inline-flex",borderRadius:(n.vars||n).shape.borderRadius},"vertical"===e.orientation&&{flexDirection:"column"},e.fullWidth&&{width:"100%"},(0,K.Z)({},"& .".concat($t.grouped),(0,a.Z)({},"horizontal"===e.orientation?(0,K.Z)({"&:not(:first-of-type)":{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-of-type)":{borderTopRightRadius:0,borderBottomRightRadius:0}},"&.".concat($t.selected," + .").concat($t.grouped,".").concat($t.selected),{borderLeft:0,marginLeft:0}):(0,K.Z)({"&:not(:first-of-type)":{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},"&:not(:last-of-type)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}},"&.".concat($t.selected," + .").concat($t.grouped,".").concat($t.selected),{borderTop:0,marginTop:0}))))})),Ht=t.forwardRef((function(e,n){var r=(0,c.Z)({props:e,name:"MuiToggleButtonGroup"}),l=r.children,h=r.className,d=r.color,p=void 0===d?"standard":d,f=r.disabled,g=void 0!==f&&f,y=r.exclusive,v=void 0!==y&&y,_=r.fullWidth,x=void 0!==_&&_,b=r.onChange,w=r.orientation,S=void 0===w?"horizontal":w,M=r.size,E=void 0===M?"medium":M,k=r.value,T=(0,i.Z)(r,Gt),C=(0,a.Z)({},r,{disabled:g,fullWidth:x,orientation:S,size:E}),I=function(t){var e=t.classes,n=t.orientation,r=t.fullWidth,i=t.disabled,a={root:["root","vertical"===n&&"vertical",r&&"fullWidth"],grouped:["grouped","grouped".concat((0,u.Z)(n)),i&&"disabled"]};return(0,s.Z)(a,qt,e)}(C),P=function(t,e){if(b){var n,r=k&&k.indexOf(e);k&&r>=0?(n=k.slice()).splice(r,1):n=k?k.concat(e):[e],b(t,n)}},A=function(t,e){b&&b(t,k===e?null:e)};return(0,m.jsx)(Wt,(0,a.Z)({role:"group",className:(0,o.Z)(I.root,h),ref:n,ownerState:C},T,{children:t.Children.map(l,(function(e){return t.isValidElement(e)?t.cloneElement(e,{className:(0,o.Z)(I.grouped,e.props.className),onChange:v?A:P,selected:void 0===e.props.selected?Vt(e.props.value,k):e.props.selected,size:e.props.size||E,fullWidth:x,color:e.props.color||p,disabled:e.props.disabled||g}):null}))}))})),Xt=n(838),Kt=n(5480);function Yt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Jt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Yt(Object(n),!0).forEach((function(e){(0,K.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Qt=t.createContext(null);var te=n(181);function ee(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=(0,te.Z)(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function ne(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function re(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function ie(t,e){var n=e.viewState||e,r=!1;if("longitude"in n&&"latitude"in n){var i=t.center;t.center=new i.constructor(n.longitude,n.latitude),r=r||i!==t.center}if("zoom"in n){var a=t.zoom;t.zoom=n.zoom,r=r||a!==t.zoom}if("bearing"in n){var o=t.bearing;t.bearing=n.bearing,r=r||o!==t.bearing}if("pitch"in n){var s=t.pitch;t.pitch=n.pitch,r=r||s!==t.pitch}return n.padding&&!t.isPaddingEqual(n.padding)&&(r=!0,t.padding=n.padding),r}var ae=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function oe(t){if(!t)return null;if("string"===typeof t)return t;if("toJS"in t&&(t=t.toJS()),!t.layers)return t;var e,n={},r=ee(t.layers);try{for(r.s();!(e=r.n()).done;){var i=e.value;n[i.id]=i}}catch(o){r.e(o)}finally{r.f()}var a=t.layers.map((function(t){var e=n[t.ref],r=null;if("interactive"in t&&delete(r=Jt({},t)).interactive,e){delete(r=r||Jt({},t)).ref;var i,a=ee(ae);try{for(a.s();!(i=a.n()).done;){var s=i.value;s in e&&(r[s]=e[s])}}catch(o){a.e(o)}finally{a.f()}}return r||t}));return Jt(Jt({},t),{},{layers:a})}function se(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!se(t[n],e[n]))return!1;return!0}if(Array.isArray(e))return!1;if("object"===typeof t&&"object"===typeof e){var r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(var a=0,o=r;a<o.length;a++){var s=o[a];if(!e.hasOwnProperty(s))return!1;if(!se(t[s],e[s]))return!1}return!0}return!1}var le={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},ce={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},ue={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},he=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],de=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"],pe=function(){function t(e,n,r){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=function(t){var e=i.props[ue[t.type]];e&&e(t)},this._onPointerEvent=function(t){"mousemove"!==t.type&&"mouseout"!==t.type||i._updateHover(t);var e=i.props[le[t.type]];if(e){if(i.props.interactiveLayerIds&&"mouseover"!==t.type&&"mouseout"!==t.type){var n=i._hoveredFeatures||i._map.queryRenderedFeatures(t.point,{layers:i.props.interactiveLayerIds});t.features=n}e(t),delete t.features}},this._onCameraEvent=function(t){if(!i._internalUpdate){var e=i.props[ce[t.type]];e&&e(t)}t.type in i._deferredEvents&&(i._deferredEvents[t.type]=!1)},this._MapClass=e,this.props=n,this._initialize(r)}var e,n,r;return e=t,n=[{key:"map",get:function(){return this._map}},{key:"transform",get:function(){return this._renderTransform}},{key:"setProps",value:function(t){var e=this.props;this.props=t;var n=this._updateSettings(t,e);n&&this._createShadowTransform(this._map);var r=this._updateSize(t),i=this._updateViewState(t,!0);this._updateStyle(t,e),this._updateStyleComponents(t,e),this._updateHandlers(t,e),(n||r||i&&!this._map.isMoving())&&this.redraw()}},{key:"_initialize",value:function(t){var e=this,n=this.props,r=Jt(Jt(Jt({},n),n.initialViewState),{},{accessToken:n.mapboxAccessToken||fe()||null,container:t,style:oe(n.mapStyle)}),i=r.initialViewState||r.viewState||r;if(Object.assign(r,{center:[i.longitude||0,i.latitude||0],zoom:i.zoom||0,pitch:i.pitch||0,bearing:i.bearing||0}),n.gl){var a=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=function(){return HTMLCanvasElement.prototype.getContext=a,n.gl}}var o=new this._MapClass(r);i.padding&&o.setPadding(i.padding),n.cursor&&(o.getCanvas().style.cursor=n.cursor),this._createShadowTransform(o);var s=o._render;o._render=function(t){e._inRender=!0,s.call(o,t),e._inRender=!1};var l=o._renderTaskQueue.run;o._renderTaskQueue.run=function(t){l.call(o._renderTaskQueue,t),e._onBeforeRepaint()},o.on("render",(function(){return e._onAfterRepaint()}));var c=o.fire;for(var u in o.fire=this._fireEvent.bind(this,c),o.on("resize",(function(){e._renderTransform.resize(o.transform.width,o.transform.height)})),o.on("styledata",(function(){return e._updateStyleComponents(e.props,{})})),o.on("sourcedata",(function(){return e._updateStyleComponents(e.props,{})})),le)o.on(u,this._onPointerEvent);for(var h in ce)o.on(h,this._onCameraEvent);for(var d in ue)o.on(d,this._onEvent);this._map=o}},{key:"recycle",value:function(){t.savedMaps.push(this)}},{key:"destroy",value:function(){this._map.remove()}},{key:"redraw",value:function(){var t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}},{key:"_createShadowTransform",value:function(t){var e=function(t){var e=t.clone();return e.pixelsToGLUnits=t.pixelsToGLUnits,e}(t.transform);t.painter.transform=e,this._renderTransform=e}},{key:"_updateSize",value:function(t){var e=t.viewState;if(e){var n=this._map;if(e.width!==n.transform.width||e.height!==n.transform.height)return n.resize(),!0}return!1}},{key:"_updateViewState",value:function(t,e){if(this._internalUpdate)return!1;var n=this._map,r=this._renderTransform,i=r.zoom,a=r.pitch,o=r.bearing,s=n.isMoving();s&&(r.cameraElevationReference="sea");var l=ie(r,Jt(Jt({},re(n.transform)),t));if(s&&(r.cameraElevationReference="ground"),l&&e){var c=this._deferredEvents;c.move=!0,c.zoom||(c.zoom=i!==r.zoom),c.rotate||(c.rotate=o!==r.bearing),c.pitch||(c.pitch=a!==r.pitch)}return s||ie(n.transform,t),l}},{key:"_updateSettings",value:function(t,e){var n,r=this._map,i=!1,a=ee(he);try{for(a.s();!(n=a.n()).done;){var o=n.value;o in t&&!se(t[o],e[o])&&(i=!0,r["set".concat(o[0].toUpperCase()).concat(o.slice(1))](t[o]))}}catch(s){a.e(s)}finally{a.f()}return i}},{key:"_updateStyle",value:function(t,e){if(t.cursor!==e.cursor&&(this._map.getCanvas().style.cursor=t.cursor),t.mapStyle!==e.mapStyle){var n={diff:t.styleDiffing};return"localIdeographFontFamily"in t&&(n.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(oe(t.mapStyle),n),!0}return!1}},{key:"_updateStyleComponents",value:function(t,e){var n=this._map,r=!1;return n.style.loaded()&&("light"in t&&!se(t.light,e.light)&&(r=!0,n.setLight(t.light)),"fog"in t&&!se(t.fog,e.fog)&&(r=!0,n.setFog(t.fog)),"terrain"in t&&!se(t.terrain,e.terrain)&&(t.terrain&&!n.getSource(t.terrain.source)||(r=!0,n.setTerrain(t.terrain)))),r}},{key:"_updateHandlers",value:function(t,e){var n,r=this._map,i=!1,a=ee(de);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=t[o];se(s,e[o])||(i=!0,s?r[o].enable(s):r[o].disable())}}catch(l){a.e(l)}finally{a.f()}return i}},{key:"_updateHover",value:function(t){var e,n=this.props;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){var r,i=t.type,a=(null===(e=this._hoveredFeatures)||void 0===e?void 0:e.length)>0;if("mousemove"===i)try{r=this._map.queryRenderedFeatures(t.point,{layers:n.interactiveLayerIds})}catch(s){r=[]}else r=[];var o=r.length>0;!o&&a&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=r,o&&!a&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=i}else this._hoveredFeatures=null}},{key:"_fireEvent",value:function(t,e,n){var r=this._map,i=r.transform,a="string"===typeof e?e:e.type;return"move"===a&&this._updateViewState(this.props,!1),a in ce&&("object"===typeof e&&(e.viewState=re(i)),this._map.isMoving())?(r.transform=this._renderTransform,t.call(r,e,n),r.transform=i,r):(t.call(r,e,n),r)}},{key:"_onBeforeRepaint",value:function(){var t=this,e=this._map;for(var n in this._internalUpdate=!0,this._deferredEvents)this._deferredEvents[n]&&e.fire(n);this._internalUpdate=!1;var r=this._map.transform;this._map.transform=this._renderTransform,this._onAfterRepaint=function(){t._map.transform=r}}}],r=[{key:"reuse",value:function(e,n){var r=t.savedMaps.pop();if(!r)return null;var i=r.map,a=i.getContainer();for(n.className=a.className;a.childNodes.length>0;)n.appendChild(a.childNodes[0]);i._container=n,r.setProps(Jt(Jt({},e),{},{styleDiffing:!1})),i.resize();var o=e.initialViewState;return o&&(o.bounds?i.fitBounds(o.bounds,Jt(Jt({},o.fitBoundsOptions),{},{duration:0})):r._updateViewState(o,!1)),i.isStyleLoaded()?i.fire("load"):i.once("styledata",(function(){return i.fire("load")})),r}}],n&&ne(e.prototype,n),r&&ne(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function fe(){var t=null;if("undefined"!==typeof location){var e=/access_token=([^&\/]*)/.exec(location.search);t=e&&e[1]}try{t=t||{NODE_ENV:"production",PUBLIC_URL:"/usemap-reactjs",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.MapboxAccessToken}catch(n){}try{t=t||{NODE_ENV:"production",PUBLIC_URL:"/usemap-reactjs",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch(r){}return t}pe.savedMaps=[];var me=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function ge(t,e){if(!t)return null;var n,r=t.map,i={getMap:function(){return r},getCenter:function(){return t.transform.center},getZoom:function(){return t.transform.zoom},getBearing:function(){return t.transform.bearing},getPitch:function(){return t.transform.pitch},getPadding:function(){return t.transform.padding},getBounds:function(){return t.transform.getBounds()},project:function(n){return t.transform.locationPoint(e.LngLat.convert(n))},unproject:function(n){return t.transform.pointLocation(e.Point.convert(n))},queryTerrainElevation:function(e,n){var i=r.transform;r.transform=t.transform;var a=r.queryTerrainElevation(e,n);return r.transform=i,a}},a=ee(function(t){var e=new Set,n=t;for(;n;){var r,i=ee(Object.getOwnPropertyNames(n));try{for(i.s();!(r=i.n()).done;){var a=r.value;"_"!==a[0]&&"function"===typeof t[a]&&"fire"!==a&&"setEventedParent"!==a&&e.add(a)}}catch(o){i.e(o)}finally{i.f()}n=Object.getPrototypeOf(n)}return Array.from(e)}(r));try{for(a.s();!(n=a.n()).done;){var o=n.value;o in i||me.includes(o)||(i[o]=r[o].bind(r))}}catch(s){a.e(s)}finally{a.f()}return i}var ye="undefined"!==typeof document?t.useLayoutEffect:t.useEffect,ve=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];var _e=t.createContext(null),xe={minZoom:0,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,mapStyle:{version:8,sources:{},layers:[]},styleDiffing:!0,projection:"mercator",renderWorldCopies:!0,onError:function(t){return console.error(t.error)},RTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"},be=(0,t.forwardRef)((function(e,i){var a=(0,t.useContext)(Qt),o=(0,t.useState)(null),s=(0,r.Z)(o,2),l=s[0],c=s[1],u=(0,t.useRef)(),h=(0,t.useRef)({mapLib:null,map:null}).current;(0,t.useEffect)((function(){var t,r=e.mapLib,i=!0;return Promise.resolve(r||n.e(636).then(n.t.bind(n,1636,19))).then((function(n){if(i){if(n.Map||(n=n.default),!n||!n.Map)throw new Error("Invalid mapLib");if(!n.supported(e))throw new Error("Map is not supported by this browser");!function(t,e){var n,r=ee(ve);try{for(r.s();!(n=r.n()).done;){var i=n.value;i in e&&(t[i]=e[i])}}catch(a){r.e(a)}finally{r.f()}e.RTLTextPlugin&&t.getRTLTextPluginStatus&&"unavailable"===t.getRTLTextPluginStatus()&&t.setRTLTextPlugin(e.RTLTextPlugin,(function(t){t&&console.error(t)}),!1)}(n,e),e.reuseMaps&&(t=pe.reuse(e,u.current)),t||(t=new pe(n.Map,e,u.current)),h.map=ge(t,n),h.mapLib=n,c(t),null===a||void 0===a||a.onMapMount(h.map,e.id)}})).catch((function(t){e.onError({type:"error",target:null,originalEvent:null,error:t})})),function(){i=!1,t&&(null===a||void 0===a||a.onMapUnmount(e.id),e.reuseMaps?t.recycle():t.destroy())}}),[]),ye((function(){l&&l.setProps(e)})),(0,t.useImperativeHandle)(i,(function(){return h.map}),[l]);var d=(0,t.useMemo)((function(){return Jt({position:"relative",width:"100%",height:"100%"},e.style)}),[e.style]);return t.createElement("div",{id:e.id,ref:u,style:d},l&&t.createElement(_e.Provider,{value:h},e.children))}));be.displayName="Map",be.defaultProps=xe;var we=be,Se=n(4164),Me=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Ee(t,e){if(t&&e){var n=t.style;for(var r in e){var i=e[r];Number.isFinite(i)&&!Me.test(r)?n[r]="".concat(i,"px"):n[r]=i}}}function ke(e){var n=(0,t.useContext)(_e),r=n.map,i=n.mapLib,a=(0,t.useRef)({props:e});a.current.props=e;var o=(0,t.useMemo)((function(){var n=!1;t.Children.forEach(e.children,(function(t){t&&(n=!0)}));var r=Jt(Jt({},e),{},{element:n?document.createElement("div"):null}),s=new i.Marker(r).setLngLat([e.longitude,e.latitude]);return s.getElement().addEventListener("click",(function(t){var e,n;null===(n=(e=a.current.props).onClick)||void 0===n||n.call(e,{type:"click",target:s,originalEvent:t})})),s.on("dragstart",(function(t){var e,n,r=t;r.lngLat=o.getLngLat(),null===(n=(e=a.current.props).onDragStart)||void 0===n||n.call(e,r)})),s.on("drag",(function(t){var e,n,r=t;r.lngLat=o.getLngLat(),null===(n=(e=a.current.props).onDrag)||void 0===n||n.call(e,r)})),s.on("dragend",(function(t){var e,n,r=t;r.lngLat=o.getLngLat(),null===(n=(e=a.current.props).onDragEnd)||void 0===n||n.call(e,r)})),s}),[]);return(0,t.useEffect)((function(){return o.addTo(r.getMap()),function(){o.remove()}}),[]),(0,t.useEffect)((function(){Ee(o.getElement(),e.style)}),[e.style]),o.getLngLat().lng===e.longitude&&o.getLngLat().lat===e.latitude||o.setLngLat([e.longitude,e.latitude]),e.offset&&!function(t,e){var n=Array.isArray(t)?t[0]:t?t.x:0,r=Array.isArray(t)?t[1]:t?t.y:0,i=Array.isArray(e)?e[0]:e?e.x:0,a=Array.isArray(e)?e[1]:e?e.y:0;return n===i&&r===a}(o.getOffset(),e.offset)&&o.setOffset(e.offset),o.isDraggable()!==e.draggable&&o.setDraggable(e.draggable),o.getRotation()!==e.rotation&&o.setRotation(e.rotation),o.getRotationAlignment()!==e.rotationAlignment&&o.setRotationAlignment(e.rotationAlignment),o.getPitchAlignment()!==e.pitchAlignment&&o.setPitchAlignment(e.pitchAlignment),o.getPopup()!==e.popup&&o.setPopup(e.popup),(0,Se.createPortal)(e.children,o.getElement())}ke.defaultProps={draggable:!1,popup:null,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto"};t.memo(ke);function Te(t){return new Set(t?t.trim().split(/\s+/):[])}t.memo((function(e){var n=(0,t.useContext)(_e),r=n.map,i=n.mapLib,a=(0,t.useMemo)((function(){return document.createElement("div")}),[]),o=(0,t.useRef)({props:e});o.current.props=e;var s=(0,t.useMemo)((function(){var t=Jt({},e),n=new i.Popup(t).setLngLat([e.longitude,e.latitude]);return n.once("open",(function(t){var e,n;null===(n=(e=o.current.props).onOpen)||void 0===n||n.call(e,t)})),n}),[]);if((0,t.useEffect)((function(){var t=function(t){var e,n;null===(n=(e=o.current.props).onClose)||void 0===n||n.call(e,t)};return s.on("close",t),s.setDOMContent(a).addTo(r.getMap()),function(){s.off("close",t),s.isOpen()&&s.remove()}}),[]),(0,t.useEffect)((function(){Ee(s.getElement(),e.style)}),[e.style]),s.isOpen()&&(s.getLngLat().lng===e.longitude&&s.getLngLat().lat===e.latitude||s.setLngLat([e.longitude,e.latitude]),e.offset&&!se(s.options.offset,e.offset)&&s.setOffset(e.offset),s.options.anchor===e.anchor&&s.options.maxWidth===e.maxWidth||(s.options.anchor=e.anchor,s.setMaxWidth(e.maxWidth)),s.options.className!==e.className)){var l,c=Te(s.options.className),u=Te(e.className),h=ee(c);try{for(h.s();!(l=h.n()).done;){var d=l.value;u.has(d)||s.removeClassName(d)}}catch(g){h.e(g)}finally{h.f()}var p,f=ee(u);try{for(f.s();!(p=f.n()).done;){var m=p.value;c.has(m)||s.addClassName(m)}}catch(g){f.e(g)}finally{f.f()}s.options.className=e.className}return(0,Se.createPortal)(e.children,a)}));var Ce=function(e,n,r,i){var a=(0,t.useContext)(_e),o=(0,t.useMemo)((function(){return e(a)}),[]);return(0,t.useEffect)((function(){var t=i||r||n,e="function"===typeof n&&"function"===typeof r?n:null,s="function"===typeof r?r:"function"===typeof n?n:null,l=a.map;return l.hasControl(o)||(l.addControl(o,null===t||void 0===t?void 0:t.position),e&&e(a)),function(){s&&s(a),l.hasControl(o)&&l.removeControl(o)}}),[]),o};t.memo((function(e){var n=Ce((function(t){return new t.mapLib.AttributionControl(e)}),{position:e.position});return(0,t.useEffect)((function(){Ee(n._container,e.style)}),[e.style]),null}));t.memo((function(e){var n=Ce((function(t){return new t.mapLib.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)})}),{position:e.position});return(0,t.useEffect)((function(){Ee(n._controlContainer,e.style)}),[e.style]),null}));var Ie=(0,t.forwardRef)((function(e,n){var r=(0,t.useRef)({props:e}),i=Ce((function(t){var n=new t.mapLib.GeolocateControl(e),i=n._setupUI;return n._setupUI=function(t){n._container.hasChildNodes()||i(t)},n.on("geolocate",(function(t){var e,n;null===(n=(e=r.current.props).onGeolocate)||void 0===n||n.call(e,t)})),n.on("error",(function(t){var e,n;null===(n=(e=r.current.props).onError)||void 0===n||n.call(e,t)})),n.on("outofmaxbounds",(function(t){var e,n;null===(n=(e=r.current.props).onOutOfMaxBounds)||void 0===n||n.call(e,t)})),n.on("trackuserlocationstart",(function(t){var e,n;null===(n=(e=r.current.props).onTrackUserLocationStart)||void 0===n||n.call(e,t)})),n.on("trackuserlocationend",(function(t){var e,n;null===(n=(e=r.current.props).onTrackUserLocationEnd)||void 0===n||n.call(e,t)})),n}),{position:e.position});return r.current.props=e,(0,t.useImperativeHandle)(n,(function(){return{trigger:function(){return i.trigger()}}}),[]),(0,t.useEffect)((function(){Ee(i._container,e.style)}),[e.style]),null}));Ie.displayName="GeolocateControl";t.memo(Ie);t.memo((function(e){var n=Ce((function(t){return new t.mapLib.NavigationControl(e)}),{position:e.position});return(0,t.useEffect)((function(){Ee(n._container,e.style)}),[e.style]),null}));function Pe(e){var n=Ce((function(t){return new t.mapLib.ScaleControl(e)}),{position:e.position});return n.options.unit===e.unit&&n.options.maxWidth===e.maxWidth||(n.options.maxWidth=e.maxWidth,n.setUnit(e.unit)),(0,t.useEffect)((function(){Ee(n._container,e.style)}),[e.style]),null}Pe.defaultProps={unit:"metric",maxWidth:100};t.memo(Pe);var Ae=n(4307),ze=n.n(Ae);var Le=function(e){var n=e.location,r=e.styleVal,i=(0,t.useRef)();return(0,t.useEffect)((function(){i.current&&i.current.flyTo({center:n,zoom:18,essential:!0})}),[n]),(0,m.jsx)(we,{ref:i,initialViewState:{latitude:n[1],longitude:n[0],zoom:16},mapLib:ze(),style:{position:"fixed",left:0,top:60,width:"100vw",height:"calc(100% - 120px)"},mapStyle:"https://basemaps.cartocdn.com/gl/".concat(r,"-gl-style/style.json")})};var Re=n(6189),De=n(7563),Oe=n(7979),Be=n(3981),Fe=n(5721),Ne=["onChange","maxRows","minRows","style","value"];function Ze(t,e){return parseInt(t[e],10)||0}var Ue={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function je(t){return void 0===t||null===t||0===Object.keys(t).length}var Ve=t.forwardRef((function(e,n){var o=e.onChange,s=e.maxRows,l=e.minRows,c=void 0===l?1:l,u=e.style,h=e.value,d=(0,i.Z)(e,Ne),p=t.useRef(null!=h).current,f=t.useRef(null),g=(0,De.Z)(n,f),y=t.useRef(null),v=t.useRef(0),_=t.useState({}),x=(0,r.Z)(_,2),b=x[0],w=x[1],S=t.useCallback((function(){var t=f.current,n=(0,Oe.Z)(t).getComputedStyle(t);if("0px"===n.width)return{};var r=y.current;r.style.width=n.width,r.value=t.value||e.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");var i=n["box-sizing"],a=Ze(n,"padding-bottom")+Ze(n,"padding-top"),o=Ze(n,"border-bottom-width")+Ze(n,"border-top-width"),l=r.scrollHeight;r.value="x";var u=r.scrollHeight,h=l;return c&&(h=Math.max(Number(c)*u,h)),s&&(h=Math.min(Number(s)*u,h)),{outerHeightStyle:(h=Math.max(h,u))+("border-box"===i?a+o:0),overflow:Math.abs(h-l)<=1}}),[s,c,e.placeholder]),M=function(t,e){var n=e.outerHeightStyle,r=e.overflow;return v.current<20&&(n>0&&Math.abs((t.outerHeightStyle||0)-n)>1||t.overflow!==r)?(v.current+=1,{overflow:r,outerHeightStyle:n}):t},E=t.useCallback((function(){var t=S();je(t)||w((function(e){return M(e,t)}))}),[S]);t.useEffect((function(){var t,e=(0,Be.Z)((function(){v.current=0,f.current&&function(){var t=S();je(t)||(0,Se.flushSync)((function(){w((function(e){return M(e,t)}))}))}()})),n=(0,Oe.Z)(f.current);return n.addEventListener("resize",e),"undefined"!==typeof ResizeObserver&&(t=new ResizeObserver(e)).observe(f.current),function(){e.clear(),n.removeEventListener("resize",e),t&&t.disconnect()}})),(0,Fe.Z)((function(){E()})),t.useEffect((function(){v.current=0}),[h]);return(0,m.jsxs)(t.Fragment,{children:[(0,m.jsx)("textarea",(0,a.Z)({value:h,onChange:function(t){v.current=0,p||E(),o&&o(t)},ref:g,rows:c,style:(0,a.Z)({height:b.outerHeightStyle,overflow:b.overflow?"hidden":null},u)},d)),(0,m.jsx)("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:y,tabIndex:-1,style:(0,a.Z)({},Ue,u,{padding:0})})]})}));var qe=function(t){return"string"===typeof t};var $e=t.createContext();var Ge=n(3026);function We(t){return null!=t&&!(Array.isArray(t)&&0===t.length)}function He(t){return(0,d.Z)("MuiInputBase",t)}var Xe=(0,p.Z)("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),Ke=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","startAdornment","type","value"],Ye=(0,l.ZP)("div",{name:"MuiInputBase",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,n.formControl&&e.formControl,n.startAdornment&&e.adornedStart,n.endAdornment&&e.adornedEnd,n.error&&e.error,"small"===n.size&&e.sizeSmall,n.multiline&&e.multiline,n.color&&e["color".concat((0,u.Z)(n.color))],n.fullWidth&&e.fullWidth,n.hiddenLabel&&e.hiddenLabel]}})((function(t){var e=t.theme,n=t.ownerState;return(0,a.Z)({},e.typography.body1,(0,K.Z)({color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center"},"&.".concat(Xe.disabled),{color:(e.vars||e).palette.text.disabled,cursor:"default"}),n.multiline&&(0,a.Z)({padding:"4px 0 5px"},"small"===n.size&&{paddingTop:1}),n.fullWidth&&{width:"100%"})})),Je=(0,l.ZP)("input",{name:"MuiInputBase",slot:"Input",overridesResolver:function(t,e){var n=t.ownerState;return[e.input,"small"===n.size&&e.inputSizeSmall,n.multiline&&e.inputMultiline,"search"===n.type&&e.inputTypeSearch,n.startAdornment&&e.inputAdornedStart,n.endAdornment&&e.inputAdornedEnd,n.hiddenLabel&&e.inputHiddenLabel]}})((function(t){var e,n=t.theme,r=t.ownerState,i="light"===n.palette.mode,o=(0,a.Z)({color:"currentColor"},n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:i?.42:.5},{transition:n.transitions.create("opacity",{duration:n.transitions.duration.shorter})}),s={opacity:"0 !important"},l=n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:i?.42:.5};return(0,a.Z)((e={font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"}},(0,K.Z)(e,"label[data-shrink=false] + .".concat(Xe.formControl," &"),{"&::-webkit-input-placeholder":s,"&::-moz-placeholder":s,"&:-ms-input-placeholder":s,"&::-ms-input-placeholder":s,"&:focus::-webkit-input-placeholder":l,"&:focus::-moz-placeholder":l,"&:focus:-ms-input-placeholder":l,"&:focus::-ms-input-placeholder":l}),(0,K.Z)(e,"&.".concat(Xe.disabled),{opacity:1,WebkitTextFillColor:(n.vars||n).palette.text.disabled}),(0,K.Z)(e,"&:-webkit-autofill",{animationDuration:"5000s",animationName:"mui-auto-fill"}),e),"small"===r.size&&{paddingTop:1},r.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===r.type&&{MozAppearance:"textfield"})})),Qe=(0,m.jsx)(G,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),tn=t.forwardRef((function(e,n){var l=(0,c.Z)({props:e,name:"MuiInputBase"}),h=l["aria-describedby"],d=l.autoComplete,p=l.autoFocus,f=l.className,g=l.components,y=void 0===g?{}:g,v=l.componentsProps,_=void 0===v?{}:v,x=l.defaultValue,b=l.disabled,w=l.disableInjectingGlobalStyles,S=l.endAdornment,M=l.fullWidth,E=void 0!==M&&M,k=l.id,T=l.inputComponent,C=void 0===T?"input":T,I=l.inputProps,P=void 0===I?{}:I,A=l.inputRef,z=l.maxRows,L=l.minRows,R=l.multiline,D=void 0!==R&&R,O=l.name,B=l.onBlur,F=l.onChange,N=l.onClick,Z=l.onFocus,U=l.onKeyDown,j=l.onKeyUp,V=l.placeholder,q=l.readOnly,$=l.renderSuffix,G=l.rows,W=l.startAdornment,H=l.type,X=void 0===H?"text":H,K=l.value,Y=(0,i.Z)(l,Ke),J=null!=P.value?P.value:K,Q=t.useRef(null!=J).current,tt=t.useRef(),nt=t.useCallback((function(t){0}),[]),rt=(0,et.Z)(P.ref,nt),it=(0,et.Z)(A,rt),at=(0,et.Z)(tt,it),ot=t.useState(!1),st=(0,r.Z)(ot,2),lt=st[0],ct=st[1],ut=t.useContext($e);var ht=function(t){var e=t.props,n=t.states,r=t.muiFormControl;return n.reduce((function(t,n){return t[n]=e[n],r&&"undefined"===typeof e[n]&&(t[n]=r[n]),t}),{})}({props:l,muiFormControl:ut,states:["color","disabled","error","hiddenLabel","size","required","filled"]});ht.focused=ut?ut.focused:lt,t.useEffect((function(){!ut&&b&&lt&&(ct(!1),B&&B())}),[ut,b,lt,B]);var dt=ut&&ut.onFilled,pt=ut&&ut.onEmpty,ft=t.useCallback((function(t){!function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t&&(We(t.value)&&""!==t.value||e&&We(t.defaultValue)&&""!==t.defaultValue)}(t)?pt&&pt():dt&&dt()}),[dt,pt]);(0,Ge.Z)((function(){Q&&ft({value:J})}),[J,ft,Q]);t.useEffect((function(){ft(tt.current)}),[]);var mt=C,gt=P;D&&"input"===mt&&(gt=G?(0,a.Z)({type:void 0,minRows:G,maxRows:G},gt):(0,a.Z)({type:void 0,maxRows:z,minRows:L},gt),mt=Ve);t.useEffect((function(){ut&&ut.setAdornedStart(Boolean(W))}),[ut,W]);var yt=(0,a.Z)({},l,{color:ht.color||"primary",disabled:ht.disabled,endAdornment:S,error:ht.error,focused:ht.focused,formControl:ut,fullWidth:E,hiddenLabel:ht.hiddenLabel,multiline:D,size:ht.size,startAdornment:W,type:X}),vt=function(t){var e=t.classes,n=t.color,r=t.disabled,i=t.error,a=t.endAdornment,o=t.focused,l=t.formControl,c=t.fullWidth,h=t.hiddenLabel,d=t.multiline,p=t.readOnly,f=t.size,m=t.startAdornment,g=t.type,y={root:["root","color".concat((0,u.Z)(n)),r&&"disabled",i&&"error",c&&"fullWidth",o&&"focused",l&&"formControl","small"===f&&"sizeSmall",d&&"multiline",m&&"adornedStart",a&&"adornedEnd",h&&"hiddenLabel",p&&"readOnly"],input:["input",r&&"disabled","search"===g&&"inputTypeSearch",d&&"inputMultiline","small"===f&&"inputSizeSmall",h&&"inputHiddenLabel",m&&"inputAdornedStart",a&&"inputAdornedEnd",p&&"readOnly"]};return(0,s.Z)(y,He,e)}(yt),_t=y.Root||Ye,xt=_.root||{},bt=y.Input||Je;return gt=(0,a.Z)({},gt,_.input),(0,m.jsxs)(t.Fragment,{children:[!w&&Qe,(0,m.jsxs)(_t,(0,a.Z)({},xt,!qe(_t)&&{ownerState:(0,a.Z)({},yt,xt.ownerState)},{ref:n,onClick:function(t){tt.current&&t.currentTarget===t.target&&tt.current.focus(),N&&N(t)}},Y,{className:(0,o.Z)(vt.root,xt.className,f),children:[W,(0,m.jsx)($e.Provider,{value:null,children:(0,m.jsx)(bt,(0,a.Z)({ownerState:yt,"aria-invalid":ht.error,"aria-describedby":h,autoComplete:d,autoFocus:p,defaultValue:x,disabled:ht.disabled,id:k,onAnimationStart:function(t){ft("mui-auto-fill-cancel"===t.animationName?tt.current:{value:"x"})},name:O,placeholder:V,readOnly:q,required:ht.required,rows:G,value:J,onKeyDown:U,onKeyUp:j,type:X},gt,!qe(bt)&&{as:mt,ownerState:(0,a.Z)({},yt,gt.ownerState)},{ref:at,className:(0,o.Z)(vt.input,gt.className),onBlur:function(t){B&&B(t),P.onBlur&&P.onBlur(t),ut&&ut.onBlur?ut.onBlur(t):ct(!1)},onChange:function(t){if(!Q){var e=t.target||tt.current;if(null==e)throw new Error((0,Re.Z)(1));ft({value:e.value})}for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];P.onChange&&P.onChange.apply(P,[t].concat(r)),F&&F.apply(void 0,[t].concat(r))},onFocus:function(t){ht.disabled?t.stopPropagation():(Z&&Z(t),P.onFocus&&P.onFocus(t),ut&&ut.onFocus?ut.onFocus(t):ct(!0))}}))}),S,$?$((0,a.Z)({},ht,{startAdornment:W})):null]}))]})})),en=tn,nn=n(5403),rn=n(6248),an=n(8959),on=n(8956),sn=n(2971);function ln(t){return"undefined"!==typeof t.normalize?t.normalize("NFD").replace(/[\u0300-\u036f]/g,""):t}function cn(t,e){for(var n=0;n<t.length;n+=1)if(e(t[n]))return n;return-1}var un=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.ignoreAccents,n=void 0===e||e,r=t.ignoreCase,i=void 0===r||r,a=t.limit,o=t.matchFrom,s=void 0===o?"any":o,l=t.stringify,c=t.trim,u=void 0!==c&&c;return function(t,e){var r=e.inputValue,o=e.getOptionLabel,c=u?r.trim():r;i&&(c=c.toLowerCase()),n&&(c=ln(c));var h=t.filter((function(t){var e=(l||o)(t);return i&&(e=e.toLowerCase()),n&&(e=ln(e)),"start"===s?0===e.indexOf(c):e.indexOf(c)>-1}));return"number"===typeof a?h.slice(0,a):h}}();function hn(e){var n,i=e.autoComplete,o=void 0!==i&&i,s=e.autoHighlight,l=void 0!==s&&s,c=e.autoSelect,u=void 0!==c&&c,h=e.blurOnSelect,d=void 0!==h&&h,p=e.clearOnBlur,f=void 0===p?!e.freeSolo:p,m=e.clearOnEscape,g=void 0!==m&&m,y=e.componentName,v=void 0===y?"useAutocomplete":y,_=e.defaultValue,x=void 0===_?e.multiple?[]:null:_,b=e.disableClearable,w=void 0!==b&&b,S=e.disableCloseOnSelect,M=void 0!==S&&S,E=e.disabled,k=e.disabledItemsFocusable,T=void 0!==k&&k,C=e.disableListWrap,I=void 0!==C&&C,P=e.filterOptions,A=void 0===P?un:P,z=e.filterSelectedOptions,L=void 0!==z&&z,R=e.freeSolo,D=void 0!==R&&R,O=e.getOptionDisabled,B=e.getOptionLabel,F=void 0===B?function(t){var e;return null!=(e=t.label)?e:t}:B,N=e.groupBy,Z=e.handleHomeEndKeys,U=void 0===Z?!e.freeSolo:Z,j=e.id,V=e.includeInputInList,q=void 0!==V&&V,$=e.inputValue,G=e.isOptionEqualToValue,W=void 0===G?function(t,e){return t===e}:G,H=e.multiple,X=void 0!==H&&H,K=e.onChange,Y=e.onClose,J=e.onHighlightChange,Q=e.onInputChange,tt=e.onOpen,et=e.open,nt=e.openOnFocus,rt=void 0!==nt&&nt,it=e.options,at=e.readOnly,ot=void 0!==at&&at,st=e.selectOnFocus,lt=void 0===st?!e.freeSolo:st,ct=e.value,ut=(0,rn.Z)(j);n=function(t){var e=F(t);return"string"!==typeof e?String(e):e};var ht=t.useRef(!1),dt=t.useRef(!0),pt=t.useRef(null),ft=t.useRef(null),mt=t.useState(null),gt=(0,r.Z)(mt,2),yt=gt[0],vt=gt[1],_t=t.useState(-1),xt=(0,r.Z)(_t,2),bt=xt[0],wt=xt[1],St=l?0:-1,Mt=t.useRef(St),Et=(0,an.Z)({controlled:ct,default:x,name:v}),kt=(0,r.Z)(Et,2),Tt=kt[0],Ct=kt[1],It=(0,an.Z)({controlled:$,default:"",name:v,state:"inputValue"}),Pt=(0,r.Z)(It,2),At=Pt[0],zt=Pt[1],Lt=t.useState(!1),Rt=(0,r.Z)(Lt,2),Dt=Rt[0],Ot=Rt[1],Bt=t.useCallback((function(t,e){if((X?Tt.length<e.length:null!==e)||f){var r;if(X)r="";else if(null==e)r="";else{var i=n(e);r="string"===typeof i?i:""}At!==r&&(zt(r),Q&&Q(t,r,"reset"))}}),[n,At,X,Q,zt,f,Tt]),Ft=t.useRef();t.useEffect((function(){var t=Tt!==Ft.current;Ft.current=Tt,Dt&&!t||D&&!t||Bt(null,Tt)}),[Tt,Bt,Dt,Ft,D]);var Nt=(0,an.Z)({controlled:et,default:!1,name:v,state:"open"}),Zt=(0,r.Z)(Nt,2),Ut=Zt[0],jt=Zt[1],Vt=t.useState(!0),qt=(0,r.Z)(Vt,2),$t=qt[0],Gt=qt[1],Wt=!X&&null!=Tt&&At===n(Tt),Ht=Ut&&!ot,Xt=Ht?A(it.filter((function(t){return!L||!(X?Tt:[Tt]).some((function(e){return null!==e&&W(t,e)}))})),{inputValue:Wt&&$t?"":At,getOptionLabel:n}):[],Kt=Ut&&Xt.length>0&&!ot,Yt=(0,on.Z)((function(t){-1===t?pt.current.focus():yt.querySelector('[data-tag-index="'.concat(t,'"]')).focus()}));t.useEffect((function(){X&&bt>Tt.length-1&&(wt(-1),Yt(-1))}),[Tt,X,bt,Yt]);var Jt=(0,on.Z)((function(t){var e=t.event,n=t.index,r=t.reason,i=void 0===r?"auto":r;if(Mt.current=n,-1===n?pt.current.removeAttribute("aria-activedescendant"):pt.current.setAttribute("aria-activedescendant","".concat(ut,"-option-").concat(n)),J&&J(e,-1===n?null:Xt[n],i),ft.current){var a=ft.current.querySelector('[role="option"].Mui-focused');a&&(a.classList.remove("Mui-focused"),a.classList.remove("Mui-focusVisible"));var o=ft.current.parentElement.querySelector('[role="listbox"]');if(o)if(-1!==n){var s=ft.current.querySelector('[data-option-index="'.concat(n,'"]'));if(s&&(s.classList.add("Mui-focused"),"keyboard"===i&&s.classList.add("Mui-focusVisible"),o.scrollHeight>o.clientHeight&&"mouse"!==i)){var l=s,c=o.clientHeight+o.scrollTop,u=l.offsetTop+l.offsetHeight;u>c?o.scrollTop=u-o.clientHeight:l.offsetTop-l.offsetHeight*(N?1.3:0)<o.scrollTop&&(o.scrollTop=l.offsetTop-l.offsetHeight*(N?1.3:0))}}else o.scrollTop=0}})),Qt=(0,on.Z)((function(t){var e=t.event,r=t.diff,i=t.direction,a=void 0===i?"next":i,s=t.reason,l=void 0===s?"auto":s;if(Ht){var c=function(t,e){if(!ft.current||-1===t)return-1;for(var n=t;;){if("next"===e&&n===Xt.length||"previous"===e&&-1===n)return-1;var r=ft.current.querySelector('[data-option-index="'.concat(n,'"]')),i=!T&&(!r||r.disabled||"true"===r.getAttribute("aria-disabled"));if(!(r&&!r.hasAttribute("tabindex")||i))return n;n+="next"===e?1:-1}}(function(){var t=Xt.length-1;if("reset"===r)return St;if("start"===r)return 0;if("end"===r)return t;var e=Mt.current+r;return e<0?-1===e&&q?-1:I&&-1!==Mt.current||Math.abs(r)>1?0:t:e>t?e===t+1&&q?-1:I||Math.abs(r)>1?t:0:e}(),a);if(Jt({index:c,reason:l,event:e}),o&&"reset"!==r)if(-1===c)pt.current.value=At;else{var u=n(Xt[c]);pt.current.value=u,0===u.toLowerCase().indexOf(At.toLowerCase())&&At.length>0&&pt.current.setSelectionRange(At.length,u.length)}}})),te=t.useCallback((function(){if(Ht){var t=X?Tt[0]:Tt;if(0!==Xt.length&&null!=t){if(ft.current)if(null==t)Mt.current>=Xt.length-1?Jt({index:Xt.length-1}):Jt({index:Mt.current});else{var e=Xt[Mt.current];if(X&&e&&-1!==cn(Tt,(function(t){return W(e,t)})))return;var n=cn(Xt,(function(e){return W(e,t)}));-1===n?Qt({diff:"reset"}):Jt({index:n})}}else Qt({diff:"reset"})}}),[Xt.length,!X&&Tt,L,Qt,Jt,Ht,At,X]),ee=(0,on.Z)((function(t){(0,sn.Z)(ft,t),t&&te()}));t.useEffect((function(){te()}),[te]);var ne=function(t){Ut||(jt(!0),Gt(!0),tt&&tt(t))},re=function(t,e){Ut&&(jt(!1),Y&&Y(t,e))},ie=function(t,e,n,r){if(X){if(Tt.length===e.length&&Tt.every((function(t,n){return t===e[n]})))return}else if(Tt===e)return;K&&K(t,e,n,r),Ct(e)},ae=t.useRef(!1),oe=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"selectOption",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"options",i=n,a=e;if(X){var o=cn(a=Array.isArray(Tt)?Tt.slice():[],(function(t){return W(e,t)}));-1===o?a.push(e):"freeSolo"!==r&&(a.splice(o,1),i="removeOption")}Bt(t,a),ie(t,a,i,{option:e}),M||t&&(t.ctrlKey||t.metaKey)||re(t,i),(!0===d||"touch"===d&&ae.current||"mouse"===d&&!ae.current)&&pt.current.blur()};var se=function(t,e){if(X){""===At&&re(t,"toggleInput");var n=bt;-1===bt?""===At&&"previous"===e&&(n=Tt.length-1):((n+="next"===e?1:-1)<0&&(n=0),n===Tt.length&&(n=-1)),n=function(t,e){if(-1===t)return-1;for(var n=t;;){if("next"===e&&n===Tt.length||"previous"===e&&-1===n)return-1;var r=yt.querySelector('[data-tag-index="'.concat(n,'"]'));if(r&&r.hasAttribute("tabindex")&&!r.disabled&&"true"!==r.getAttribute("aria-disabled"))return n;n+="next"===e?1:-1}}(n,e),wt(n),Yt(n)}},le=function(t){ht.current=!0,zt(""),Q&&Q(t,"","clear"),ie(t,X?[]:null,"clear")},ce=function(t){return function(e){if(t.onKeyDown&&t.onKeyDown(e),!e.defaultMuiPrevented&&(-1!==bt&&-1===["ArrowLeft","ArrowRight"].indexOf(e.key)&&(wt(-1),Yt(-1)),229!==e.which))switch(e.key){case"Home":Ht&&U&&(e.preventDefault(),Qt({diff:"start",direction:"next",reason:"keyboard",event:e}));break;case"End":Ht&&U&&(e.preventDefault(),Qt({diff:"end",direction:"previous",reason:"keyboard",event:e}));break;case"PageUp":e.preventDefault(),Qt({diff:-5,direction:"previous",reason:"keyboard",event:e}),ne(e);break;case"PageDown":e.preventDefault(),Qt({diff:5,direction:"next",reason:"keyboard",event:e}),ne(e);break;case"ArrowDown":e.preventDefault(),Qt({diff:1,direction:"next",reason:"keyboard",event:e}),ne(e);break;case"ArrowUp":e.preventDefault(),Qt({diff:-1,direction:"previous",reason:"keyboard",event:e}),ne(e);break;case"ArrowLeft":se(e,"previous");break;case"ArrowRight":se(e,"next");break;case"Enter":if(-1!==Mt.current&&Ht){var n=Xt[Mt.current],r=!!O&&O(n);if(e.preventDefault(),r)return;oe(e,n,"selectOption"),o&&pt.current.setSelectionRange(pt.current.value.length,pt.current.value.length)}else D&&""!==At&&!1===Wt&&(X&&e.preventDefault(),oe(e,At,"createOption","freeSolo"));break;case"Escape":Ht?(e.preventDefault(),e.stopPropagation(),re(e,"escape")):g&&(""!==At||X&&Tt.length>0)&&(e.preventDefault(),e.stopPropagation(),le(e));break;case"Backspace":if(X&&!ot&&""===At&&Tt.length>0){var i=-1===bt?Tt.length-1:bt,a=Tt.slice();a.splice(i,1),ie(e,a,"removeOption",{option:Tt[i]})}}}},ue=function(t){Ot(!0),rt&&!ht.current&&ne(t)},he=function(t){null!==ft.current&&ft.current.parentElement.contains(document.activeElement)?pt.current.focus():(Ot(!1),dt.current=!0,ht.current=!1,u&&-1!==Mt.current&&Ht?oe(t,Xt[Mt.current],"blur"):u&&D&&""!==At?oe(t,At,"blur","freeSolo"):f&&Bt(t,Tt),re(t,"blur"))},de=function(t){var e=t.target.value;At!==e&&(zt(e),Gt(!1),Q&&Q(t,e,"input")),""===e?w||X||ie(t,null,"clear"):ne(t)},pe=function(t){Jt({event:t,index:Number(t.currentTarget.getAttribute("data-option-index")),reason:"mouse"})},fe=function(){ae.current=!0},me=function(t){var e=Number(t.currentTarget.getAttribute("data-option-index"));oe(t,Xt[e],"selectOption"),ae.current=!1},ge=function(t){return function(e){var n=Tt.slice();n.splice(t,1),ie(e,n,"removeOption",{option:Tt[t]})}},ye=function(t){Ut?re(t,"toggleInput"):ne(t)},ve=function(t){t.target.getAttribute("id")!==ut&&t.preventDefault()},_e=function(){pt.current.focus(),lt&&dt.current&&pt.current.selectionEnd-pt.current.selectionStart===0&&pt.current.select(),dt.current=!1},xe=function(t){""!==At&&Ut||ye(t)},be=D&&At.length>0;be=be||(X?Tt.length>0:null!==Tt);var we=Xt;if(N){new Map;we=Xt.reduce((function(t,e,n){var r=N(e);return t.length>0&&t[t.length-1].group===r?t[t.length-1].options.push(e):t.push({key:n,index:n,group:r,options:[e]}),t}),[])}return E&&Dt&&he(),{getRootProps:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.Z)({"aria-owns":Kt?"".concat(ut,"-listbox"):null},t,{onKeyDown:ce(t),onMouseDown:ve,onClick:_e})},getInputLabelProps:function(){return{id:"".concat(ut,"-label"),htmlFor:ut}},getInputProps:function(){return{id:ut,value:At,onBlur:he,onFocus:ue,onChange:de,onMouseDown:xe,"aria-activedescendant":Ht?"":null,"aria-autocomplete":o?"both":"list","aria-controls":Kt?"".concat(ut,"-listbox"):void 0,"aria-expanded":Kt,autoComplete:"off",ref:pt,autoCapitalize:"none",spellCheck:"false",role:"combobox"}},getClearProps:function(){return{tabIndex:-1,onClick:le}},getPopupIndicatorProps:function(){return{tabIndex:-1,onClick:ye}},getTagProps:function(t){var e=t.index;return(0,a.Z)({key:e,"data-tag-index":e,tabIndex:-1},!ot&&{onDelete:ge(e)})},getListboxProps:function(){return{role:"listbox",id:"".concat(ut,"-listbox"),"aria-labelledby":"".concat(ut,"-label"),ref:ee,onMouseDown:function(t){t.preventDefault()}}},getOptionProps:function(t){var e=t.index,r=t.option,i=(X?Tt:[Tt]).some((function(t){return null!=t&&W(r,t)})),a=!!O&&O(r);return{key:n(r),tabIndex:-1,role:"option",id:"".concat(ut,"-option-").concat(e),onMouseOver:pe,onClick:me,onTouchStart:fe,"data-option-index":e,"aria-disabled":a,"aria-selected":i}},id:ut,inputValue:At,value:Tt,dirty:be,popupOpen:Ht,focused:Dt||-1!==bt,anchorEl:yt,setAnchorEl:vt,focusedTag:bt,groupedOptions:we}}var dn=n(9723);function pn(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function fn(t){return t instanceof pn(t).Element||t instanceof Element}function mn(t){return t instanceof pn(t).HTMLElement||t instanceof HTMLElement}function gn(t){return"undefined"!==typeof ShadowRoot&&(t instanceof pn(t).ShadowRoot||t instanceof ShadowRoot)}var yn=Math.max,vn=Math.min,_n=Math.round;function xn(){var t=navigator.userAgentData;return null!=t&&t.brands?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}function bn(){return!/^((?!chrome|android).)*safari/i.test(xn())}function wn(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=t.getBoundingClientRect(),i=1,a=1;e&&mn(t)&&(i=t.offsetWidth>0&&_n(r.width)/t.offsetWidth||1,a=t.offsetHeight>0&&_n(r.height)/t.offsetHeight||1);var o=(fn(t)?pn(t):window).visualViewport,s=!bn()&&n,l=(r.left+(s&&o?o.offsetLeft:0))/i,c=(r.top+(s&&o?o.offsetTop:0))/a,u=r.width/i,h=r.height/a;return{width:u,height:h,top:c,right:l+u,bottom:c+h,left:l,x:l,y:c}}function Sn(t){var e=pn(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Mn(t){return t?(t.nodeName||"").toLowerCase():null}function En(t){return((fn(t)?t.ownerDocument:t.document)||window.document).documentElement}function kn(t){return wn(En(t)).left+Sn(t).scrollLeft}function Tn(t){return pn(t).getComputedStyle(t)}function Cn(t){var e=Tn(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function In(t,e,n){void 0===n&&(n=!1);var r=mn(e),i=mn(e)&&function(t){var e=t.getBoundingClientRect(),n=_n(e.width)/t.offsetWidth||1,r=_n(e.height)/t.offsetHeight||1;return 1!==n||1!==r}(e),a=En(e),o=wn(t,i,n),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&(("body"!==Mn(e)||Cn(a))&&(s=function(t){return t!==pn(t)&&mn(t)?{scrollLeft:(e=t).scrollLeft,scrollTop:e.scrollTop}:Sn(t);var e}(e)),mn(e)?((l=wn(e,!0)).x+=e.clientLeft,l.y+=e.clientTop):a&&(l.x=kn(a))),{x:o.left+s.scrollLeft-l.x,y:o.top+s.scrollTop-l.y,width:o.width,height:o.height}}function Pn(t){var e=wn(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function An(t){return"html"===Mn(t)?t:t.assignedSlot||t.parentNode||(gn(t)?t.host:null)||En(t)}function zn(t){return["html","body","#document"].indexOf(Mn(t))>=0?t.ownerDocument.body:mn(t)&&Cn(t)?t:zn(An(t))}function Ln(t,e){var n;void 0===e&&(e=[]);var r=zn(t),i=r===(null==(n=t.ownerDocument)?void 0:n.body),a=pn(r),o=i?[a].concat(a.visualViewport||[],Cn(r)?r:[]):r,s=e.concat(o);return i?s:s.concat(Ln(An(o)))}function Rn(t){return["table","td","th"].indexOf(Mn(t))>=0}function Dn(t){return mn(t)&&"fixed"!==Tn(t).position?t.offsetParent:null}function On(t){for(var e=pn(t),n=Dn(t);n&&Rn(n)&&"static"===Tn(n).position;)n=Dn(n);return n&&("html"===Mn(n)||"body"===Mn(n)&&"static"===Tn(n).position)?e:n||function(t){var e=/firefox/i.test(xn());if(/Trident/i.test(xn())&&mn(t)&&"fixed"===Tn(t).position)return null;var n=An(t);for(gn(n)&&(n=n.host);mn(n)&&["html","body"].indexOf(Mn(n))<0;){var r=Tn(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||e&&"filter"===r.willChange||e&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(t)||e}var Bn="top",Fn="bottom",Nn="right",Zn="left",Un="auto",jn=[Bn,Fn,Nn,Zn],Vn="start",qn="end",$n="viewport",Gn="popper",Wn=jn.reduce((function(t,e){return t.concat([e+"-"+Vn,e+"-"+qn])}),[]),Hn=[].concat(jn,[Un]).reduce((function(t,e){return t.concat([e,e+"-"+Vn,e+"-"+qn])}),[]),Xn=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Kn(t){var e=new Map,n=new Set,r=[];function i(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!n.has(t)){var r=e.get(t);r&&i(r)}})),r.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||i(t)})),r}function Yn(t){var e;return function(){return e||(e=new Promise((function(n){Promise.resolve().then((function(){e=void 0,n(t())}))}))),e}}var Jn={placement:"bottom",modifiers:[],strategy:"absolute"};function Qn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"===typeof t.getBoundingClientRect)}))}function tr(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,r=void 0===n?[]:n,i=e.defaultOptions,a=void 0===i?Jn:i;return function(t,e,n){void 0===n&&(n=a);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},Jn,a),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},o=[],s=!1,l={state:i,setOptions:function(n){var s="function"===typeof n?n(i.options):n;c(),i.options=Object.assign({},a,i.options,s),i.scrollParents={reference:fn(t)?Ln(t):t.contextElement?Ln(t.contextElement):[],popper:Ln(e)};var u=function(t){var e=Kn(t);return Xn.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}(function(t){var e=t.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{});return Object.keys(e).map((function(t){return e[t]}))}([].concat(r,i.options.modifiers)));return i.orderedModifiers=u.filter((function(t){return t.enabled})),i.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,r=void 0===n?{}:n,a=t.effect;if("function"===typeof a){var s=a({state:i,name:e,instance:l,options:r}),c=function(){};o.push(s||c)}})),l.update()},forceUpdate:function(){if(!s){var t=i.elements,e=t.reference,n=t.popper;if(Qn(e,n)){i.rects={reference:In(e,On(n),"fixed"===i.options.strategy),popper:Pn(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(t){return i.modifiersData[t.name]=Object.assign({},t.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var a=i.orderedModifiers[r],o=a.fn,c=a.options,u=void 0===c?{}:c,h=a.name;"function"===typeof o&&(i=o({state:i,options:u,name:h,instance:l})||i)}else i.reset=!1,r=-1}}},update:Yn((function(){return new Promise((function(t){l.forceUpdate(),t(i)}))})),destroy:function(){c(),s=!0}};if(!Qn(t,e))return l;function c(){o.forEach((function(t){return t()})),o=[]}return l.setOptions(n).then((function(t){!s&&n.onFirstUpdate&&n.onFirstUpdate(t)})),l}}var er={passive:!0};function nr(t){return t.split("-")[0]}function rr(t){return t.split("-")[1]}function ir(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function ar(t){var e,n=t.reference,r=t.element,i=t.placement,a=i?nr(i):null,o=i?rr(i):null,s=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(a){case Bn:e={x:s,y:n.y-r.height};break;case Fn:e={x:s,y:n.y+n.height};break;case Nn:e={x:n.x+n.width,y:l};break;case Zn:e={x:n.x-r.width,y:l};break;default:e={x:n.x,y:n.y}}var c=a?ir(a):null;if(null!=c){var u="y"===c?"height":"width";switch(o){case Vn:e[c]=e[c]-(n[u]/2-r[u]/2);break;case qn:e[c]=e[c]+(n[u]/2-r[u]/2)}}return e}var or={top:"auto",right:"auto",bottom:"auto",left:"auto"};function sr(t){var e,n=t.popper,r=t.popperRect,i=t.placement,a=t.variation,o=t.offsets,s=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,h=t.isFixed,d=o.x,p=void 0===d?0:d,f=o.y,m=void 0===f?0:f,g="function"===typeof u?u({x:p,y:m}):{x:p,y:m};p=g.x,m=g.y;var y=o.hasOwnProperty("x"),v=o.hasOwnProperty("y"),_=Zn,x=Bn,b=window;if(c){var w=On(n),S="clientHeight",M="clientWidth";if(w===pn(n)&&"static"!==Tn(w=En(n)).position&&"absolute"===s&&(S="scrollHeight",M="scrollWidth"),i===Bn||(i===Zn||i===Nn)&&a===qn)x=Fn,m-=(h&&w===b&&b.visualViewport?b.visualViewport.height:w[S])-r.height,m*=l?1:-1;if(i===Zn||(i===Bn||i===Fn)&&a===qn)_=Nn,p-=(h&&w===b&&b.visualViewport?b.visualViewport.width:w[M])-r.width,p*=l?1:-1}var E,k=Object.assign({position:s},c&&or),T=!0===u?function(t){var e=t.x,n=t.y,r=window.devicePixelRatio||1;return{x:_n(e*r)/r||0,y:_n(n*r)/r||0}}({x:p,y:m}):{x:p,y:m};return p=T.x,m=T.y,l?Object.assign({},k,((E={})[x]=v?"0":"",E[_]=y?"0":"",E.transform=(b.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",E)):Object.assign({},k,((e={})[x]=v?m+"px":"",e[_]=y?p+"px":"",e.transform="",e))}var lr={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.options,r=t.name,i=n.offset,a=void 0===i?[0,0]:i,o=Hn.reduce((function(t,n){return t[n]=function(t,e,n){var r=nr(t),i=[Zn,Bn].indexOf(r)>=0?-1:1,a="function"===typeof n?n(Object.assign({},e,{placement:t})):n,o=a[0],s=a[1];return o=o||0,s=(s||0)*i,[Zn,Nn].indexOf(r)>=0?{x:s,y:o}:{x:o,y:s}}(n,e.rects,a),t}),{}),s=o[e.placement],l=s.x,c=s.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=o}},cr={left:"right",right:"left",bottom:"top",top:"bottom"};function ur(t){return t.replace(/left|right|bottom|top/g,(function(t){return cr[t]}))}var hr={start:"end",end:"start"};function dr(t){return t.replace(/start|end/g,(function(t){return hr[t]}))}function pr(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&gn(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function fr(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function mr(t,e,n){return e===$n?fr(function(t,e){var n=pn(t),r=En(t),i=n.visualViewport,a=r.clientWidth,o=r.clientHeight,s=0,l=0;if(i){a=i.width,o=i.height;var c=bn();(c||!c&&"fixed"===e)&&(s=i.offsetLeft,l=i.offsetTop)}return{width:a,height:o,x:s+kn(t),y:l}}(t,n)):fn(e)?function(t,e){var n=wn(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(e,n):fr(function(t){var e,n=En(t),r=Sn(t),i=null==(e=t.ownerDocument)?void 0:e.body,a=yn(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=yn(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+kn(t),l=-r.scrollTop;return"rtl"===Tn(i||n).direction&&(s+=yn(n.clientWidth,i?i.clientWidth:0)-a),{width:a,height:o,x:s,y:l}}(En(t)))}function gr(t,e,n,r){var i="clippingParents"===e?function(t){var e=Ln(An(t)),n=["absolute","fixed"].indexOf(Tn(t).position)>=0&&mn(t)?On(t):t;return fn(n)?e.filter((function(t){return fn(t)&&pr(t,n)&&"body"!==Mn(t)})):[]}(t):[].concat(e),a=[].concat(i,[n]),o=a[0],s=a.reduce((function(e,n){var i=mr(t,n,r);return e.top=yn(i.top,e.top),e.right=vn(i.right,e.right),e.bottom=vn(i.bottom,e.bottom),e.left=yn(i.left,e.left),e}),mr(t,o,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function yr(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function vr(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}function _r(t,e){void 0===e&&(e={});var n=e,r=n.placement,i=void 0===r?t.placement:r,a=n.strategy,o=void 0===a?t.strategy:a,s=n.boundary,l=void 0===s?"clippingParents":s,c=n.rootBoundary,u=void 0===c?$n:c,h=n.elementContext,d=void 0===h?Gn:h,p=n.altBoundary,f=void 0!==p&&p,m=n.padding,g=void 0===m?0:m,y=yr("number"!==typeof g?g:vr(g,jn)),v=d===Gn?"reference":Gn,_=t.rects.popper,x=t.elements[f?v:d],b=gr(fn(x)?x:x.contextElement||En(t.elements.popper),l,u,o),w=wn(t.elements.reference),S=ar({reference:w,element:_,strategy:"absolute",placement:i}),M=fr(Object.assign({},_,S)),E=d===Gn?M:w,k={top:b.top-E.top+y.top,bottom:E.bottom-b.bottom+y.bottom,left:b.left-E.left+y.left,right:E.right-b.right+y.right},T=t.modifiersData.offset;if(d===Gn&&T){var C=T[i];Object.keys(k).forEach((function(t){var e=[Nn,Fn].indexOf(t)>=0?1:-1,n=[Bn,Fn].indexOf(t)>=0?"y":"x";k[t]+=C[n]*e}))}return k}function xr(t,e,n){return yn(t,vn(e,n))}var br={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,a=void 0===i||i,o=n.altAxis,s=void 0!==o&&o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,h=n.padding,d=n.tether,p=void 0===d||d,f=n.tetherOffset,m=void 0===f?0:f,g=_r(e,{boundary:l,rootBoundary:c,padding:h,altBoundary:u}),y=nr(e.placement),v=rr(e.placement),_=!v,x=ir(y),b="x"===x?"y":"x",w=e.modifiersData.popperOffsets,S=e.rects.reference,M=e.rects.popper,E="function"===typeof m?m(Object.assign({},e.rects,{placement:e.placement})):m,k="number"===typeof E?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),T=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,C={x:0,y:0};if(w){if(a){var I,P="y"===x?Bn:Zn,A="y"===x?Fn:Nn,z="y"===x?"height":"width",L=w[x],R=L+g[P],D=L-g[A],O=p?-M[z]/2:0,B=v===Vn?S[z]:M[z],F=v===Vn?-M[z]:-S[z],N=e.elements.arrow,Z=p&&N?Pn(N):{width:0,height:0},U=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},j=U[P],V=U[A],q=xr(0,S[z],Z[z]),$=_?S[z]/2-O-q-j-k.mainAxis:B-q-j-k.mainAxis,G=_?-S[z]/2+O+q+V+k.mainAxis:F+q+V+k.mainAxis,W=e.elements.arrow&&On(e.elements.arrow),H=W?"y"===x?W.clientTop||0:W.clientLeft||0:0,X=null!=(I=null==T?void 0:T[x])?I:0,K=L+G-X,Y=xr(p?vn(R,L+$-X-H):R,L,p?yn(D,K):D);w[x]=Y,C[x]=Y-L}if(s){var J,Q="x"===x?Bn:Zn,tt="x"===x?Fn:Nn,et=w[b],nt="y"===b?"height":"width",rt=et+g[Q],it=et-g[tt],at=-1!==[Bn,Zn].indexOf(y),ot=null!=(J=null==T?void 0:T[b])?J:0,st=at?rt:et-S[nt]-M[nt]-ot+k.altAxis,lt=at?et+S[nt]+M[nt]-ot-k.altAxis:it,ct=p&&at?function(t,e,n){var r=xr(t,e,n);return r>n?n:r}(st,et,lt):xr(p?st:rt,et,p?lt:it);w[b]=ct,C[b]=ct-et}e.modifiersData[r]=C}},requiresIfExists:["offset"]};var wr={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,r=t.name,i=t.options,a=n.elements.arrow,o=n.modifiersData.popperOffsets,s=nr(n.placement),l=ir(s),c=[Zn,Nn].indexOf(s)>=0?"height":"width";if(a&&o){var u=function(t,e){return yr("number"!==typeof(t="function"===typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:vr(t,jn))}(i.padding,n),h=Pn(a),d="y"===l?Bn:Zn,p="y"===l?Fn:Nn,f=n.rects.reference[c]+n.rects.reference[l]-o[l]-n.rects.popper[c],m=o[l]-n.rects.reference[l],g=On(a),y=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,v=f/2-m/2,_=u[d],x=y-h[c]-u[p],b=y/2-h[c]/2+v,w=xr(_,b,x),S=l;n.modifiersData[r]=((e={})[S]=w,e.centerOffset=w-b,e)}},effect:function(t){var e=t.state,n=t.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=e.elements.popper.querySelector(r)))&&pr(e.elements.popper,r)&&(e.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Sr(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Mr(t){return[Bn,Nn,Fn,Zn].some((function(e){return t[e]>=0}))}var Er=tr({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,a=void 0===i||i,o=r.resize,s=void 0===o||o,l=pn(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&c.forEach((function(t){t.addEventListener("scroll",n.update,er)})),s&&l.addEventListener("resize",n.update,er),function(){a&&c.forEach((function(t){t.removeEventListener("scroll",n.update,er)})),s&&l.removeEventListener("resize",n.update,er)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=ar({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=void 0===r||r,a=n.adaptive,o=void 0===a||a,s=n.roundOffsets,l=void 0===s||s,c={placement:nr(e.placement),variation:rr(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,sr(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,sr(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},r=e.attributes[t]||{},i=e.elements[t];mn(i)&&Mn(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(t){var e=r[t];!1===e?i.removeAttribute(t):i.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var r=e.elements[t],i=e.attributes[t]||{},a=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce((function(t,e){return t[e]="",t}),{});mn(r)&&Mn(r)&&(Object.assign(r.style,a),Object.keys(i).forEach((function(t){r.removeAttribute(t)})))}))}},requires:["computeStyles"]},lr,{name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,a=void 0===i||i,o=n.altAxis,s=void 0===o||o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,h=n.rootBoundary,d=n.altBoundary,p=n.flipVariations,f=void 0===p||p,m=n.allowedAutoPlacements,g=e.options.placement,y=nr(g),v=l||(y===g||!f?[ur(g)]:function(t){if(nr(t)===Un)return[];var e=ur(t);return[dr(t),e,dr(e)]}(g)),_=[g].concat(v).reduce((function(t,n){return t.concat(nr(n)===Un?function(t,e){void 0===e&&(e={});var n=e,r=n.placement,i=n.boundary,a=n.rootBoundary,o=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?Hn:l,u=rr(r),h=u?s?Wn:Wn.filter((function(t){return rr(t)===u})):jn,d=h.filter((function(t){return c.indexOf(t)>=0}));0===d.length&&(d=h);var p=d.reduce((function(e,n){return e[n]=_r(t,{placement:n,boundary:i,rootBoundary:a,padding:o})[nr(n)],e}),{});return Object.keys(p).sort((function(t,e){return p[t]-p[e]}))}(e,{placement:n,boundary:u,rootBoundary:h,padding:c,flipVariations:f,allowedAutoPlacements:m}):n)}),[]),x=e.rects.reference,b=e.rects.popper,w=new Map,S=!0,M=_[0],E=0;E<_.length;E++){var k=_[E],T=nr(k),C=rr(k)===Vn,I=[Bn,Fn].indexOf(T)>=0,P=I?"width":"height",A=_r(e,{placement:k,boundary:u,rootBoundary:h,altBoundary:d,padding:c}),z=I?C?Nn:Zn:C?Fn:Bn;x[P]>b[P]&&(z=ur(z));var L=ur(z),R=[];if(a&&R.push(A[T]<=0),s&&R.push(A[z]<=0,A[L]<=0),R.every((function(t){return t}))){M=k,S=!1;break}w.set(k,R)}if(S)for(var D=function(t){var e=_.find((function(e){var n=w.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return M=e,"break"},O=f?3:1;O>0;O--){if("break"===D(O))break}e.placement!==M&&(e.modifiersData[r]._skip=!0,e.placement=M,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},br,wr,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,a=e.modifiersData.preventOverflow,o=_r(e,{elementContext:"reference"}),s=_r(e,{altBoundary:!0}),l=Sr(o,r),c=Sr(s,i,a),u=Mr(l),h=Mr(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}}]});var kr=t.forwardRef((function(e,n){var i=e.children,a=e.container,o=e.disablePortal,s=void 0!==o&&o,l=t.useState(null),c=(0,r.Z)(l,2),u=c[0],h=c[1],d=(0,De.Z)(t.isValidElement(i)?i.ref:null,n);return(0,Fe.Z)((function(){s||h(function(t){return"function"===typeof t?t():t}(a)||document.body)}),[a,s]),(0,Fe.Z)((function(){if(u&&!s)return(0,sn.Z)(n,u),function(){(0,sn.Z)(n,null)}}),[n,u,s]),s?t.isValidElement(i)?t.cloneElement(i,{ref:d}):i:(0,m.jsx)(t.Fragment,{children:u?Se.createPortal(i,u):u})}));function Tr(t){return(0,d.Z)("MuiPopperUnstyled",t)}(0,p.Z)("MuiPopperUnstyled",["root"]);function Cr(t){if(void 0===t)return{};var e={};return Object.keys(t).filter((function(e){return!(e.match(/^on[A-Z]/)&&"function"===typeof t[e])})).forEach((function(n){e[n]=t[n]})),e}function Ir(t){var e=t.getSlotProps,n=t.additionalProps,r=t.externalSlotProps,i=t.externalForwardedProps,s=t.className;if(!e){var l=(0,o.Z)(null==i?void 0:i.className,null==r?void 0:r.className,s,null==n?void 0:n.className),c=(0,a.Z)({},null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),u=(0,a.Z)({},n,i,r);return l.length>0&&(u.className=l),Object.keys(c).length>0&&(u.style=c),{props:u,internalRef:void 0}}var h=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===t)return{};var n={};return Object.keys(t).filter((function(n){return n.match(/^on[A-Z]/)&&"function"===typeof t[n]&&!e.includes(n)})).forEach((function(e){n[e]=t[e]})),n}((0,a.Z)({},i,r)),d=Cr(r),p=Cr(i),f=e(h),m=(0,o.Z)(null==f?void 0:f.className,null==n?void 0:n.className,s,null==i?void 0:i.className,null==r?void 0:r.className),g=(0,a.Z)({},null==f?void 0:f.style,null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),y=(0,a.Z)({},f,n,p,d);return m.length>0&&(y.className=m),Object.keys(g).length>0&&(y.style=g),{props:y,internalRef:f.ref}}var Pr=["elementType","externalSlotProps","ownerState"];function Ar(t){var e,n=t.elementType,r=t.externalSlotProps,o=t.ownerState,s=(0,i.Z)(t,Pr),l=function(t,e){return"function"===typeof t?t(e):t}(r,o),c=Ir((0,a.Z)({},s,{externalSlotProps:l})),u=c.props,h=c.internalRef,d=(0,De.Z)(h,(0,De.Z)(null==l?void 0:l.ref,null==(e=t.additionalProps)?void 0:e.ref)),p=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return qe(t)?e:(0,a.Z)({},e,{ownerState:(0,a.Z)({},e.ownerState,n)})}(n,(0,a.Z)({},u,{ref:d}),o);return p}var zr=["anchorEl","children","component","components","componentsProps","direction","disablePortal","modifiers","open","ownerState","placement","popperOptions","popperRef","TransitionProps"],Lr=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition"];function Rr(t){return"function"===typeof t?t():t}var Dr={},Or=t.forwardRef((function(e,n){var o,l=e.anchorEl,c=e.children,u=e.component,h=e.components,d=void 0===h?{}:h,p=e.componentsProps,f=void 0===p?{}:p,g=e.direction,y=e.disablePortal,v=e.modifiers,_=e.open,x=e.ownerState,b=e.placement,w=e.popperOptions,S=e.popperRef,M=e.TransitionProps,E=(0,i.Z)(e,zr),k=t.useRef(null),T=(0,De.Z)(k,n),C=t.useRef(null),I=(0,De.Z)(C,S),P=t.useRef(I);(0,Fe.Z)((function(){P.current=I}),[I]),t.useImperativeHandle(S,(function(){return C.current}),[]);var A=function(t,e){if("ltr"===e)return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}(b,g),z=t.useState(A),L=(0,r.Z)(z,2),R=L[0],D=L[1];t.useEffect((function(){C.current&&C.current.forceUpdate()})),(0,Fe.Z)((function(){if(l&&_){Rr(l);var t=[{name:"preventOverflow",options:{altBoundary:y}},{name:"flip",options:{altBoundary:y}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:function(t){var e=t.state;D(e.placement)}}];null!=v&&(t=t.concat(v)),w&&null!=w.modifiers&&(t=t.concat(w.modifiers));var e=Er(Rr(l),k.current,(0,a.Z)({placement:A},w,{modifiers:t}));return P.current(e),function(){e.destroy(),P.current(null)}}}),[l,y,v,_,w,A]);var O={placement:R};null!==M&&(O.TransitionProps=M);var B=(0,s.Z)({root:["root"]},Tr,{}),F=null!=(o=null!=u?u:d.Root)?o:"div",N=Ar({elementType:F,externalSlotProps:f.root,externalForwardedProps:E,additionalProps:{role:"tooltip",ref:T},ownerState:(0,a.Z)({},e,x),className:B.root});return(0,m.jsx)(F,(0,a.Z)({},N,{children:"function"===typeof c?c(O):c}))})),Br=t.forwardRef((function(e,n){var o=e.anchorEl,s=e.children,l=e.container,c=e.direction,u=void 0===c?"ltr":c,h=e.disablePortal,d=void 0!==h&&h,p=e.keepMounted,f=void 0!==p&&p,g=e.modifiers,y=e.open,v=e.placement,_=void 0===v?"bottom":v,x=e.popperOptions,b=void 0===x?Dr:x,w=e.popperRef,S=e.style,M=e.transition,E=void 0!==M&&M,k=(0,i.Z)(e,Lr),T=t.useState(!0),C=(0,r.Z)(T,2),I=C[0],P=C[1];if(!f&&!y&&(!E||I))return null;var A=l||(o?(0,dn.Z)(Rr(o)).body:void 0);return(0,m.jsx)(kr,{disablePortal:d,container:A,children:(0,m.jsx)(Or,(0,a.Z)({anchorEl:o,direction:u,disablePortal:d,modifiers:g,ref:n,open:E?!I:y,placement:_,popperOptions:b,popperRef:w},k,{style:(0,a.Z)({position:"fixed",top:0,left:0,display:y||!f||E&&!I?null:"none"},S),TransitionProps:E?{in:y,onEnter:function(){P(!1)},onExited:function(){P(!0)}}:null,children:s}))})})),Fr=n(7301),Nr=(0,l.ZP)(Br,{name:"MuiPopper",slot:"Root",overridesResolver:function(t,e){return e.root}})({}),Zr=t.forwardRef((function(t,e){var n=(0,Fr.Z)(),r=(0,c.Z)({props:t,name:"MuiPopper"});return(0,m.jsx)(Nr,(0,a.Z)({direction:null==n?void 0:n.direction},r,{ref:e}))}));function Ur(t){return(0,d.Z)("MuiListSubheader",t)}(0,p.Z)("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);var jr=["className","color","component","disableGutters","disableSticky","inset"],Vr=(0,l.ZP)("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,"default"!==n.color&&e["color".concat((0,u.Z)(n.color))],!n.disableGutters&&e.gutters,n.inset&&e.inset,!n.disableSticky&&e.sticky]}})((function(t){var e=t.theme,n=t.ownerState;return(0,a.Z)({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(e.vars||e).palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14)},"primary"===n.color&&{color:(e.vars||e).palette.primary.main},"inherit"===n.color&&{color:"inherit"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.inset&&{paddingLeft:72},!n.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(e.vars||e).palette.background.paper})})),qr=t.forwardRef((function(t,e){var n=(0,c.Z)({props:t,name:"MuiListSubheader"}),r=n.className,l=n.color,h=void 0===l?"default":l,d=n.component,p=void 0===d?"li":d,f=n.disableGutters,g=void 0!==f&&f,y=n.disableSticky,v=void 0!==y&&y,_=n.inset,x=void 0!==_&&_,b=(0,i.Z)(n,jr),w=(0,a.Z)({},n,{color:h,component:p,disableGutters:g,disableSticky:v,inset:x}),S=function(t){var e=t.classes,n=t.color,r=t.disableGutters,i=t.inset,a=t.disableSticky,o={root:["root","default"!==n&&"color".concat((0,u.Z)(n)),!r&&"gutters",i&&"inset",!a&&"sticky"]};return(0,s.Z)(o,Ur,e)}(w);return(0,m.jsx)(Vr,(0,a.Z)({as:p,className:(0,o.Z)(S.root,r),ref:e,ownerState:w},b))}));function $r(t){return(0,d.Z)("MuiIconButton",t)}var Gr=(0,p.Z)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),Wr=["edge","children","className","color","disabled","disableFocusRipple","size"],Hr=(0,l.ZP)(Bt,{name:"MuiIconButton",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState;return[e.root,"default"!==n.color&&e["color".concat((0,u.Z)(n.color))],n.edge&&e["edge".concat((0,u.Z)(n.edge))],e["size".concat((0,u.Z)(n.size))]]}})((function(t){var e=t.theme,n=t.ownerState;return(0,a.Z)({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!n.disableRipple&&{"&:hover":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette.action.activeChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):(0,h.Fq)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===n.edge&&{marginLeft:"small"===n.size?-3:-12},"end"===n.edge&&{marginRight:"small"===n.size?-3:-12})}),(function(t){var e=t.theme,n=t.ownerState;return(0,a.Z)({},"inherit"===n.color&&{color:"inherit"},"inherit"!==n.color&&"default"!==n.color&&(0,a.Z)({color:(e.vars||e).palette[n.color].main},!n.disableRipple&&{"&:hover":{backgroundColor:e.vars?"rgba(".concat(e.vars.palette[n.color].mainChannel," / ").concat(e.vars.palette.action.hoverOpacity,")"):(0,h.Fq)(e.palette[n.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}),"small"===n.size&&{padding:5,fontSize:e.typography.pxToRem(18)},"large"===n.size&&{padding:12,fontSize:e.typography.pxToRem(28)},(0,K.Z)({},"&.".concat(Gr.disabled),{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}))})),Xr=t.forwardRef((function(t,e){var n=(0,c.Z)({props:t,name:"MuiIconButton"}),r=n.edge,l=void 0!==r&&r,h=n.children,d=n.className,p=n.color,f=void 0===p?"default":p,g=n.disabled,y=void 0!==g&&g,v=n.disableFocusRipple,_=void 0!==v&&v,x=n.size,b=void 0===x?"medium":x,w=(0,i.Z)(n,Wr),S=(0,a.Z)({},n,{edge:l,color:f,disabled:y,disableFocusRipple:_,size:b}),M=function(t){var e=t.classes,n=t.disabled,r=t.color,i=t.edge,a=t.size,o={root:["root",n&&"disabled","default"!==r&&"color".concat((0,u.Z)(r)),i&&"edge".concat((0,u.Z)(i)),"size".concat((0,u.Z)(a))]};return(0,s.Z)(o,$r,e)}(S);return(0,m.jsx)(Hr,(0,a.Z)({className:(0,o.Z)(M.root,d),centerRipple:!0,focusRipple:!_,disabled:y,ref:e,ownerState:S},w,{children:h}))})),Kr=n(1245),Yr=(0,Kr.Z)((0,m.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function Jr(t){return(0,d.Z)("MuiChip",t)}var Qr=(0,p.Z)("MuiChip",["root","sizeSmall","sizeMedium","colorPrimary","colorSecondary","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),ti=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant"],ei=(0,l.ZP)("div",{name:"MuiChip",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState,r=n.color,i=n.clickable,a=n.onDelete,o=n.size,s=n.variant;return[(0,K.Z)({},"& .".concat(Qr.avatar),e.avatar),(0,K.Z)({},"& .".concat(Qr.avatar),e["avatar".concat((0,u.Z)(o))]),(0,K.Z)({},"& .".concat(Qr.avatar),e["avatarColor".concat((0,u.Z)(r))]),(0,K.Z)({},"& .".concat(Qr.icon),e.icon),(0,K.Z)({},"& .".concat(Qr.icon),e["icon".concat((0,u.Z)(o))]),(0,K.Z)({},"& .".concat(Qr.icon),e["iconColor".concat((0,u.Z)(r))]),(0,K.Z)({},"& .".concat(Qr.deleteIcon),e.deleteIcon),(0,K.Z)({},"& .".concat(Qr.deleteIcon),e["deleteIcon".concat((0,u.Z)(o))]),(0,K.Z)({},"& .".concat(Qr.deleteIcon),e["deleteIconColor".concat((0,u.Z)(r))]),(0,K.Z)({},"& .".concat(Qr.deleteIcon),e["deleteIcon".concat((0,u.Z)(s),"Color").concat((0,u.Z)(r))]),e.root,e["size".concat((0,u.Z)(o))],e["color".concat((0,u.Z)(r))],i&&e.clickable,i&&"default"!==r&&e["clickableColor".concat((0,u.Z)(r),")")],a&&e.deletable,a&&"default"!==r&&e["deletableColor".concat((0,u.Z)(r))],e[s],e["".concat(s).concat((0,u.Z)(r))]]}})((function(t){var e,n=t.theme,r=t.ownerState,i=(0,h.Fq)(n.palette.text.primary,.26),o="light"===n.palette.mode?n.palette.grey[700]:n.palette.grey[300];return(0,a.Z)((e={maxWidth:"100%",fontFamily:n.typography.fontFamily,fontSize:n.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(n.vars||n).palette.text.primary,backgroundColor:(n.vars||n).palette.action.selected,borderRadius:16,whiteSpace:"nowrap",transition:n.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box"},(0,K.Z)(e,"&.".concat(Qr.disabled),{opacity:(n.vars||n).palette.action.disabledOpacity,pointerEvents:"none"}),(0,K.Z)(e,"& .".concat(Qr.avatar),{marginLeft:5,marginRight:-6,width:24,height:24,color:n.vars?n.vars.palette.Chip.defaultAvatarColor:o,fontSize:n.typography.pxToRem(12)}),(0,K.Z)(e,"& .".concat(Qr.avatarColorPrimary),{color:(n.vars||n).palette.primary.contrastText,backgroundColor:(n.vars||n).palette.primary.dark}),(0,K.Z)(e,"& .".concat(Qr.avatarColorSecondary),{color:(n.vars||n).palette.secondary.contrastText,backgroundColor:(n.vars||n).palette.secondary.dark}),(0,K.Z)(e,"& .".concat(Qr.avatarSmall),{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:n.typography.pxToRem(10)}),(0,K.Z)(e,"& .".concat(Qr.icon),(0,a.Z)({color:n.vars?n.vars.palette.Chip.defaultIconColor:o,marginLeft:5,marginRight:-6},"small"===r.size&&{fontSize:18,marginLeft:4,marginRight:-4},"default"!==r.color&&{color:"inherit"})),(0,K.Z)(e,"& .".concat(Qr.deleteIcon),(0,a.Z)({WebkitTapHighlightColor:"transparent",color:n.vars?"rgba(".concat(n.vars.palette.text.primaryChannel," / 0.26)"):i,fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:n.vars?"rgba(".concat(n.vars.palette.text.primaryChannel," / 0.4)"):(0,h.Fq)(i,.4)}},"small"===r.size&&{fontSize:16,marginRight:4,marginLeft:-4},"default"!==r.color&&{color:n.vars?"rgba(".concat(n.vars.palette[r.color].contrastTextChannel," / 0.7)"):(0,h.Fq)(n.palette[r.color].contrastText,.7),"&:hover, &:active":{color:(n.vars||n).palette[r.color].contrastText}})),e),"small"===r.size&&{height:24},"default"!==r.color&&{backgroundColor:(n.vars||n).palette[r.color].main,color:(n.vars||n).palette[r.color].contrastText},r.onDelete&&(0,K.Z)({},"&.".concat(Qr.focusVisible),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.action.selectedChannel," / calc(").concat(n.vars.palette.action.selectedOpacity+n.vars.palette.action.focusOpacity,"))"):(0,h.Fq)(n.palette.action.selected,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)}),r.onDelete&&"default"!==r.color&&(0,K.Z)({},"&.".concat(Qr.focusVisible),{backgroundColor:(n.vars||n).palette[r.color].dark}))}),(function(t){var e,n=t.theme,r=t.ownerState;return(0,a.Z)({},r.clickable&&(e={userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.action.selectedChannel," / calc(").concat(n.vars.palette.action.selectedOpacity+n.vars.palette.action.hoverOpacity,"))"):(0,h.Fq)(n.palette.action.selected,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity)}},(0,K.Z)(e,"&.".concat(Qr.focusVisible),{backgroundColor:n.vars?"rgba(".concat(n.vars.palette.action.selectedChannel," / calc(").concat(n.vars.palette.action.selectedOpacity+n.vars.palette.action.focusOpacity,"))"):(0,h.Fq)(n.palette.action.selected,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)}),(0,K.Z)(e,"&:active",{boxShadow:(n.vars||n).shadows[1]}),e),r.clickable&&"default"!==r.color&&(0,K.Z)({},"&:hover, &.".concat(Qr.focusVisible),{backgroundColor:(n.vars||n).palette[r.color].dark}))}),(function(t){var e,n,r=t.theme,i=t.ownerState;return(0,a.Z)({},"outlined"===i.variant&&(e={backgroundColor:"transparent",border:r.vars?"1px solid ".concat(r.vars.palette.Chip.defaultBorder):"1px solid ".concat("light"===r.palette.mode?r.palette.grey[400]:r.palette.grey[700])},(0,K.Z)(e,"&.".concat(Qr.clickable,":hover"),{backgroundColor:(r.vars||r).palette.action.hover}),(0,K.Z)(e,"&.".concat(Qr.focusVisible),{backgroundColor:(r.vars||r).palette.action.focus}),(0,K.Z)(e,"& .".concat(Qr.avatar),{marginLeft:4}),(0,K.Z)(e,"& .".concat(Qr.avatarSmall),{marginLeft:2}),(0,K.Z)(e,"& .".concat(Qr.icon),{marginLeft:4}),(0,K.Z)(e,"& .".concat(Qr.iconSmall),{marginLeft:2}),(0,K.Z)(e,"& .".concat(Qr.deleteIcon),{marginRight:5}),(0,K.Z)(e,"& .".concat(Qr.deleteIconSmall),{marginRight:3}),e),"outlined"===i.variant&&"default"!==i.color&&(n={color:(r.vars||r).palette[i.color].main,border:"1px solid ".concat(r.vars?"rgba(".concat(r.vars.palette[i.color].mainChannel," / 0.7)"):(0,h.Fq)(r.palette[i.color].main,.7))},(0,K.Z)(n,"&.".concat(Qr.clickable,":hover"),{backgroundColor:r.vars?"rgba(".concat(r.vars.palette[i.color].mainChannel," / ").concat(r.vars.palette.action.hoverOpacity,")"):(0,h.Fq)(r.palette[i.color].main,r.palette.action.hoverOpacity)}),(0,K.Z)(n,"&.".concat(Qr.focusVisible),{backgroundColor:r.vars?"rgba(".concat(r.vars.palette[i.color].mainChannel," / ").concat(r.vars.palette.action.focusOpacity,")"):(0,h.Fq)(r.palette[i.color].main,r.palette.action.focusOpacity)}),(0,K.Z)(n,"& .".concat(Qr.deleteIcon),{color:r.vars?"rgba(".concat(r.vars.palette[i.color].mainChannel," / 0.7)"):(0,h.Fq)(r.palette[i.color].main,.7),"&:hover, &:active":{color:(r.vars||r).palette[i.color].main}}),n))})),ni=(0,l.ZP)("span",{name:"MuiChip",slot:"Label",overridesResolver:function(t,e){var n=t.ownerState.size;return[e.label,e["label".concat((0,u.Z)(n))]]}})((function(t){var e=t.ownerState;return(0,a.Z)({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},"small"===e.size&&{paddingLeft:8,paddingRight:8})}));function ri(t){return"Backspace"===t.key||"Delete"===t.key}var ii=t.forwardRef((function(e,n){var r=(0,c.Z)({props:e,name:"MuiChip"}),l=r.avatar,h=r.className,d=r.clickable,p=r.color,f=void 0===p?"default":p,g=r.component,y=r.deleteIcon,v=r.disabled,_=void 0!==v&&v,x=r.icon,b=r.label,w=r.onClick,S=r.onDelete,M=r.onKeyDown,E=r.onKeyUp,k=r.size,T=void 0===k?"medium":k,C=r.variant,I=void 0===C?"filled":C,P=(0,i.Z)(r,ti),A=t.useRef(null),z=(0,et.Z)(A,n),L=function(t){t.stopPropagation(),S&&S(t)},R=!(!1===d||!w)||d,D=R||S?Bt:g||"div",O=(0,a.Z)({},r,{component:D,disabled:_,size:T,color:f,onDelete:!!S,clickable:R,variant:I}),B=function(t){var e=t.classes,n=t.disabled,r=t.size,i=t.color,a=t.onDelete,o=t.clickable,l=t.variant,c={root:["root",l,n&&"disabled","size".concat((0,u.Z)(r)),"color".concat((0,u.Z)(i)),o&&"clickable",o&&"clickableColor".concat((0,u.Z)(i)),a&&"deletable",a&&"deletableColor".concat((0,u.Z)(i)),"".concat(l).concat((0,u.Z)(i))],label:["label","label".concat((0,u.Z)(r))],avatar:["avatar","avatar".concat((0,u.Z)(r)),"avatarColor".concat((0,u.Z)(i))],icon:["icon","icon".concat((0,u.Z)(r)),"iconColor".concat((0,u.Z)(i))],deleteIcon:["deleteIcon","deleteIcon".concat((0,u.Z)(r)),"deleteIconColor".concat((0,u.Z)(i)),"deleteIcon".concat((0,u.Z)(l),"Color").concat((0,u.Z)(i))]};return(0,s.Z)(c,Jr,e)}(O),F=D===Bt?(0,a.Z)({component:g||"div",focusVisibleClassName:B.focusVisible},S&&{disableRipple:!0}):{},N=null;S&&(N=y&&t.isValidElement(y)?t.cloneElement(y,{className:(0,o.Z)(y.props.className,B.deleteIcon),onClick:L}):(0,m.jsx)(Yr,{className:(0,o.Z)(B.deleteIcon),onClick:L}));var Z=null;l&&t.isValidElement(l)&&(Z=t.cloneElement(l,{className:(0,o.Z)(B.avatar,l.props.className)}));var U=null;return x&&t.isValidElement(x)&&(U=t.cloneElement(x,{className:(0,o.Z)(B.icon,x.props.className)})),(0,m.jsxs)(ei,(0,a.Z)({as:D,className:(0,o.Z)(B.root,h),disabled:!(!R||!_)||void 0,onClick:w,onKeyDown:function(t){t.currentTarget===t.target&&ri(t)&&t.preventDefault(),M&&M(t)},onKeyUp:function(t){t.currentTarget===t.target&&(S&&ri(t)?S(t):"Escape"===t.key&&A.current&&A.current.blur()),E&&E(t)},ref:z,ownerState:O},F,P,{children:[Z||U,(0,m.jsx)(ni,{className:(0,o.Z)(B.label),ownerState:O,children:b}),N]}))}));var ai=(0,a.Z)({},Xe,(0,p.Z)("MuiInput",["root","underline","input"]));var oi=(0,a.Z)({},Xe,(0,p.Z)("MuiOutlinedInput",["root","notchedOutline","input"]));var si=(0,a.Z)({},Xe,(0,p.Z)("MuiFilledInput",["root","underline","input"])),li=(0,Kr.Z)((0,m.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),ci=(0,Kr.Z)((0,m.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");function ui(t){return(0,d.Z)("MuiAutocomplete",t)}var hi,di,pi=(0,p.Z)("MuiAutocomplete",["root","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]),fi=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","value"],mi=(0,l.ZP)("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState,r=n.fullWidth,i=n.hasClearIcon,a=n.hasPopupIcon,o=n.inputFocused,s=n.size;return[(0,K.Z)({},"& .".concat(pi.tag),e.tag),(0,K.Z)({},"& .".concat(pi.tag),e["tagSize".concat((0,u.Z)(s))]),(0,K.Z)({},"& .".concat(pi.inputRoot),e.inputRoot),(0,K.Z)({},"& .".concat(pi.input),e.input),(0,K.Z)({},"& .".concat(pi.input),o&&e.inputFocused),e.root,r&&e.fullWidth,a&&e.hasPopupIcon,i&&e.hasClearIcon]}})((function(t){var e,n,r,i,o,s=t.ownerState;return(0,a.Z)((e={},(0,K.Z)(e,"&.".concat(pi.focused," .").concat(pi.clearIndicator),{visibility:"visible"}),(0,K.Z)(e,"@media (pointer: fine)",(0,K.Z)({},"&:hover .".concat(pi.clearIndicator),{visibility:"visible"})),e),s.fullWidth&&{width:"100%"},(o={},(0,K.Z)(o,"& .".concat(pi.tag),(0,a.Z)({margin:3,maxWidth:"calc(100% - 6px)"},"small"===s.size&&{margin:2,maxWidth:"calc(100% - 4px)"})),(0,K.Z)(o,"& .".concat(pi.inputRoot),(n={flexWrap:"wrap"},(0,K.Z)(n,".".concat(pi.hasPopupIcon,"&, .").concat(pi.hasClearIcon,"&"),{paddingRight:30}),(0,K.Z)(n,".".concat(pi.hasPopupIcon,".").concat(pi.hasClearIcon,"&"),{paddingRight:56}),(0,K.Z)(n,"& .".concat(pi.input),{width:0,minWidth:30}),n)),(0,K.Z)(o,"& .".concat(ai.root),{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}}),(0,K.Z)(o,"& .".concat(ai.root,".").concat(Xe.sizeSmall),(0,K.Z)({},"& .".concat(ai.input),{padding:"2px 4px 3px 0"})),(0,K.Z)(o,"& .".concat(oi.root),(r={padding:9},(0,K.Z)(r,".".concat(pi.hasPopupIcon,"&, .").concat(pi.hasClearIcon,"&"),{paddingRight:39}),(0,K.Z)(r,".".concat(pi.hasPopupIcon,".").concat(pi.hasClearIcon,"&"),{paddingRight:65}),(0,K.Z)(r,"& .".concat(pi.input),{padding:"7.5px 4px 7.5px 6px"}),(0,K.Z)(r,"& .".concat(pi.endAdornment),{right:9}),r)),(0,K.Z)(o,"& .".concat(oi.root,".").concat(Xe.sizeSmall),(0,K.Z)({paddingTop:6,paddingBottom:6,paddingLeft:6},"& .".concat(pi.input),{padding:"2.5px 4px 2.5px 6px"})),(0,K.Z)(o,"& .".concat(si.root),(i={paddingTop:19,paddingLeft:8},(0,K.Z)(i,".".concat(pi.hasPopupIcon,"&, .").concat(pi.hasClearIcon,"&"),{paddingRight:39}),(0,K.Z)(i,".".concat(pi.hasPopupIcon,".").concat(pi.hasClearIcon,"&"),{paddingRight:65}),(0,K.Z)(i,"& .".concat(si.input),{padding:"7px 4px"}),(0,K.Z)(i,"& .".concat(pi.endAdornment),{right:9}),i)),(0,K.Z)(o,"& .".concat(si.root,".").concat(Xe.sizeSmall),(0,K.Z)({paddingBottom:1},"& .".concat(si.input),{padding:"2.5px 4px"})),(0,K.Z)(o,"& .".concat(Xe.hiddenLabel),{paddingTop:8}),(0,K.Z)(o,"& .".concat(pi.input),(0,a.Z)({flexGrow:1,textOverflow:"ellipsis",opacity:0},s.inputFocused&&{opacity:1})),o))})),gi=(0,l.ZP)("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:function(t,e){return e.endAdornment}})({position:"absolute",right:0,top:"calc(50% - 14px)"}),yi=(0,l.ZP)(Xr,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:function(t,e){return e.clearIndicator}})({marginRight:-2,padding:4,visibility:"hidden"}),vi=(0,l.ZP)(Xr,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:function(t,e){var n=t.ownerState;return(0,a.Z)({},e.popupIndicator,n.popupOpen&&e.popupIndicatorOpen)}})((function(t){var e=t.ownerState;return(0,a.Z)({padding:2,marginRight:-2},e.popupOpen&&{transform:"rotate(180deg)"})})),_i=(0,l.ZP)(Zr,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:function(t,e){var n=t.ownerState;return[(0,K.Z)({},"& .".concat(pi.option),e.option),e.popper,n.disablePortal&&e.popperDisablePortal]}})((function(t){var e=t.theme,n=t.ownerState;return(0,a.Z)({zIndex:(e.vars||e).zIndex.modal},n.disablePortal&&{position:"absolute"})})),xi=(0,l.ZP)(_,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:function(t,e){return e.paper}})((function(t){var e=t.theme;return(0,a.Z)({},e.typography.body1,{overflow:"auto"})})),bi=(0,l.ZP)("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:function(t,e){return e.loading}})((function(t){var e=t.theme;return{color:(e.vars||e).palette.text.secondary,padding:"14px 16px"}})),wi=(0,l.ZP)("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:function(t,e){return e.noOptions}})((function(t){var e=t.theme;return{color:(e.vars||e).palette.text.secondary,padding:"14px 16px"}})),Si=(0,l.ZP)("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:function(t,e){return e.listbox}})((function(t){var e,n,r=t.theme;return(0,K.Z)({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto"},"& .".concat(pi.option),(n={minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16},(0,K.Z)(n,r.breakpoints.up("sm"),{minHeight:"auto"}),(0,K.Z)(n,"&.".concat(pi.focused),{backgroundColor:(r.vars||r).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}),(0,K.Z)(n,'&[aria-disabled="true"]',{opacity:(r.vars||r).palette.action.disabledOpacity,pointerEvents:"none"}),(0,K.Z)(n,"&.".concat(pi.focusVisible),{backgroundColor:(r.vars||r).palette.action.focus}),(0,K.Z)(n,'&[aria-selected="true"]',(e={backgroundColor:r.vars?"rgba(".concat(r.vars.palette.primary.mainChannel," / ").concat(r.vars.palette.action.selectedOpacity,")"):(0,h.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity)},(0,K.Z)(e,"&.".concat(pi.focused),{backgroundColor:r.vars?"rgba(".concat(r.vars.palette.primary.mainChannel," / calc(").concat(r.vars.palette.action.selectedOpacity," + ").concat(r.vars.palette.action.hoverOpacity,"))"):(0,h.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(r.vars||r).palette.action.selected}}),(0,K.Z)(e,"&.".concat(pi.focusVisible),{backgroundColor:r.vars?"rgba(".concat(r.vars.palette.primary.mainChannel," / calc(").concat(r.vars.palette.action.selectedOpacity," + ").concat(r.vars.palette.action.focusOpacity,"))"):(0,h.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.focusOpacity)}),e)),n))})),Mi=(0,l.ZP)(qr,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:function(t,e){return e.groupLabel}})((function(t){var e=t.theme;return{backgroundColor:(e.vars||e).palette.background.paper,top:-8}})),Ei=(0,l.ZP)("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:function(t,e){return e.groupUl}})((0,K.Z)({padding:0},"& .".concat(pi.option),{paddingLeft:24})),ki=t.forwardRef((function(e,n){var r,l,h,d,p,f=(0,c.Z)({props:e,name:"MuiAutocomplete"}),g=(f.autoComplete,f.autoHighlight,f.autoSelect,f.blurOnSelect,f.ChipProps),y=f.className,v=f.clearIcon,x=void 0===v?hi||(hi=(0,m.jsx)(li,{fontSize:"small"})):v,b=f.clearOnBlur,w=(void 0===b&&f.freeSolo,f.clearOnEscape,f.clearText),S=void 0===w?"Clear":w,M=f.closeText,E=void 0===M?"Close":M,k=f.componentsProps,T=void 0===k?{}:k,C=f.defaultValue,I=(void 0===C&&f.multiple,f.disableClearable),P=void 0!==I&&I,A=(f.disableCloseOnSelect,f.disabled),z=void 0!==A&&A,L=(f.disabledItemsFocusable,f.disableListWrap,f.disablePortal),R=void 0!==L&&L,D=(f.filterSelectedOptions,f.forcePopupIcon),O=void 0===D?"auto":D,B=f.freeSolo,F=void 0!==B&&B,N=f.fullWidth,Z=void 0!==N&&N,U=f.getLimitTagsText,j=void 0===U?function(t){return"+".concat(t)}:U,V=f.getOptionLabel,q=void 0===V?function(t){var e;return null!=(e=t.label)?e:t}:V,$=f.groupBy,G=f.handleHomeEndKeys,W=(void 0===G&&f.freeSolo,f.includeInputInList,f.limitTags),H=void 0===W?-1:W,X=f.ListboxComponent,K=void 0===X?"ul":X,Y=f.ListboxProps,J=f.loading,Q=void 0!==J&&J,tt=f.loadingText,et=void 0===tt?"Loading\u2026":tt,nt=f.multiple,rt=void 0!==nt&&nt,it=f.noOptionsText,at=void 0===it?"No options":it,ot=(f.openOnFocus,f.openText),st=void 0===ot?"Open":ot,lt=f.PaperComponent,ct=void 0===lt?_:lt,ut=f.PopperComponent,ht=void 0===ut?Zr:ut,dt=f.popupIcon,pt=void 0===dt?di||(di=(0,m.jsx)(ci,{})):dt,ft=f.readOnly,mt=void 0!==ft&&ft,gt=f.renderGroup,yt=f.renderInput,vt=f.renderOption,_t=f.renderTags,xt=f.selectOnFocus,bt=(void 0===xt&&f.freeSolo,f.size),wt=void 0===bt?"medium":bt,St=(0,i.Z)(f,fi),Mt=hn((0,a.Z)({},f,{componentName:"Autocomplete"})),Et=Mt.getRootProps,kt=Mt.getInputProps,Tt=Mt.getInputLabelProps,Ct=Mt.getPopupIndicatorProps,It=Mt.getClearProps,Pt=Mt.getTagProps,At=Mt.getListboxProps,zt=Mt.getOptionProps,Lt=Mt.value,Rt=Mt.dirty,Dt=Mt.id,Ot=Mt.popupOpen,Bt=Mt.focused,Ft=Mt.focusedTag,Nt=Mt.anchorEl,Zt=Mt.setAnchorEl,Ut=Mt.inputValue,jt=Mt.groupedOptions,Vt=!P&&!z&&Rt&&!mt,qt=(!F||!0===O)&&!1!==O,$t=(0,a.Z)({},f,{disablePortal:R,focused:Bt,fullWidth:Z,hasClearIcon:Vt,hasPopupIcon:qt,inputFocused:-1===Ft,popupOpen:Ot,size:wt}),Gt=function(t){var e=t.classes,n=t.disablePortal,r=t.focused,i=t.fullWidth,a=t.hasClearIcon,o=t.hasPopupIcon,l=t.inputFocused,c=t.popupOpen,h=t.size,d={root:["root",r&&"focused",i&&"fullWidth",a&&"hasClearIcon",o&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",l&&"inputFocused"],tag:["tag","tagSize".concat((0,u.Z)(h))],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",c&&"popupIndicatorOpen"],popper:["popper",n&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return(0,s.Z)(d,ui,e)}($t);if(rt&&Lt.length>0){var Wt=function(t){return(0,a.Z)({className:Gt.tag,disabled:z},Pt(t))};p=_t?_t(Lt,Wt,$t):Lt.map((function(t,e){return(0,m.jsx)(ii,(0,a.Z)({label:q(t),size:wt},Wt({index:e}),g))}))}if(H>-1&&Array.isArray(p)){var Ht=p.length-H;!Bt&&Ht>0&&(p=p.splice(0,H)).push((0,m.jsx)("span",{className:Gt.tag,children:j(Ht)},p.length))}var Xt=gt||function(t){return(0,m.jsxs)("li",{children:[(0,m.jsx)(Mi,{className:Gt.groupLabel,ownerState:$t,component:"div",children:t.group}),(0,m.jsx)(Ei,{className:Gt.groupUl,ownerState:$t,children:t.children})]},t.key)},Kt=vt||function(t,e){return(0,m.jsx)("li",(0,a.Z)({},t,{children:q(e)}))},Yt=function(t,e){var n=zt({option:t,index:e});return Kt((0,a.Z)({},n,{className:Gt.option}),t,{selected:n["aria-selected"],inputValue:Ut})};return(0,m.jsxs)(t.Fragment,{children:[(0,m.jsx)(mi,(0,a.Z)({ref:n,className:(0,o.Z)(Gt.root,y),ownerState:$t},Et(St),{children:yt({id:Dt,disabled:z,fullWidth:!0,size:"small"===wt?"small":void 0,InputLabelProps:Tt(),InputProps:(0,a.Z)({ref:Zt,className:Gt.inputRoot,startAdornment:p},(Vt||qt)&&{endAdornment:(0,m.jsxs)(gi,{className:Gt.endAdornment,ownerState:$t,children:[Vt?(0,m.jsx)(yi,(0,a.Z)({},It(),{"aria-label":S,title:S,ownerState:$t},T.clearIndicator,{className:(0,o.Z)(Gt.clearIndicator,null==(r=T.clearIndicator)?void 0:r.className),children:x})):null,qt?(0,m.jsx)(vi,(0,a.Z)({},Ct(),{disabled:z,"aria-label":Ot?E:st,title:Ot?E:st,ownerState:$t},T.popupIndicator,{className:(0,o.Z)(Gt.popupIndicator,null==(l=T.popupIndicator)?void 0:l.className),children:pt})):null]})}),inputProps:(0,a.Z)({className:Gt.input,disabled:z,readOnly:mt},kt())})})),Nt?(0,m.jsx)(_i,(0,a.Z)({as:ht,disablePortal:R,style:{width:Nt?Nt.clientWidth:null},ownerState:$t,role:"presentation",anchorEl:Nt,open:Ot},T.popper,{className:(0,o.Z)(Gt.popper,null==(h=T.popper)?void 0:h.className),children:(0,m.jsxs)(xi,(0,a.Z)({ownerState:$t,as:ct},T.paper,{className:(0,o.Z)(Gt.paper,null==(d=T.paper)?void 0:d.className),children:[Q&&0===jt.length?(0,m.jsx)(bi,{className:Gt.loading,ownerState:$t,children:et}):null,0!==jt.length||F||Q?null:(0,m.jsx)(wi,{className:Gt.noOptions,ownerState:$t,role:"presentation",onMouseDown:function(t){t.preventDefault()},children:at}),jt.length>0?(0,m.jsx)(Si,(0,a.Z)({as:K,className:Gt.listbox,ownerState:$t},At(),Y,{children:jt.map((function(t,e){return $?Xt({key:t.key,group:t.group,children:t.options.map((function(e,n){return Yt(e,t.index+n)}))}):Yt(t,e)}))})):null]}))})):null]})})),Ti=ki;var Ci=6378137,Ii=.0066943799901413165,Pi=484813681109536e-20,Ai=Math.PI/2,zi=1e-10,Li=.017453292519943295,Ri=57.29577951308232,Di=Math.PI/4,Oi=2*Math.PI,Bi=3.14159265359,Fi={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},Ni={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},Zi=/[\s_\-\/\(\)]/g;function Ui(t,e){if(t[e])return t[e];for(var n,r=Object.keys(t),i=e.toLowerCase().replace(Zi,""),a=-1;++a<r.length;)if((n=r[a]).toLowerCase().replace(Zi,"")===i)return t[n]}function ji(t){var e,n,r,i={},a=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t}),{}),o={proj:"projName",datum:"datumCode",rf:function(t){i.rf=parseFloat(t)},lat_0:function(t){i.lat0=t*Li},lat_1:function(t){i.lat1=t*Li},lat_2:function(t){i.lat2=t*Li},lat_ts:function(t){i.lat_ts=t*Li},lon_0:function(t){i.long0=t*Li},lon_1:function(t){i.long1=t*Li},lon_2:function(t){i.long2=t*Li},alpha:function(t){i.alpha=parseFloat(t)*Li},gamma:function(t){i.rectified_grid_angle=parseFloat(t)},lonc:function(t){i.longc=t*Li},x_0:function(t){i.x0=parseFloat(t)},y_0:function(t){i.y0=parseFloat(t)},k_0:function(t){i.k0=parseFloat(t)},k:function(t){i.k0=parseFloat(t)},a:function(t){i.a=parseFloat(t)},b:function(t){i.b=parseFloat(t)},r_a:function(){i.R_A=!0},zone:function(t){i.zone=parseInt(t,10)},south:function(){i.utmSouth=!0},towgs84:function(t){i.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){i.to_meter=parseFloat(t)},units:function(t){i.units=t;var e=Ui(Ni,t);e&&(i.to_meter=e.to_meter)},from_greenwich:function(t){i.from_greenwich=t*Li},pm:function(t){var e=Ui(Fi,t);i.from_greenwich=(e||parseFloat(t))*Li},nadgrids:function(t){"@null"===t?i.datumCode="none":i.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(i.axis=t)},approx:function(){i.approx=!0}};for(e in a)n=a[e],e in o?"function"===typeof(r=o[e])?r(n):i[r]=n:i[e]=n;return"string"===typeof i.datumCode&&"WGS84"!==i.datumCode&&(i.datumCode=i.datumCode.toLowerCase()),i}var Vi=function(t){return new Xi(t).output()},qi=/\s/,$i=/[A-Za-z]/,Gi=/[A-Za-z84_]/,Wi=/[,\]]/,Hi=/[\d\.E\-\+]/;function Xi(t){if("string"!==typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function Ki(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var r=e?{}:t,i=n.reduce((function(t,e){return Yi(e,t),t}),r);e&&(t[e]=i)}function Yi(t,e){if(Array.isArray(t)){var n=t.shift();if("PARAMETER"===n&&(n=t.shift()),1===t.length)return Array.isArray(t[0])?(e[n]={},void Yi(t[0],e[n])):void(e[n]=t[0]);if(t.length)if("TOWGS84"!==n){if("AXIS"===n)return n in e||(e[n]=[]),void e[n].push(t);var r;switch(Array.isArray(n)||(e[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[n]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&Yi(t[2],e[n]));case"SPHEROID":case"ELLIPSOID":return e[n]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&Yi(t[3],e[n]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void Ki(e,n,t);default:for(r=-1;++r<t.length;)if(!Array.isArray(t[r]))return Yi(t,e[n]);return Ki(e,n,t)}}else e[n]=t;else e[n]=!0}else e[t]=!0}Xi.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;qi.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case 1:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},Xi.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(Wi.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},Xi.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},Xi.prototype.number=function(t){if(!Hi.test(t)){if(Wi.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},Xi.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},Xi.prototype.keyword=function(t){if(Gi.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=1)}if(!Wi.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},Xi.prototype.neutral=function(t){if($i.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(Hi.test(t))return this.word=t,void(this.state=3);if(!Wi.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},Xi.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function Ji(t){return.017453292519943295*t}function Qi(t){var e=Vi(t),n=e.shift(),r=e.shift();e.unshift(["name",r]),e.unshift(["type",n]);var i={};return Yi(e,i),function(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"===typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",n=0,r=t.AXIS.length;n<r;++n){var i=[t.AXIS[n][0].toLowerCase(),t.AXIS[n][1].toLowerCase()];-1!==i[0].indexOf("north")||("y"===i[0]||"lat"===i[0])&&"north"===i[1]?e+="n":-1!==i[0].indexOf("south")||("y"===i[0]||"lat"===i[0])&&"south"===i[1]?e+="s":-1!==i[0].indexOf("east")||("x"===i[0]||"lon"===i[0])&&"east"===i[1]?e+="e":-1===i[0].indexOf("west")&&("x"!==i[0]&&"lon"!==i[0]||"west"!==i[1])||(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var a=t.GEOGCS;function o(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(a=t),a&&(a.DATUM?t.datumCode=a.DATUM.name.toLowerCase():t.datumCode=a.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(t.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=a.DATUM.SPHEROID.a,t.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(t.datum_params=a.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Ji],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Ji],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",Ji],["lat0","latitude_of_origin",Ji],["lat0","standard_parallel_1",Ji],["lat1","standard_parallel_1",Ji],["lat2","standard_parallel_2",Ji],["azimuth","Azimuth"],["alpha","azimuth",Ji],["srsCode","name"]].forEach((function(e){return function(t,e){var n=e[0],r=e[1];!(n in t)&&r in t&&(t[n]=t[r],3===e.length&&(t[n]=e[2](t[n])))}(t,e)})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=Ji(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(i),i}function ta(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"===typeof n?"+"===n.charAt(0)?ta[t]=ji(arguments[1]):ta[t]=Qi(arguments[1]):ta[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?ta.apply(e,t):ta(t)}));if("string"===typeof t){if(t in ta)return ta[t]}else"EPSG"in t?ta["EPSG:"+t.EPSG]=t:"ESRI"in t?ta["ESRI:"+t.ESRI]=t:"IAU2000"in t?ta["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(ta);var ea=ta;var na=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var ra=["3857","900913","3785","102113"];var ia=function(t){if(!function(t){return"string"===typeof t}(t))return t;if(function(t){return t in ea}(t))return ea[t];if(function(t){return na.some((function(e){return t.indexOf(e)>-1}))}(t)){var e=Qi(t);if(function(t){var e=Ui(t,"authority");if(e){var n=Ui(e,"epsg");return n&&ra.indexOf(n)>-1}}(e))return ea["EPSG:3857"];var n=function(t){var e=Ui(t,"extension");if(e)return Ui(e,"proj4")}(e);return n?ji(n):e}return function(t){return"+"===t[0]}(t)?ji(t):void 0};function aa(t,e){var n,r;if(t=t||{},!e)return t;for(r in e)void 0!==(n=e[r])&&(t[r]=n);return t}function oa(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)}function sa(t){return t<0?-1:1}function la(t){return Math.abs(t)<=Bi?t:t-sa(t)*Oi}function ca(t,e,n){var r=t*n,i=.5*t;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(Ai-e))/r}function ua(t,e){for(var n,r,i=.5*t,a=Ai-2*Math.atan(e),o=0;o<=15;o++)if(n=t*Math.sin(a),a+=r=Ai-2*Math.atan(e*Math.pow((1-n)/(1+n),i))-a,Math.abs(r)<=1e-10)return a;return-9999}function ha(t){return t}var da=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=oa(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,n,r=t.x,i=t.y;if(i*Ri>90&&i*Ri<-90&&r*Ri>180&&r*Ri<-180)return null;if(Math.abs(Math.abs(i)-Ai)<=zi)return null;if(this.sphere)e=this.x0+this.a*this.k0*la(r-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(Di+.5*i));else{var a=Math.sin(i),o=ca(this.e,i,a);e=this.x0+this.a*this.k0*la(r-this.long0),n=this.y0-this.a*this.k0*Math.log(o)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r=t.x-this.x0,i=t.y-this.y0;if(this.sphere)n=Ai-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var a=Math.exp(-i/(this.a*this.k0));if(-9999===(n=ua(this.e,a)))return null}return e=la(this.long0+r/(this.a*this.k0)),t.x=e,t.y=n,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:ha,inverse:ha,names:["longlat","identity"]}],pa={},fa=[];function ma(t,e){var n=fa.length;return t.names?(fa[n]=t,t.names.forEach((function(t){pa[t.toLowerCase()]=n})),this):(console.log(e),!0)}var ga={start:function(){da.forEach(ma)},add:ma,get:function(t){if(!t)return!1;var e=t.toLowerCase();return"undefined"!==typeof pa[e]&&fa[pa[e]]?fa[pa[e]]:void 0}},ya={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},va=ya.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};ya.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var _a={};_a.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},_a.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},_a.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},_a.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},_a.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},_a.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},_a.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},_a.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},_a.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},_a.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},_a.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},_a.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},_a.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},_a.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},_a.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},_a.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},_a.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var xa=function(t,e,n,r,i,a,o){var s={};return s.datum_type=void 0===t||"none"===t?5:4,e&&(s.datum_params=e.map(parseFloat),0===s.datum_params[0]&&0===s.datum_params[1]&&0===s.datum_params[2]||(s.datum_type=1),s.datum_params.length>3&&(0===s.datum_params[3]&&0===s.datum_params[4]&&0===s.datum_params[5]&&0===s.datum_params[6]||(s.datum_type=2,s.datum_params[3]*=Pi,s.datum_params[4]*=Pi,s.datum_params[5]*=Pi,s.datum_params[6]=s.datum_params[6]/1e6+1))),o&&(s.datum_type=3,s.grids=o),s.a=n,s.b=r,s.es=i,s.ep2=a,s},ba={};function wa(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:ba[t]||null,isNull:!1}}function Sa(t){return t/3600*Math.PI/180}function Ma(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function Ea(t){return t.map((function(t){return[Sa(t.longitudeShift),Sa(t.latitudeShift)]}))}function ka(t,e,n){return{name:Ma(t,e+8,e+16).trim(),parent:Ma(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function Ta(t,e,n,r){for(var i=e+176,a=[],o=0;o<n.gridNodeCount;o++){var s={latitudeShift:t.getFloat32(i+16*o,r),longitudeShift:t.getFloat32(i+16*o+4,r),latitudeAccuracy:t.getFloat32(i+16*o+8,r),longitudeAccuracy:t.getFloat32(i+16*o+12,r)};a.push(s)}return a}function Ca(t,e){if(!(this instanceof Ca))return new Ca(t);e=e||function(t){if(t)throw t};var n=ia(t);if("object"===typeof n){var r=Ca.projections.get(n.projName);if(r){if(n.datumCode&&"none"!==n.datumCode){var i=Ui(_a,n.datumCode);i&&(n.datum_params=n.datum_params||(i.towgs84?i.towgs84.split(","):null),n.ellps=i.ellipse,n.datumName=i.datumName?i.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var a=function(t,e,n,r,i){if(!t){var a=Ui(ya,r);a||(a=va),t=a.a,e=a.b,n=a.rf}return n&&!e&&(e=(1-1/n)*t),(0===n||Math.abs(t-e)<zi)&&(i=!0,e=t),{a:t,b:e,rf:n,sphere:i}}(n.a,n.b,n.rf,n.ellps,n.sphere),o=function(t,e,n,r){var i=t*t,a=e*e,o=(i-a)/i,s=0;return r?(i=(t*=1-o*(.16666666666666666+o*(.04722222222222222+.022156084656084655*o)))*t,o=0):s=Math.sqrt(o),{es:o,e:s,ep2:(i-a)/a}}(a.a,a.b,a.rf,n.R_A),s=function(t){return void 0===t?null:t.split(",").map(wa)}(n.nadgrids),l=n.datum||xa(n.datumCode,n.datum_params,a.a,a.b,o.es,o.ep2,s);aa(this,n),aa(this,r),this.a=a.a,this.b=a.b,this.rf=a.rf,this.sphere=a.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=l,this.init(),e(null,this)}else e(t)}else e(t)}Ca.projections=ga,Ca.projections.start();var Ia=Ca;function Pa(t,e,n){var r,i,a,o,s=t.x,l=t.y,c=t.z?t.z:0;if(l<-Ai&&l>-1.001*Ai)l=-Ai;else if(l>Ai&&l<1.001*Ai)l=Ai;else{if(l<-Ai)return{x:-1/0,y:-1/0,z:t.z};if(l>Ai)return{x:1/0,y:1/0,z:t.z}}return s>Math.PI&&(s-=2*Math.PI),i=Math.sin(l),o=Math.cos(l),a=i*i,{x:((r=n/Math.sqrt(1-e*a))+c)*o*Math.cos(s),y:(r+c)*o*Math.sin(s),z:(r*(1-e)+c)*i}}function Aa(t,e,n,r){var i,a,o,s,l,c,u,h,d,p,f,m,g,y,v,_=1e-12,x=t.x,b=t.y,w=t.z?t.z:0;if(i=Math.sqrt(x*x+b*b),a=Math.sqrt(x*x+b*b+w*w),i/n<_){if(y=0,a/n<_)return Ai,v=-r,{x:t.x,y:t.y,z:t.z}}else y=Math.atan2(b,x);o=w/a,h=(s=i/a)*(1-e)*(l=1/Math.sqrt(1-e*(2-e)*s*s)),d=o*l,g=0;do{g++,c=e*(u=n/Math.sqrt(1-e*d*d))/(u+(v=i*h+w*d-u*(1-e*d*d))),m=(f=o*(l=1/Math.sqrt(1-c*(2-c)*s*s)))*h-(p=s*(1-c)*l)*d,h=p,d=f}while(m*m>1e-24&&g<30);return{x:y,y:Math.atan(f/Math.abs(p)),z:v}}function za(t){return 1===t||2===t}function La(t,e,n){if(function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(1===t.datum_type?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:2!==t.datum_type||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e))return n;if(5===t.datum_type||5===e.datum_type)return n;var r=t.a,i=t.es;if(3===t.datum_type){if(0!==Ra(t,!1,n))return;r=Ci,i=Ii}var a=e.a,o=e.b,s=e.es;if(3===e.datum_type&&(a=Ci,o=6356752.314,s=Ii),i===s&&r===a&&!za(t.datum_type)&&!za(e.datum_type))return n;if((n=Pa(n,i,r),za(t.datum_type)&&(n=function(t,e,n){if(1===e)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(2===e){var r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],l=n[5],c=n[6];return{x:c*(t.x-l*t.y+s*t.z)+r,y:c*(l*t.x+t.y-o*t.z)+i,z:c*(-s*t.x+o*t.y+t.z)+a}}}(n,t.datum_type,t.datum_params)),za(e.datum_type)&&(n=function(t,e,n){if(1===e)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(2===e){var r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],l=n[5],c=n[6],u=(t.x-r)/c,h=(t.y-i)/c,d=(t.z-a)/c;return{x:u+l*h-s*d,y:-l*u+h+o*d,z:s*u-o*h+d}}}(n,e.datum_type,e.datum_params)),n=Aa(n,s,a,o),3===e.datum_type)&&0!==Ra(e,!0,n))return;return n}function Ra(t,e,n){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;for(var r={x:-n.x,y:n.y},i={x:Number.NaN,y:Number.NaN},a=[],o=0;o<t.grids.length;o++){var s=t.grids[o];if(a.push(s.name),s.isNull){i=r;break}if(s.mandatory,null!==s.grid){var l=s.grid.subgrids[0],c=(Math.abs(l.del[1])+Math.abs(l.del[0]))/1e4,u=l.ll[0]-c,h=l.ll[1]-c,d=l.ll[0]+(l.lim[0]-1)*l.del[0]+c,p=l.ll[1]+(l.lim[1]-1)*l.del[1]+c;if(!(h>r.y||u>r.x||p<r.y||d<r.x)&&(i=Da(r,e,l),!isNaN(i.x)))break}else if(s.mandatory)return console.log("Unable to find mandatory grid '"+s.name+"'"),-1}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*Ri+" "+r.y*Ri+" tried: '"+a+"'"),-1):(n.x=-i.x,n.y=i.y,0)}function Da(t,e,n){var r={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return r;var i={x:t.x,y:t.y};i.x-=n.ll[0],i.y-=n.ll[1],i.x=la(i.x-Math.PI)+Math.PI;var a=Oa(i,n);if(e){if(isNaN(a.x))return r;a.x=i.x-a.x,a.y=i.y-a.y;var o,s,l=9;do{if(s=Oa(a,n),isNaN(s.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}o={x:i.x-(s.x+a.x),y:i.y-(s.y+a.y)},a.x+=o.x,a.y+=o.y}while(l--&&Math.abs(o.x)>1e-12&&Math.abs(o.y)>1e-12);if(l<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=la(a.x+n.ll[0]),r.y=a.y+n.ll[1]}else isNaN(a.x)||(r.x=t.x+a.x,r.y=t.y+a.y);return r}function Oa(t,e){var n,r={x:t.x/e.del[0],y:t.y/e.del[1]},i=Math.floor(r.x),a=Math.floor(r.y),o=r.x-1*i,s=r.y-1*a,l={x:Number.NaN,y:Number.NaN};if(i<0||i>=e.lim[0])return l;if(a<0||a>=e.lim[1])return l;n=a*e.lim[0]+i;var c=e.cvs[n][0],u=e.cvs[n][1];n++;var h=e.cvs[n][0],d=e.cvs[n][1];n+=e.lim[0];var p=e.cvs[n][0],f=e.cvs[n][1];n--;var m=e.cvs[n][0],g=e.cvs[n][1],y=o*s,v=o*(1-s),_=(1-o)*(1-s),x=(1-o)*s;return l.x=_*c+v*h+x*m+y*p,l.y=_*u+v*d+x*g+y*f,l}function Ba(t,e,n){var r,i,a,o=n.x,s=n.y,l=n.z||0,c={};for(a=0;a<3;a++)if(!e||2!==a||void 0!==n.z)switch(0===a?(r=o,i=-1!=="ew".indexOf(t.axis[a])?"x":"y"):1===a?(r=s,i=-1!=="ns".indexOf(t.axis[a])?"y":"x"):(r=l,i="z"),t.axis[a]){case"e":case"n":c[i]=r;break;case"w":case"s":c[i]=-r;break;case"u":void 0!==n[i]&&(c.z=r);break;case"d":void 0!==n[i]&&(c.z=-r);break;default:return null}return c}function Fa(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function Na(t){if("function"===typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!==typeof t||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function Za(t,e,n,r){var i;if(Array.isArray(n)&&(n=Fa(n)),function(t){Na(t.x),Na(t.y)}(n),t.datum&&e.datum&&function(t,e){return(1===t.datum.datum_type||2===t.datum.datum_type)&&"WGS84"!==e.datumCode||(1===e.datum.datum_type||2===e.datum.datum_type)&&"WGS84"!==t.datumCode}(t,e)&&(n=Za(t,i=new Ia("WGS84"),n,r),t=i),r&&"enu"!==t.axis&&(n=Ba(t,!1,n)),"longlat"===t.projName)n={x:n.x*Li,y:n.y*Li,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),!(n=t.inverse(n)))return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=La(t.datum,e.datum,n))return e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),"longlat"===e.projName?n={x:n.x*Ri,y:n.y*Ri,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),r&&"enu"!==e.axis?Ba(e,!0,n):n}var Ua=Ia("WGS84");function ja(t,e,n,r){var i,a,o;return Array.isArray(n)?(i=Za(t,e,n,r)||{x:NaN,y:NaN},n.length>2?"undefined"!==typeof t.name&&"geocent"===t.name||"undefined"!==typeof e.name&&"geocent"===e.name?"number"===typeof i.z?[i.x,i.y,i.z].concat(n.splice(3)):[i.x,i.y,n[2]].concat(n.splice(3)):[i.x,i.y].concat(n.splice(2)):[i.x,i.y]):(a=Za(t,e,n,r),2===(o=Object.keys(n)).length||o.forEach((function(r){if("undefined"!==typeof t.name&&"geocent"===t.name||"undefined"!==typeof e.name&&"geocent"===e.name){if("x"===r||"y"===r||"z"===r)return}else if("x"===r||"y"===r)return;a[r]=n[r]})),a)}function Va(t){return t instanceof Ia?t:t.oProj?t.oProj:Ia(t)}var qa=function(t,e,n){t=Va(t);var r,i=!1;return"undefined"===typeof e?(e=t,t=Ua,i=!0):("undefined"!==typeof e.x||Array.isArray(e))&&(n=e,e=t,t=Ua,i=!0),e=Va(e),n?ja(t,e,n):(r={forward:function(n,r){return ja(t,e,n,r)},inverse:function(n,r){return ja(e,t,n,r)}},i&&(r.oProj=e),r)},$a="AJSAJS",Ga="AFAFAF",Wa=65,Ha=73,Xa=79,Ka=86,Ya=90,Ja={forward:Qa,inverse:function(t){var e=ro(oo(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat,e.lon,e.lat];return[e.left,e.bottom,e.right,e.top]},toPoint:to};function Qa(t,e){return e=e||5,function(t,e){var n="00000"+t.easting,r="00000"+t.northing;return t.zoneNumber+t.zoneLetter+function(t,e,n){var r=ao(n),i=Math.floor(t/1e5),a=Math.floor(e/1e5)%20;return function(t,e,n){var r=n-1,i=$a.charCodeAt(r),a=Ga.charCodeAt(r),o=i+t-1,s=a+e,l=!1;o>Ya&&(o=o-Ya+Wa-1,l=!0);(o===Ha||i<Ha&&o>Ha||(o>Ha||i<Ha)&&l)&&o++;(o===Xa||i<Xa&&o>Xa||(o>Xa||i<Xa)&&l)&&++o===Ha&&o++;o>Ya&&(o=o-Ya+Wa-1);s>Ka?(s=s-Ka+Wa-1,l=!0):l=!1;(s===Ha||a<Ha&&s>Ha||(s>Ha||a<Ha)&&l)&&s++;(s===Xa||a<Xa&&s>Xa||(s>Xa||a<Xa)&&l)&&++s===Ha&&s++;s>Ka&&(s=s-Ka+Wa-1);return String.fromCharCode(o)+String.fromCharCode(s)}(i,a,r)}(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+r.substr(r.length-5,e)}(function(t){var e,n,r,i,a,o,s,l,c=t.lat,u=t.lon,h=6378137,d=.00669438,p=.9996,f=eo(c),m=eo(u);l=Math.floor((u+180)/6)+1,180===u&&(l=60);c>=56&&c<64&&u>=3&&u<12&&(l=32);c>=72&&c<84&&(u>=0&&u<9?l=31:u>=9&&u<21?l=33:u>=21&&u<33?l=35:u>=33&&u<42&&(l=37));s=eo(6*(l-1)-180+3),e=d/(1-d),n=h/Math.sqrt(1-d*Math.sin(f)*Math.sin(f)),r=Math.tan(f)*Math.tan(f),i=e*Math.cos(f)*Math.cos(f),a=Math.cos(f)*(m-s),o=h*((1-d/4-3*d*d/64-5*d*d*d/256)*f-(3*d/8+3*d*d/32+45*d*d*d/1024)*Math.sin(2*f)+(15*d*d/256+45*d*d*d/1024)*Math.sin(4*f)-35*d*d*d/3072*Math.sin(6*f));var g=p*n*(a+(1-r+i)*a*a*a/6+(5-18*r+r*r+72*i-58*e)*a*a*a*a*a/120)+5e5,y=p*(o+n*Math.tan(f)*(a*a/2+(5-r+9*i+4*i*i)*a*a*a*a/24+(61-58*r+r*r+600*i-330*e)*a*a*a*a*a*a/720));c<0&&(y+=1e7);return{northing:Math.round(y),easting:Math.round(g),zoneNumber:l,zoneLetter:io(c)}}({lat:t[1],lon:t[0]}),e)}function to(t){var e=ro(oo(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function eo(t){return t*(Math.PI/180)}function no(t){return t/Math.PI*180}function ro(t){var e=t.northing,n=t.easting,r=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var a,o,s,l,c,u,h,d,p,f=.9996,m=6378137,g=.00669438,y=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),v=n-5e5,_=e;r<"N"&&(_-=1e7),h=6*(i-1)-180+3,a=.006739496752268451,p=(d=_/f/6367449.145945056)+(3*y/2-27*y*y*y/32)*Math.sin(2*d)+(21*y*y/16-55*y*y*y*y/32)*Math.sin(4*d)+151*y*y*y/96*Math.sin(6*d),o=m/Math.sqrt(1-g*Math.sin(p)*Math.sin(p)),s=Math.tan(p)*Math.tan(p),l=a*Math.cos(p)*Math.cos(p),c=.99330562*m/Math.pow(1-g*Math.sin(p)*Math.sin(p),1.5),u=v/(o*f);var x=p-o*Math.tan(p)/c*(u*u/2-(5+3*s+10*l-4*l*l-9*a)*u*u*u*u/24+(61+90*s+298*l+45*s*s-1.6983531815716497-3*l*l)*u*u*u*u*u*u/720);x=no(x);var b,w=(u-(1+2*s+l)*u*u*u/6+(5-2*l+28*s-3*l*l+8*a+24*s*s)*u*u*u*u*u/120)/Math.cos(p);if(w=h+no(w),t.accuracy){var S=ro({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});b={top:S.lat,right:S.lon,bottom:x,left:w}}else b={lat:x,lon:w};return b}function io(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function ao(t){var e=t%6;return 0===e&&(e=6),e}function oo(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,r=null,i="",a=0;!/[A-Z]/.test(e=t.charAt(a));){if(a>=2)throw"MGRSPoint bad conversion from: "+t;i+=e,a++}var o=parseInt(i,10);if(0===a||a+3>n)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(a++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;r=t.substring(a,a+=2);for(var l=ao(o),c=function(t,e){var n=$a.charCodeAt(e-1),r=1e5,i=!1;for(;n!==t.charCodeAt(0);){if(++n===Ha&&n++,n===Xa&&n++,n>Ya){if(i)throw"Bad character: "+t;n=Wa,i=!0}r+=1e5}return r}(r.charAt(0),l),u=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var n=Ga.charCodeAt(e-1),r=0,i=!1;for(;n!==t.charCodeAt(0);){if(++n===Ha&&n++,n===Xa&&n++,n>Ka){if(i)throw"Bad character: "+t;n=Wa,i=!0}r+=1e5}return r}(r.charAt(1),l);u<so(s);)u+=2e6;var h=n-a;if(h%2!==0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var d,p,f,m=h/2,g=0,y=0;return m>0&&(d=1e5/Math.pow(10,m),p=t.substring(a,a+m),g=parseFloat(p)*d,f=t.substring(a+m),y=parseFloat(f)*d),{easting:g+c,northing:y+u,zoneLetter:s,zoneNumber:o,accuracy:d}}function so(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function lo(t,e,n){if(!(this instanceof lo))return new lo(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"===typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"===typeof t&&"undefined"===typeof e){var r=t.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}lo.fromMGRS=function(t){return new lo(to(t))},lo.prototype.toMGRS=function(t){return Qa([this.x,this.y],t)};var co=lo,uo=.046875,ho=.01953125,po=.01068115234375;function fo(t){var e=[];e[0]=1-t*(.25+t*(uo+t*(ho+t*po))),e[1]=t*(.75-t*(uo+t*(ho+t*po)));var n=t*t;return e[2]=n*(.46875-t*(.013020833333333334+.007120768229166667*t)),n*=t,e[3]=n*(.3645833333333333-.005696614583333333*t),e[4]=n*t*.3076171875,e}function mo(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}function go(t,e,n){for(var r=1/(1-e),i=t,a=20;a;--a){var o=Math.sin(i),s=1-e*o*o;if(i-=s=(mo(i,o,Math.cos(i),n)-t)*(s*Math.sqrt(s))*r,Math.abs(s)<zi)return i}return i}var yo={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=fo(this.es),this.ml0=mo(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,n,r,i=t.x,a=t.y,o=la(i-this.long0),s=Math.sin(a),l=Math.cos(a);if(this.es){var c=l*o,u=Math.pow(c,2),h=this.ep2*Math.pow(l,2),d=Math.pow(h,2),p=Math.abs(l)>zi?Math.tan(a):0,f=Math.pow(p,2),m=Math.pow(f,2);e=1-this.es*Math.pow(s,2),c/=Math.sqrt(e);var g=mo(a,s,l,this.en);n=this.a*(this.k0*c*(1+u/6*(1-f+h+u/20*(5-18*f+m+14*h-58*f*h+u/42*(61+179*m-m*f-479*f)))))+this.x0,r=this.a*(this.k0*(g-this.ml0+s*o*c/2*(1+u/12*(5-f+9*h+4*d+u/30*(61+m-58*f+270*h-330*f*h+u/56*(1385+543*m-m*f-3111*f))))))+this.y0}else{var y=l*Math.sin(o);if(Math.abs(Math.abs(y)-1)<zi)return 93;if(n=.5*this.a*this.k0*Math.log((1+y)/(1-y))+this.x0,r=l*Math.cos(o)/Math.sqrt(1-Math.pow(y,2)),(y=Math.abs(r))>=1){if(y-1>zi)return 93;r=0}else r=Math.acos(r);a<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return t.x=n,t.y=r,t},inverse:function(t){var e,n,r,i,a=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(this.es)if(n=go(e=this.ml0+o/this.k0,this.es,this.en),Math.abs(n)<Ai){var s=Math.sin(n),l=Math.cos(n),c=Math.abs(l)>zi?Math.tan(n):0,u=this.ep2*Math.pow(l,2),h=Math.pow(u,2),d=Math.pow(c,2),p=Math.pow(d,2);e=1-this.es*Math.pow(s,2);var f=a*Math.sqrt(e)/this.k0,m=Math.pow(f,2);r=n-(e*=c)*m/(1-this.es)*.5*(1-m/12*(5+3*d-9*u*d+u-4*h-m/30*(61+90*d-252*u*d+45*p+46*u-m/56*(1385+3633*d+4095*p+1574*p*d)))),i=la(this.long0+f*(1-m/6*(1+2*d+u-m/20*(5+28*d+24*p+8*u*d+6*u-m/42*(61+662*d+1320*p+720*p*d))))/l)}else r=Ai*sa(o),i=0;else{var g=Math.exp(a/this.k0),y=.5*(g-1/g),v=this.lat0+o/this.k0,_=Math.cos(v);e=Math.sqrt((1-Math.pow(_,2))/(1+Math.pow(y,2))),r=Math.asin(e),o<0&&(r=-r),i=0===y&&0===_?0:la(Math.atan2(y,_)+this.long0)}return t.x=i,t.y=r,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function vo(t){var e=Math.exp(t);return e=(e-1/e)/2}function _o(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),r=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))}function xo(t){var e=Math.abs(t);return e=function(t){var e=1+t,n=e-1;return 0===n?t:t*Math.log(e)/n}(e*(1+e/(_o(1,e)+1))),t<0?-e:e}function bo(t,e){for(var n,r=2*Math.cos(2*e),i=t.length-1,a=t[i],o=0;--i>=0;)n=r*a-o+t[i],o=a,a=n;return e+n*Math.sin(2*e)}function wo(t,e,n){for(var r,i,a=Math.sin(e),o=Math.cos(e),s=vo(n),l=function(t){var e=Math.exp(t);return(e+1/e)/2}(n),c=2*o*l,u=-2*a*s,h=t.length-1,d=t[h],p=0,f=0,m=0;--h>=0;)r=f,i=p,d=c*(f=d)-r-u*(p=m)+t[h],m=u*f-i+c*p;return[(c=a*l)*d-(u=o*s)*m,c*m+u*d]}var So={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(yo.init.apply(this),this.forward=yo.forward,this.inverse=yo.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),n*=e,this.cgb[1]=n*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n*=e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),n*=e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(e*(-24832/14175)-2.4)),n*=e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n*=e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),n*=e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n*=e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n*=e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n*=e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=.6650675310896665*n;var r=bo(this.cbg,this.lat0);this.Zb=-this.Qn*(r+function(t,e){for(var n,r=2*Math.cos(e),i=t.length-1,a=t[i],o=0;--i>=0;)n=r*a-o+t[i],o=a,a=n;return Math.sin(e)*n}(this.gtu,2*r))},forward:function(t){var e=la(t.x-this.long0),n=t.y;n=bo(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),a=Math.sin(e),o=Math.cos(e);n=Math.atan2(r,o*i),e=Math.atan2(a*i,_o(r,i*o)),e=xo(Math.tan(e));var s,l,c=wo(this.gtu,2*n,2*e);return n+=c[0],e+=c[1],Math.abs(e)<=2.623395162778?(s=this.a*(this.Qn*e)+this.x0,l=this.a*(this.Qn*n+this.Zb)+this.y0):(s=1/0,l=1/0),t.x=s,t.y=l,t},inverse:function(t){var e,n,r=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);if(i=(i-this.Zb)/this.Qn,r/=this.Qn,Math.abs(r)<=2.623395162778){var a=wo(this.utg,2*i,2*r);i+=a[0],r+=a[1],r=Math.atan(vo(r));var o=Math.sin(i),s=Math.cos(i),l=Math.sin(r),c=Math.cos(r);i=Math.atan2(o*c,_o(l,c*s)),e=la((r=Math.atan2(l,c*s))+this.long0),n=bo(this.cgb,i)}else e=1/0,n=1/0;return t.x=e,t.y=n,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]};var Mo={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(la(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*Li,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,So.init.apply(this),this.forward=So.forward,this.inverse=So.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function Eo(t,e){return Math.pow((1-t)/(1+t),e)}var ko={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Di)/(Math.pow(Math.tan(.5*this.lat0+Di),this.C)*Eo(this.e*t,this.ratexp))},forward:function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+Di),this.C)*Eo(this.e*Math.sin(n),this.ratexp))-Ai,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,n=t.y,r=Math.pow(Math.tan(.5*n+Di)/this.K,1/this.C),i=20;i>0&&(n=2*Math.atan(r*Eo(this.e*Math.sin(t.y),-.5*this.e))-Ai,!(Math.abs(n-t.y)<1e-14));--i)t.y=n;return i?(t.x=e,t.y=n,t):null},names:["gauss"]};var To={init:function(){ko.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,n,r,i;return t.x=la(t.x-this.long0),ko.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*r),t.x=i*n*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*n*r),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,n,r,i,a;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,a=Math.sqrt(t.x*t.x+t.y*t.y)){var o=2*Math.atan2(a,this.R2);e=Math.sin(o),n=Math.cos(o),i=Math.asin(n*this.sinc0+t.y*e*this.cosc0/a),r=Math.atan2(t.x*e,a*this.cosc0*n-t.y*this.sinc0*e)}else i=this.phic0,r=0;return t.x=r,t.y=i,ko.inverse.apply(this,[t]),t.x=la(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var Co={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=zi&&(this.k0=.5*(1+sa(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=zi&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=zi&&(this.k0=.5*this.cons*oa(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/ca(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=oa(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Ai,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,n,r,i,a,o,s=t.x,l=t.y,c=Math.sin(l),u=Math.cos(l),h=la(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=zi&&Math.abs(l+this.lat0)<=zi?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*c+this.coslat0*u*Math.cos(h)),t.x=this.a*e*u*Math.sin(h)+this.x0,t.y=this.a*e*(this.coslat0*c-this.sinlat0*u*Math.cos(h))+this.y0,t):(n=2*Math.atan(this.ssfn_(l,c,this.e))-Ai,i=Math.cos(n),r=Math.sin(n),Math.abs(this.coslat0)<=zi?(a=ca(this.e,l*this.con,this.con*c),o=2*this.a*this.k0*a/this.cons,t.x=this.x0+o*Math.sin(s-this.long0),t.y=this.y0-this.con*o*Math.cos(s-this.long0),t):(Math.abs(this.sinlat0)<zi?(e=2*this.a*this.k0/(1+i*Math.cos(h)),t.y=e*r):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*r+this.cosX0*i*Math.cos(h))),t.y=e*(this.cosX0*r-this.sinX0*i*Math.cos(h))+this.y0),t.x=e*i*Math.sin(h)+this.x0,t))},inverse:function(t){var e,n,r,i,a;t.x-=this.x0,t.y-=this.y0;var o=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var s=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,n=this.lat0,o<=zi?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(s)*this.sinlat0+t.y*Math.sin(s)*this.coslat0/o),e=Math.abs(this.coslat0)<zi?this.lat0>0?la(this.long0+Math.atan2(t.x,-1*t.y)):la(this.long0+Math.atan2(t.x,t.y)):la(this.long0+Math.atan2(t.x*Math.sin(s),o*this.coslat0*Math.cos(s)-t.y*this.sinlat0*Math.sin(s))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=zi){if(o<=zi)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,r=o*this.cons/(2*this.a*this.k0),n=this.con*ua(this.e,r),e=this.con*la(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else i=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=zi?a=this.X0:(a=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/o),e=la(this.long0+Math.atan2(t.x*Math.sin(i),o*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)))),n=-1*ua(this.e,Math.tan(.5*(Ai+a)));return t.x=e,t.y=n,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,n){return e*=n,Math.tan(.5*(Ai+t))*Math.pow((1-e)/(1+e),.5*n)}};var Io={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,r=1/this.rf,i=2*r-Math.pow(r,2),a=this.e=Math.sqrt(i);this.R=this.k0*n*Math.sqrt(1-i)/(1-i*Math.pow(e,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),l=Math.log((1+a*e)/(1-a*e));this.K=o-this.alpha*s+this.alpha*a/2*l},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),a=this.alpha*(t.x-this.lambda0),o=Math.atan(Math.sin(a)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(a))),s=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(a));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*o+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,n=t.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),a=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),o=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),s=this.lambda0+o/this.alpha,l=0,c=a,u=-1e3,h=0;Math.abs(c-u)>1e-7;){if(++h>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+a/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),u=c,c=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=s,t.y=c,t},names:["somerc"]},Po=1e-7;var Ao={init:function(){var t,e,n,r,i,a,o,s,l,c,u,h=0,d=0,p=0,f=0,m=0,g=0,y=0;this.no_off=function(t){var e="object"===typeof t.PROJECTION?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(e)}(this),this.no_rot="no_rot"in this;var v=!1;"alpha"in this&&(v=!0);var _=!1;if("rectified_grid_angle"in this&&(_=!0),v&&(y=this.alpha),_&&(h=this.rectified_grid_angle*Li),v||_)d=this.longc;else if(p=this.long1,m=this.lat1,f=this.long2,g=this.lat2,Math.abs(m-g)<=Po||(t=Math.abs(m))<=Po||Math.abs(t-Ai)<=Po||Math.abs(Math.abs(this.lat0)-Ai)<=Po||Math.abs(Math.abs(g)-Ai)<=Po)throw new Error;var x=1-this.es;e=Math.sqrt(x),Math.abs(this.lat0)>zi?(s=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*s*s,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/x),this.A=this.B*this.k0*e/t,(i=(r=this.B*e/(n*Math.sqrt(t)))*r-1)<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=r,this.E*=Math.pow(ca(this.e,this.lat0,s),this.B)):(this.B=1/e,this.A=this.k0,this.E=r=i=1),v||_?(v?(u=Math.asin(Math.sin(y)/r),_||(h=y)):(u=h,y=Math.asin(r*Math.sin(u))),this.lam0=d-Math.asin(.5*(i-1/i)*Math.tan(u))/this.B):(a=Math.pow(ca(this.e,m,Math.sin(m)),this.B),o=Math.pow(ca(this.e,g,Math.sin(g)),this.B),i=this.E/a,l=(o-a)/(o+a),c=((c=this.E*this.E)-o*a)/(c+o*a),(t=p-f)<-Math.pi?f-=Oi:t>Math.pi&&(f+=Oi),this.lam0=la(.5*(p+f)-Math.atan(c*Math.tan(.5*this.B*(p-f))/l)/this.B),u=Math.atan(2*Math.sin(this.B*la(p-this.lam0))/(i-1/i)),h=y=Math.asin(r*Math.sin(u))),this.singam=Math.sin(u),this.cosgam=Math.cos(u),this.sinrot=Math.sin(h),this.cosrot=Math.cos(h),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(y))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*u,this.v_pole_n=this.ArB*Math.log(Math.tan(Di-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(Di+i))},forward:function(t){var e,n,r,i,a,o,s,l,c={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-Ai)>zi){if(e=.5*((a=this.E/Math.pow(ca(this.e,t.y,Math.sin(t.y)),this.B))-(o=1/a)),n=.5*(a+o),i=Math.sin(this.B*t.x),r=(e*this.singam-i*this.cosgam)/n,Math.abs(Math.abs(r)-1)<zi)throw new Error;l=.5*this.ArB*Math.log((1-r)/(1+r)),o=Math.cos(this.B*t.x),s=Math.abs(o)<Po?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+i*this.singam,o)}else l=t.y>0?this.v_pole_n:this.v_pole_s,s=this.ArB*t.y;return this.no_rot?(c.x=s,c.y=l):(s-=this.u_0,c.x=l*this.cosrot+s*this.sinrot,c.y=s*this.cosrot-l*this.sinrot),c.x=this.a*c.x+this.x0,c.y=this.a*c.y+this.y0,c},inverse:function(t){var e,n,r,i,a,o,s,l={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),i=.5*((r=Math.exp(-this.BrA*n))-1/r),a=.5*(r+1/r),s=((o=Math.sin(this.BrA*e))*this.cosgam+i*this.singam)/a,Math.abs(Math.abs(s)-1)<zi)l.x=0,l.y=s<0?-Ai:Ai;else{if(l.y=this.E/Math.sqrt((1+s)/(1-s)),l.y=ua(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(i*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]};var zo={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<zi)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),r=oa(this.e,e,n),i=ca(this.e,this.lat1,e),a=Math.sin(this.lat2),o=Math.cos(this.lat2),s=oa(this.e,a,o),l=ca(this.e,this.lat2,a),c=ca(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>zi?this.ns=Math.log(r/s)/Math.log(i/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=zi&&(n=sa(n)*(Ai-2e-10));var r,i,a=Math.abs(Math.abs(n)-Ai);if(a>zi)r=ca(this.e,n,Math.sin(n)),i=this.a*this.f0*Math.pow(r,this.ns);else{if((a=n*this.ns)<=0)return null;i=0}var o=this.ns*la(e-this.long0);return t.x=this.k0*(i*Math.sin(o))+this.x0,t.y=this.k0*(this.rh-i*Math.cos(o))+this.y0,t},inverse:function(t){var e,n,r,i,a,o=(t.x-this.x0)/this.k0,s=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+s*s),n=1):(e=-Math.sqrt(o*o+s*s),n=-1);var l=0;if(0!==e&&(l=Math.atan2(n*o,n*s)),0!==e||this.ns>0){if(n=1/this.ns,r=Math.pow(e/(this.a*this.f0),n),-9999===(i=ua(this.e,r)))return null}else i=-Ai;return a=la(l/this.ns+this.long0),t.x=a,t.y=i,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]};var Lo={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,n,r,i,a,o,s,l=t.x,c=t.y,u=la(l-this.long0);return e=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/e)-this.s45),r=-u*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),a=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(i)),o=this.n*a,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=s*Math.cos(o)/1,t.x=s*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,n,r,i,a,o,s,l=t.x;t.x=t.y,t.y=l,this.czech||(t.y*=-1,t.x*=-1),a=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),t.x=this.long0-n/this.alfa,o=e,s=0;var c=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-t.y)<1e-10&&(s=1),o=t.y,c+=1}while(0===s&&c<15);return c>=15?null:t},names:["Krovak","krovak"]};function Ro(t,e,n,r,i){return t*i-e*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)}function Do(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function Oo(t){return.375*t*(1+.25*t*(1+.46875*t))}function Bo(t){return.05859375*t*t*(1+.75*t)}function Fo(t){return t*t*t*(35/3072)}function No(t,e,n){var r=e*n;return t/Math.sqrt(1-r*r)}function Zo(t){return Math.abs(t)<Ai?t:t-sa(t)*Math.PI}function Uo(t,e,n,r,i){var a,o;a=t/e;for(var s=0;s<15;s++)if(a+=o=(t-(e*a-n*Math.sin(2*a)+r*Math.sin(4*a)-i*Math.sin(6*a)))/(e-2*n*Math.cos(2*a)+4*r*Math.cos(4*a)-6*i*Math.cos(6*a)),Math.abs(o)<=1e-10)return a;return NaN}var jo={init:function(){this.sphere||(this.e0=Do(this.es),this.e1=Oo(this.es),this.e2=Bo(this.es),this.e3=Fo(this.es),this.ml0=this.a*Ro(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,n,r=t.x,i=t.y;if(r=la(r-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var a=Math.sin(i),o=Math.cos(i),s=No(this.a,this.e,a),l=Math.tan(i)*Math.tan(i),c=r*Math.cos(i),u=c*c,h=this.es*o*o/(1-this.es);e=s*c*(1-u*l*(1/6-(8-l+8*h)*u/120)),n=this.a*Ro(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+s*a/o*u*(.5+(5-l+6*h)*u/24)}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r=t.x/this.a,i=t.y/this.a;if(this.sphere){var a=i+this.lat0;e=Math.asin(Math.sin(a)*Math.cos(r)),n=Math.atan2(Math.tan(r),Math.cos(a))}else{var o=Uo(this.ml0/this.a+i,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-Ai)<=zi)return t.x=this.long0,t.y=Ai,i<0&&(t.y*=-1),t;var s=No(this.a,this.e,Math.sin(o)),l=s*s*s/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(o),2),u=r*this.a/s,h=u*u;e=o-s*Math.tan(o)/l*u*u*(.5-(1+3*c)*u*u/24),n=u*(1-h*(c/3+(1+3*c)*c*h/15))/Math.cos(o)}return t.x=la(n+this.long0),t.y=Zo(e),t},names:["Cassini","Cassini_Soldner","cass"]};function Vo(t,e){var n;return t>1e-7?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e}var qo=.3333333333333333,$o=.17222222222222222,Go=.10257936507936508,Wo=.06388888888888888,Ho=.0664021164021164,Xo=.016415012942191543;var Ko={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-Ai)<zi?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<zi?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=Vo(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,n=[];return n[0]=t*qo,e=t*t,n[0]+=e*$o,n[1]=e*Wo,e*=t,n[0]+=e*Go,n[1]+=e*Ho,n[2]=e*Xo,n}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Vo(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,n,r,i,a,o,s,l,c,u,h=t.x,d=t.y;if(h=la(h-this.long0),this.sphere){if(a=Math.sin(d),u=Math.cos(d),r=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+u*r:1+this.sinph0*a+this.cosph0*u*r)<=zi)return null;e=(n=Math.sqrt(2/n))*u*Math.sin(h),n*=this.mode===this.EQUIT?a:this.cosph0*a-this.sinph0*u*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(d+this.lat0)<zi)return null;n=Di-.5*d,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(h),n*=r}}else{switch(s=0,l=0,c=0,r=Math.cos(h),i=Math.sin(h),a=Math.sin(d),o=Vo(this.e,a),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=o/this.qp,l=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:c=1+this.sinb1*s+this.cosb1*l*r;break;case this.EQUIT:c=1+l*r;break;case this.N_POLE:c=Ai+d,o=this.qp-o;break;case this.S_POLE:c=d-Ai,o=this.qp+o}if(Math.abs(c)<zi)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c),n=this.mode===this.OBLIQ?this.ymf*c*(this.cosb1*s-this.sinb1*l*r):(c=Math.sqrt(2/(1+l*r)))*s*this.ymf,e=this.xmf*c*l*i;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(c=Math.sqrt(o))*i,n=r*(this.mode===this.S_POLE?c:-c)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,a,o,s,l=t.x/this.a,c=t.y/this.a;if(this.sphere){var u,h=0,d=0;if((n=.5*(u=Math.sqrt(l*l+c*c)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(d=Math.sin(n),h=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(u)<=zi?0:Math.asin(c*d/u),l*=d,c=h*u;break;case this.OBLIQ:n=Math.abs(u)<=zi?this.lat0:Math.asin(h*this.sinph0+c*d*this.cosph0/u),l*=d*this.cosph0,c=(h-Math.sin(n)*this.sinph0)*u;break;case this.N_POLE:c=-c,n=Ai-n;break;case this.S_POLE:n-=Ai}e=0!==c||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(l,c):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(l/=this.dd,c*=this.dd,(o=Math.sqrt(l*l+c*c))<zi)return t.x=this.long0,t.y=this.lat0,t;i=2*Math.asin(.5*o/this.rq),r=Math.cos(i),l*=i=Math.sin(i),this.mode===this.OBLIQ?(s=r*this.sinb1+c*i*this.cosb1/o,a=this.qp*s,c=o*this.cosb1*r-c*this.sinb1*i):(s=c*i/o,a=this.qp*s,c=o*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(c=-c),!(a=l*l+c*c))return t.x=this.long0,t.y=this.lat0,t;s=1-a/this.qp,this.mode===this.S_POLE&&(s=-s)}e=Math.atan2(l,c),n=function(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)}(Math.asin(s),this.apa)}return t.x=la(this.long0+e),t.y=n,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function Yo(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}var Jo={init:function(){Math.abs(this.lat1+this.lat2)<zi||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=oa(this.e3,this.sin_po,this.cos_po),this.qs1=Vo(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=oa(this.e3,this.sin_po,this.cos_po),this.qs2=Vo(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Vo(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>zi?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=Vo(this.e3,this.sin_phi,this.cos_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,a=this.ns0*la(e-this.long0),o=i*Math.sin(a)+this.x0,s=this.rh-i*Math.cos(a)+this.y0;return t.x=o,t.y=s,t},inverse:function(t){var e,n,r,i,a,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),i=0,0!==e&&(i=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,o=this.phi1z(this.e3,n)),a=la(i/this.ns0+this.long0),t.x=a,t.y=o,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var n,r,i,a,o=Yo(.5*e);if(t<zi)return o;for(var s=t*t,l=1;l<=25;l++)if(o+=a=.5*(i=1-(r=t*(n=Math.sin(o)))*r)*i/Math.cos(o)*(e/(1-s)-n/i+.5/t*Math.log((1-r)/(1+r))),Math.abs(a)<=1e-7)return o;return null}};var Qo={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,n,r,i,a,o,s,l=t.x,c=t.y;return r=la(l-this.long0),e=Math.sin(c),n=Math.cos(c),i=Math.cos(r),1,(a=this.sin_p14*e+this.cos_p14*n*i)>0||Math.abs(a)<=zi?(o=this.x0+1*this.a*n*Math.sin(r)/a,s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)/a):(o=this.x0+this.infinity_dist*n*Math.sin(r),s=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*i)),t.x=o,t.y=s,t},inverse:function(t){var e,n,r,i,a,o;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),n=Math.sin(i),o=Yo((r=Math.cos(i))*this.sin_p14+t.y*n*this.cos_p14/e),a=Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n),a=la(this.long0+a)):(o=this.phic0,a=0),t.x=a,t.y=o,t},names:["gnom"]};var ts={init:function(){this.sphere||(this.k0=oa(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,n,r=t.x,i=t.y,a=la(r-this.long0);if(this.sphere)e=this.x0+this.a*a*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var o=Vo(this.e,Math.sin(i));e=this.x0+this.a*this.k0*a,n=this.y0+this.a*o*.5/this.k0}return t.x=e,t.y=n,t},inverse:function(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=la(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*Ai:Ai;for(var r,i,a,o,s=Math.asin(.5*e),l=0;l<30;l++)if(i=Math.sin(s),a=Math.cos(s),o=t*i,s+=r=Math.pow(1-o*o,2)/(2*a)*(e/(1-t*t)-i/(1-o*o)+.5/t*Math.log((1-o)/(1+o))),Math.abs(r)<=1e-10)return s;return NaN}(this.e,2*t.y*this.k0/this.a),e=la(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},names:["cea"]};var es={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,n=t.y,r=la(e-this.long0),i=Zo(n-this.lat0);return t.x=this.x0+this.a*r*this.rc,t.y=this.y0+this.a*i,t},inverse:function(t){var e=t.x,n=t.y;return t.x=la(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=Zo(this.lat0+(n-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]};var ns={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Do(this.es),this.e1=Oo(this.es),this.e2=Bo(this.es),this.e3=Fo(this.es),this.ml0=this.a*Ro(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,n,r,i=t.x,a=t.y,o=la(i-this.long0);if(r=o*Math.sin(a),this.sphere)Math.abs(a)<=zi?(e=this.a*o,n=-1*this.a*this.lat0):(e=this.a*Math.sin(r)/Math.tan(a),n=this.a*(Zo(a-this.lat0)+(1-Math.cos(r))/Math.tan(a)));else if(Math.abs(a)<=zi)e=this.a*o,n=-1*this.ml0;else{var s=No(this.a,this.e,Math.sin(a))/Math.tan(a);e=s*Math.sin(r),n=this.a*Ro(this.e0,this.e1,this.e2,this.e3,a)-this.ml0+s*(1-Math.cos(r))}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){var e,n,r,i,a,o,s,l,c;if(r=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=zi)e=la(r/this.a+this.long0),n=0;else{var u;for(o=this.lat0+i/this.a,s=r*r/this.a/this.a+o*o,l=o,a=20;a;--a)if(l+=c=-1*(o*(l*(u=Math.tan(l))+1)-l-.5*(l*l+s)*u)/((l-o)/u-1),Math.abs(c)<=zi){n=l;break}e=la(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(n))}else if(Math.abs(i+this.ml0)<=zi)n=0,e=la(this.long0+r/this.a);else{var h,d,p,f,m;for(o=(this.ml0+i)/this.a,s=r*r/this.a/this.a+o*o,l=o,a=20;a;--a)if(m=this.e*Math.sin(l),h=Math.sqrt(1-m*m)*Math.tan(l),d=this.a*Ro(this.e0,this.e1,this.e2,this.e3,l),p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),l-=c=(o*(h*(f=d/this.a)+1)-f-.5*h*(f*f+s))/(this.es*Math.sin(2*l)*(f*f+s-2*o*f)/(4*h)+(o-f)*(h*p-2/Math.sin(2*l))-p),Math.abs(c)<=zi){n=l;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=la(this.long0+Math.asin(r*h/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},names:["Polyconic","poly"]};var rs={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,n=t.x,r=t.y-this.lat0,i=n-this.long0,a=r/Pi*1e-5,o=i,s=1,l=0;for(e=1;e<=10;e++)s*=a,l+=this.A[e]*s;var c,u=l,h=o,d=1,p=0,f=0,m=0;for(e=1;e<=6;e++)c=p*u+d*h,d=d*u-p*h,p=c,f=f+this.B_re[e]*d-this.B_im[e]*p,m=m+this.B_im[e]*d+this.B_re[e]*p;return t.x=m*this.a+this.x0,t.y=f*this.a+this.y0,t},inverse:function(t){var e,n,r=t.x,i=t.y,a=r-this.x0,o=(i-this.y0)/this.a,s=a/this.a,l=1,c=0,u=0,h=0;for(e=1;e<=6;e++)n=c*o+l*s,l=l*o-c*s,c=n,u=u+this.C_re[e]*l-this.C_im[e]*c,h=h+this.C_im[e]*l+this.C_re[e]*c;for(var d=0;d<this.iterations;d++){var p,f=u,m=h,g=o,y=s;for(e=2;e<=6;e++)p=m*u+f*h,f=f*u-m*h,m=p,g+=(e-1)*(this.B_re[e]*f-this.B_im[e]*m),y+=(e-1)*(this.B_im[e]*f+this.B_re[e]*m);f=1,m=0;var v=this.B_re[1],_=this.B_im[1];for(e=2;e<=6;e++)p=m*u+f*h,f=f*u-m*h,m=p,v+=e*(this.B_re[e]*f-this.B_im[e]*m),_+=e*(this.B_im[e]*f+this.B_re[e]*m);var x=v*v+_*_;u=(g*v+y*_)/x,h=(y*v-g*_)/x}var b=u,w=h,S=1,M=0;for(e=1;e<=9;e++)S*=b,M+=this.D[e]*S;var E=this.lat0+M*Pi*1e5,k=this.long0+w;return t.x=k,t.y=E,t},names:["New_Zealand_Map_Grid","nzmg"]};var is={init:function(){},forward:function(t){var e=t.x,n=t.y,r=la(e-this.long0),i=this.x0+this.a*r,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=i,t.y=a,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=la(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t},names:["Miller_Cylindrical","mill"]};var as={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=fo(this.es)},forward:function(t){var e,n,r=t.x,i=t.y;if(r=la(r-this.long0),this.sphere){if(this.m)for(var a=this.n*Math.sin(i),o=20;o;--o){var s=(this.m*i+Math.sin(i)-a)/(this.m+Math.cos(i));if(i-=s,Math.abs(s)<zi)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;e=this.a*this.C_x*r*(this.m+Math.cos(i)),n=this.a*this.C_y*i}else{var l=Math.sin(i),c=Math.cos(i);n=this.a*mo(i,l,c,this.en),e=this.a*r*c/Math.sqrt(1-this.es*l*l)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r;return t.x-=this.x0,n=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,n/=this.C_x*(this.m+Math.cos(e)),this.m?e=Yo((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=Yo(Math.sin(e)/this.n)),n=la(n+this.long0),e=Zo(e)):(e=go(t.y/this.a,this.es,this.en),(r=Math.abs(e))<Ai?(r=Math.sin(e),n=la(this.long0+t.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(e)))):r-zi<Ai&&(n=this.long0)),t.x=n,t.y=e,t},names:["Sinusoidal","sinu"]};var os={init:function(){},forward:function(t){for(var e=t.x,n=t.y,r=la(e-this.long0),i=n,a=Math.PI*Math.sin(n);;){var o=-(i+Math.sin(i)-a)/(1+Math.cos(i));if(i+=o,Math.abs(o)<zi)break}i/=2,Math.PI/2-Math.abs(n)<zi&&(r=0);var s=.900316316158*this.a*r*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=s,t.y=l,t},inverse:function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var r=la(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var i=Math.asin(n);return t.x=r,t.y=i,t},names:["Mollweide","moll"]};var ss={init:function(){Math.abs(this.lat1+this.lat2)<zi||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Do(this.es),this.e1=Oo(this.es),this.e2=Bo(this.es),this.e3=Fo(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=oa(this.e,this.sinphi,this.cosphi),this.ml1=Ro(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<zi?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=oa(this.e,this.sinphi,this.cosphi),this.ml2=Ro(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Ro(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,n=t.x,r=t.y;if(this.sphere)e=this.a*(this.g-r);else{var i=Ro(this.e0,this.e1,this.e2,this.e3,r);e=this.a*(this.g-i)}var a=this.ns*la(n-this.long0),o=this.x0+e*Math.sin(a),s=this.y0+this.rh-e*Math.cos(a);return t.x=o,t.y=s,t},inverse:function(t){var e,n,r,i;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var a=0;return 0!==n&&(a=Math.atan2(e*t.x,e*t.y)),this.sphere?(i=la(this.long0+a/this.ns),r=Zo(this.g-n/this.a),t.x=i,t.y=r,t):(r=Uo(this.g-n/this.a,this.e0,this.e1,this.e2,this.e3),i=la(this.long0+a/this.ns),t.x=i,t.y=r,t)},names:["Equidistant_Conic","eqdc"]};var ls={init:function(){this.R=this.a},forward:function(t){var e,n,r=t.x,i=t.y,a=la(r-this.long0);Math.abs(i)<=zi&&(e=this.x0+this.R*a,n=this.y0);var o=Yo(2*Math.abs(i/Math.PI));(Math.abs(a)<=zi||Math.abs(Math.abs(i)-Ai)<=zi)&&(e=this.x0,n=i>=0?this.y0+Math.PI*this.R*Math.tan(.5*o):this.y0+Math.PI*this.R*-Math.tan(.5*o));var s=.5*Math.abs(Math.PI/a-a/Math.PI),l=s*s,c=Math.sin(o),u=Math.cos(o),h=u/(c+u-1),d=h*h,p=h*(2/c-1),f=p*p,m=Math.PI*this.R*(s*(h-f)+Math.sqrt(l*(h-f)*(h-f)-(f+l)*(d-f)))/(f+l);a<0&&(m=-m),e=this.x0+m;var g=l+h;return m=Math.PI*this.R*(p*g-s*Math.sqrt((f+l)*(l+1)-g*g))/(f+l),n=i>=0?this.y0+m:this.y0-m,t.x=e,t.y=n,t},inverse:function(t){var e,n,r,i,a,o,s,l,c,u,h,d;return t.x-=this.x0,t.y-=this.y0,h=Math.PI*this.R,a=(r=t.x/h)*r+(i=t.y/h)*i,h=3*(i*i/(l=-2*(o=-Math.abs(i)*(1+a))+1+2*i*i+a*a)+(2*(s=o-2*i*i+r*r)*s*s/l/l/l-9*o*s/l/l)/27)/(c=(o-s*s/3/l)/l)/(u=2*Math.sqrt(-c/3)),Math.abs(h)>1&&(h=h>=0?1:-1),d=Math.acos(h)/3,n=t.y>=0?(-u*Math.cos(d+Math.PI/3)-s/3/l)*Math.PI:-(-u*Math.cos(d+Math.PI/3)-s/3/l)*Math.PI,e=Math.abs(r)<zi?this.long0:la(this.long0+Math.PI*(a-1+Math.sqrt(1+2*(r*r-i*i)+a*a))/2/r),t.x=e,t.y=n,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var cs={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,n,r,i,a,o,s,l,c,u,h,d,p,f,m,g,y,v,_,x,b,w,S=t.x,M=t.y,E=Math.sin(t.y),k=Math.cos(t.y),T=la(S-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=zi?(t.x=this.x0+this.a*(Ai-M)*Math.sin(T),t.y=this.y0-this.a*(Ai-M)*Math.cos(T),t):Math.abs(this.sin_p12+1)<=zi?(t.x=this.x0+this.a*(Ai+M)*Math.sin(T),t.y=this.y0+this.a*(Ai+M)*Math.cos(T),t):(v=this.sin_p12*E+this.cos_p12*k*Math.cos(T),y=(g=Math.acos(v))?g/Math.sin(g):1,t.x=this.x0+this.a*y*k*Math.sin(T),t.y=this.y0+this.a*y*(this.cos_p12*E-this.sin_p12*k*Math.cos(T)),t):(e=Do(this.es),n=Oo(this.es),r=Bo(this.es),i=Fo(this.es),Math.abs(this.sin_p12-1)<=zi?(a=this.a*Ro(e,n,r,i,Ai),o=this.a*Ro(e,n,r,i,M),t.x=this.x0+(a-o)*Math.sin(T),t.y=this.y0-(a-o)*Math.cos(T),t):Math.abs(this.sin_p12+1)<=zi?(a=this.a*Ro(e,n,r,i,Ai),o=this.a*Ro(e,n,r,i,M),t.x=this.x0+(a+o)*Math.sin(T),t.y=this.y0+(a+o)*Math.cos(T),t):(s=E/k,l=No(this.a,this.e,this.sin_p12),c=No(this.a,this.e,E),u=Math.atan((1-this.es)*s+this.es*l*this.sin_p12/(c*k)),_=0===(h=Math.atan2(Math.sin(T),this.cos_p12*Math.tan(u)-this.sin_p12*Math.cos(T)))?Math.asin(this.cos_p12*Math.sin(u)-this.sin_p12*Math.cos(u)):Math.abs(Math.abs(h)-Math.PI)<=zi?-Math.asin(this.cos_p12*Math.sin(u)-this.sin_p12*Math.cos(u)):Math.asin(Math.sin(T)*Math.cos(u)/Math.sin(h)),d=this.e*this.sin_p12/Math.sqrt(1-this.es),g=l*_*(1-(x=_*_)*(m=(p=this.e*this.cos_p12*Math.cos(h)/Math.sqrt(1-this.es))*p)*(1-m)/6+(b=x*_)/8*(f=d*p)*(1-2*m)+(w=b*_)/120*(m*(4-7*m)-3*d*d*(1-7*m))-w*_/48*f),t.x=this.x0+g*Math.sin(h),t.y=this.y0+g*Math.cos(h),t))},inverse:function(t){var e,n,r,i,a,o,s,l,c,u,h,d,p,f,m,g,y,v,_,x,b,w,S;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*Ai*this.a)return;return n=e/this.a,r=Math.sin(n),i=Math.cos(n),a=this.long0,Math.abs(e)<=zi?o=this.lat0:(o=Yo(i*this.sin_p12+t.y*r*this.cos_p12/e),s=Math.abs(this.lat0)-Ai,a=Math.abs(s)<=zi?this.lat0>=0?la(this.long0+Math.atan2(t.x,-t.y)):la(this.long0-Math.atan2(-t.x,t.y)):la(this.long0+Math.atan2(t.x*r,e*this.cos_p12*i-t.y*this.sin_p12*r))),t.x=a,t.y=o,t}return l=Do(this.es),c=Oo(this.es),u=Bo(this.es),h=Fo(this.es),Math.abs(this.sin_p12-1)<=zi?(o=Uo(((d=this.a*Ro(l,c,u,h,Ai))-(e=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,l,c,u,h),a=la(this.long0+Math.atan2(t.x,-1*t.y)),t.x=a,t.y=o,t):Math.abs(this.sin_p12+1)<=zi?(d=this.a*Ro(l,c,u,h,Ai),o=Uo(((e=Math.sqrt(t.x*t.x+t.y*t.y))-d)/this.a,l,c,u,h),a=la(this.long0+Math.atan2(t.x,t.y)),t.x=a,t.y=o,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),m=Math.atan2(t.x,t.y),p=No(this.a,this.e,this.sin_p12),g=Math.cos(m),v=-(y=this.e*this.cos_p12*g)*y/(1-this.es),_=3*this.es*(1-v)*this.sin_p12*this.cos_p12*g/(1-this.es),w=1-v*(b=(x=e/p)-v*(1+v)*Math.pow(x,3)/6-_*(1+3*v)*Math.pow(x,4)/24)*b/2-x*b*b*b/6,f=Math.asin(this.sin_p12*Math.cos(b)+this.cos_p12*Math.sin(b)*g),a=la(this.long0+Math.asin(Math.sin(m)*Math.sin(b)/Math.cos(f))),S=Math.sin(f),o=Math.atan2((S-this.es*w*this.sin_p12)*Math.tan(f),S*(1-this.es)),t.x=a,t.y=o,t)},names:["Azimuthal_Equidistant","aeqd"]};var us={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,n,r,i,a,o,s,l=t.x,c=t.y;return r=la(l-this.long0),e=Math.sin(c),n=Math.cos(c),i=Math.cos(r),1,((a=this.sin_p14*e+this.cos_p14*n*i)>0||Math.abs(a)<=zi)&&(o=1*this.a*n*Math.sin(r),s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)),t.x=o,t.y=s,t},inverse:function(t){var e,n,r,i,a,o,s;return t.x-=this.x0,t.y-=this.y0,n=Yo((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),r=Math.sin(n),i=Math.cos(n),o=this.long0,Math.abs(e)<=zi?(s=this.lat0,t.x=o,t.y=s,t):(s=Yo(i*this.sin_p14+t.y*r*this.cos_p14/e),a=Math.abs(this.lat0)-Ai,Math.abs(a)<=zi?(o=this.lat0>=0?la(this.long0+Math.atan2(t.x,-t.y)):la(this.long0-Math.atan2(-t.x,t.y)),t.x=o,t.y=s,t):(o=la(this.long0+Math.atan2(t.x*r,e*this.cos_p14*i-t.y*this.sin_p14*r)),t.x=o,t.y=s,t))},names:["ortho"]},hs=1,ds=2,ps=3,fs=4,ms=5,gs=6,ys=1,vs=2,_s=3,xs=4;function bs(t,e,n,r){var i;return t<zi?(r.value=ys,i=0):(i=Math.atan2(e,n),Math.abs(i)<=Di?r.value=ys:i>Di&&i<=Ai+Di?(r.value=vs,i-=Ai):i>Ai+Di||i<=-(Ai+Di)?(r.value=_s,i=i>=0?i-Bi:i+Bi):(r.value=xs,i+=Ai)),i}function ws(t,e){var n=t+e;return n<-Bi?n+=Oi:n>+Bi&&(n-=Oi),n}var Ss={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Ai-Di/2?this.face=ms:this.lat0<=-(Ai-Di/2)?this.face=gs:Math.abs(this.long0)<=Di?this.face=hs:Math.abs(this.long0)<=Ai+Di?this.face=this.long0>0?ds:fs:this.face=ps,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,n,r,i,a,o,s={x:0,y:0},l={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,n=t.x,this.face===ms)i=Ai-e,n>=Di&&n<=Ai+Di?(l.value=ys,r=n-Ai):n>Ai+Di||n<=-(Ai+Di)?(l.value=vs,r=n>0?n-Bi:n+Bi):n>-(Ai+Di)&&n<=-Di?(l.value=_s,r=n+Ai):(l.value=xs,r=n);else if(this.face===gs)i=Ai+e,n>=Di&&n<=Ai+Di?(l.value=ys,r=-n+Ai):n<Di&&n>=-Di?(l.value=vs,r=-n):n<-Di&&n>=-(Ai+Di)?(l.value=_s,r=-n-Ai):(l.value=xs,r=n>0?-n+Bi:-n-Bi);else{var c,u,h,d,p,f;this.face===ds?n=ws(n,+Ai):this.face===ps?n=ws(n,+Bi):this.face===fs&&(n=ws(n,-Ai)),d=Math.sin(e),p=Math.cos(e),f=Math.sin(n),c=p*Math.cos(n),u=p*f,h=d,this.face===hs?r=bs(i=Math.acos(c),h,u,l):this.face===ds?r=bs(i=Math.acos(u),h,-c,l):this.face===ps?r=bs(i=Math.acos(-c),h,-u,l):this.face===fs?r=bs(i=Math.acos(-u),h,c,l):(i=r=0,l.value=ys)}return o=Math.atan(12/Bi*(r+Math.acos(Math.sin(r)*Math.cos(Di))-Ai)),a=Math.sqrt((1-Math.cos(i))/(Math.cos(o)*Math.cos(o))/(1-Math.cos(Math.atan(1/Math.cos(r))))),l.value===vs?o+=Ai:l.value===_s?o+=Bi:l.value===xs&&(o+=1.5*Bi),s.x=a*Math.cos(o),s.y=a*Math.sin(o),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,t.x=s.x,t.y=s.y,t},inverse:function(t){var e,n,r,i,a,o,s,l,c,u,h,d,p={lam:0,phi:0},f={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?f.value=ys:t.y>=0&&t.y>=Math.abs(t.x)?(f.value=vs,e-=Ai):t.x<0&&-t.x>=Math.abs(t.y)?(f.value=_s,e=e<0?e+Bi:e-Bi):(f.value=xs,e+=Ai),c=Bi/12*Math.tan(e),a=Math.sin(c)/(Math.cos(c)-1/Math.sqrt(2)),o=Math.atan(a),(s=1-(r=Math.cos(e))*r*(i=Math.tan(n))*i*(1-Math.cos(Math.atan(1/Math.cos(o)))))<-1?s=-1:s>1&&(s=1),this.face===ms)l=Math.acos(s),p.phi=Ai-l,f.value===ys?p.lam=o+Ai:f.value===vs?p.lam=o<0?o+Bi:o-Bi:f.value===_s?p.lam=o-Ai:p.lam=o;else if(this.face===gs)l=Math.acos(s),p.phi=l-Ai,f.value===ys?p.lam=-o+Ai:f.value===vs?p.lam=-o:f.value===_s?p.lam=-o-Ai:p.lam=o<0?-o-Bi:-o+Bi;else{var m,g,y;c=(m=s)*m,g=(c+=(y=c>=1?0:Math.sqrt(1-c)*Math.sin(o))*y)>=1?0:Math.sqrt(1-c),f.value===vs?(c=g,g=-y,y=c):f.value===_s?(g=-g,y=-y):f.value===xs&&(c=g,g=y,y=-c),this.face===ds?(c=m,m=-g,g=c):this.face===ps?(m=-m,g=-g):this.face===fs&&(c=m,m=g,g=-c),p.phi=Math.acos(-y)-Ai,p.lam=Math.atan2(g,m),this.face===ds?p.lam=ws(p.lam,-Ai):this.face===ps?p.lam=ws(p.lam,-Bi):this.face===fs&&(p.lam=ws(p.lam,+Ai))}return 0!==this.es&&(u=p.phi<0?1:0,h=Math.tan(p.phi),d=this.b/Math.sqrt(h*h+this.one_minus_f_squared),p.phi=Math.atan(Math.sqrt(this.a*this.a-d*d)/(this.one_minus_f*d)),u&&(p.phi=-p.phi)),p.lam+=this.long0,t.x=p.lam,t.y=p.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},Ms=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Es=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],ks=.8487,Ts=1.3523,Cs=Ri/5,Is=18,Ps=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};var As={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=la(t.x-this.long0),n=Math.abs(t.y),r=Math.floor(n*Cs);r<0?r=0:r>=Is&&(r=17);var i={x:Ps(Ms[r],n=Ri*(n-.08726646259971647*r))*e,y:Ps(Es[r],n)};return t.y<0&&(i.y=-i.y),i.x=i.x*this.a*ks+this.x0,i.y=i.y*this.a*Ts+this.y0,i},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*ks),y:Math.abs(t.y-this.y0)/(this.a*Ts)};if(e.y>=1)e.x/=Ms[18][0],e.y=t.y<0?-Ai:Ai;else{var n=Math.floor(e.y*Is);for(n<0?n=0:n>=Is&&(n=17);;)if(Es[n][0]>e.y)--n;else{if(!(Es[n+1][0]<=e.y))break;++n}var r=Es[n],i=5*(e.y-r[0])/(Es[n+1][0]-r[0]);i=function(t,e,n,r){for(var i=e;r;--r){var a=t(i);if(i-=a,Math.abs(a)<n)break}return i}((function(t){return(Ps(r,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(r,t)}),i,zi,100),e.x/=Ps(Ms[n],i),e.y=(5*n+i)*Li,t.y<0&&(e.y=-e.y)}return e.x=la(e.x+this.long0),e},names:["Robinson","robin"]};var zs={init:function(){this.name="geocent"},forward:function(t){return Pa(t,this.es,this.a)},inverse:function(t){return Aa(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]},Ls=0,Rs=1,Ds=2,Os=3,Bs={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};var Fs={init:function(){if(Object.keys(Bs).forEach(function(t){if("undefined"===typeof this[t])this[t]=Bs[t].def;else{if(Bs[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);Bs[t].num&&(this[t]=parseFloat(this[t]))}Bs[t].degrees&&(this[t]=this[t]*Li)}.bind(this)),Math.abs(Math.abs(this.lat0)-Ai)<zi?this.mode=this.lat0<0?Rs:Ls:Math.abs(this.lat0)<zi?this.mode=Ds:(this.mode=Os,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,n,r,i,a=Math.sin(t.y),o=Math.cos(t.y),s=Math.cos(t.x);switch(this.mode){case Os:n=this.sinph0*a+this.cosph0*o*s;break;case Ds:n=o*s;break;case Rs:n=-a;break;case Ls:n=a}switch(e=(n=this.pn1/(this.p-n))*o*Math.sin(t.x),this.mode){case Os:n*=this.cosph0*a-this.sinph0*o*s;break;case Ds:n*=a;break;case Ls:n*=-o*s;break;case Rs:n*=o*s}return i=1/((r=n*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-n*this.sg)*this.cw*i,n=r*i,t.x=e*this.a,t.y=n*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,n,r,i={x:t.x,y:t.y};r=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*r,n=this.pn1*t.y*this.cw*r,t.x=e*this.cg+n*this.sg,t.y=n*this.cg-e*this.sg;var a=_o(t.x,t.y);if(Math.abs(a)<zi)i.x=0,i.y=t.y;else{var o,s;switch(s=1-a*a*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/a+a/this.pn1),o=Math.sqrt(1-s*s),this.mode){case Os:i.y=Math.asin(o*this.sinph0+t.y*s*this.cosph0/a),t.y=(o-this.sinph0*Math.sin(i.y))*a,t.x*=s*this.cosph0;break;case Ds:i.y=Math.asin(t.y*s/a),t.y=o*a,t.x*=s;break;case Ls:i.y=Math.asin(o),t.y=-t.y;break;case Rs:i.y=-Math.asin(o)}i.x=Math.atan2(t.x,t.y)}return t.x=i.x+this.long0,t.y=i.y,t},names:["Tilted_Perspective","tpers"]};var Ns={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var e,n,r,i,a=t.x,o=t.y;if(a-=this.long0,"ellipse"===this.shape){o=Math.atan(this.radius_p2*Math.tan(o));var s=this.radius_p/_o(this.radius_p*Math.cos(o),Math.sin(o));if(n=s*Math.cos(a)*Math.cos(o),r=s*Math.sin(a)*Math.cos(o),i=s*Math.sin(o),(this.radius_g-n)*n-r*r-i*i*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(r/_o(i,e)),t.y=this.radius_g_1*Math.atan(i/e)):(t.x=this.radius_g_1*Math.atan(r/e),t.y=this.radius_g_1*Math.atan(i/_o(r,e)))}else"sphere"===this.shape&&(e=Math.cos(o),n=Math.cos(a)*e,r=Math.sin(a)*e,i=Math.sin(o),e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(r/_o(i,e)),t.y=this.radius_g_1*Math.atan(i/e)):(t.x=this.radius_g_1*Math.atan(r/e),t.y=this.radius_g_1*Math.atan(i/_o(r,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,n,r,i,a=-1,o=0,s=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),o=Math.tan(t.x/this.radius_g_1)*_o(1,s)):(o=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*_o(1,o));var l=s/this.radius_p;if(e=o*o+l*l+a*a,(r=(n=2*this.radius_g*a)*n-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;i=(-n-Math.sqrt(r))/(2*e),a=this.radius_g+i*a,o*=i,s*=i,t.x=Math.atan2(o,a),t.y=Math.atan(s*Math.cos(t.x)/a),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),o=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+s*s)):(o=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+o*o)),e=o*o+s*s+a*a,(r=(n=2*this.radius_g*a)*n-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;i=(-n-Math.sqrt(r))/(2*e),a=this.radius_g+i*a,o*=i,s*=i,t.x=Math.atan2(o,a),t.y=Math.atan(s*Math.cos(t.x)/a)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};qa.defaultDatum="WGS84",qa.Proj=Ia,qa.WGS84=new qa.Proj("WGS84"),qa.Point=co,qa.toPoint=Fa,qa.defs=ea,qa.nadgrid=function(t,e){var n=new DataView(e),r=function(t){var e=t.getInt32(8,!1);if(11===e)return!1;11!==(e=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian");return!0}(n),i=function(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:Ma(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(n,r);i.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var a=function(t,e,n){for(var r=176,i=[],a=0;a<e.nSubgrids;a++){var o=ka(t,r,n),s=Ta(t,r,o,n),l=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),c=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);i.push({ll:[Sa(o.lowerLongitude),Sa(o.lowerLatitude)],del:[Sa(o.longitudeInterval),Sa(o.latitudeInterval)],lim:[l,c],count:o.gridNodeCount,cvs:Ea(s)})}return i}(n,i,r),o={header:i,subgrids:a};return ba[t]=o,o},qa.transform=Za,qa.mgrs=Ja,qa.version="__VERSION__",function(t){t.Proj.projections.add(yo),t.Proj.projections.add(So),t.Proj.projections.add(Mo),t.Proj.projections.add(To),t.Proj.projections.add(Co),t.Proj.projections.add(Io),t.Proj.projections.add(Ao),t.Proj.projections.add(zo),t.Proj.projections.add(Lo),t.Proj.projections.add(jo),t.Proj.projections.add(Ko),t.Proj.projections.add(Jo),t.Proj.projections.add(Qo),t.Proj.projections.add(ts),t.Proj.projections.add(es),t.Proj.projections.add(ns),t.Proj.projections.add(rs),t.Proj.projections.add(is),t.Proj.projections.add(as),t.Proj.projections.add(os),t.Proj.projections.add(ss),t.Proj.projections.add(ls),t.Proj.projections.add(cs),t.Proj.projections.add(us),t.Proj.projections.add(Ss),t.Proj.projections.add(As),t.Proj.projections.add(zs),t.Proj.projections.add(Fs),t.Proj.projections.add(Ns)}(qa);var Zs=qa,Us=[[0,0],[699999.9,1299999.9]],js=[[-8.74,49.84],[1.96,60.9]];function Vs(t){var e=!0;return Object.prototype.hasOwnProperty.call(t,"ea")&&Object.prototype.hasOwnProperty.call(t,"no")?(t.ea<Us[0][0]||t.ea>Us[1][0]||t.no<Us[0][1]||t.no>Us[1][1])&&(e=!1):Object.prototype.hasOwnProperty.call(t,"lat")&&Object.prototype.hasOwnProperty.call(t,"lng")&&(t.lng<js[0][0]||t.lng>js[1][0]||t.lat<js[0][1]||t.lat>js[1][1])&&(e=!1),{valid:e,message:e?"":"Coordinates out of range."}}function qs(t){return qs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qs(t)}function $s(){$s=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(k){s=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),o=new S(r||[]);return a._invoke=function(t,e,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return E()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=x(o,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=c(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,o),a}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(k){return{type:"throw",arg:k}}}t.wrap=l;var u={};function h(){}function d(){}function p(){}var f={};s(f,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(M([])));g&&g!==e&&n.call(g,i)&&(f=g);var y=p.prototype=h.prototype=Object.create(f);function v(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(i,a,o,s){var l=c(t[i],t,a);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==qs(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,o,s)}),(function(t){r("throw",t,o,s)})):e.resolve(h).then((function(t){u.value=t,o(u)}),(function(t){return r("throw",t,o,s)}))}s(l.arg)}var i;this._invoke=function(t,n){function a(){return new e((function(e,i){r(t,n,e,i)}))}return i=i?i.then(a,a):a()}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=c(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,u;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function M(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=p,s(y,"constructor",p),s(p,"constructor",d),d.displayName=s(p,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,o,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},v(_.prototype),s(_.prototype,a,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new _(l(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},v(y),s(y,o,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=M,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),w(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;w(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:M(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},t}function Gs(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(c){return void n(c)}s.done?e(l):Promise.resolve(l).then(r,i)}var Ws=n(4569),Hs=n.n(Ws)().create({baseURL:"http://127.0.0.1:5000"});var Xs={autofill:function(){var t,e=(t=$s().mark((function t(e){var n,r,i=arguments;return $s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]&&i[1],t.next=3,Hs.request({url:"/places/".concat(e),method:"GET",signal:n?Ks[this.autofill.name].handleRequestCancellation().signal:void 0});case 3:return r=t.sent,t.abrupt("return",r.data);case 5:case"end":return t.stop()}}),t,this)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){Gs(a,r,i,o,s,"next",t)}function s(t){Gs(a,r,i,o,s,"throw",t)}o(void 0)}))});return function(t){return e.apply(this,arguments)}}()},Ks=function(t){var e={};return Object.getOwnPropertyNames(t).forEach((function(t){var n={controller:void 0};e[t]={handleRequestCancellation:function(){return n.controller&&n.controller.abort(),n.controller=new AbortController,n.controller}}})),e}(Xs),Ys=function(){var e=(0,t.useState)(!1),n=(0,r.Z)(e,2),i=n[0],a=n[1],o=(0,t.useState)([]),s=(0,r.Z)(o,2),l=s[0],c=s[1];return{loading:i,places:l,searchPlaces:function(t){Xs.autofill(t).then((function(t){return a(!0),t})).then((function(t){a(!1),c(t)}))}}},Js=["InputLabelProps","InputProps"],Qs=(0,l.ZP)("div")((function(t){var e=t.theme;return(0,K.Z)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:(0,h.Fq)(e.palette.common.white,.15),"&:hover":{backgroundColor:(0,h.Fq)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"})})),tl=(0,l.ZP)("div")((function(t){return{padding:t.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),el=(0,l.ZP)(en)((function(t){var e=t.theme;return{color:"inherit","& .MuiInputBase-input":(0,K.Z)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),")"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"})}}));var nl=function(t){var e=t.setLocation,n=Ys([]),r=n.loading,a=n.places,o=n.searchPlaces;return(0,m.jsxs)(Qs,{children:[(0,m.jsx)(tl,{children:(0,m.jsx)(nn.Z,{})}),(0,m.jsx)(Ti,{disablePortal:!0,id:"combo-box-demo",options:a,filterOptions:function(t){return t},getOptionLabel:function(t){return t.ADDRESS?t.ADDRESS:""},style:{width:500},renderInput:function(t){t.InputLabelProps,t.InputProps;var e=function(t,e){if(null==t)return{};var n,r,a=(0,i.Z)(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}(t,Js);return(0,m.jsx)(el,Jt(Jt({},t.InputProps),e))},onChange:function(t,n){if(n.X_COORDINATE&&!r){var i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7,n=Vs(t);if(!n.valid)return console.log(n.message),{};Zs.defs("EPSG:27700","+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +datum=OSGB36 +units=m +no_defs");var r=Zs("EPSG:27700","EPSG:4326",[t.ea,t.no]),i=Number(r[0].toFixed(e));return{lat:Number(r[1].toFixed(e)),lng:i}}({ea:n.X_COORDINATE,no:n.Y_COORDINATE});e([i.lng,i.lat])}},onInputChange:function(t,e){o(e)}})]})},rl=(0,l.ZP)("div")((function(t){var e=t.theme;return{position:"fixed",left:0,top:0,zIndex:20,color:"white",display:"flex",justifyContent:"center",alignItems:"center",borderBottom:"solid black",borderRadius:e.shape.borderRadius,backgroundColor:(0,h.Fq)(e.palette.common.white,1),width:"100%",height:"60px"}}));var il=function(){return(0,m.jsx)(rl,{})},al=(0,l.ZP)("div")((function(t){var e=t.theme;return{position:"fixed",left:0,bottom:0,color:"white",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:e.shape.borderRadius,backgroundColor:(0,h.Fq)(e.palette.common.black,1),width:"100%",height:"60px"}})),ol=(0,l.ZP)("span")((function(t){t.theme;return{postion:"absolute",left:"10px",padding:5}})),sl=(0,l.ZP)("a")((function(t){var e=t.theme;return{"&:link":{color:e.palette.common.white},"&:hover":{color:e.palette.common.red}}}));var ll=function(){return(0,m.jsxs)(al,{children:[(0,m.jsx)("img",{alt:"UseMap Logo",height:"55",src:"/usemap-reactjs/elelogo_transp.png"}),(0,m.jsxs)(ol,{children:["UseMap | ",(0,m.jsx)(sl,{href:"#",children:"Terms and Conditions"})]})]})};var cl=function(){var e=(0,t.useState)([-1.471061,50.9382]),n=(0,r.Z)(e,2),i=n[0],a=n[1],o=(0,t.useState)("positron"),s=(0,r.Z)(o,2),l=s[0],c=s[1];function u(t){c(t)}return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(il,{}),(0,m.jsx)(X,{}),(0,m.jsx)(M,{position:"fixed",color:"transparent",elevation:0,children:(0,m.jsxs)(tt,{children:[(0,m.jsx)(nl,{setLocation:a}),(0,m.jsx)(O,{variant:"h6",component:"div",sx:{flexGrow:1}}),(0,m.jsxs)(Ht,{orientation:"horizontal",value:"val",exclusive:!0,children:[(0,m.jsx)(jt,{onClick:function(){return u("dark-matter")},value:"dark-matter","aria-label":"dark-matter",children:(0,m.jsx)(Xt.Z,{})}),(0,m.jsx)(jt,{onClick:function(){return u("positron")},value:"positron","aria-label":"positron",children:(0,m.jsx)(Kt.Z,{})})]})]})}),(0,m.jsx)(Le,{location:i,styleVal:l}),(0,m.jsx)(ll,{})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ul=function(t){t&&t instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(e){var n=e.getCLS,r=e.getFID,i=e.getFCP,a=e.getLCP,o=e.getTTFB;n(t),r(t),i(t),a(t),o(t)}))};e.createRoot(document.getElementById("root")).render((0,m.jsx)(t.StrictMode,{children:(0,m.jsx)(cl,{})})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)})),ul()}()}();
//# sourceMappingURL=main.fe21058d.js.map